var _get=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0},_createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports,require("@zohocharts/d3")):"function"==typeof define&&define.amd?define(["exports","@zohocharts/d3"],t):t((e=e||self).$ZC={},e.d3)}(this,function(e,a){function Be(){}var t,n,r,i,c=a,qe=a.select,o=a.selectAll,Oe=a.min,Ue=a.max,l=(i={top:a.axisTop,bottom:a.axisBottom,left:a.axisLeft,right:a.axisRight},function(e,t){return i[e](t)}),p=(r={linear:a.easeLinear,quad:a.easeQuad,"quad-in-out":a.easeQuadInOut,"quad-in":a.easeQuadIn,"quad-out":a.easeQuadOut,cubic:a.easeCubic,"cubic-in-out":a.easeCubicInOut,"cubic-in":a.easeCubicIn,"cubic-out":a.easeCubicOut,sin:a.easeSin,"sin-in-out":a.easeSinInOut,"sin-in":a.easeSinIn,"sin-out":a.easeSinOut,exp:a.easeExp,"exp-in-out":a.easeExpInOut,"exp-in":a.easeExpIn,"exp-out":a.easeExpOut,circle:a.easeCircle,"circle-in-out":a.easeCircleInOut,"circle-in":a.easeCircleIn,"circle-out":a.easeCircleOut,elastic:a.easeElastic,"elastic-in-out":a.easeElasticInOut,"elastic-in":a.easeElasticIn,"elastic-out":a.easeElasticOut,back:a.easeBack,"back-in-out":a.easeBackInOut,"back-in":a.easeBackIn,"back-out":a.easeBackOut,bounce:a.easeBounce,"bounce-in-out":a.easeBounceInOut,"bounce-in":a.easeBounceIn,"bounce-out":a.easeBounceOut},function(e){return r[e]||a.easeLinear}),Ke=a.easeLinear,$e=(n={linear:a.curveLinear,linearClosed:a.curveLinearClosed,cardinal:a.curveCardinal,cardinalClosed:a.curveCardinalClosed,monotone:a.curveMonotoneX,monotoneY:a.curveMonotoneY,stepBefore:a.curveStepBefore,stepAfter:a.curveStepAfter,"linear-closed":a.curveLinearClosed,"cardinal-closed":a.curveCardinalClosed,"step-before":a.curveStepBefore,"step-after":a.curveStepAfter},function(e,t,a){var r=n[e];return"monotone"==e&&t&&(r=n.monotoneY),null!=a&&r.tension&&r.tension(a),r}),s=(t={squarify:a.treemapSquarify,slice:a.treemapSlice,dice:a.treemapDice,sliceDice:a.treemapSliceDice,resquarify:a.treemapResquarify},function(e){return t[e]||t.squarify}),Je=function(){var e=a.scaleLinear();return e.ticks=function(e){var t=this.domain();return a.ticks(t[0],t[t.length-1],null==e?10:e)},e},Q=a.scaleBand,q=a.scaleTime,M=a.scalePoint,K=a.scaleOrdinal,u=a.bisector,E=a.sum,_=a.hsl,Pe=function(){var e=a.rgb.apply(this,arguments);return(isNaN(e.r)||isNaN(e.g)||isNaN(e.b))&&(e=a.rgb(0,0,0,e.opacity)),e},z=a.merge,$=a.map,H=a.set,d=a.zoom,h=a.zoomTransform,g=a.zoomIdentity,P=a.drag,oe=a.extent,f=a.dispatch,ge=a.ascending,T=a.descending,S=a.line,et=a.radialLine,L=a.area,D=a.radialArea,tt=a.arc,v=a.pack,y=a.pie,ve=a.partition,m=a.treemap,at=a.interpolate,b=a.interpolateRgb,x=a.interpolateRound,rt=a.range,C=a.timeSunday,k=a.timeMonday,w=a.timeTuesday,O=a.timeWednesday,A=a.timeThursday,I=a.timeFriday,R=a.timeSaturday,j=a.timeSeconds,B=a.timeHours,F=a.timeDays,W=a.timeWeeks,V=a.timeMonths,N=a.timeYears,Y=a.format,G=a.timeFormat,U=a.utcFormat,X=a.timeParse,Z=a.brushSelection,J=a.topojson,ee=a.versor,te=a.geoPath,ae=a.geoGraticule,re=a.geoCentroid,ne=a.polygonContains,ie=a.geoDistance,le=a.geoContains,se=a.namespace,ce=a.namespaces,nt=function(e){return e&&(c.event=e),c.event},Ae=function(){},Te=function(){},it=function(){},ue=function(){};Be.canvas=function(){};function de(){}var Ne={},he=Ne.line=11,fe=Ne.pie=8,pe=Ne.bar=9,ye=Ne.stkdbar=10,me=Ne.scatter=12,be=Ne.area=14,xe=Ne.stkdarea=15,Ce=Ne.bubble=20,ke=Ne.packedbubble=19,we=Ne.funnel=7,Se=Ne.web=16,_e=Ne.sunburst=17,Ee=Ne.pyramid=13,Le=Ne.dial=18,Me=Ne.bullet=6,ze=Ne.arearange=21,De=Ne.bubblepie=5,Ie=Ne.gantt=24,Re=Ne.treemap=4,je=Ne.heatmap=3,He=Ne.dotgrid=26,Fe=Ne.waterfall=27,We=Ne.wordcloud=2,Ve=Ne.geoheatmap=30,Ye=Ne.geoscatter=31,Ge=Ne.geobubble=32,Xe=Ne.geobubblepie=33,Ze=Ne.boxplot=35,Qe=Ne.sankey=36,ot=$();ot.set(Ne.line,"line"),ot.set(Ne.pie,"pie"),ot.set(Ne.bar,"bar"),ot.set(Ne.stkdbar,"bar"),ot.set(Ne.scatter,"scatter"),ot.set(Ne.area,"area"),ot.set(Ne.funnel,"funnel"),ot.set(Ne.web,"web"),ot.set(Ne.stkdarea,"area"),ot.set(Ne.sunburst,"sunburst"),ot.set(Ne.pyramid,"pyramid"),ot.set(Ne.bubble,"bubble"),ot.set(Ne.dial,"dial"),ot.set(Ne.packedbubble,"packedbubble"),ot.set(Ne.bullet,"bullet"),ot.set(Ne.arearange,"arearange"),ot.set(Ne.gantt,"gantt"),ot.set(Ne.bubblepie,"bubblepie"),ot.set(Ne.treemap,"treemap"),ot.set(Ne.heatmap,"heatmap"),ot.set(Ne.dotgrid,"dotgrid"),ot.set(Ne.waterfall,"waterfall"),ot.set(Ne.wordcloud,"wordcloud"),ot.set(Ne.geoheatmap,"geoheatmap"),ot.set(Ne.geoscatter,"geoscatter"),ot.set(Ne.geobubble,"geobubble"),ot.set(Ne.geobubblepie,"geobubblepie"),ot.set(Ne.boxplot,"boxplot"),ot.set(Ne.sankey,"sankey");var lt={};lt.axis=[he,be,me,xe,pe,ye,Ce,Me,ze,De,Ie,je,Fe,Ze],lt.flow=[Qe],lt.nonaxis=[fe,we,Ee,Le,He],lt.nonaxismultiseries=[Se,_e,ke,Re,We],lt.polarAxis=[Se],lt.hierarchy=[ke,_e,Re],lt.continous=[he,be,me,xe,Ce,ze,De],lt.discrete=[fe,pe,ye,_e,we,Ee,Le,Me,Ie,je,Fe,Ze],lt.dotPlot=[me,Ce,Ye,Ge],lt.piePlot=[fe,De,Xe],lt.zaxis=[Ce,De,je,Ge,Xe,Qe],lt.svgOnly=[fe,we,Ee,Le,_e,ke,De,Ie,Fe,Xe,Ze],lt.geo=[Ve,Ye,Ge,Xe],lt.bubble=H([Ce,Ge]),lt.bubblePie=H([De,Xe]),lt.rangePlot=H([ze,Ie,Ze]),lt.barPlot=H([pe,ye,Me,Ie,je,Fe,Ze]),lt.markerPlot=H([me,Ce,he,be,ze]),lt.stacked=[pe,Fe,Me,he,be,Se],lt.stackedPercent=[pe,he,be,Se,ye,xe],lt.innerLabels=[fe,we,Ee,_e,De,Xe],lt.datalabelsInside=[ke,je,Re,Ve],lt.parentLabels=[Re,_e];var st,ct,ut={},dt={},ht={},ft={},pt=function(){},gt={},vt=$(),yt=/\{\{val\((\d+)\)\}\}|\{\{col\((\d+)\)\}\}|\{\{per\((\d+)\)\}\}|\{\{splitper\((\d+)\)\}\}|\{\{maxper\((\d+)\)\}\}|\{\{geo\(([a-z0-9\-\_]+)\)\}\}|\{\{clr\}\}|\{\{valatpos\((\d+)\)\[(\d+)\]\}\}/gi,mt=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,bt=/(illuminate|moody|flip|boxShadow|invert|ridge)/,xt=/(fadeOut|blur|grayscale|saturate)/,Ct=window.console,kt=document.createElement("canvas").getContext("2d"),wt=function(e){return e&&e.document?e.document:window},St=window.location.protocol+"//"+window.location.hostname+"/src/images/",Ot={minsize:15,maxsize:40,ratio:.038},At=!1,Pt=!1,Tt=Math,_t=Tt.round,Et=Tt.floor,Lt=Tt.ceil,Mt=Tt.max,zt=Tt.min,Dt=Tt.abs,It=Tt.pow,Rt=Tt.sqrt,jt=Tt.cos,Ht=Tt.sin,Bt=Tt.log,Ft=Tt.tan,Wt=Tt.atan2,Vt=Tt.LN10,Nt=Tt.random,Yt=Tt.PI,Gt=2*Yt/360,Ut=Number.MAX_SAFE_INTEGER||9007199254740991,Xt=Number.EPSILON||2220446049250313e-31,Zt="px ",Qt="none",qt="transparent",Kt="pointer",$t=null,Jt=[],ea=wt().devicePixelRatio||1,ta=function(){},aa={};function ra(e){return aa[e]||ta}var na={getComponent:ra,setComponent:function(e,t){aa[e]=t},getComponentMethod:function(e,t){return(ra(e)||ta)[t]||ta}},ia=window.btoa||function(e){e=String(e);var t,a,r,n,i,o,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,u=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)n=(t=e.charCodeAt(c++))>>2,i=(3&t)<<4|(a=e.charCodeAt(c++))>>4,o=(15&a)<<2|(r=e.charCodeAt(c++))>>6,l=63&r,c===e.length+2?l=o=64:c===e.length+1&&(l=64),u.push(s.charAt(n),s.charAt(i),s.charAt(o),s.charAt(l));return u.join("")};function oa(e,t){var a=e.nodeType;if(3==a)t.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==a){if(t.push("<",e.tagName),e.hasAttributes())for(var r=e.attributes,n=0,i=r.length;n<i;++n){var o=r.item(n);t.push(" ",o.name,"='",o.value,"'")}if(e.hasChildNodes()){t.push(">");var l=e.childNodes;for(n=0,i=l.length;n<i;++n)oa(l.item(n),t);t.push("</",e.tagName,">")}else t.push("/>")}else{if(8!=a)throw"Error serializing XML. Unhandled node of type: "+a;t.push("\x3c!--",e.nodeValue,"--\x3e")}}Object.defineProperty(SVGElement.prototype,"innerHTML",{configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;)oa(t,e),t=t.nextSibling;return e.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1;for(var a="<svg xmlns='http://www.w3.org/2000/svg'>"+e+"</svg>",r=t.parseFromString(a,"text/xml").documentElement.firstChild;r;)this.appendChild(this.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(e){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{configurable:!0,get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}}),function(){try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var t=window.Element.prototype,a=t.setAttribute,r=t.setAttributeNS,n=window.CSSStyleDeclaration.prototype.setProperty;t.setAttribute=function(e,t){a.call(this,e,""+t)},t.setAttributeNS=function(e,t,a){r.call(this,e,t,""+a)},window.CSSStyleDeclaration.prototype.setProperty=function(e,t,a){n.call(this,e,""+t,a)}}}();var la,sa,ca,ua=window.Set;function da(e){sa(this,{_v:{value:[]}}),e&&e.forEach(this.add,this)}function ha(e,t){return-1<(la=e._v.indexOf(t))}function fa(e){return[e,e]}ua&&ua.prototype.values||(la=0,sa=Object.defineProperties,(ca=sa(da.prototype,{size:{configurable:!0,get:function(){return this._v.length}}})).add=function(e){return ha(this,e)||this._v.push(e),this},ca.clear=function(){var e=this._v.length;this._v.splice(0,e)},ca.delete=function(e){return ha(this,e)&&!!this._v.splice(la,1)},ca.entries=function(){return this._v.map(fa)},ca.forEach=function(a,r){this._v.forEach(function(e,t){a.call(r,e,e,this)},this)},ca.has=function(e){return ha(this,e)},ca.keys=ca.values=function(){return this._v.slice(0)},ua=da);var pa=function(){};pa.getActualTextBounds=function(e,t,a){t=t;var r=e,n=a*(2*Yt/360),i={};return i.width=Dt(r*Ht(n))+Dt(t*jt(n)),i.height=Dt(r*jt(n))+Dt(t*Ht(n)),i};var ga=pa.mergeJSON=function(e,t,a,r){e=e||{},t=t||{};var n=null!=r&&1==r?e:xa(e);for(var i in t)t.hasOwnProperty(i)&&(null!=n[i]?null==t[i]||t[i].constructor!=Object&&t[i].constructor!=Array?1==a&&"object"===(void 0===n?"undefined":_typeof(n))&&(n[i]=t[i]):n[i]=ga(n[i],t[i],a,r):n[i]=t[i]);return n};function va(e,t){return"function"==typeof e?e.apply(null,t):e}function ya(e,t){if(null==e||e.constructor!=Object)return null!=t?t:void 0;var a,r="";for(var n in e)e.hasOwnProperty(n)&&((a=e[n])&&a.constructor===Object&&(a=Wa(a)),r+=null==a||""==a?"$$":a+"_");return r=(r=(r=t+r).replace(/[.-]/g,"_")).replace(/[`~!@#$%^&*( )|+\-=?;:'",.<>{}[\]\\/\s]/gi,"_")}function ma(e,t,a){var r=_(e),n=Je().domain([-1,0,1]).range([_(r.h,r.s,.1),r,_(r.h,r.s,.9)]).interpolate(b),i=Je().domain(t).range(a);return function(e){return n(i(e))}}function ba(e){return e&&(e.isD3Selection&&(e=e.node()),pr(e))?e.getBBox():{x:0,y:0,height:0,width:0}}pa.getValueOfPlotOptions=function(t,a){return function(e){return null!=t&&null!=t[e]?t[e]:null!=a&&null!=a[e]?a[e]:null}},pa.getVal=va;var xa=pa.simpleClone=function(e){var t,a=e;if(e&&"object"===(void 0===e?"undefined":_typeof(e)))for(t in a=Ba(e)?[]:{},e)a[t]=xa(e[t]);return a};function Ca(e){if(!Pt||null==e)return e;var t=document.createElement("div");t.innerHTML=encodeURI(e);var a=t.textContent;return decodeURI(a)}function ka(e){if(Pt||null==e)return e;var t=document.createElement("div");return t.textContent=Ca(e),t.innerHTML}function wa(e){return e.slice(0)}function Sa(){return o("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function Oa(e,t,a){var r=t.replace(/\[(\w+)\]/g,".$1"),n=(r=r.replace(/^\./,"")).split(".").reduce(function(e,t){return za(e)?e[t]:e},e);return a?n:za(n)}function Aa(e){return!za(e)}function Pa(e){return Array.prototype.slice.call(e)}function Ta(){var e=Pa(arguments),t=!0===e[0]&&e.shift(),a=e.shift();if("string"==typeof a){var r=Va(window,a);a="function"==typeof r?r:a}return"function"==typeof a?t?a.apply(e[0],e.splice(1)):a.apply(void 0,e):a}function _a(e,t){for(var a,r=0,n=e.length;r<n&&(null==a||""===a);r++)e[r]&&(a=e[r][t]);return a}function Ea(e,t){var a=null==e||""===e?t:e,r=JSON.parse(a);return a="number"==typeof r?parseFloat(r):"boolean"==typeof r?JSON.parse(r):r}function La(e,t,a,r,n,i){var o,l=zt(n,i),s=r*l/100,c=a*l/100;return o=null==(o=e[t])||""===o?null:o<c?c:s<o?s:parseFloat(o)}function Ma(e,t){var a=t[0],r=t[1];return!(e<a||r<e)}function za(e){return null!=e}function Da(e){return null==e||"null"==e}function Ia(e){return e+"".toLocaleLowerCase()==="true"}function Ra(e){return(e+="").replace(/ /g,"px ")+"px"}function ja(e,t){return parseInt(e,t||10)}function Ha(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))}function Ba(e){return Array.isArray?Array.isArray(e):!!e&&e.constructor===Array}function Fa(e){return"number"==typeof e&&!isNaN(e)}function Wa(e,t){return za(e)?JSON.stringify(e,t):ct}var Va=pa.getPropVal=function(e,t){return Oa(e,t,!0)},Na=pa.setPropVal=function(e,t,r){var n=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split(".");return function e(t){var a=n.shift();if(null===a||0===n.length)return t[a]=r,!1;null!==t[a]&&"object"===_typeof(t[a])||(t[a]=isNaN(parseInt(n[0]))?{}:[]),e(t[a])}(e),e};function Ya(e,t){if(!e||!t)return null;var a,r={};for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){var i=e[n],o=t[n];if(!i||i.constructor!=Object&&i.constructor!=Array)i==o&&(r[n]=i,a=!0);else{var l=Ya(i,o);null!=l&&(r[n]=l,a=!0)}}return a?r:null}function Ga(e){return function(e){var t=Pe(e);return(299*t.r+587*t.g+114*t.b)/1e3<128}(e)?"#f8f8f8":"#444444"}function Ua(e){return function(e){return null!=e&&e===e.window}(e)?e:9===e.nodeType&&e.defaultView}function Xa(e){var t=e.getBoundingClientRect(),a=e&&e.ownerDocument,r=a.documentElement,n=Ua(a);return{top:t.top+n.pageYOffset-r.clientTop,left:t.left+n.pageXOffset-r.clientLeft}}function Za(e){return e?e.split(",").reverse().join():e}function Qa(){return za(document.visibilityState)&&"visible"!==document.visibilityState}pa.elementIsVisible=function(e,t,a){var r=t.offsetHeight,n=Xa(e).top-Xa(t).top,i=n+e.offsetHeight;return 0<=n&&i<=r||a&&(n<0&&0<i||0<n&&n<=r)};var qa=function(){var e,t,a=arguments,r=a.length;for(e=0;e<r;e++)if(za(t=a[e]))return t;return a[r-1]};function Ka(e,t){if("object"!==(void 0===e?"undefined":_typeof(e)))return!1;if(Ba(e)||"number"==typeof e.length)Array.prototype.forEach.call(e,t);else for(var a in e)e.hasOwnProperty(a)&&t(e[a],a,e)}function $a(e,t){if(t){for(var a=1,r=arguments.length;a<r;a++){var n=arguments[a];for(var i in n)!e[i]&&n.hasOwnProperty(i)&&(e[i]=n[i])}return e}}function Ja(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));var a=e.prototype;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),$a(e.prototype,a)}function er(e,t){var a=e.indexOf(t);return-1<a&&e.splice(a,1),e}function tr(e,t,a){var r;return e.isD3Selection&&(e=e.node()),"width"===t?zt(e.offsetWidth,e.scrollWidth)-tr(e,"padding-left")-tr(e,"padding-right"):"height"===t?zt(e.offsetHeight,e.scrollHeight)-tr(e,"padding-top")-tr(e,"padding-bottom"):((r=window.getComputedStyle(e))&&(r=r.getPropertyValue(t),qa(a,"opacity"!==t)&&(r=ja(r))),r)}function ar(e){return e instanceof HTMLElement}function rr(e){return Ba(e)?e:[e]}function nr(e){var t,a,r,n;if(za(e)){var i=e.toString().split(" ");t=ja(or([i[0],0])),a=ja(or([i[1],i[0],0])),r=ja(or([i[2],i[0],0])),n=ja(or([i[3],i[1],i[0],0]))}else n=r=a=t=0;return{top:t,right:a,bottom:r,left:n}}function ir(e){var t={},a=null!=e?e.toString().split("/"):null,r=null!=a&&null!=a[0]?a[0].split(" "):[],n=null!=a&&null!=a[1]?a[1].split(" "):r;return t.tlx=ja(or([r[0]])),t.tly=ja(or([n[0],r[0]])),t.trx=ja(or([r[1],r[0]])),t.trY=ja(or([n[1],n[0],r[1],r[0]])),t.brx=ja(or([r[2],r[0]])),t.bry=ja(or([n[2],n[0],r[2],r[0]])),t.blx=ja(or([r[3],r[1],r[0]])),t.bly=ja(or([n[3],n[1],r[3],r[0]])),t}function or(e,t){var a=null,r=e.length,n=0;for(t=qa(t,0);n<r&&!za(a);)a=null!=e[n]?e[n]:null,n++;return qa(a,t)}function lr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function sr(e){var t=e.canvas,a=ea;return t.style.width=t.width+"px",t.style.height=t.height+"px",t.setAttribute("width",t.width*a),t.setAttribute("height",t.height*a),e.scale(a,a),e}function cr(e,t){if(Array.prototype.find)return e.find(t);for(var a=e.length>>>0,r=0;r<a;){var n=e[r];if(t.call(t,n,r,e))return n;r++}}function ur(e){return e.getRootNode?e.getRootNode():null!=e.parentNode?ur(e.parentNode):e}function dr(e){return hr(ur(e))}function hr(e){return"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name}function fr(e){return dr(e)||document.body.contains(e)}function pr(e){return fr(e)&&qe(e).style("display")!==Qt}function gr(e){var t=ur(e);if(hr(t)){var a="_zc_fakeBody",r=t.querySelector("."+a);return r||((r=document.createElement("div")).className=a,t.appendChild(r)),r}return document.body}function vr(e){return ur(e).ZC_DOCUMENT_INDEX}function yr(e){if(e.isD3Selection&&(e=e.node()),za(e)&&pr(e))return e.getBoundingClientRect();var t={};return t.x=t.y=t.width=t.height=t.top=t.left=t.right=t.bottom=0,t}function mr(e,t,a){return"string"==typeof e&&-1<e.indexOf("%")?t*+e.replace(/%/g,"")*.01:Ea(e,a)}function br(e){return Object.getPrototypeOf(e.constructor.prototype)}function xr(e,t){return e.includes?e.includes(t):-1<e.indexOf(t)}pa.each=Ka,pa.getStyle=tr,pa.toCapitalize=lr,pa.fixHDPI=sr,pa.arrayFind=cr,pa.moveArrayElement=function(e,t,a){e.splice(a,0,e.splice(t,1)[0])},pa.isShadowElement=dr,pa.isShadowRoot=hr,pa.isElementOnDocument=fr,pa.isElementVisible=pr,pa.getRootBody=ur;var Cr=xr;function kr(e,t){var a=Math.min.apply(Math,t),r=Math.max.apply(Math,t);return a<=e&&e<=r}function wr(e){return{x:e[0][0],y:e[0][1],width:Dt(e[1][0]-e[0][0]),height:Dt(e[1][1]-e[0][1])}}function Sr(e,t){var a=[].concat(_toConsumableArray(new ua(e).values()));return t&&(a=a.map(t)),a}function Or(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}var Ar,Pr=(Ar=null,function(){if(za(Ar))return Ar;var e=d3.select(document.body||document.documentElement).append("div").styles({width:"100%",visibility:"hidden",overflow:"scroll","-ms-overflow-style":"scrollbar"}),t=e.append("div").styles({width:"100%"});return Ar=e.node().offsetWidth-t.node().offsetWidth,e.remove(),Ar});pa.getScrollbarWidth=Pr;function Tr(e,t){var a=1<arguments.length&&void 0!==t?t:"height";return e.isD3Selection&&(e=e.node()),"width"===a?e.scrollWidth>e.offsetWidth:e.scrollHeight>e.offsetHeight}function _r(e){return Ba(e)?[e[0],e[e.length-1]]:e}pa.elementIsScrollable=Tr,pa.groupBy=function(e,a){return e.reduce(function(e,t){return(e[t[a]]=e[t[a]]||[]).push(t),e},{})};function Er(e,t){var a=1<arguments.length&&void 0!==t?t:10;return+(Math.log(e)/Math.log(a)).toPrecision(12)}var Lr;function Mr(e){return!!(e&&e.constructor&&e.call&&e.apply)}function zr(t,a,r){return function(){var e=r.apply(a,arguments);return e===a?t:e}}c.rebind=function(e,t){for(var a,r=1,n=arguments.length;++r<n;)e[a=arguments[r]]=zr(e,t,t[a]);return e},(Lr=c).quadtree.prototype.findAll=function(e,t,a,r){var n=this,i={points:[],visited:[]};return n._size=n._size||function(){return 0},Ha(a)?n.visit(function(e,s,c,u){var d=e[0][0],h=e[0][1],f=e[1][0],p=e[1][1];return function(e,t,a,r,n){if(!e.length)do{var i=e.data,o=u._x(i),l=u._y(i);c.push(i),d<=o&&o<f&&h<=l&&l<p&&s.push(i)}while(e=e.next);return f<=t||p<=a||r<d||n<h}}(a,i.points,i.visited,n)):n.visit(function(l,e,s,c,u,d){var t=e,h=l.x-t,f=l.x+t,p=l.y-t,g=l.y+t;return function(e,t,a,r,n){if(!e.length){u.push(e.data);do{if(e.data){var i=l.x-d._x(e.data),o=l.y-d._y(e.data);Rt(i*i+o*o)<=d._size(e.data)/2+s&&c.push(e.data)}}while(e=e.next)}return f<t||r<h||g<a||n<p}}({x:e,y:t},a,r,i.points,i.visited,n)),i},Lr.quadtree.prototype.size=function(e){return Mr(e)&&(this._size=e),this},c.selection.prototype.first=function(){return c.select(this.nodes()[0])},c.selection.prototype.last=function(){return c.select(this.nodes()[this.size()-1])},c.selection.prototype.removeAllListeners=function(){var t=this,e=void 0;return(e=this.node()&&this.node().__on)&&e.forEach(function(e){return t.on("."+e.name,$t)}),this},c.selection.prototype.isD3Selection=!0;var Dr="text",Ir="tspan",Rr="path",jr="circle",Hr="line",Br="div",Fr="svg",Wr={};function Vr(e,t,a,r){for(var n,i=Pa(arguments).slice(4),o=null,l=0,s=i.length;l<s+1&&(o=Yr(r,null,n=l===s?null:Va(e,i[l]),t,a),!Fa(n));l++);return o}function Nr(e,t,a){Wr.globalProp={},a.fontL1Size=Vr(e,Wr.fontL1Size,a.fontL1Size,t,"canvas.fontSize"),a.fontL2Size=Vr(e,Wr.fontL2Size,a.fontL2Size,t,"chart.fontSize","canvas.fontSize"),Wr.globalProp.fontL1Color=null,Wr.globalProp.fontL2Color=null,Wr.globalProp.fontL1Family=null,Wr.globalProp.fontL2Family=null,Wr.globalProp.fontL1Style=null,Wr.globalProp.fontL2Style=null,Wr.globalProp.fontL1Weight=null,Wr.globalProp.fontL2Weight=null,Wr.globalProp.textShadow=null;var r=qa(Va(e,"chart.plot.animation"),{});return Wr.globalProp.animation={},Wr.globalProp.animation.enabled=!1!==r.enabled,Wr.globalProp.animation.duration=r.duration||null,Wr.globalProp.animation.easingType=r.easingType||null,Wr.globalProp.datalabels={},a.datalabels=null==a.datalabels?{}:a.datalabels,Wr.globalProp.datalabels.enabled=null,a.datalabels.fontSize=Vr(e,Wr.fontL3Size,a.datalabels.fontSize,t,"chart.plot.datalabels.fontSize","chart.fontSize","canvas.fontSize"),Wr.globalProp.datalabels.fontColor=null,Wr.globalProp.datalabels.fontFamily=null,Wr.globalProp.datalabels.fontStyle=null,Wr.globalProp.datalabels.fontWeight=null,Wr.globalProp.events={},Wr.globalProp.events.mouseMove=null,Wr.globalProp.events.mouseOut=null,Wr.globalProp.events.click=null,Wr.globalProp.events.doubleClick=null,a}function Yr(e,t,a,r,n){var i=zt(e.width,e.height),o=Oa(Ot,"ratio")&&Ot.ratio;"function"==typeof o&&(o=o(e)),t=null==t?o&&!isNaN(o)?o:.038:t;var l=_t(i*t);Wr.minL1Size=Ot.minsize,Wr.maxL1Size=Ot.maxsize;var s=Wr.minL1Size,c=Wr.maxL1Size;return l=l<s?s:c<l?c:l,null!=a&&(t=ja(a)*t/l,l=(l=_t(i*t))<s?s:c<l?c:l),(n=null==r?null==n?{}:n:r).size=l,n.l1=function(){return n.size},n.l2=function(){return n.size-2},n.l3=function(){return n.size-3},n.l4=function(){return n.size-4},n.l5=function(){return n.size-5},n.l8=function(){return n.size-8},n}Wr.fontFamily="'Roboto','Open Sans',sans-serif",Wr.fontColor="#616161",Wr.fontStyle=null,Wr.fontWeight=null,Wr.fontL1Size=null,Wr.fontL2Size=null,Wr.fontL3Size=null,Wr.DOMBorder="none";function Gr(e){return{canvas:{fontFamily:Wr.globalProp.fontL1Family,fontColor:Wr.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:Wr.globalProp.fontL1Weight,fontStyle:Wr.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:300}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"top",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},colorBand:{},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4,keepAligned:!1},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},expandable:{fontSize:e.fontL1Size.l5},size:{}},chart:{marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,zoom:{enabled:!1,type:"x"},brush:{enabled:!1,type:"x"},effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:Wr.globalProp.animation.enabled,easingType:Wr.globalProp.animation.easingType,duration:Wr.globalProp.animation.duration},datalabels:{show:Wr.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5,boundBox:{strokeColor:Wr.fontColor,fillColor:"white"}},events:{cursor:null,click:Wr.globalProp.events.click,mousemove:Wr.globalProp.events.mouseMove,mouseout:Wr.globalProp.events.mouseOut,doubleclick:Wr.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:Gr.axes?Gr.axes(e):{}},map:Gr.map?Gr.map():{},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"},pointerEvents:"none"},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}}}function Ur(e,t,a,r,n){n||(r=function(e,t,a){var r;switch(e){case"zoom":r=Gr.zoom(a);break;case"brush":r=Gr.brush(a);break;case"scroll":r=Gr.scroll();break;case"legend":r={};break;case"credits":r=Gr.credits(a);break;case"notes":r=Gr.notes(a);break;case"bar":r=Gr.bar();break;case"line":r=Gr.line();break;case"area":r=Gr.area();break;case"arearange":r=Gr.arearange();break;case"scatter":case"geoscatter":r=Gr.scatter(e);break;case"bubblepie":case"geobubblepie":case"pie":r=Gr.pie(e);break;case"funnel":r=Gr.funnel();break;case"web":r=Gr.web();break;case"pyramid":r=Gr.pyramid();break;case"sunburst":r=Gr.sunburst();break;case"dial":r=Gr.dial(a);break;case"bubble":case"geobubble":r=Gr.bubble();break;case"packedbubble":r=Gr.packedbubble();break;case"bullet":r=Gr.bullet(a);break;case"gantt":r=Gr.gantt();break;case"treemap":r=Gr.treemap();break;case"heatmap":r=Gr.heatmap();break;case"geoheatmap":r=Gr.geoheatmap();break;case"dotgrid":r=Gr.dotgrid();break;case"waterfall":r=Gr.waterfall();break;case"wordcloud":r=Gr.wordcloud();break;case"size":r=Gr.sizeLegend?Gr.sizeLegend(a):{};break;case"color":r=Gr(a).legend;break;case"boxplot":r=Gr.boxplot();break;case"sankey":r=Gr.sankey();break;case"metadata":r={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}return r}(e,0,a));var i=null==t[e]?t[e]={}:t[e];return ga(r,i,!0,!0),t[e]=r}Gr.credits=function(e){return{enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:e.fontL1Size.l4}};var Xr=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var e=navigator.userAgent.toLowerCase();this.OSX=-1!=e.indexOf("mac"),this.WINDOWS=-1!=e.indexOf("windows"),this.LINUX=-1!=e.indexOf("linux"),this.IPHONE=-1!=e.indexOf("iphone"),this.IPAD=-1!=e.indexOf("ipad"),this.ANDROID=-1!=e.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,this.isMouseDevice=!(this.IS_IOS||this.ANDROID||-1!=e.indexOf("mobile")),this.uiwebview=this.IS_IOS&&!/safari/.test(e),this.PHANTOMJS=-1!==e.indexOf("phantomjs"),this.WKWebView=this.uiwebview&&-1!=e.indexOf("wkwebview");var n="";this.detect=function(){var e=navigator.userAgent,t=e.length,a=navigator.vendor,r="";window.opera?(this.OPERA=1,n="o"):-1<e.indexOf("Chrome")?(this.CHROME=1,r="Chrome/",n="webkit"):-1<e.indexOf("Firefox")?(this.FIREFOX=1,r="Firefox/",n="moz"):-1<e.indexOf("MSIE ")||-1<e.indexOf("Trident/")?(this.IE=1,r="MSIE ",n="ms"):-1<a.indexOf("Apple")?(this.SAFARI=1,r="Version/",n="webkit"):r="Unknown Browser",this.VERSION=e.substring(e.indexOf(r),t).match(/[0-9\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:n,css:n?"-"+n+"-":n,js:n?n[0].toUpperCase()+n.substr(1):n}};function Zr(e){var t=document.createRange();t.selectNode(e);var a=t.getClientRects(),r=a[1]||a[0];return t.detach(),(Xr.FIREFOX||Xr.SAFARI)&&(r.width=2*r.width,r.height=2*r.height),r||{x:0,y:0,width:0,height:0}}function Qr(e){return e.getBoundingClientRect()}function qr(e,r,n,i,t,o,l){var s,c,a=Ba(e),u=pa.fontUtils.getTextHeight(e,r,n,o,l,t);return a?e.forEach(function(e,t){za(i)&&i.length&&(r=i[t].fontSize||r,n=i[t].fontFamily||n);var a=pa.fontUtils.getTextWidth(e,r,n,o,l);u=pa.fontUtils.getTextHeight(e,r,n,o,l),s=za(s)?Mt(s,a):a,c=za(c)?c+1.1*u:u}):(za(i)&&(r=i.fontSize||r,n=i.fontFamily||n),s=pa.fontUtils.getTextWidth(e,r,n,o,l),c=pa.fontUtils.getTextHeight(e,r,n,o,l,t)),{width:s,height:c}}function Kr(e,t,a,r,n,i,o,l,s){$r[e]={type:t||"diagonal-line-right",size:a||5,strokeWidth:r||1,bgClr:i,stroke:n,fillOpacity:o||1,strokeOpacity:l||1,translate:s}}var $r={},Jr=function(e){return{type:$r[e].type,size:$r[e].size,strokeWidth:$r[e].strokeWidth,bgClr:$r[e].bgClr,stroke:$r[e].stroke,fillOpacity:$r[e].fillOpacity,strokeOpacity:$r[e].strokeOpacity,translate:$r[e].translate}};function en(e){return{ele:e}}var tn=function(){};function an(e,t,a,r){var n=e.type;if(n&&n!==Qt){var i=e.options[n]||e.options,o=xa(i);return o.color=null!=a?a:o.color,o.opacity=null!=r?r:o.opacity,o.dimension=null!=t?t:o.dimension,o.type=n,o}}function rn(r,e){return e.map(function(e,t){var a=parseInt(e);return r.width%a/(parseInt(r.width/a)||1)+a})}tn.get=function(e,t,a,r){var n=(r=r||{}).offset,i=(r.dimension,r.returnSVGimage),o=r.base64,l=r.chartObj,s="svgPattern"==r.moduleType?tn.svg_patterns:null;if(e=e||s,(null!=t||""!=t)&&e[t]){var c;l&&l.getPatternSvg?c=l.getPatternSvg():(c=qa(r.renderTo,Wr.patternSVG)).isD3Selection||(c=qe(c));var u,d="zp"+ya(a,t);if(null!=d){var h=vr(c.node()),f=Jt&&h&&Jt[h].EFFECTS;return f&&za(f[d])?(u=f[d],i?u:u.id||u):(u=e[t](a,d,n,i,o,l,c))?(f&&(f[d]=u),i?u:u.id||u):void 0}}};var nn={solid:"",shortdash:"1.5,1.5",shortdot:"0.1,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.1,2.5",shortdashdotdot:"1.5,2,0.1,2,0.1,2",dashdot:"2.5,2.5,0.1,2.5",longdashdot:"5,5,0.1,5",longdashdotdot:"5,2.5,0.1,2.5,0.1,2.5"};function on(e,t,a){var r=za(nn[e]),n=qa(nn[e],e,null);return za(n)&&"solid"!==e?(t=r?qa(t,1):1,a&&(t*=a),n.split(",").map(function(e){return+e*t})):[]}function ln(e,t){return e||(t&&/dot/g.test(t)?"round":null)}function sn(e,t,a,r,n,i,o,l){var s;r=r||"",i=i||"";var c=(s=e.selectAll(t+r+i).data(a,l)).enter().append(t).merge(s);return n&&c.attr(n,i),o&&c.styles(o),s.exit().remove(),c}function cn(e,t,a,r,n,i,o,l,s,c){if(null==t||!t.trim()||!e)return t;var u,d;s=s||e,d=l?(u=l.width,l.height):(u=r.right-r.left,r.bottom-r.top);var h=0;if("left"==n||"right"==n?(a.top+a.height-o.bottom>r.bottom&&(h+=(a.top+a.height-o.bottom-r.bottom)/a.height),a.top+o.top<r.top&&(h+=(r.top-(a.top+o.top))/a.height),d=a.height-Mt(0,a.top+a.height-o.bottom-r.bottom)-Mt(0,r.top-(a.top+o.top))):"bottom"!=n&&"top"!=n||(a.left+a.width-o.right>r.right&&(h+=(a.left+a.width-o.right-r.right)/a.width),a.left+o.left<r.left&&(h+=(r.left-(a.left+o.left))/a.width),u=a.width-Mt(0,a.left+a.width-o.right-r.right)-Mt(0,r.left-(a.left+o.left))),0<(h=parseFloat(h.toFixed(2)))){var f=Lt((1-h)*t.length);e.textContent=t.substring(0,f-1)+i;var p=("tspan"==s.nodeName?Zr:Qr)(s);!1===(c="tspan"!=e.nodeName&&c)||p.width==a.width&&p.height==a.height||gn(e,s,t,u,d,p,i)}}function un(e,t,a,r,n,i,o){return{x1:i&&o?e-a:e,y1:i&&!o?t-r:t,x2:i&&o?e:e+a,y2:i&&!o?t:t+r}}function dn(e,t,a,r,n,i,o,l){var s=e,c=t,u=a,d=r;if(!l){var h=un.apply(this,Pa(arguments));s=h.x1,c=h.y1,u=h.x2,d=h.y2}return"M"+s+","+(d-(n=hn(n,a,r)).bly)+"L"+s+","+(c+n.tly)+"A"+n.tlx+","+n.tly+" 0 0 1 "+(s+n.tlx)+","+c+"L"+(u-n.trx)+","+c+"A"+n.trx+","+n.trY+" 0 0 1 "+u+","+(c+n.trY)+"L"+u+","+(d-n.bry)+"A"+n.brx+","+n.bry+" 0 0 1 "+(u-n.brx)+","+d+"L"+(s+n.blx)+","+d+"A"+n.blx+","+n.bly+" 0 0 1 "+s+","+(d-n.bly)+"Z"}function hn(e,t,a,r){var n,i=Object.create(e),o=i.tlx+i.trx,l=i.trY+i.bry,s=i.brx+i.blx,c=i.tly+i.bly;return a<c&&(n=c/(c-a),i.tly=i.tly-i.tly/n,i.bly=i.bly-i.bly/n),t<o&&(n=o/(o-t),i.tlx=i.tlx-i.tlx/n,i.trx=i.trx-i.trx/n),a<l&&(n=l/(l-a),i.trY=i.trY-i.trY/n,i.bry=i.bry-i.bry/n),t<s&&(n=s/(s-t),i.brx=i.brx-i.brx/n,i.blx=i.blx-i.blx/n),r&&(i.tlx=i.tly=Math.min(i.tlx,i.tly),i.trx=i.trY=Math.min(i.trx,i.trY),i.blx=i.bly=Math.min(i.blx,i.bly),i.brx=i.bry=Math.min(i.brx,i.bry)),i}function fn(e,t,a){var r=pa.getVal(_a(t,"fontSize")),n=_a(t,"fontFamily"),i=_a(t,"fontWeight"),o=_a(t,"fontStyle"),l=_a(t,"textShadow"),s=_a(t,"fontColor"),c=_a(t,"textDecoration"),u=_a(t,"strokeColor"),d=_a(t,"fontOpacity"),h=_defineProperty({"font-size":za(r)?r+"px":null,"font-family":n,"font-weight":i,"font-style":o,"text-shadow":l,"text-decoration":c,"fill-opacity":d},a?"color":"fill",s);return!a&&u&&(h.stroke=u,h["stroke-width"]=_a(t,"strokeWidth")||3,h["paint-order"]="stroke"),za(e)?("contrast"===u&&(h.stroke=null),e.styles(h)):h.color=s,h}function pn(e,t){e.append("title").text(function(){return t||this.parentNode.textContent})}function gn(a,r,n,e,t,i,o){var l=a.textContent.length-1,s=o.length;if(i.width>e||i.height>t)for(var c=0;c<=l;){if(u(!0),i.width<=e&&i.height<=t)return;l--}else for(c=n.length;l<c;){if(i.width>=e||i.height>=t)return l--,void u(!1);l++}function u(e){var t="tspan"==a.nodeName?Zr:Qr;a.textContent=n.substring(0,l-s)+o,e&&(i=t(r))}}function vn(e){return e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi).map(function(e){var t=(e=e.trim()).match(/[a-z]/gi).shift(),a=e.match(/-?[0-9]\d*(\.\d+(e-\d+)?)?/g);return{function:t,moves:a=a&&a.map(function(e){return parseFloat(e)})}})}function yn(a,e,t,r){var n=Ba(e)&&1<e.length,i=r?"html":"text",o=qe(a.node().parentNode);if(n){a.text(null);var l=a.attr("x")||0,s=a.attr("y")||0,c=a.attr("dy")?parseFloat(a.attr("dy")):.71,u=0,d=za(t)&&za(t.lineHeight)?t.lineHeight:c,h=za(t)&&t.orient;d="top"==h?-(e.length-1+d):"left"==h||"right"==h?-(e.length-2+d)/2:d,e.forEach(function(e){if(r)mn(o,a,e);else{var t=a.append("tspan");t.attr("x",l).attr("y",s).attr("dy",function(e,t){return u+++d+"em"}),t[i](function(){return e})}})}else r?(a.text(null),mn(o,a,e)):a[i](e);return a}function mn(e,t,a){if(/^<image.+<\/image>/i.test(a))sn(e,"g",[1],".","class","image").html(a);else if(/^<tspan.+<\/tspan>/i.test(a)){var r=(new DOMParser).parseFromString('<svg xmlns="'+ce.svg+'">'+a+"</svg>","application/xml");t.node().appendChild(r.querySelector("tspan"))}else t.append("tspan").text(a)}function bn(e){var t=e.selectAll("tspan").nodes();if(t&&t.length){var a=[];return t.forEach(function(e){a.push(e.textContent)}),a}return e.node().textContent}function xn(e,t,a,r,n,i){r=r||qe("body");var o,l,s;if(/^[.#]/.test(t)&&(s=t[0],l=t.slice(1),o={".":"class","#":"id"}[s]),n){var c=r.selectAll(e+t).data(a,i),u=c.enter().insert(e,n).merge(c);return c.exit().remove(),u.attr(o,l)}return sn(r,e,a,s,o,l,null,i)}function Cn(e){return e.isD3Selection&&(e=e.node()),!!e.ownerSVGElement}pa.fontUtils={getTextWidth:function(e,t,a,r,n){r=r||"normal",n=n||"normal",kt.save(),kt.font=r+" "+n+" "+(t||12)+"px "+(a||Wr.fontFamily);var i=kt.measureText(e).width;return kt.restore(),i},getTextHeight:function(e,t,a,r,n,i){return i?t:t<24?t+3:~~(1.195*t)}};function kn(a,r){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=_extends({transform:"transform",filter:"filter",dashStyle:"stroke-dasharray"},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}),i=_extends({fillColor:"fill",innerFillColor:"fill",outerFillColor:"fill",fillOpacity:"fill-opacity",innerFillOpacity:"fill-opacity",outerFillOpacity:"fill-opacity",strokeColor:"stroke",innerStrokeColor:"stroke",outerStrokeColor:"stroke",strokeOpacity:"stroke-opacity",innerStrokeOpacity:"stroke-opacity",outerStrokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",innerStrokeWidth:"stroke-width",outerStrokeWidth:"stroke-width",fontWeight:"font-weight",fontStyle:"font-style",textShadow:"text-shadow"},e);return Ka(r,function(e,t){n[t]?("dashStyle"===t&&(e=on(e,r.strokeWidth)),a.attr(n[t],e)):a.style(i[t]||t,e)}),a}function wn(e,t){if(e){var a=e.split(" "),r={dx:parseFloat(a[0]),dy:parseFloat(a[1]),color:a[3],blur:parseFloat(a[2]),x:"-50%",y:"-50%",width:"200%",height:"200%"},n=tn.get(tn.svg_filters,"dropShadow",r,{chartObj:t});return"url("+t.defsLocation+"#"+n+")"}}pa.createElement=xn,pa.setStyles=kn,pa.svgBoxShadow=pa.setStyles;var Sn="ordinal",On="time",An="numeric",Pn={};function Tn(e,t,a){var r=e.colorBand.ranges,n=xa(r),i=t.dataset.getDataType("clr")===Sn;return Ba(n[0])||(n=n.map(function(e){return[e]})),i||a||n.sort(function(e,t){return ge(e[0],t[0])}),n}function _n(e,t){var a=e.colorBand,r=t.dataset.getDataType("clr");return a.type?a.type:a.ranges||r===Sn?"discrete":"continuous"}function En(e){return e===Ne.area||e===Ne.stkdarea||e===Ne.arearange}function Ln(e){var t=e.match(mt);return t&&5===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function Mn(e,t){t=qa(t,1);var a=Pe(e);return"rgba("+a.r+","+a.g+","+a.b+","+t*a.opacity+")"}function zn(e,t,a,r){return e===qt?e:(a=qa(a,"darker"),qa(r,Pe)(e)[a](t).toString())}function Dn(f,p,g,e,t){function a(e,t,a,r,n,i,o,l,s){var c,u=t&&f.dataset.getClr(t);if(g=i||g,e=Math.max(e,0)||0,r)c=r;else if(c=Hn(f,e,t,p),e=Pn.getItemIndex(f,O,t,e),O&&(!jn(u,f)||Aa(e))&&0===Pe(c).opacity)return c;if("canvas"!=S||b.type||c instanceof Object||(c=Mn(c,n)),w&&/(url|data)/.test(c))return c;if(za(a)&&(c=zn(c,a).toString()),C&&C.length&&jn(u,f)){var d={name:f.imagePallete[e%k],width:o&&o.width||f.patternImageSizes[e%k][0],height:o&&o.height||f.patternImageSizes[e%k][1],mode:S,context:o&&o.context},h="svg"==S||l?tn.get(tn.svg_patterns,"imageFill",d,{returnSVGimage:l,chartObj:f}):tn.get(tn.canvas_patterns,"imageFill",d,{returnSVGimage:l,chartObj:f});return"canvas"==S?h:"url("+v+"#"+h+")"}if(w){d=function(e,t,a,r,n){var i=$r[e]?Jr(e):en(e);return i.bgClr_base=t,i.stroke_base=t,i.fillOpacity=i.fillOpacity||a,i.customStaticClr=n,r&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),i}(x[e%w],c,n,o,f.userdata.legend.customPatternColor),h="svg"==S||l?tn.get(tn.svg_patterns,"svgPatternFill",d,{returnSVGimage:l,chartObj:f}):tn.get(tn.canvas_patterns,"canvasPatternFill",d,{returnSVGimage:l,chartObj:f});return l||"canvas"==S?h:"url("+v+"#"+h+")"}return Pn.isQuantileColorScale(f)&&za(s)&&En(m)&&(b=Vn(f,f.renderer[p].seriesdataAfterUpdate[s])),g&&b&&b.type?In(b,g,c,S,n,y,l,f):c}var v=f.defsLocation,y=f.chartTypes[p].name,m=f.chartTypes[p].value,r=f.systemConf.chart.plot.plotoptions[y],n=f.seriesdata[p].plotoptions,b=n&&n.gradients?ga(r.gradients,n.gradients,!0):r.gradients,x=f.patternPallete,C=f.imagePallete,k=C&&C.length,w=!e&&x&&x.length,S=t||f.plot.renderer.mode,O=Pn.getIndexScale(f);return a.gradientOptions=b,a}function In(e,t,a,r,n,i,o,l){var s,c=an(e,t,a,n),u={offset:i,chartObj:l};return s="svg"===r?tn.get(tn.svg_gradients,"svgGradientFill",c,u):tn.get(tn.canvas_gradients,"canvasGradientFill",c,{offset:i,chartObj:l,returnSVGimage:o}),o||"canvas"===r?s:"url("+l.defsLocation+"#"+s+")"}function Rn(h,f,p){var g,v=h.defsLocation,e=h.chartTypes[f].value,y=h.chartTypes[f].name,m=En(e),b=e===Ne.line,x=h.seriesdata[f].plotoptions,C=h.systemConf.chart.plot.plotoptions[y],k=b&&x&&x.gradients?ga(C.gradients,x.gradients,!0):C.gradients,w=Pn.isQuantileColorScale(h),S=h.plot.renderer.mode;return function(e,t,a,r,n,i){var o=w&&za(i)&&(b||m&&!(x&&x.strokeColor||C.strokeColor)),l=b&&k.type;if(o&&(k=Vn(h,h.renderer[f].seriesdataAfterUpdate[i])),p&&(o||l)){var s=a||Bn(h,f),c=an(k,p,s,n),u={offset:y,chartObj:h},d="svg"==S?tn.get(tn.svg_gradients,"svgGradientFill",c,u):tn.get(tn.canvas_gradients,"canvasGradientFill",c,{offset:y,chartObj:h});return"canvas"==S?d||s:"url("+v+"#"+d+")"}if(a)g=a;else{e=Math.max(e,0)||0;s=Hn(h,e,t,f);za(r)&&(s=zn(s,r).toString()),g=s}return"canvas"!=S||g instanceof Object||(g=Mn(g,n)),g}}function jn(e,t,a,r,n){if(!(a=a||t.axes.clr.scale))return!0;r=r||a.domain(),e===ct&&(e=null);var i=t.systemConf.legend,o=n||i.filter.range,l=t.dataset.getDataType("clr"),s=!o||(l===Sn?xr(o,e):e>=o[0]&&e<=o[1]);return(l===Sn?xr(r,e):e>=r[0]&&e<=r[r.length-1])&&s&&null!==a(e)&&!(Aa(t.systemConf.legend.colorBand.nullAs)&&null==e)}function Hn(e,t,a,r){var n=Bn(e,t),i=e.isAxisCategory&&za(r)&&e.rendererConf&&e.rendererConf[r].params,o=e.seriesdata[qa(r,t)].colorFinder,l=void 0;return za(o)&&za(l=Ta(o,e,t,a,r))?l:i&&i.categoryColorConfig?Pn.getWaterfallColor(a,i.categoryColorConfig,n):i&&i.colorOverlay?function(e,t,a,r){var n=t.yaxiscolumnorder,i=t.threshold,o=t.thresholdType,l=e.dataset,s="x"==o?l.getX(a):l.getY(a,n);return t.colorOverlay(i,o,s,r)}(e,i,a,n):a&&Pn.isQuantileColorScale(e)?Fn(e,a):a&&a.arcColor||n}function Bn(e,t){var a=e.imagePallete||e.seriesColor;return a[t%a.length]}function Fn(e,t){var a=e.systemConf.legend.filter.track||{},r=Ea(a.fillOpacity,1),n=a.fillColor||qt,i=e.dataset.getClr(t),o=e.axes.clr.scale;return jn(i,e,o)?(i===ct&&(i=null),o(i)):0===(r=Pe(n).opacity*r)?qt:d3.scaleLinear().domain([0,1]).range([o(i),Ln(n)]).interpolate(b)(r)}function Wn(e,t){return e.multiColoring&&!t.legendarea.show}function Vn(a,e){var r,n,i,o,l,s,t=a.axes.rotated,c=a.systemConf.chart.axes.xaxis.reversed,u=a.axes.x.scale,d=u.range(),h="rgba(255,255,255,0)",f="discrete"===a.systemConf.legend.colorBand.colorModeOnPlot,p=u.bandwidth?u.bandwidth()/2:0,g=Je().domain([d[0]+p,d[d.length-1]-p]).range([0,100]),v=[],y=[];e.forEach(function(e){if(o=+g(u(a.dataset.getX(e))+p).toFixed(2),l=Fn(a,e),(s=l===qt)&&(l=h),f||!i&&!s||(za(r)&&(y.push(zt(100,r+.1)+"%"),v.push(h)),y.push(Mt(0,o-.1)+"%"),v.push(h)),f&&n)if(i)y.push(Mt(0,o-.1)+"%"),v.push(n);else if(s)y.push(zt(100,r+.1)+"%"),v.push(l);else{var t=(o+r)/2;y.push(t+"%"),v.push(n),y.push(t+"%"),v.push(l)}y.push(o+"%"),v.push(l),r=o,n=l,i=s});var m={type:"linear",options:{linear:{gradientUnits:"userSpaceOnUse",x1:0,x2:0,y1:0,y2:0,stopColor:v,stopOffset:y}}},b=t?c?"y2":"y1":c?"x1":"x2";return m.options.linear[b]=100,m}function Nn(e,a,t,r,n,i){var o=2<arguments.length&&void 0!==t?t:"x",l=r,s=4<arguments.length&&void 0!==n&&n,c=5<arguments.length&&void 0!==i&&i;if(!Ba(e))return a.originalDomain;var u=e.map(function(e){var t={x:0,y:0};return t[Yn(o,s)]=e,it.invert(l,t,a,s,o,c)}),d=_slicedToArray(u,2),h=d[0],f=d[1];if(f<h){var p=[f,h];h=p[0],f=p[1]}return l===Sn?a.domain().slice(h,f+1,0):Gn([h,f],a.originalDomain,a.outerPadding)}function Yn(e,t){return t&&{x:"y",y:"x"}[e]||e}function Gn(e,t,a){var r=2<arguments.length&&void 0!==a?a:0,n=e[0]instanceof Date;n&&(e=e.map(function(e){return e.getTime()}),t=t.map(function(e){return e.getTime()}));var i=_slicedToArray(e,2),o=i[0],l=i[1],s=_slicedToArray(t,2),c=s[0],u=s[1],d=u+(u-o)*r,h=Mt(o,c-(l-c)*r),f=zt(l,d);if(l<c&&(h=c-.001*(h-c),f=c+.001*(c-f)),u<o&&(h=u+.001*(u-h),f=u-.001*(f-u)),n){var p=[h,f].map(function(e){return new Date(e)}),g=_slicedToArray(p,2);h=g[0],f=g[1]}return[h,f]}Pn.getProcessedColorRange=function(r,a,e,t){var n=e.colorBand,i=n.stops,o=n.ranges,l=[],s=t.dataset.getDataType("clr")===Sn,c="discrete"!==_n(e,t);if(o&&o.length){o=Tn(e,t,!0);function u(e,t){if(1===e.length?s?e[0]===a[d]:e[0]===a[d+1]:e[0]===a[d]&&e[1]===a[d+1])return f=t,!0}for(var d=0,h=a.length;d<h;s?d++:d+=2){var f=-1;o.some(u),-1===f||!c&&o[f].disabled?l.push(null):l.push(r[f%r.length])}}else if(!s&&i&&i.length){var p=0;a.forEach(function(e,t){var a=i.indexOf(e);-1===a&&(a=p),l.push(r[a%r.length]),p=a})}else l=r;return l},Pn.getColorDomain=function(e){var t=e.systemConf.legend,a=t.colorBand,r=a.stops,n=a.ranges,i=Pn.getMinMax(e),o=qa(a.minRange,i[0])||0,l=qa(a.maxRange,i[1])||0,s=e.dataset.getDataType("clr")===Sn;if(n&&n.length){var c=Tn(t,e),u=[];if(s)u=c;else{if(1===c[0].length){var d=o;c=c.map(function(e){var t=[d,e[0]];return d=t[1],t})}(u=c).splice(0,0,[-1/0,-Ut]),u.splice(u.length,0,[Ut,1/0])}return z(u)}if(!s&&r&&r.length){var h=wa(r);h.sort(ge);var f=h.filter(function(e){var t=!0;return za(a.minRange)&&(t=t&&e>=a.minRange),za(a.maxRange)&&(t=t&&e<=a.maxRange),t});return(o<f[0]||!f.length)&&f.splice(0,0,o),l>f[f.length-1]&&f.splice(f.length,0,l),f}return[o,l]},Pn.getMinMax=function(e){var t=Pn.getAllColorData(e);return oe(t)},Pn.getCategories=function(e){return Sr(Pn.getAllColorData(e))},Pn.getAllColorData=function(a){var e=a.seriesdata,r=[];return e.forEach(function(e){if(!e.disabled){var t=e.data||e;Pn.pushColorData(a,t,r)}}),r},Pn.pushColorData=function(t,e,a){if(e&&Ba(e)&&e.every(Ba))e.forEach(function(e){Pn.pushColorData(t,e,a)});else{var r=t.dataset.getClr(e);a.push(r)}},Pn.isQuantileColorScale=function(e){return e.axes.clr?"quantile"===e.axes.clr.scaleType:za(e.dataset.clridx)&&!e.dataObject.isPolarAxisCategory&&e.systemConf.legend.colorBand.type!==Qt},Pn.getItemIndex=function(e,t,a,r){var n=a&&e.dataset.getClr(a);return t?t(n):r},Pn.getIndexScale=function(e){var t,a=Pn.isQuantileColorScale(e),r=e.systemConf.legend,n=r.colorBand.ranges;if(a&&n&&n.length){var i,o=e.axes.clr.scale,l=o.domain(),s=e.patternPallete,c=e.imagePallete;c&&c.length?i=c:s&&s.length&&(i=s),i&&(t=o.copy()).range(Pn.getProcessedColorRange(rt(i.length),l,r,e))}return t};var Un={CALCULATE_DOMAIN:function(e,t,a,r,n){var i=e.dataset.getDataType(a,r),o=e.axes.rotated,l=void 0,s=void 0;return null===t?("x"===a?s=e.axes.x.baseScale:"y"===a&&(s=e.axes.y.groups[r].baseScale),s.domain()):(l="x"===a?(n=qa(n,e.axes.x.scale),e.systemConf.chart.axes.xaxis.reversed):(n=qa(n,e.axes.y.groups[r].scale),e.systemConf.chart.axes.yaxis[r].reversed),Nn(t,n,a,i,o,l))},GET_DOMAIN:function(e,t,a,r,n){var i=3<arguments.length&&void 0!==r?r:0,o=n;return"xy"===a&&Ba(e)&&(e="x"===Yn(t,o.axes.rotated)?[e[0][0],e[1][0]]:[e[0][1],e[1][1]]),this.CALCULATE_DOMAIN(o,e,t,i)},GET_DOMAIN_INFO:function(a,e,r,n){var i=this,o={};if(xr(e=rr(e),"x")){var t=this.GET_DOMAIN(a,"x",r,0,n);o.x=[{domain:t,index:0,dataType:n.dataset.getDataType("x",0)}]}return xr(e,"y")&&(o.y=[],n.axes.y.groups.forEach(function(e,t){e.disabled||o.y.push({domain:i.GET_DOMAIN(a,"y",r,t,n),index:t,dataType:n.dataset.getDataType("y",t)})})),o},DOMAIN_TO_DATA:function(a,e,t){var r=a.axes.x.scale,n=a.axes.y.groups[0].scale,i=void 0,o=void 0,l=[];return Ba(e)&&(e=_r(e),i=e.map(r).sort(ge)),Ba(t)&&(t=_r(t),o=t.map(n).sort(ge)),a.renderer.filter(function(e){e.seriesdataAfterUpdate.forEach(function(e){var t=e.filter(function(e){return Un.POINT_WITHIN_RANGE(e,i,o,a)});l=l.concat(t)})}),l},POINT_WITHIN_RANGE:function(e,i,o,l,t){var s=4<arguments.length&&void 0!==t?t:0,c=l.axes.x.scale,u=l.axes.y.groups[s].scale;return function(e){var t=!0,a=!0;if(Ba(i)){var r=c(l.dataset.getX(e));t=r>=i[0]&&r<=i[1]}if(Ba(o)){var n=u(l.dataset.getY(e,s));a=n>=o[0]&&n<=o[1]}return t&&a}(e)},POINT_WITHIN_DOMAIN:function(e,t){var a=void 0,r=t.plotBrush.domainInfo.x[0].domain;return Ba(r=[r[0],r[r.length-1]])&&(a=r.map(t.axes.x.scale).sort(ge)),Un.POINT_WITHIN_RANGE(e,a,null,t)},FILTER_CHART:function(e,r){r.cache.data={},r.cache.search={},r.eventHandler.bulletEvents=null,r.updateScale&&(Ka(e,function(e,a){rr(e).forEach(function(e,t){r.updateScale(null,a,e.domain,e.index,e.range,!0)})}),r.updatePlotareaProp(),r.plot.renderer.draw(!0,!1),r.dataObject.flattenPoints||r.dataObject.flattenData(),r.drawPlotareaClippath(),r.drawThreshold(!0))}},Xn=function(e,t){if(Ba(e)&&Ba(t))return function(e,a){if(!Ba(e)||!Ba(a))return;var t=e.map(function(e,t){return Qn(e,a[t])});return qn(t.slice().reverse(),[],t),t}(e,t);var a=Qn(e,t);return a&&a.draw(),a},Zn=function(e,t){return e.isD3Selection||(e=qe(e)),function(e,t){return new Zn.GeoMap(e,t)}(e,t)};function Qn(e,t){if(e.isD3Selection||(e=qe(e)),!fr(e.node()))return this.console.warn("No container"),null;var a=e.datum(t),r=null;return a.each(function(e){var t=qe(this);(r=Xn.get(t,e)).showLoading(t)}),r}function qn(e,t,a){var r=e.length,n=e[r-1];r||(a.chartRendered=!0),0<r&&1!=n.drawStarted&&fr(n.container.node())&&(n.draw(),n.drawStarted=!0,function e(t,a,r,n){var i=t.length,o=t[i-1];if(o.chartRendered||o.breakOnErr)a.push(t.pop()),qn(t,a,r);else{null!=n&&clearTimeout(n);var n=setTimeout(function(){e(t,a,r,n)},10)}}(e,t,a))}function Kn(e){return null!=e}function $n(e){e.isD3Selection&&(e=e.node());var t=e.transform.baseVal.consolidate(),a=Kn(t)?t.matrix:null;if(Kn(a)){var r,n,i,o=a.a,l=a.b,s=a.c,c=a.d,u=a.e,d=a.f;return(r=Math.sqrt(o*o+l*l))&&(o/=r,l/=r),(i=o*s+l*c)&&(s-=o*i,c-=l*i),(n=Math.sqrt(s*s+c*c))&&(s/=n,c/=n,i/=n),o*c<l*s&&(o=-o,l=-l,i=-i,r=-r),{translate:[u,d],skew:[180*Math.atan2(l,o)/Math.PI,180*Math.atan(i)/Math.PI],rotate:180*Math.atan2(l,o)/Math.PI,scale:[r,n]}}return{translate:[0,0],skew:[0,0],rotate:0,scale:[0,0]}}function Jn(e,t){for(var a=t.systemConf.metadata,r=a.axes.y[e],n=1,i=r.length-1,o=a.columns[r[n-1]],l=o[o.datatype];n<=i;n++){var s=a.columns[r[n]];l=Ya(l,s[s.datatype])}return l}function ei(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}}function ti(e,t){return{top:qa(e.marginTop,t,5),right:qa(e.marginRight,t,5),bottom:qa(e.marginBottom,t,5),left:qa(e.marginLeft,t,5)}}function ai(e,t,a){return a||(e=ei(e)),t[e]}function ri(e,t,a){return"x"==t?0==a?e.axes.x:(e.axes.x.levels[a-1]=e.axes.x.levels[a-1]||{},e.axes.x.levels[a-1]):"clr"===t?e.axes.clr:(e.axes.y.groups[a]=e.axes.y.groups[a]||{},e.axes.y.groups[a])}function ni(e,t,a){if("inner"==e.tickOrient)return"x"!=t||!a.ismultix}function ii(e){var t=e.chart.axes;return t&&!0===t.rotated}var oi="bar",li="bullet",si="gantt",ci="waterfall",ui="area",di="arearange",hi="line",fi="scatter",pi="geoscatter",gi="bubble",vi="geobubble",yi="bubblepie",mi="geobubblepie",bi="pie",xi="dial",Ci="funnel",ki="pyramid",wi="web",Si="heatmap",Oi="sunburst",Ai="packedbubble",Pi="treemap",Ti="wordcloud",_i="boxplot",Ei={rotatePoint:function(e,t,a){var r=2<arguments.length&&void 0!==a?a:{x:0,y:0},n=e.x,i=e.y,o=r.x,l=r.y;return{x:(n-o)*jt(t)+(i-l)*Ht(t)+o,y:(n-o)*Ht(t)-(i-l)*jt(t)+l}},pointInRectangle:function(e,t){var a,r,n=t.x||0,i=t.y||0,o=n+t.width,l=i+t.height;return r=Ba(e)?(a=e[0],e[1]):(a=e.x,e.y),n<=a&&a<=o&&i<=r&&r<=l},degreeToRadian:function(e){return e/180*Yt},areaOfEllipse:function(e,t){return Yt*e*t},areaOfCircle:function(e){return Yt*e*e},areaOfRect:function(e,t){return e*t},dist:function(e,t){var a=0,r=0;return a=t.x-e.x,a*=a,r=t.y-e.y,Rt(a+(r*=r))}};function Li(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2)}function Mi(e,t,a){return+e.systemConf.canvas.intelligence.dimension[t]<=a}function zi(e,t){return+e.systemConf.canvas.intelligence.dataCount[t]>=e.dataObject.totalnoofdatas}var Di="fadeAll",Ii="fadeOneByOne",Ri="fadeRandom",ji="fade",Hi="sizing",Bi="sizingRandom",Fi="randomOut",Wi="vertical",Vi="verticalAll",Ni="vertPathTween",Yi="vertPathTweenAll",Gi="horizontalAll",Ui="horiPathTween",Xi="strokeTween",Zi="pointTween",Qi="pointbypoint",qi="allseries",Ki="onebyone",$i=H(["geo-location-1","geo-location-2","geo-location-3","geo-flag-1","geo-flag-2","geo-flag-3","geo-pin-1","geo-pin-2","geo-pin-3"]);function Ji(n){return function(e,t,a){if($i.has(n))return function(e,t,a){return a=qa(a,"outer"),{"geo-location-1":{outer:"M 0 "+-.9956*t+"C "+-.1506*t+" "+-.9956*t+" "+-.2845*t+" "+-.8718*t+" "+-.2845*t+" "+-.7279*t+"C "+-.2845*t+" "+-.7179*t+" "+-.2845*t+" "+-.7078*t+" "+-.2811*t+" "+-.6978*t+"C "+-.2744*t+" "+-.594*t+" "+-.2209*t+" "+-.5204*t+" "+-.1673*t+" "+-.4401*t+"C "+-.0971*t+" "+-.3363*t+" "+-.0167*t+" "+-.2159*t+" "+-.0167*t+" "+-.0084*t+"C "+-.0167*t+" "+.0017*t+" "+-.01*t+" "+.0084*t+" 0 "+.0084*t+"S "+.0167*t+" "+.0017*t+" "+.0167*t+" "+-.0084*t+"C "+.0167*t+" "+-.2192*t+" "+.0971*t+" "+-.3363*t+" "+.1673*t+" "+-.4401*t+"C "+.2209*t+" "+-.5204*t+" "+.2744*t+" "+-.594*t+" "+.2811*t+" "+-.6944*t+"C "+.2811*t+" "+-.7045*t+" "+.2845*t+" "+-.7145*t+" "+.2845*t+" "+-.7246*t+"C "+.2845*t+" "+-.8718*t+" "+.1506*t+" "+-.9956*t+" 0 "+-.9956*t+"z",inner:"M 0 "+-1.7333*t+"C "+.1267*t+" "+-1.7333*t+" "+.2333*t+" "+-1.6267*t+" "+.2333*t+" "+-1.5*t+"S "+.1267*t+" "+-1.2667*t+" 0 "+-1.2667*t+"S "+-.2333*t+" "+-1.3733*t+" "+-.2333*t+" "+-1.5*t+"S "+-.1267*t+" "+-1.7333*t+" 0 "+-1.7333*t+"z"},"geo-location-2":{outer:"M 0 "+-1*t+"C "+-.1933*t+" "+-1*t+" "+-.35*t+" "+-.8433*t+" "+-.35*t+" "+-.65*t+"C "+-.35*t+" "+-.31*t+" "+-.0233*t+" "+-.0167*t+" "+-.01*t+" "+-.0033*t+"C "+-.0067*t+" 0 "+-.0033*t+" 0 0 0S "+.0067*t+" 0 "+.01*t+" "+-.0033*t+"C "+.0233*t+" "+-.0167*t+" "+.35*t+" "+-.31*t+" "+.35*t+" "+-.65*t+"C "+.35*t+" "+-.8433*t+" "+.1933*t+" "+-1*t+" 0 "+-1*t+"z",inner:"M 0 "+-1.6667*t+"C "+.2*t+" "+-1.6667*t+" "+.3667*t+" "+-1.5*t+" "+.3667*t+" "+-1.3*t+"S "+.2*t+" "+-.9333*t+" 0 "+-.9333*t+"S "+-.3667*t+" "+-1.1*t+" "+-.3667*t+" "+-1.3*t+"S "+-.2*t+" "+-1.6667*t+" 0 "+-1.6667*t+"z"},"geo-pin-1":{outer:"M "+.2167*t+" "+-.7833*t+"C "+.2167*t+" "+-.9033*t+" "+.12*t+" "+-1*t+" 0 "+-1*t+"S "+-.2167*t+" "+-.9033*t+" "+-.2167*t+" "+-.7833*t+"C "+-.2167*t+" "+-.67*t+" "+-.1267*t+" "+-.5767*t+" "+-.0167*t+" "+-.5667*t+"L "+-.0167*t+" "+-.0167*t+"C "+-.0167*t+" "+-.0067*t+" "+-.01*t+" 0 0 0S "+.0167*t+" "+-.0067*t+" "+.0167*t+" "+-.0167*t+"L "+.0167*t+" "+-.5667*t+"C "+.1267*t+" "+-.5767*t+" "+.2167*t+" "+-.67*t+" "+.2167*t+" "+-.7833*t+"z",inner:"M 0 "+-1.8*t+"C "+-.1267*t+" "+-1.8*t+" "+-.2333*t+" "+-1.6933*t+" "+-.2333*t+" "+-1.5667*t+"C "+-.2333*t+" "+-1.5467*t+" "+-.2467*t+" "+-1.5333*t+" "+-.2667*t+" "+-1.5333*t+"S "+-.3*t+" "+-1.5467*t+" "+-.3*t+" "+-1.5667*t+"C "+-.3*t+" "+-1.7333*t+" "+-.1667*t+" "+-1.8667*t+" 0 "+-1.8667*t+"C "+.02*t+" "+-1.8667*t+" "+.0333*t+" "+-1.8533*t+" "+.0333*t+" "+-1.8333*t+"S "+.02*t+" "+-1.8*t+" 0 "+-1.8*t+"z"},"geo-pin-2":{outer:"M "+.304*t+" "+-.6935*t+"C "+.304*t+" "+-.8607*t+" "+.1672*t+" "+-.9975*t+" 0 "+-.9975*t+"S "+-.304*t+" "+-.8607*t+" "+-.304*t+" "+-.6935*t+"C "+-.304*t+" "+-.532*t+" "+-.1786*t+" "+-.4009*t+" "+-.019*t+" "+-.3914*t+"L "+-.019*t+" "+-.019*t+"C "+-.019*t+" "+-.0076*t+" "+-.0114*t+" 0 0 0S "+.019*t+" "+-.0076*t+" "+.019*t+" "+-.019*t+"L "+.019*t+" "+-.3914*t+"C "+.1786*t+" "+-.4009*t+" "+.304*t+" "+-.532*t+" "+.304*t+" "+-.6935*t+"z",inner:"M "+-.038*t+" "+-1.767*t+"C "+-.228*t+" "+-1.767*t+" "+-.38*t+" "+-1.615*t+" "+-.38*t+" "+-1.425*t+"C "+-.38*t+" "+-1.4022*t+" "+-.3648*t+" "+-1.387*t+" "+-.342*t+" "+-1.387*t+"S "+-.304*t+" "+-1.4022*t+" "+-.304*t+" "+-1.425*t+"C "+-.304*t+" "+-1.5732*t+" "+-.1862*t+" "+-1.691*t+" "+-.038*t+" "+-1.691*t+"C "+-.0152*t+" "+-1.691*t+" 0 "+-1.7062*t+" 0 "+-1.729*t+"S "+-.0152*t+" "+-1.767*t+" "+-.038*t+" "+-1.767*t+"z"},"geo-pin-3":{outer:"M "+.9442*t+" "+-.5854*t+"L "+.5451*t+" "+-.9826*t+"C "+.5376*t+" "+-.9901*t+" "+.5264*t+" "+-.9901*t+" "+.5189*t+" "+-.9826*t+"L "+.4196*t+" "+-.8833*t+"C "+.4159*t+" "+-.8795*t+" "+.414*t+" "+-.8758*t+" "+.414*t+" "+-.8702*t+"S "+.4159*t+" "+-.8608*t+" "+.4196*t+" "+-.857*t+"L "+.4721*t+" "+-.8046*t+"L "+.2248*t+" "+-.5554*t+"L "+.1161*t+" "+-.5236*t+"C "+.1105*t+" "+-.5217*t+" "+.1049*t+" "+-.5161*t+" "+.103*t+" "+-.5105*t+"C "+.1012*t+" "+-.5049*t+" "+.103*t+" "+-.4974*t+" "+.1087*t+" "+-.4917*t+"L "+.2473*t+" "+-.3531*t+"L "+-.0244*t+" "+-.0815*t+"C "+-.0431*t+" "+-.0628*t+" "+-.0431*t+" "+-.0328*t+" "+-.0244*t+" "+-.0159*t+"C "+-.015*t+" "+-.0066*t+" "+-.0037*t+" "+-.0028*t+" "+.0094*t+" "+-.0028*t+"S "+.0337*t+" "+-.0084*t+" "+.0431*t+" "+-.0159*t+"L "+.3147*t+" "+-.2876*t+"L "+.4533*t+" "+-.1489*t+"C "+.4571*t+" "+-.1452*t+" "+.4608*t+" "+-.1433*t+" "+.4665*t+" "+-.1433*t+"L "+.4702*t+" "+-.1433*t+"C "+.4758*t+" "+-.1452*t+" "+.4814*t+" "+-.1489*t+" "+.4833*t+" "+-.1564*t+"L "+.5152*t+" "+-.2651*t+"L "+.7643*t+" "+-.5142*t+"L "+.8168*t+" "+-.4618*t+"C "+.8243*t+" "+-.4543*t+" "+.8355*t+" "+-.4543*t+" "+.843*t+" "+-.4618*t+"L "+.9423*t+" "+-.5611*t+"C "+.9498*t+" "+-.5667*t+" "+.9498*t+" "+-.5779*t+" "+.9442*t+" "+-.5854*t+"z",inner:"M "+.0336*t+" "+-.0747*t+"C "+.0299*t+" "+-.0709*t+" "+.0224*t+" "+-.0709*t+" "+.0187*t+" "+-.0709*t+"C "+.0149*t+" "+-.0709*t+" "+.0112*t+" "+-.0709*t+" "+.0037*t+" "+-.0747*t+"C "+-.0037*t+" "+-.0821*t+" "+-.0037*t+" "+-.0933*t+" "+.0037*t+" "+-.1008*t+"L "+.5451*t+" "+-.6421*t+"L "+.5712*t+" "+-.616*t+"L "+.0336*t+" "+-.0747*t+"zM "+1.6539*t+" "+-.9856*t+"L "+1.5493*t+" "+-1.0901*t+"C "+1.5344*t+" "+-1.1051*t+" "+1.512*t+" "+-1.1051*t+" "+1.4971*t+" "+-1.0901*t+"L "+.9707*t+" "+-.5637*t+"C "+.9669*t+" "+-.56*t+" "+.9632*t+" "+-.5525*t+" "+.9595*t+" "+-.5488*t+"L "+.9109*t+" "+-.3845*t+"L "+.3136*t+" "+-.9819*t+"L "+.4555*t+" "+-1.0229*t+"L "+.6757*t+" "+-.8027*t+"C "+.6832*t+" "+-.7952*t+" "+.6944*t+" "+-.7915*t+" "+.7019*t+" "+-.7915*t+"S "+.7205*t+" "+-.7952*t+" "+.728*t+" "+-.8027*t+"C "+.7429*t+" "+-.8176*t+" "+.7429*t+" "+-.84*t+" "+.728*t+" "+-.8549*t+"L "+.5189*t+" "+-1.064*t+"L "+.9931*t+" "+-1.5381*t+"L "+1.176*t+" "+-1.3515*t+"C "+1.1835*t+" "+-1.344*t+" "+1.1947*t+" "+-1.3403*t+" "+1.2021*t+" "+-1.3403*t+"S "+1.2208*t+" "+-1.344*t+" "+1.2283*t+" "+-1.3515*t+"C "+1.2432*t+" "+-1.3664*t+" "+1.2432*t+" "+-1.3888*t+" "+1.2283*t+" "+-1.4037*t+"L "+1.0155*t+" "+-1.6165*t+"L "+.9147*t+" "+-1.7248*t+"L "+1.0603*t+" "+-1.8704*t+"L "+1.7995*t+" "+-1.1312*t+"L "+1.6539*t+" "+-.9856*t+"z"},"geo-flag-1":{outer:"M "+.7417*t+" "+-.6333*t+"C "+.735*t+" "+-.6467*t+" "+.7283*t+" "+-.6567*t+" "+.7217*t+" "+-.67*t+"C "+.7183*t+" "+-.6767*t+" "+.7117*t+" "+-.6833*t+" "+.7083*t+" "+-.69*t+"C "+.695*t+" "+-.7133*t+" "+.6917*t+" "+-.7433*t+" "+.6983*t+" "+-.77*t+"C "+.705*t+" "+-.7933*t+" "+.7183*t+" "+-.8167*t+" "+.735*t+" "+-.84*t+"C "+.7383*t+" "+-.8467*t+" "+.7417*t+" "+-.85*t+" "+.745*t+" "+-.8567*t+"C "+.7583*t+" "+-.8767*t+" "+.755*t+" "+-.9033*t+" "+.7383*t+" "+-.92*t+"C "+.6617*t+" "+-1*t+" "+.5317*t+" "+-1.0233*t+" "+.4283*t+" "+-.9767*t+"C "+.3983*t+" "+-.9633*t+" "+.375*t+" "+-.9467*t+" "+.3483*t+" "+-.93*t+"C "+.3317*t+" "+-.9167*t+" "+.315*t+" "+-.9067*t+" "+.295*t+" "+-.8967*t+"C "+.215*t+" "+-.85*t+" "+.1083*t+" "+-.85*t+" "+.025*t+" "+-.8967*t+"L "+.025*t+" "+-.9667*t+"C "+.025*t+" "+-.9867*t+" "+.0117*t+" "+-1*t+" "+-.0083*t+" "+-1*t+"S "+-.0417*t+" "+-.9867*t+" "+-.0417*t+" "+-.9667*t+"L "+-.0417*t+" "+-.0333*t+"C "+-.0417*t+" "+-.0133*t+" "+-.0283*t+" 0 "+-.0083*t+" 0S "+.025*t+" "+-.0133*t+" "+.025*t+" "+-.0333*t+"L "+.025*t+" "+-.4267*t+"C "+.0683*t+" "+-.41*t+" "+.115*t+" "+-.4*t+" "+.1617*t+" "+-.4*t+"C "+.2183*t+" "+-.4*t+" "+.2783*t+" "+-.4133*t+" "+.3283*t+" "+-.44*t+"C "+.3483*t+" "+-.45*t+" "+.3683*t+" "+-.4633*t+" "+.3883*t+" "+-.4767*t+"C "+.4117*t+" "+-.4933*t+" "+.435*t+" "+-.5067*t+" "+.4583*t+" "+-.52*t+"C "+.525*t+" "+-.55*t+" "+.615*t+" "+-.54*t+" "+.675*t+" "+-.49*t+"C "+.6917*t+" "+-.4767*t+" "+.7117*t+" "+-.4767*t+" "+.7283*t+" "+-.4833*t+"C "+.745*t+" "+-.4933*t+" "+.7583*t+" "+-.51*t+" "+.755*t+" "+-.53*t+"C "+.7583*t+" "+-.5667*t+" "+.755*t+" "+-.6*t+" "+.7417*t+" "+-.6333*t+"z",inner:"M "+.8633*t+" "+-1.1667*t+"C "+.8033*t+" "+-1.14*t+" "+.7567*t+" "+-1.1067*t+" "+.7033*t+" "+-1.0733*t+"C "+.67*t+" "+-1.0467*t+" "+.63*t+" "+-1.0267*t+" "+.5967*t+" "+-1.0067*t+"C "+.43*t+" "+-.9133*t+" "+.2167*t+" "+-.92*t+" "+.05*t+" "+-1.0067*t+"L "+.05*t+" "+-1.6467*t+"C "+.2433*t+" "+-1.5667*t+" "+.4767*t+" "+-1.5733*t+" "+.6633*t+" "+-1.6733*t+"C "+.7033*t+" "+-1.6933*t+" "+.7433*t+" "+-1.72*t+" "+.7833*t+" "+-1.7467*t+"C "+.83*t+" "+-1.78*t+" "+.8767*t+" "+-1.8067*t+" "+.9233*t+" "+-1.8333*t+"C "+1.07*t+" "+-1.9*t+" "+1.25*t+" "+-1.8667*t+" "+1.37*t+" "+-1.7667*t+"L "+1.3633*t+" "+-1.76*t+"C "+1.33*t+" "+-1.7067*t+" "+1.29*t+" "+-1.6533*t+" "+1.27*t+" "+-1.58*t+"C "+1.25*t+" "+-1.4933*t+" "+1.2567*t+" "+-1.4*t+" "+1.3033*t+" "+-1.32*t+"C "+1.31*t+" "+-1.3*t+" "+1.3233*t+" "+-1.2867*t+" "+1.3367*t+" "+-1.2667*t+"S "+1.3633*t+" "+-1.2267*t+" "+1.37*t+" "+-1.2133*t+"C "+1.3833*t+" "+-1.1867*t+" "+1.39*t+" "+-1.16*t+" "+1.39*t+" "+-1.1267*t+"C "+1.2233*t+" "+-1.22*t+" "+1.0233*t+" "+-1.24*t+" "+.8633*t+" "+-1.1667*t+"z"},"geo-flag-2":{outer:"M "+.6456*t+" "+-.928*t+"L "+.0538*t+" "+-.928*t+"L "+.0538*t+" "+-.9818*t+"C "+.0538*t+" "+-.9926*t+" "+.0466*t+" "+-.9998*t+" "+.0359*t+" "+-.9998*t+"L "+-.0359*t+" "+-.9998*t+"C "+-.0466*t+" "+-.9998*t+" "+-.0538*t+" "+-.9926*t+" "+-.0538*t+" "+-.9818*t+"L "+-.0538*t+" "+-.0134*t+"C "+-.0538*t+" "+-.0027*t+" "+-.0466*t+" "+.0045*t+" "+-.0359*t+" "+.0045*t+"L "+.0359*t+" "+.0045*t+"C "+.0466*t+" "+.0045*t+" "+.0538*t+" "+-.0027*t+" "+.0538*t+" "+-.0134*t+"L "+.0538*t+" "+-.4438*t+"L "+.6456*t+" "+-.4438*t+"C "+.6564*t+" "+-.4438*t+" "+.6635*t+" "+-.451*t+" "+.6635*t+" "+-.4618*t+"L "+.6635*t+" "+-.9101*t+"C "+.6635*t+" "+-.9209*t+" "+.6564*t+" "+-.928*t+" "+.6456*t+" "+-.928*t+"z",inner:"M "+.0359*t+" "+-.0717*t+"L "+-.0359*t+" "+-.0717*t+"L "+-.0359*t+" "+-1.9368*t+"L "+.0359*t+" "+-1.9368*t+"L "+.0359*t+" "+-.0717*t+"zM "+1.2553*t+" "+-.9684*t+"L "+.1076*t+" "+-.9684*t+"L "+.1076*t+" "+-1.7933*t+"L "+1.2553*t+" "+-1.7933*t+"L "+1.2553*t+" "+-.9684*t+"z"},"geo-flag-3":{inner:"M "+.664*t+" "+-.5013*t+"L "+.664*t+" "+-.508*t+"C "+.664*t+" "+-.5113*t+" "+.6607*t+" "+-.5113*t+" "+.6607*t+" "+-.5146*t+"C "+.6607*t+" "+-.5146*t+" "+.6607*t+" "+-.5179*t+" "+.6574*t+" "+-.5179*t+"L "+.5412*t+" "+-.664*t+"L "+.6574*t+" "+-.8101*t+"S "+.6574*t+" "+-.8134*t+" "+.6607*t+" "+-.8134*t+"C "+.6607*t+" "+-.8167*t+" "+.664*t+" "+-.8167*t+" "+.664*t+" "+-.82*t+"L "+.664*t+" "+-.841*t+"C "+.664*t+" "+-.8433*t+" "+.664*t+" "+-.8433*t+" "+.6607*t+" "+-.8466*t+"C "+.6607*t+" "+-.8499*t+" "+.6574*t+" "+-.8499*t+" "+.6574*t+" "+-.8532*t+"S "+.654*t+" "+-.8566*t+" "+.654*t+" "+-.8599*t+"C "+.654*t+" "+-.8599*t+" "+.6507*t+" "+-.8599*t+" "+.6507*t+" "+-.8632*t+"C "+.6474*t+" "+-.8632*t+" "+.6474*t+" "+-.8665*t+" "+.6441*t+" "+-.8665*t+"L "+.3685*t+" "+-.8665*t+"L "+.3685*t+" "+-.8964*t+"C "+.3685*t+" "+-.9163*t+" "+.3552*t+" "+-.9296*t+" "+.3353*t+" "+-.9296*t+"L "+.0332*t+" "+-.9296*t+"L "+.0332*t+" "+-.9628*t+"C "+.0332*t+" "+-.9827*t+" "+.0199*t+" "+-.996*t+" 0 "+-.996*t+"S "+-.0332*t+" "+-.9827*t+" "+-.0332*t+" "+-.9628*t+"L "+-.0332*t+" 0L "+.0332*t+" 0L "+.0332*t+" "+-.5312*t+"L "+.2988*t+" "+-.5312*t+"L "+.2988*t+" "+-.498*t+"C "+.2988*t+" "+-.4781*t+" "+.3121*t+" "+-.4648*t+" "+.332*t+" "+-.4648*t+"L "+.6308*t+" "+-.4648*t+"C "+.6341*t+" "+-.4648*t+" "+.6374*t+" "+-.4648*t+" "+.6441*t+" "+-.4681*t+"C "+.6441*t+" "+-.4681*t+" "+.6474*t+" "+-.4681*t+" "+.6474*t+" "+-.4714*t+"C "+.6474*t+" "+-.4714*t+" "+.6507*t+" "+-.4714*t+" "+.6507*t+" "+-.4748*t+"C "+.654*t+" "+-.4748*t+" "+.654*t+" "+-.4781*t+" "+.654*t+" "+-.4814*t+"C "+.654*t+" "+-.4814*t+" "+.6574*t+" "+-.4847*t+" "+.6574*t+" "+-.488*t+"S "+.6574*t+" "+-.4914*t+" "+.6607*t+" "+-.4947*t+"C "+.6607*t+" "+-.498*t+" "+.6607*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+"C "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5046*t+"C "+.664*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+" "+.664*t+" "+-.5013*t+"z",outer:"M "+.664*t+" "+-.5013*t+"L "+.664*t+" "+-.508*t+"C "+.664*t+" "+-.5113*t+" "+.6607*t+" "+-.5113*t+" "+.6607*t+" "+-.5146*t+"C "+.6607*t+" "+-.5146*t+" "+.6607*t+" "+-.5179*t+" "+.6574*t+" "+-.5179*t+"L "+.5412*t+" "+-.664*t+"L "+.6574*t+" "+-.8101*t+"S "+.6574*t+" "+-.8134*t+" "+.6607*t+" "+-.8134*t+"C "+.6607*t+" "+-.8167*t+" "+.664*t+" "+-.8167*t+" "+.664*t+" "+-.82*t+"L "+.664*t+" "+-.841*t+"C "+.664*t+" "+-.8433*t+" "+.664*t+" "+-.8433*t+" "+.6607*t+" "+-.8466*t+"C "+.6607*t+" "+-.8499*t+" "+.6574*t+" "+-.8499*t+" "+.6574*t+" "+-.8532*t+"S "+.654*t+" "+-.8566*t+" "+.654*t+" "+-.8599*t+"C "+.654*t+" "+-.8599*t+" "+.6507*t+" "+-.8599*t+" "+.6507*t+" "+-.8632*t+"C "+.6474*t+" "+-.8632*t+" "+.6474*t+" "+-.8665*t+" "+.6441*t+" "+-.8665*t+"L "+.3685*t+" "+-.8665*t+"L "+.3685*t+" "+-.8964*t+"C "+.3685*t+" "+-.9163*t+" "+.3552*t+" "+-.9296*t+" "+.3353*t+" "+-.9296*t+"L "+.0332*t+" "+-.9296*t+"L "+.0332*t+" "+-.9628*t+"C "+.0332*t+" "+-.9827*t+" "+.0199*t+" "+-.996*t+" 0 "+-.996*t+"S "+-.0332*t+" "+-.9827*t+" "+-.0332*t+" "+-.9628*t+"L "+-.0332*t+" 0L "+.0332*t+" 0L "+.0332*t+" "+-.5312*t+"L "+.2988*t+" "+-.5312*t+"L "+.2988*t+" "+-.498*t+"C "+.2988*t+" "+-.4781*t+" "+.3121*t+" "+-.4648*t+" "+.332*t+" "+-.4648*t+"L "+.6308*t+" "+-.4648*t+"C "+.6341*t+" "+-.4648*t+" "+.6374*t+" "+-.4648*t+" "+.6441*t+" "+-.4681*t+"C "+.6441*t+" "+-.4681*t+" "+.6474*t+" "+-.4681*t+" "+.6474*t+" "+-.4714*t+"C "+.6474*t+" "+-.4714*t+" "+.6507*t+" "+-.4714*t+" "+.6507*t+" "+-.4748*t+"C "+.654*t+" "+-.4748*t+" "+.654*t+" "+-.4781*t+" "+.654*t+" "+-.4814*t+"C "+.654*t+" "+-.4814*t+" "+.6574*t+" "+-.4847*t+" "+.6574*t+" "+-.488*t+"S "+.6574*t+" "+-.4914*t+" "+.6607*t+" "+-.4947*t+"C "+.6607*t+" "+-.498*t+" "+.6607*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+"C "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5046*t+"C "+.664*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+" "+.664*t+" "+-.5013*t+"z"},"geo-location-3":{outer:"M "+-.3654*t+" "+-.928*t+"L "+-.3654*t+" "+-.3712*t+"C "+-.319*t+" "+-.1392*t+" "+-.1334*t+" "+-.0928*t+" "+.0058*t+" 0C "+.145*t+" "+-.0928*t+" "+.3306*t+" "+-.1392*t+" "+.377*t+" "+-.3712*t+"L "+.377*t+" "+-.928*t+"C "+.0522*t+" "+-1.0208*t+" "+-.0406*t+" "+-1.0208*t+" "+-.3654*t+" "+-.928*t+"Z",inner:"M "+-.5452*t+" "+-1.392*t+"L "+-.174*t+" "+-1.392*t+"L "+.0116*t+" "+-1.7632*t+"L "+.1972*t+" "+-1.392*t+"L "+.5684*t+" "+-1.392*t+"L "+.29*t+" "+-1.1136*t+"L "+.4756*t+" "+-.6496*t+"L "+.0116*t+" "+-.928*t+"L "+-.4524*t+" "+-.6496*t+"L "+-.2668*t+" "+-1.1136*t}}[e][a]}(n,e,t);switch(n){case"asterisk":return"M0 0 C"+-.25*e+" "+-.65*e+" "+.25*e+" "+-.65*e+" 0 0 C"+.5*e+" "+-.633*e+" "+.65*e+" "+-.117*e+" 0 0 C"+.583*e+" "+.083*e+" "+.583*e+" "+.65*e+" 0 0 C"+.25*e+" "+.65*e+" "+-.25*e+" "+.65*e+" 0 0 C"+-.617*e+" "+.65*e+" "+-.55*e+" "+.017*e+" 0 0 C"+-.483*e+" "+-.05*e+" "+-.583*e+" "+-.717*e+" 0 0 Z";case"bean":return"M0 "+.5*e+" A"+.25*e+" "+.5*e+" 0 0 1 0 "+.5*-e+" A"+.15*e+" "+.25*e+" 0 0 1 1 0 A"+.15*e+" "+.25*e+" 0 0 1 0 "+.5*e;case"butterfly":return"M0 "+.25*-e+" C0 "+.25*-e+" "+.85*e+" "+-e+" "+.3*e+" "+.25*e+" C"+.6*e+" "+.7*e+" 0 "+.4*e+" 0 "+.4*e+" M0 "+.25*-e+" C0 "+.25*-e+" "+.85*-e+" "+-e+" "+.3*-e+" "+.25*e+" C"+.6*-e+" "+.7*e+" 0 "+.4*e+" 0 "+.4*e+" M0 "+.25*-e+" L"+.1*e+" "+.5*-e+" M0 "+.25*-e+" L"+.1*-e+" "+.5*-e;case"clover":return"M"+.033*e+" "+-.033*e+" C"+-.133*e+" "+-.966*e+" "+1.066*e+" "+-.116*e+" "+.1*e+" "+.033*e+" C"+.933*e+" "+.233*e+" "+-.133*e+" "+.9*e+" "+.016*e+" "+.083*e+" C"+-.633*e+" "+.6*e+" "+-.6*e+" "+-.6*e+" "+.033*e+" "+-.033*e+" Z";case"cloverFour":return"M"+.05*-e+" "+.05*-e+" C"+.4*-e+" "+.6*-e+" "+.4*e+" "+.6*-e+" "+.05*e+" "+.05*-e+" C"+.6*e+" "+.4*-e+" "+.6*e+" "+.4*e+" "+.05*e+" "+.05*e+" C"+.4*e+" "+.6*e+" "+.4*-e+" "+.6*e+" "+.05*-e+" "+.05*e+" C"+.6*-e+" "+.4*e+" "+.6*-e+" "+.4*-e+" "+.05*-e+" "+.05*-e+" Z";case"cross":return"M"+-e/2+" "+.2*-e+" L"+.2*-e+" "+.2*-e+" L"+.2*-e+" "+-e/2+" L"+.2*e+" "+-e/2+" L"+.2*e+" "+.2*-e+" L"+e/2+" "+.2*-e+" L"+e/2+" "+.2*e+" L"+.2*e+" "+.2*e+" L"+.2*e+" "+e/2+" L"+.2*-e+" "+e/2+" L"+.2*-e+" "+.2*e+" L"+-e/2+" "+.2*e+" Z";case"diamond":return"M"+.4*-e+" 0 L0 "+-e/2+" L"+.4*e+" 0 L0 "+e/2+" Z";case"ellipse":return"M"+.5*-e+" 0 A"+.5*e+" "+.35*e+" 0 0 1 "+.5*e+" 0 A"+.5*e+" "+.35*e+" 0 0 1 "+.5*-e+" 0";case"gear":return"M"+-.088*e+" "+-.365*e+" L"+-.084*e+" "+-.471*e+" L"+.092*e+" "+-.471*e+" L"+.097*e+" "+-.369*e+" L"+.194*e+" "+-.317*e+" L"+.27*e+" "+-.386*e+" L"+.409*e+" "+-.263*e+" L"+.339*e+" "+-.189*e+" L"+.364*e+" "+-.088*e+" L"+.478*e+" "+-.088*e+" L"+.478*e+" "+.097*e+" L"+.369*e+" "+.097*e+" L"+.325*e+" "+.192*e+" L"+.394*e+" "+.265*e+" L"+.254*e+" "+.396*e+" L"+.197*e+" "+.325*e+" L"+.092*e+" "+.364*e+" L"+.092*e+" "+.476*e+" L"+-.084*e+" "+.476*e+" L"+-.084*e+" "+.364*e+" L"+-.185*e+" "+.32*e+" L"+-.263*e+" "+.394*e+" L"+-.388*e+" "+.26*e+" L"+-.317*e+" "+.192*e+" L"+-.354*e+" "+.097*e+" L"+-.473*e+" "+.097*e+" L"+-.473*e+" "+-.091*e+" L"+-.356*e+" "+-.091*e+" L"+-.317*e+" "+-.189*e+" L"+-.384*e+" "+-.258*e+" L"+-.267*e+" "+-.384*e+" L"+-.184*e+" "+-.312*e+" L"+-.088*e+" "+-.365*e+" Z";case"heart":return"M0 "+.2*-e+" C"+.65*e+" "+.65*-e+" "+.65*e+" "+.2*e+" 0 "+.45*e+" C"+.65*-e+" "+.2*e+" "+.65*-e+" "+.65*-e+" 0 "+.2*-e+"Z";case"star":return"M0 "+.5*-e+" L"+.122*e+" "+.12*-e+" L"+.5*e+" "+.12*-e+" L"+.197*e+" "+.12*e+" L"+.306*e+" "+.5*e+" L0 "+.274*e+" L"+.306*-e+" "+.5*e+" L"+.197*-e+" "+.12*e+" L"+.5*-e+" "+.12*-e+" L"+.122*-e+" "+.12*-e+" Z";case"malteseCross":return"M"+.3*-e+" "+.4*-e+" A"+.3*e+" "+.1*e+" 0 0 1 "+.3*e+" "+.4*-e+" L"+.2*e+" "+.2*-e+" L"+.4*e+" "+.3*-e+" A"+.1*e+" "+.3*e+" 0 0 1 "+.4*e+" "+.3*e+" L"+.2*e+" "+.2*e+" L"+.3*e+" "+.4*e+" A"+.3*e+" "+.1*e+" 0 0 1 "+.3*-e+" "+.4*e+" L"+.2*-e+" "+.2*e+" L"+.4*-e+" "+.3*e+" A"+.1*e+" "+.3*e+" 0 0 1 "+.4*-e+" "+.3*-e+" L"+.2*-e+" "+.2*-e+" Z";case"square":return"M"+.5*-e+" "+.5*-e+" L"+.5*e+" "+.5*-e+" "+.5*e+" "+.5*e+" "+.5*-e+" "+.5*e+" Z";case"triangle-up":return"M"+.5*-e+" "+.285*e+" L0 "+.43*-e+" "+.5*e+" "+.285*e+" Z";case"triangle-down":return"M0 "+.43*e+" L"+.5*-e+" "+.285*-e+" L"+.5*e+" "+.285*-e+" Z";case"triangle-right":return"M"+.5*-e+" "+.43*-e+" L"+.285*e+" 0 L"+.5*-e+" "+.43*e+" Z";case"triangle-left":return"M"+.5*e+" "+.43*e+" L"+.285*-e+" 0 L"+.5*e+" "+.43*-e+" Z";case"arrow":return"M"+.5*-e+" "+.2*e+" L0 "+.5*-e+" "+.5*e+" "+.2*e+" "+.25*e+" "+.2*e+" "+.25*e+" "+.5*e+" "+.25*-e+" "+.5*e+" "+.25*-e+" "+.2*e+" Z";case"rocket":return"M"+.5*-e+" "+.5*e+" L0 "+.5*-e+" "+.5*e+" "+.5*e+" 0 "+.25*e+" "+.5*-e+" "+.5*e+" Z";case"nylon":return"M"+-e/2+" "+-e/4+" L"+-e/4+" "+-e/4+" L"+-e/4+" "+-e/2+" M"+-e/4+" 0 L"+-e/4+" "+e/4+" L0 "+e/4+" M0 "+-e/4+" L"+e/4+" "+-e/4+" L"+e/4+" 0 M"+e/4+" "+e/2+" L"+e/4+" "+e/4+" L"+e/2+" "+e/4;case"waves":return"M"+-e+" 0 C"+7*-e/8+" "+-e/4+" "+5*-e/8+" "+-e/4+" "+-e/2+" 0 C"+3*-e/8+" "+-e/4+" "+-e/8+" "+-e/4+" 0 0 C"+e/8+" "+e/4+" "+3*e/8+" "+e/4+" "+e/2+" 0 C"+5*e/8+" "+-e/4+" "+7*e/8+" "+-e/4+" "+3*e/4+" 0";case"woven":return"M"+-e/4+" "+-e/4+" L"+e/4+" "+e/4+" M"+e/4+" "+-e/4+" L"+e/2+" "+-e/2+" M"+-e/4+" "+e/4+" L"+-e/2+" "+e/2+" M"+e/4+" "+3*e/4+" L"+3*e/4+" "+e/4;case"crosses":return"M "+-e/4+" "+-e/4+" L"+e/4+","+e/4+" M"+-e/4+","+e/4+" L"+e/4+","+-e/4;case"caps":return"M"+-e/4+" "+e/4+" L0 "+-e/4+" "+e/4+" "+e/4;case"hexagons":return"M"+-e/2+" 0 L"+-e/4+" 0 M"+e/2+" 0 L"+e/4+" "+-e/2+" L0 "+-e/2+" L"+-e/4+" 0 L0 "+e/2+" L"+e/4+" "+e/2+"Z";case"line":case"horizontal-line":return"M"+.5*-e+" 0 L"+.5*e+" 0";case"diagonal-line-right":return"M"+3*-e/4+" "+-e/4+" L"+-e/4+" "+3*-e/4+" M"+-e/2+" "+e/2+" L"+e/2+" "+-e/2+" M"+e/4+" "+3*e/4+" L"+3*e/4+" "+e/4;case"vertical-line":return"M0 "+-e/2+" L0 "+e/2;case"vertical-line-z":return"M0 0 L0 "+e;case"hexagon":return"M"+.433*e+" "+.25*e+" L"+0*e+" "+.5*e+" L"+-.433*e+" "+.25*e+" L"+-.433*e+" "+-.26*e+" L"+0*e+" "+-.5*e+" L"+.433*e+" "+-.26*e+" Z";case"diagonal-line-left":return"M"+3*-e/4+" "+e/4+" L"+-e/4+" "+3*e/4+" M"+-e/2+" "+-e/2+" L"+e/2+" "+e/2+" M"+e/4+" "+3*-e/4+" L"+3*e/4+" "+-e/4;case"oval":return"M"+-e/2+" 0 A"+e/2+" "+e/2+" 0 0 1 0 "+-e/2+" A"+e/2+" "+e/2+" 0 0 1 "+-e/2+" 0";case"rect":var r=t||0;return"M"+-e/2+" "+-r/2+" L"+e/2+" "+-r/2+" L"+e/2+" "+r/2+" L"+-e/2+" "+r/2+"Z";case"ninja":return"M"+-.267*e+" "+-.367*e+" L"+.167*e+" "+-.133*e+" L"+.433*e+" "+-.267*e+" L"+.2*e+" "+.167*e+" L"+.333*e+" "+.433*e+" L"+-.1*e+" "+.167*e+" L"+-.367*e+" "+.333*e+" L"+-.167*e+" "+-.1*e+" Z";case"whiskers":return function(e,t,a,r){return Ji(e)(t)+" Z "+Ji(a)(r)}("line",e,a.symbol,a.size);default:return"M"+-e/2+" 0 A"+e/2+" "+e/2+" 0 0 1 "+e/2+" 0 A"+e/2+" "+e/2+" 0 0 1 "+-e/2+" 0"}}}function eo(e,t,a,r,n){var i,o=r.color,l=r.strokeWidth,s=r.imageSize,c=r.transform,u=Ji(a.symbol||r.symbol),d=null!=a.imageUrl&&""!==a.imageUrl,h=Ea(a.size,Ea(l,1)),f=h*r.symbolSize.outer,p=h*r.symbolSize.inner,g=null!=c?"translate("+c[0]+","+c[1]+")":null,v=(null!=t?h:f)*(null!=s?s:10);null!=t?(i=sn(n.getPatternSvg().select("defs"),"marker",[1],"#","id",t)).attrs({id:t,orient:0,viewBox:10*-h/2+" "+10*-h/2+" "+10*h+" "+10*h,markerUnits:"userSpaceOnUse",markerWidth:10*h,markerHeight:10*h}):i=e;var y=a.animation,m=i.selectAll("path.outer").nodes().length,b=sn(i,"path",[1],".","class","outer"),x={fill:function(){if(d){var e={name:a.imageUrl,width:v,height:v,x:-v/2,y:-v/2};return"url("+Sa()+"#"+tn.get(tn.svg_patterns,"imageFill",e,{chartObj:n})+")"}return a.outerFillColor||o},"fill-opacity":a.outerFillOpacity,stroke:a.outerStrokeColor||o,"stroke-opacity":a.outerStrokeOpacity,"stroke-width":a.outerStrokeWidth,"stroke-dasharray":on(a.outerDashStyle,a.outerStrokeWidth),"stroke-linecap":ln(a.outerLineCap,a.outerDashStyle)};b.attrs({d:u(d?v:10*f,null,r.custom),transform:g}),!m&&y&&y.enabled?b.styles({"stroke-opacity":0}).transition().delay(y.duration).duration(y.duration).styles(x):b.styles(x);var C=[1],k=a.innerFillColor||o;return!d&&(0!==a.innerStrokeWidth||0!==a.innerFillOpacity&&"transparent"!==k)||(C=[]),sn(i,"path",C,".","class","inner").attrs({d:u(10*p,"inner",r.custom),transform:g}).styles({fill:a.innerFillColor||o,"fill-opacity":a.innerFillOpacity,stroke:a.innerStrokeColor||o,"stroke-opacity":a.innerStrokeOpacity,"stroke-width":a.innerStrokeWidth,"stroke-dasharray":on(a.innerDashStyle,a.innerStrokeWidth),"stroke-linecap":ln(a.innerLineCap,a.innerDashStyle)}),i}function to(o){var e={left:0,top:0,right:0,bottom:0},t=o.behaviouralEvents&&o.behaviouralEvents.eventManager.behaviours||{};if(!o.isAxisCategory||t.PLOT_ZOOM||t.PLOT_BRUSH||t.CHART_SCROLL)return e;var a=o.systemConf.chart.axes.xaxis,r=o.systemConf.chart.axes.yaxis,n=null!=a.minRange&&""!==a.minRange,i=null!=a.maxRange&&""!==a.maxRange,l=r.some(function(e){return null!=e.minRange&&""!==e.minRange}),s=r.some(function(e){return null!=e.maxRange&&""!==e.maxRange});if(n&&i&&l&&s)return e;var c=o.axes.rotated,u=o.systemConf.chart.plot.plotoptions,d=o.canvasarea,h=Ue(o.seriesdata.map(function(e,t){var a=e.plotoptions,r=0,n=o.chartTypes[t].name,i=pa.getValueOfPlotOptions(a?a.marker:null,u[n].marker);/(area|arearange|line)/.test(n)&&i("enabled")&&zi(o,"marker")&&Mi(o,"marker",zt(d.width,d.height))?r=Ea(i("size"),Ea(a?a.strokeWidth:u[n].strokeWidth,1)):n===fi&&(r=Ea(i("size"),2));return 10*r}))/2;return{left:(c?l:n)?e.left:h,top:(c?i:s)?e.top:h,right:(c?s:i)?e.right:h,bottom:(c?n:l)?e.bottom:h}}function ao(e,t,a){if(Xr.IE&&t.enabled)!function(e,t,a){var r=za(a)?a-1:t.repeat||1/0;if(!e.node()||!r)return e.styles({transform:null,opacity:null});var n=(t.type||"twinkle")===ji,i=(t.duration||800)/2,o=p(t.easingType),l=i,s=n?500:0,c=n?0:i,u=n?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},d=n?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};e.transition(),e.attrs(d).transition().delay(s).duration(l).ease(o).attrs(u).transition().duration(c).ease(o).attrs(d).on("end",function(){ao(e,t,r)})}(e,t);else{var r={animation:$t,opacity:$t,transform:$t};if(t.enabled){var n=za(t.repeat)?t.repeat:"infinite",i=t.type||"twinkle",o=(t.duration||800)/1e3,l=("fade"===i?250:0)/1e3,s=t.easingType||"linear",c=sn(qe(gr(a.container.node())).selectAll("div.__baseZC_Container__"),"style",[1]).node(),u="",d="ZC"+ya(t,"blink");switch(i){case"twinkle":u="\n@keyframes "+d+" { 0% {transform: scale(1);}50% {transform: scale(0);}100% {transform: scale(1);} }\n";break;case"fade":u="\n@keyframes "+d+" { 0% {transform: scale(0);opacity: 1;}100% {transform: scale(1);opacity: 0;} }\n",e.styles({transform:"scale(0)",opacity:1})}var h=vr(a.container.node()),f=Jt[h].ANIMATION;f&&za(f[d])||(c.innerHTML+=u,f[d]=!0),e.style("animation",d+" "+o+"s "+s+" "+l+"s "+n).on("animationend",function(){qe(this).styles(r)})}else e.styles(r)}}var ro={};function no(e,t,a){this.data=e,this.dataset=t,this.chartObj=a,this.allChartTypes=null,this.globalChartType=null,this.processedseriesData=a.seriesdata,this.initialize()}ro.saveEncode=function(e,t,a){var r=this.encodes[e]=this.encodes[e]||{},n=r[t];n=n||(r[t]={seriesData:[],seriesIndices:[]});var i=this.processedseriesData[a];n.seriesData.push(i),n.seriesIndices.push(a)},ro.getEncode=function(e,t){var a=this.encodes[e]||{};return 1<arguments.length?a[t=t||0]:a},ro.filterEncode=function(e,t){var a=this.encodes[e]||{};return 1<arguments.length?Or(a).filter(function(e){return t(e)}):a},na.setComponent("defaultDataProcessor",no);var io=no.prototype;function oo(e,t,a,r,n){var i=za(e)&&za(e.events)&&e.events,o=t.events,l=a.systemConf.chart.plot.events;za(n)&&(o=t[n.type]&&t[n.type].events);var s=za(i)&&za(i[r])?i[r]:za(o)&&za(o[r])?o[r]:null!=l?l[r]:null;return void 0===s&&l&&(s=l[r]),s}function lo(e){return e.changedTouches?e.changedTouches[0]:e}function so(e){return e===Ne.bar||e===Ne.stkdbar||e===Ne.bullet||e===Ne.gantt||go(e)&&e!==Ne.geoheatmap||e===Ne.waterfall||e===Ne.boxplot}function co(e){return-1!=lt.dotPlot.indexOf(e)}function uo(e){return lt.bubble.has(e)||lt.bubblePie.has(e)}function ho(e){return bo(e,ci)}function fo(e){return co(e)||e===Ne.bubblepie}function po(e){return e===Ne.sunburst}function go(e){return e===Ne.heatmap||e===Ne.geoheatmap}function vo(e){return-1!=lt.piePlot.indexOf(e)}function yo(e){return vo(e)&&e!==Ne.pie}function mo(e){return e===Ne.geoheatmap}function bo(e,t){return(Fa(e)?ot.get(e):e)===t}function xo(e,t,a,r,n){var i,o,l,s,c=e.dataset,u=e.systemConf.chart.plot.plotoptions.heatmap,d=u.symbol&&Ji(u.symbol),h=c.getX(t),f=c.getY(t,n),p=e.dataObject.hasZaxis?e.zscale(c.getZ(t)||e.zscale.domain()[0]):1,g=a.bandwidth(),v=r.bandwidth(),y=u.padding||0,m=g-2*zt(y,.4*g),b=v-2*zt(y,.4*v);return e.axes.rotated?(l=b*p,s=m*p,d&&(l=s=zt(l,s)),o=a(h)+(g-s)/2,i=r(f)+(v-l)/2):(l=m*p,s=b*p,d&&(l=s=zt(l,s)),i=a(h)+(g-l)/2,o=r(f)+(v-s)/2),{x:i,y:o,width:l,height:s}}function Co(n,e,i){if(Pn.isQuantileColorScale(n)){var o=n.chartTypes[0].value===Ne.pyramid?n.seriesdata[0].data[0]:$t;e.style("pointer-events",function(e,t){var a=o?o[o.length-1-t]:e.data||e,r=n.dataset.getClr(a);if(pa.getVal(i,arguments)||!jn(r,n))return Qt})}}function ko(e,t,a,r,n,i,o,l,s,c,u,d){var h=null,f=n.plotarea,p=n.plotarea_approx,g=n.isAxisCategory||n.dataObject.isPolarAxisCategory||n.isGeoMap;i=i||{},l&&function(e){return e.systemConf.tooltip.crosshair.type!=Qt}(n)?o?h={actLeft:a+f.left,actTop:t.y+f.top,top:t.y,left:c?f.width:t.x}:(h={top:0,actTop:f.top+r},c?(h.left=t.x,h.actLeft=t.x+f.left):(h.left=a,h.actLeft=f.left+a)):c||!g?(h={left:t.x,top:t.y},o?(h.actLeft=a+f.left,h.actTop=t.y+f.top):(h.actLeft=t.x+f.left,h.actTop=r+f.top)):h={left:a,top:r,actLeft:f.left+a,actTop:f.top+r};var v=t.x-e.clientX,y=t.y-e.clientY;return h.dLeft=v+f.left,h.dTop=y+f.top,h.left-=v,h.top-=y,h.distance=n.dataObject.isBubbleEnabled&&!c&&i._size?i._size/2:0,g||(h.dLeft=v,h.dTop=y),h.helpers={seriesindex:i.seriesIndex,subseriespos:Ba(i.subSeriesIndex)?i.subSeriesIndex[i.seriesIndex]:i.subSeriesIndex,subseriesLength:Ba(i.subseriesLength)?i.subseriesLength[i.seriesIndex]:i.subseriesLength,itempos:i.sortedItemIndex||i.itemIndex,itemposShared:i.itemPosShared,color:n.seriesColor,tooltipSharedInfo:s,tooltipShared:l,svgFillFunc:d||n.renderer[i.seriesIndex]&&n.renderer[i.seriesIndex].fillColorFunc,inheritColors:n.dataObject.isWaterfallEnabled,d:n.dataObject.isHierarchy||!g?i.data&&i.data.data||i.data:i,renderTo:"plot"},u&&(h.dLeft+=p.x,h.dTop+=p.y),h}function wo(e,t){return e.userdata.metadata.columns.filter(function(e){return e.dataindex===t.dataindex})[0]}function So(e,t,a){return Ei.pointInRectangle({x:e,y:t},a)}function Oo(e,t,a){var r=null,n=e.systemConf.chart.plot.plotoptions[ot.get(t)],i=fo(t)||t===Ne.line,o=!i,l=n&&n.events&&n.events.triggerOffset;if(za(l))r=l;else if(uo(t)||"bubble"==t){if(3===arguments.length)r=a;else r=(e.zscale?e.zscale.range()[1]/2:10)+(e.dataObject.isCombinationalChart?10:50)}else r=o||e.systemConf.tooltip.sharedSeriesInfo?null:e.dataObject.isCombinationalChart&&i?10:50;return r}function Ao(e,t){var a=jn(e.dataset.getClr(t),e),r=!function(e,t){var a=e.dataset,r=no.helpers,n=r.isCatNull(a,"x"),i=r.isCatNull(a,"y",t.yaxisOrder);return e.seriesdata[0].type!=Ne.stkdarea&&(null==t||n(a.getX(t))||i(a.getY(t,t.yaxisOrder)))}(e,t),n=!t._filter;return a&&r&&n}function Po(e){var t="x",a="y";return e&&(t="y",a="x"),[t,a]}function To(e){if(e.isD3Selection&&(e=e.node()),Xr.FIREFOX&&e.ownerSVGElement){for(var t,a=e.ownerSVGElement,r=c.event,n=a.getBoundingClientRect();t=r.sourceEvent;)r=t;r.changedTouches&&(r=r.changedTouches[0]);var i=function(e){e.isD3Selection&&(e=e.node());for(var t=e.ownerSVGElement,a=[0,0];e!==t;){var r=$n(e).translate;a[0]+=r[0],a[1]+=r[1],e=e.parentNode}return a}(e),o=_slicedToArray(i,2),l=o[0],s=o[1];return[l=r.clientX-n.left-e.clientLeft-l,s=r.clientY-n.top-e.clientTop-s]}return c.mouse.apply(this,arguments)}function _o(e,t){var a=To(e);return null==t.touches||Xr.ANDROID||!Xr.uiwebview||Xr.WKWebView||(a[0]+=window.pageXOffset,a[1]+=window.pageYOffset),a}function Eo(e){var t=e.eventHandler.trackerElement.node(),a=e.eventHandler.mousePos=_o(t,nt()),r=ba(t);return{x:a[0]-r.x,y:a[1]-r.y}}function Lo(e,t,a,r,n){var i=t&&t[r]||n;za(i)&&Ta(i,nt(),e)}function Mo(e,t,a,r,n){n=(r=r||{}).namespace||n,Xr.isMouseDevice&&t&&function(e,t,a){if(null==e.node())return;t="."+t;var r={};for(var n in a)r[n+t]=a[n],e.on(n+t,r[n+t]);a=r,e.on(a)}(e,n,t),Xr.isTouchDevice&&a&&function(e,t,a,r){if(null==e.node())return;var p=r.touchleave,n=r.target,g=r.chartObj,v=g&&g.systemConf.chart.plot.events||{},i=!1!==r.preventDefault,y=!("plot"===n&&0==v.isFocusedTouchmove);t=null!=t?"."+t:"";var m,b,x,C,o,k={},w=0,l=0,S=null,O=!1,s=(a.touchmove,a.touchend),c=a.tap,u=a.dbltap,A=a.singletouchmove,P=a.doubletouchmove;o="plot"===n&&oo(null,g.systemConf.chart.plot.plotoptions[g.chartTypes[0].name],g,"taphold")?(C=a.tap,s):(C=a.taphold,a.tapholdend);var d="touchstart"+t,T="touchmove"+t,_="touchend"+t,h={};for(var f in h[d]=function(){if(0!=v.enabled&&(!(1<nt().touches.length)&&(k.time=new Date,k.location=_o(this,nt()),S=null,b=O=!1,C))){var e=nt(),t=arguments,a=this;x=setTimeout(function(){nt(e),g&&(g.zcEventType="taphold"),C.apply(a,t),b=!0},500)}},h[T]=function(){if(0!=v.enabled){var e=nt().touches;if(C){var t=_o(this,nt());if(30<(null!=k.location?E(k.location[0],k.location[1],t[0],t[1]):null))clearTimeout(x);else if(b)return L(),!1}if(1<e.length)2==e.length&&P&&(O=!0,P.apply(this,arguments),L());else{var a=(new Date).getTime();if(S=S||a,p&&null!=document.elementFromPoint){var r=0==w||50<a-w,n=e[0],i=document.elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset);if(!r||"svg"===i.localName||null!=i.id.match(/tooltip/gi))return void L();if(i!=this){if(m!=i){var o=m||this,l=(c=qe(o)).on(_),s=c.datum();h=null!=(h=null!=(d=c.attr("id")||c.attr("class"))?d.match(/(\d)+$/gi):null)&&null!=h[0]?parseInt(h[0]):null,null!=l&&null!=h&&l.call(o,s,h)}var c,u=(c=qe(i)).attr("class");g.chartTypes[0].value!==Ne.dial||"inner"!==u&&"outer"!==u||(c=qe(i.parentNode));var d,h,f=c.on(T);s=c.datum();return h=null!=(h=null!=(d=c.attr("id")||c.attr("class"))?d.match(/(\d)+$/gi):null)&&null!=h[0]?parseInt(h[0]):null,void(null!=f&&null!=h&&(f.call(i,s,h),m=i,w=a))}}y&&S-k.time<100||A&&(g&&(g.zcEventType="touchmove"),A.apply(this,arguments),L())}}},h[_]=function(){if(0!=v.enabled){var e=nt().touches;if(C&&(clearTimeout(x),b))return b=!1,L(),o&&o.apply(this,arguments),!1;if(!(1<e.length)){if(O&&P&&s)return O=!1,s.apply(this,arguments),void L();var t=new Date,a=_o(this,nt()),r=t-k.time,n=null!=k.location?E(k.location[0],k.location[1],a[0],a[1]):null,i=t-l;i<=350&&0<i&&n<=30?(u&&(g&&(g.zcEventType="doubletap"),u.apply(this,arguments),L()),l=0):r<=150&&n<=30?c&&(g&&(g.zcEventType="tap"),c.apply(this,arguments),L()):s&&s.apply(this,arguments),l=t}}},h)e.on(f,h[f]);function E(e,t,a,r){return Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2))}function L(){var e=nt();i&&e.cancelable&&e.preventDefault()}}(e,n,a,r)}function zo(e,t,a){if(t=null!=t&&""!=t?"."+t:"",Xr.isMouseDevice){if(""!==t)e.on(t,null);else for(var r in a)e.on(r,null);a=null}}function Do(r){function e(){r.style("display",Qt);var e=document.elementFromPoint(nt().clientX,nt().clientY),t=qe(e),a=e&&e.__on&&e.__on.filter(function(e){return e.type===nt().type})[0].value;return r.style("display",$t),qe(this).style("cursor",a?t.style("cursor"):$t),a&&a.call(e,t.datum(),t.attr("index")||0),!1}Mo(r,{mousemove:e,mouseout:e,click:e,dblclick:e},{singletouchmove:e,touchend:e,tap:e,dbltap:e})}function Io(e){return{left:-e.scrolledX||0,top:-e.scrolledY||0,right:Ro(e,"width"),bottom:Ro(e,"height")}}function Ro(e,t,a){a=a||e.plotarea;var r=e.systemConf.chart[t];return null==r||isNaN(r)?a[t]:Mt(a[t],+r)}io.initialize=function(o){var l=this,e=l.data,s=l.globalChartType=e.seriesdata&&e.seriesdata.type,t=e.metadata,c=l.dataset,a=l.processedseriesData,u=no.helpers;if(c.setDataObj(l),c.seriesTypes=H(),l.totalnoofdatas=0,l.encodes={},l.markerSize={},Ba(a)){var d=u.groupByDataIndices(t);l.allChartTypes=l.allChartTypes||u.getAllChartTypes(e),a.forEach(function(e,t){var a=e.disabled,r=e.data,n=u.is3D(r),i=u.getChartType(e.type||s,An);c.seriesTypes.add(i),l.hasLevelMarker=l.hasLevelMarker||i==Ne.bullet||i==Ne.dial,l.isAxisCategory=l.isAxisCategory||0<=lt.axis.indexOf(i),l.isPolarAxisCategory=l.isPolarAxisCategory||i==Ne.web,l.isNonAxisMultiSeriesCategory=l.isNonAxisMultiSeriesCategory||0<=lt.nonaxismultiseries.indexOf(i),lt.markerPlot.has(i)&&(l.markerSize[ot.get(i)]=H()),"addorremoveseries"!==o&&!n&&Ba(r)&&(r=l.convertTo3DArray(e,d,i)),!a&&Ba(r)&&l.totalDataCount(r)})}},$a(io,ro);var jo=function(){};jo.polygon=function(e,t,a,r,n,i,o){var l=jo.createElement(Rr,t,i,o);return jo.setAttributes(l,e,["d"]),t},jo.rect=function(e,t,a,r,n,i,o){var l=jo.createElement("rect",t,i,o);return jo.setAttributes(l,e,["x","y","width","height"]),t},jo.circle=function(e,t,a,r,n,i,o){var l=jo.createElement(jr,t,i,o);return jo.setAttributes(l,e,["cx","cy","r"]),t},jo.createElement=function(e,t,a,r){var n=a.getPatternSvg();return xn(e,".clip",[1],xn("clipPath","#"+t,[1],(Xr.SAFARI?a.svg||n:r||n).select("defs")))},jo.setAttributes=function(t,a,e){e.forEach(function(e){t.attr(e,a[e])})},tn.svg_clips=jo;function Ho(){}function Bo(e){var t,r=e.axes.rotated,a=e.plotarea,n=r?e.scrolledY:e.scrolledX;if(r)t={x:-a.left,y:n,width:a.width+a.left,height:a.height};else{var i=0;if(e.dataObject.hierarchical)for(var o=0;o<e.axes.x.count;o++){i+=ri(e,"x",o).ticks.preCalcAxisLen}else i=e.axes.x.ticks.preCalcAxisLen;t={x:n,y:-a.height,width:a.width,height:i+e.plotarea.height}}t.name="rect_axis",t.id=e.id;var l="default_scroll_axes_clip"+e.id;return jo.rect(t,l,null,null,null,e),e.container.selectAll("g.x-axis").selectAll("g.axisgroup").each(function(){var e=qe(this),t=-n,a=0;r&&(a=-n,t=0),e.attrs({transform:"translate("+t+","+a+")","clip-path":"url(#"+l+")"}),e.selectAll("g.axisgroup").attr("clip-path","")}),l}function Fo(e,t){var a=e.plotarea,r=a.left,n=a.top,i=a.width,o=a.height;return t&&(r=n=0),za(e.divScroll)&&(r-=e.scrolledX,n-=e.scrolledY,i+=e.scrolledX,o+=e.scrolledY),{x:r,y:n,left:r,top:n,width:i,height:o}}Ho.prototype.defaultScroll=function(u,e){if(u.isAxisCategory&&(u.systemConf.chart.width||u.systemConf.chart.height)){var d=u.axes.rotated,h=u.plotarea,t=Ro(u,"width")-h.width,a=Ro(u,"height")-h.height,r=u.container.selectAll(".d3container").selectAll(".zohocharts_scroll"),n=+r.attr("scrollbarSize");Bo(u);var i={left:h.left+Zt,top:h.top+Zt,height:h.height+(d?0:n)+Zt,width:h.width+(d?n:0)+Zt,"overflow-y":d?"auto":"hidden","overflow-x":d?"hidden":"auto"};if(r.styles(i).on("scroll",function(e){var t=nt().srcElement||nt().target,a=d?t.scrollTop:t.scrollLeft;u.scrolledY=d?a:0,u.scrolledX=d?0:a,nt().clientX=nt().clientX||0,nt().clientY=nt().clientY||0,u.eventHandler.tooltipElement.hide(),u.eventHandler.handlers.mouseout.call(u.eventHandler),u.cache.data={},u.cache.search={},s(a)}),u.canvasScrollGroup&&u.canvasScrollGroup.styles(i),Xr.CHROME){var o=u.canvasarea;this.fixScrollView(!1,{width:o.width+(d?0:t),height:o.height+(d?a:0)},u)}r.selectAll(".child").styles({height:h.height+(d?a:0)+Zt,width:h.width+(d?0:t)+Zt,"pointer-events":Qt,margin:0,padding:0,"background-color":qt}),u.eventHandler.addListeners(r);var l=d?u.scrolledY:u.scrolledX;l&&"addorremoveseries"===e&&s(l)}function s(e){var t=u.container.selectAll(".seriesholder"),a=u.container.select(".seriesClippathholder").attr("clip-path"),r=$n(t).translate,n=d?r[0]:h.left-e,i=d?h.top-e:r[1];t.attr("transform","translate("+n+","+i+")"),u.container.selectAll(".labelholder").attr("transform","translate("+n+","+i+")"),u.container.selectAll(".eventgroup").attr("transform","translate("+(d?0:-e)+","+(d?-e:0)+")"),u.container.selectAll("rect.eventhandler").attr("transform","translate("+(d?0:e)+","+(d?e:0)+")");var o="translate("+(d?0:-e+Zt)+","+(d?-e+Zt:0)+")";u.container.selectAll("canvas").style("transform",o),u.container.selectAll("canvas").style(Xr.prefix.css+"transform",o),u.drawPlotareaClippath();var l=d?{y:-e,height:h.height+e}:{x:-e,width:h.width+e};u.eventHandler.trackerElement.attrs(l).attr("clip-path",a),Bo(u);var s={name:"rect_highlight",id:u.id};d?(s.x=-h.left,s.y=e,s.width=h.width+h.left):(s.x=e,s.y=h.top,s.width=h.width),s.height=h.height;var c="default_scroll_highlight_clip_"+u.id;jo.rect(s,c,null,null,null,u),u.container.selectAll("#zcareahighlight").attr("clip-path","url(#"+c+")")}},Ho.prototype.initialize=function(e){if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){e.plotarea;e.scrolledX=e.scrolledX||0,e.scrolledY=e.scrolledY||0;var t={overflow:"scroll",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)","box-sizing":"content-box","-webkit-tap-highlight-color":qt,"-webkit-overflow-scrolling":"touch"},a=sn(e.container.selectAll(".d3container"),Br,[1],".","class","zohocharts_scroll");a.styles(t),sn(a,Br,[1],".","class","child");var r=e.axes.rotated,n=e.defaultScroll,i=a.node(),o=r?i.offsetWidth-i.clientWidth:i.offsetHeight-i.clientHeight;a.attr("scrollbarSize",o),n||((n=e.defaultScroll={}).tickmarkSize=+e.systemConf.chart.axes.xaxis.tickmark.size,n.marginRight=+e.systemConf.chart.marginRight),"canvas"===e.systemConf.chart.plot.renderer.mode.toLowerCase()&&(e.canvasScrollGroup=xn("div",".canvas_scroll_group",[1],e.chartParentElement,".static").styles(t)),r?(e.plotarea.bottom+=o,e.plotarea.width-=o):e.systemConf.chart.axes.xaxis.tickmark.size=+n.tickmarkSize+o}},Ho.prototype.fixScrollView=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];a.svg.styles({width:t.width+Zt,height:t.height+Zt}),a.d3container.style("overflow",e?null:"hidden")};var Wo="80%",Vo="20%",No="20%",Yo="100%",Go="30%",Uo="30%",Xo="center",Zo="left",Qo="right",qo="bottom",Ko="top",$o="fixedTop",Jo="vertical",el="horizontal",tl="inner",al="outer",rl="start",nl="middle",il="end",ol={center:nl,right:il,left:rl},ll={};function sl(e){var t=cl(e),a=t.vAlign,r=t.hAlign,n=0,i=0;return"horizontal"===t.layout?"top"===a||"bottom"===a?(n=Yo,i=Vo):"center"===a&&(n=Go,i=Wo):"left"===r||"right"===r?(n=No,i=Wo):"center"===r&&(n=Yo,i=Uo),{width:n,height:i}}function cl(e){var t=e.hAlign,a=e.vAlign,r=e.layout,n=e.x,i=e.y,o=za(n)&&za(i);return"center"===t&&"center"===a&&(t="right"),o&&(t=Zo,a=Ko),za(r)||(r=o?"vertical":"top"===a||"bottom"===a?"horizontal":"vertical"),{hAlign:t,vAlign:a,layout:r,floating:o}}function ul(e,t){var a=1<arguments.length&&void 0!==t?t:[],r="zc-priority";if(1===arguments.length)return JSON.parse(e.attr(r))||[];e.attr(r,Wa(a))}function dl(e,t,a){var r=2<arguments.length&&void 0!==a?a:"color",n=cl(e),i=n.vAlign,o=n.floating,l=Mi(t,"legend",t.canvasarea[i===Ko||i===qo?"height":"width"]);return!(!o&&!l||!function(e,t){switch(e){case"color":if(Pn.isQuantileColorScale(t))return!0;var a=t.isAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap;return a?t.seriesdata.some(function(e){return!ll.isHiddenItem(e)&&e.seriesname!==ct}):t.chartTypes[0].value!==Ne.dial;default:return!0}}(r,t))&&e.enabled}function hl(e){var t,a,r,n,i=e.systemConf.legend,o=ll.isContinousLegend(e),l=e.legendarea.element.node(),s=za(i.x)&&za(i.y),c=cl(i),u="vertical"===c.layout,d=!u,h=0,f=0,p=c.hAlign,g=c.vAlign;if(o){var v=ba(l);t=v.width,a=v.height,r=v.x,n=v.y}else t=l.offsetWidth,a=l.offsetHeight,r=l.offsetLeft,n=l.offsetTop;function y(){f=a+i.marginTop+i.marginBottom,e.chartarea.height-=f,e.plotarea.height-=f,"top"===i.vAlign&&(e.chartarea.top+=f,e.plotarea.top+=f),e.legendarea.adjust="x"}function m(){h=t+i.marginLeft+i.marginRight,e.chartarea.width-=h,e.plotarea.width-=h,"left"===i.hAlign&&(h=t+i.marginLeft+i.marginRight,e.chartarea.left+=h,e.plotarea.left+=h),e.legendarea.adjust="y"}s||(d?"top"===g||"bottom"===g?y():"center"===g&&m():u&&("left"===p||"right"===p?m():"center"===p&&y())),e.legendarea.x=r,e.legendarea.y=n,e.legendarea.width=t,e.legendarea.height=a}function fl(e,t,a){var r=2<arguments.length&&void 0!==a?a:{},n=t.width-e.marginLeft-e.marginRight,i=t.height-e.marginTop-e.marginBottom,o=sl(e);return{maxWidth:mr(r.maxWidth||e.maxWidth||o.width,n),maxHeight:mr(r.maxHeight||e.maxHeight||o.height,i)}}function pl(e,t,a){return{w:e=e||a.maxWidth,h:t=t||a.maxHeight}}ll.getLegendData=function(e){if(Pn.isQuantileColorScale(e)){var t=e.systemConf.legend.colorBand.ranges;if(t&&t.length)return t}return e.isAxisCategory||e.isNonAxisMultiSeriesCategory||e.isGeoMap?e.seriesdata:e.dataObject.isFlowChartCategory?e.dataObject.layoutData.legend:e.seriesdata[0].data[0]},ll.getLegendDataLength=function(e,t){return e.isAxisCategory||e.isNonAxisMultiSeriesCategory?t.filter(function(e){return!ll.isHiddenItem(e)}).length:t.length},ll.isHiddenItem=function(e){return e&&e.hideInLegend},ll.getClr=function(e,t,a){return e&&a.color||t},ll.updateBubblePieData=function(a,r,n){n.dataObject.pieWithAxis&&a.data.forEach(function(e){var t=yo(n.chartTypes[r].value);e.forEach(function(e){e.disabled=a.disabled||!t||e.dummy})})},ll.updateHierarchyData=function(e,t,a){a.dataObject.isHierarchy&&(a.systemConf.seriesdata.chartdata[t].disabled=e.disabled)},ll.toggleChartEvents=function(e,t){var a=t?null:Qt,r=[];e.svg?((e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&r.push(e.eventHandler.trackerElement),r.push(e.svg)):r.push(e.container),r.forEach(function(e){e.style("pointer-events",a)})},ll.fadeChart=function(e,t,a){var r=t.container.selectAll("g.chartgroup,svg.static,canvas.zc-canvas,canvas.zc-labelholder-canvas,div.zcnotes");r.style("opacity",e?$t:a),ul(r,e?$t:["opacity"])},ll.isDisabled=function(e,t,a){return t||a?e.disabled:!t},ll.isAllEnabled=function(e,t){return t?!e.filter(function(e){return e.disabled}).length:t},ll.getFilterBoxSize=function(e,t){var a=qa(e.size,t);return[qa(e.width,a),qa(e.height,a)]},ll.updateData=function(e,t,a){Pn.isQuantileColorScale(a)?a.axes.clr.scale=it.getScale(a,a.dataObject,null,null,null,a.dataset,"clr"):(ll.updateBubblePieData(e,t,a),ll.updateHierarchyData(e,t,a),a.dataObject.data=a.systemConf)},ll.isContinousLegend=function(e){if(Pn.isQuantileColorScale(e)){var t=_n(e.systemConf.legend,e);return"continuousDiscrete"===t||"continuous"===t}return!1},ll.getColorBandDimension=function(e,t,a){var r=a.chartarea,n=e,i=cl(n),o=n.colorBand,l="horizontal"===i.layout,s=t.maxWidth,c=t.maxHeight,u=o.width,d=o.height;if(d=l?(u=u||"40%",d||14):(u=u||14,d||"70%"),!t.adjust){var h=sl(n);s=h.width,c=h.height}if(s=mr(s,r.width),c=mr(c,r.height),t.adjust){l?s*=.8:c*=.8}return u=mr(u,r.width),d=mr(d,r.height),[u=zt(u,s),d=zt(d,c)]},ll.getOrient=function(e){var t=cl(e),a=t.hAlign,r=t.vAlign,n=t.floating,i=t.layout===el;return n?i?qo:Qo:i?{top:"top",center:"bottom",bottom:"bottom"}[r]:{left:"left",center:"right",right:"right"}[a]},ll.getLabelIndex=function(a,e,t){var r,n=e.stops,i=e.ranges,o=t.dataset.getDataType("clr")===Sn;return i&&i.length?i.some(function(e,t){if(Ba(e)?Ba(a)?e[0]===a[0]&&e[1]===a[1]:e[0]===a:e===a)return r=t,!0}):!o&&n&&n.length&&n.some(function(e,t){if(e===a)return r=t,!0}),r},ll.hexToRGB=function(e){if(e&&-1==e.toString().indexOf("#"))return e;var t=ja(Ln(e).replace(/#/g,""),16);return"rgb("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+")"},ll.filterSelectionByColor=function(e,a,r,n){if(za(r)){function i(e){var t=e.data||e;return n.dataset.getClr(t)}var o,t=n.systemConf.legend.colorBand.ranges,l=n.axes.clr.scale;if(t&&t.length){var s=t[r],c=n.dataset.getDataType("clr")===Sn;if(1===s.length&&!c){var u=wa(l.domain());u.splice(0,2),s=[u[2*r],u[2*r+1]]}return e.filter(function(e){var t=i(e);return o=jn(t,n,l),c?o=o&&t===s[0]:(o=o&&t>=s[0]&&t<=s[1],t===s[0]&&(o=o&&Bn(n,r)===l(t)),t===s[1]&&(o=o&&Bn(n,r)===l(t))),a?o:!o})}return e.filter(function(e){var t=i(e);return o=jn(t,n,l,null,r),a?o:!o})}return e},ll.isReversedColorAxis=function(e){return e.colorAxis&&e.colorAxis.reversed},ll.hasPatternPallete=function(e){var t=e.patternPallete;return t&&t.length};function gl(){}(gl.colorpallete=$()).set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),gl.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),gl.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),gl.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),gl.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),gl.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),gl.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),gl.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),gl.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),gl.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),gl.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),gl.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),gl.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),gl.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),gl.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),gl.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),gl.patternPallete=$(),(gl.imagePallete=$()).set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),gl.imagePallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),gl.imagePallete.set("stones",["01.jpg","02.jpg","03.jpg"]),Kr("hatch","diagonal-line-right","5","1","null","white","1","1"),Kr("hatchDash","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,3"),Kr("thinThickHatch","square,diagonal-line-right,diagonal-line-right","10,10,10","1,1,3","transparent,null,null",qt,"1","1","0,2.5,0"),Kr("thinThickHatchLeft","square,diagonal-line-left,diagonal-line-left","10,10,10","1,1,3","transparent,null,null",qt,"1","1","[0,[2.5,-2.5],0]"),Kr("thickHatch","diagonal-line-right","5","3","null","white","1","1"),Kr("thinHatch","diagonal-line-right","2","1","null","white","1","1"),Kr("hatchLeft","diagonal-line-left","5","1","null","white","1","1"),Kr("horizontalStripes","horizontal-line","5","1","null","white","1","1"),Kr("thinHorizontalStripes","horizontal-line","2","1","null","white","1","1"),Kr("verticalStripes","vertical-line","5","1","null","white","1","1"),Kr("thinVerticalStripes","vertical-line","2","1","null","white","1","1"),Kr("crossStripes","vertical-line,horizontal-line","5","1","null","white","1","1"),Kr("tinyHatchfill","square,diagonal-line-right","5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("hatchfill","square,diagonal-line-right","10","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("hatchLeftfill","square,diagonal-line-left","10","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("hatchDashfill","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","null,transparent","1","1","0,3"),Kr("tinyHatchLeftfill","square,diagonal-line-left","5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("horizontalStripesfill","square,horizontal-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("verticalStripesfill","square,vertical-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("crossStripesfill","square,square","5,5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("checkerBoard","square,square,square","10,5,5","1",qt,"transparent,null,{{brighter}}","1","1","0,0,5"),Kr("circle","circle","10","1","null","white","1","1"),Kr("tinyCircle","circle","5","1","null","white","1","1"),Kr("crossCircle","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}",qt,"1","1","0,0,5"),Kr("floatingCircle","square,circle","10,5","1","transparent,{{brighter}}",qt,"1","1","0,2.5"),Kr("dot","square,circle","5,2.5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,1.25"),Kr("dotSquare","square,circle","10,2.5","1","null,{{brighter}}","transparent,transparent","1","1","0,3.75"),Kr("circlefill","square,circle","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("crossCirclefill","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","null,{{brighter}},null","1","1","0,0,5"),Kr("floatingCirclefill","square,circle","10,5","1","transparent,{{brighter}}","null,transparent","1","1","0,2.5"),Kr("dotfill","square,circle","5,2.5","1","transparent,{{brighter}}","null,transparent","1","1","0,1.25"),Kr("square","square","5","1","null","white","1","1"),Kr("squarefill","square","5","1","{{brighter}}","null","1","1"),Kr("star","star","10","1","null","white","1","1"),Kr("starfill","square,star","10,5","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("wave","waves","5","1","null","white","1","1"),Kr("wavefill","square,waves","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("cap","caps","5","1","null","white","1","1"),Kr("capfill","square,caps","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Kr("nylon","nylon","5","1","null","white","1","1"),Kr("nylonfill","square,nylon","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),gl.patternPallete.set("stripes-fill",["hatchfill","hatchDashfill","checkerBoard","horizontalStripesfill","verticalStripesfill","crossStripesfill"]),gl.patternPallete.set("stripes",["hatch","thinThickHatch","hatchLeft","hatchDash","horizontalStripes","crossStripes","verticalStripes","thickHatch","thinHatch","thinVerticalStripes","thinHorizontalStripes"]),gl.patternPallete.set("dotted",["circle","tinyCircle","crossCircle","floatingCircle","dot"]),gl.patternPallete.set("dotted-fill",["circlefill","crossCirclefill","floatingCirclefill","dotfill"]),gl.patternPallete.set("shapes",["thinThickHatch","crossCircle","star","wave","cap","nylon"]),gl.patternPallete.set("shapes-fill",["checkerBoard","floatingCirclefill","squarefill","starfill","wavefill","capfill","nylonfill"]);function vl(e,t,a,r,n){var i=t.legend.isSingleLayout;r=r||t.legendarea.element,n=n||t.systemConf.legend;function o(e){return!1===a?0:+n[e]}var l=r.node(),s=cl(n),c=0,u=0,d=Cn(l),h=d?ba(l):l.getBoundingClientRect(),f=h.width,p=h.height,g=s.floating,v=t.canvasarea,y=fl(n,t.chartarea),m=y.maxWidth,b=y.maxHeight;if(d||(h.x=0,h.y=0),g)return c=n.x-h.x,u=n.y-h.y,[c=zt(v.width-zt(h.width,m),c),u=zt(v.height-zt(h.height,b),u)];switch(s.hAlign){case"left":c=e.left+o("marginLeft")-h.x;break;case"center":c=e.width/2-f/2-h.x;break;case"right":c=(d||!i?e.left:0)+e.width-f-o("marginRight")-h.x}switch(s.vAlign){case"top":u=e.top+o("marginTop")-h.y;break;case"center":u=e.top+e.height/2-p/2-(i?0:h.y);break;case"bottom":u=e.top+e.height-p-o("marginBottom")-h.y}return[c,u,f,p]}function yl(e,t,a,r){var n=a.showAs,i=0,o=t;if((r.isAxisCategory||r.isNonAxisMultiSeriesCategory||r.isGeoMap)&&(i=t,o=0),n)return n=Ta(n,e,t,r),r.dataset.getCustomizedVal(r,n,i,0,o,e,"legend")}gl.imagePallete.each(function(e,t){var a=e.map(function(e,t){return St+e});gl.imagePallete.set(t,a)}),gl.getMonochromeColorPallette=function(e){var t=[0,+e.count-1],a=[+e.colorGamma[0],+e.colorGamma[1]],r=ma(e.baseColor,t,a);return rt(e.count).map(function(e,t){return r(t)})};function ml(){var e=navigator.userAgent,t={};if(0<e.indexOf("OPR")){t.name="Opera",t.jsPrefix="webkit",t.cssPrefix="-webkit-";var a=e.indexOf("OPR/");t.version=ja(e.substr(a+4))}else if(0<e.indexOf("Chrome")){t.name="Chrome",t.jsPrefix="webkit",t.cssPrefix="-webkit-";a=e.indexOf("Chrome/");t.version=ja(e.substr(a+7))}else if(0<e.indexOf("Safari")){t.name="Safari",t.jsPrefix="webkit",t.cssPrefix="-webkit-";a=e.indexOf("Version/");t.version=ja(e.substr(a+8))}else if(0<e.indexOf("Firefox")){t.name="Firefox",t.jsPrefix="Moz",t.cssPrefix="-moz-";a=e.indexOf("Firefox/");t.version=ja(e.substr(a+8))}else if(0<e.indexOf("MSIE")){t.name="Internet Explorer",t.jsPrefix="ms",t.cssPrefix="-ms-";a=e.indexOf("MSIE");t.version=ja(e.substr(a+5))}else t=void 0;return t}function bl(e,t){var a=getComputedStyle(e),r=ml();for(var n in t)if(t.hasOwnProperty(n))if(n in a)e.style[n]=t[n];else if(null!=r){var i=r.jsPrefix+n.charAt(0).toUpperCase()+n.slice(1);e.style[i]=t[n]}}function xl(e){var t=void 0;switch(e){case"z":case"size":t="sizeScale";break;case"clr":case"color":t="colorScale"}return na.getComponent(t)}function Cl(e,t){this.container=e,this.userdata=t,this.dataset={},this.dataObject={},this.canvasarea={},this.chartarea={},this.legendarea={},this.legend={component:null},this.renderer=[],this.svg=null,this.cache={},this.subrenderer=[],this.datalabels={moduleExists:pt},this.prepareLayout(),this.renderVisiblePointsOnly=!1}Cl.prototype.prepareLayout=function(){var t=this,e=(st=st||0,++st);t.id="ZC_"+e,t.idNumeric=e;try{var a=this.userdata;t.createHelperElements(),t.handleHiddenContainer(),t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),Cl.helpers.initializeChartHolders(t),t.setCanvasDimension(),t.chartTypes=no.helpers.getAllChartTypes(a,"object"),t.chartFontProp={},t.globalProp=Nr(a,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.themeoptions=t.getThemeOptions(t.globalProp),a.metadata||Ur("metadata",a),t.defsLocation=Sa(),t.svg.append("defs")}catch(e){Cl.helpers.handleErrors(t,e)}};var kl={getPatternSvg:function(){var e=this.patternSVG;if(!za(e)){var t=gr(this.container.node());e=this.patternSVG=qe(t).select("svg.svgPattern")}return e},getDocumentIndex:function(){return za(this.DOCUMENT_INDEX)||(this.DOCUMENT_INDEX=vr(this.container.node())),this.DOCUMENT_INDEX},getBaseContainer:function(){var e=this.getDocumentIndex();return za(this.BASE_HELPER_CONTAINER)||(this.BASE_HELPER_CONTAINER=Jt[e].BASE_HELPER_CONTAINER),this.BASE_HELPER_CONTAINER},createHelperElements:function(){var e=this,t=gr(e.container.node()),a=qe(t).select("svg.svgPattern");if(a.empty()){var r=ur(t),n=qe(t),i=e.baseContainer=sn(n,"div",[1],".","class","__baseZC_Container__");if(i.styles({position:"absolute",left:-9999+Zt,top:-9999+Zt}),e.patternSVG=sn(i,"svg",[1],".","class","svgPattern").attrs({version:"1.1",xmlns:ce.svg}),sn(e.patternSVG,"defs",[1]),Jt){var o=0,l=o++;r.ZC_DOCUMENT_INDEX=l,Jt[l]={BASE_HELPER_CONTAINER:e.baseContainer,EFFECTS:{},ANIMATION:{},CANVASPATTERN:{}}}}else e.patternSVG=a},handleHiddenContainer:function(e){var t=this,a=t.container;if(e&&za(t.originalContainer))t.originalContainer.node().appendChild(t.d3container.node()),t.container.remove(),t.container=t.originalContainer,delete t.isHiddenCoainer,delete t.originalContainer;else{var r=a.node();if(function(e){return null===e.offsetParent}(r)){var n=r.cloneNode(0);t.getBaseContainer().node().appendChild(n),n.style.setProperty("display","block","important"),t.isHiddenCoainer=!0,t.originalContainer=a,t.container=qe(n)}}},updateCanvasArea:function(){var e=this,t=e.systemConf;e.container.selectAll("div.d3container").styles({position:"relative",width:e.getChartDimension("width")+Zt,height:e.getChartDimension("height")+Zt}),(e.chartParentElement=e.container.selectAll("div.canvas-component")).styles({position:"relative",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"});var a=e.container.selectAll("div.canvas-property");a.styles({position:"absolute",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"}),e.updateCommonBBSProp(a,null,t.canvas,"canvas")},getThemeOptions:function(t){var e,a,r=Sr(function(e){if(!e||!e.chartdata)return[];var a=e.type;return e.chartdata.map(function(e){var t=e.type||a;return"number"==typeof t?ot.get(t):t.toLowerCase()})}(this.userdata.seriesdata)),n=Oa(this.userdata,"canvas.theme",!0);a=new Gr(t),r.forEach(function(e){return Ur(e,a.chart.plot.plotoptions,t)});var i=ut[n]||window.$ZC&&$ZC[n];return i?(e=new i(t),ga(a,e,!0,!0)):a},getChartDimension:function(e){var t={width:960,height:400};return this.isHiddenCoainer||(t[e]=tr(this.container,e,!0)),t[e]},setCanvasDimension:function(e,t){e||t||(e=this.getChartDimension("width"),t=this.getChartDimension("height")),this.canvasarea={left:0,top:0,right:0,bottom:0,width:e,height:t}},setChartDimension:function(){var e=this,t=e.systemConf.canvas.border,a=t.show?La(t,"size",0,10,e.canvasarea.width,e.canvasarea.height):0;e.titlearea={left:e.canvasarea.left+a,top:e.canvasarea.top+a,right:e.canvasarea.right-a,bottom:e.canvasarea.bottom-a,width:e.canvasarea.width-2*a,height:e.canvasarea.height-2*a},e.chartarea=xa(e.titlearea),e.plotarea=Object.create(e.chartarea)},applyChartProperties:function(){var e=this,t=e.systemConf,a=e.chartHeight,r=t.canvas.title,n=t.canvas.subtitle,i=t.credits||{},o=r.show&&Mi(e,"title",a),l=n.show&&Mi(e,"subtitle",a);if(!0===i.enabled&&Mi(e,"credits",a)){Ur("credits",e.systemConf,e.globalProp);e.drawTitle(e.systemConf.credits,"credits")}o&&("bottom"===r.vAlign&&"bottom"===n.vAlign&&n.show?e.drawTitle(t.canvas.subtitle,"subtitle"):e.drawTitle(t.canvas.title,"title")),l&&("bottom"===n.vAlign&&"bottom"===r.vAlign&&r.show?e.drawTitle(t.canvas.title,"title"):e.drawTitle(t.canvas.subtitle,"subtitle")),e.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line","path").style("border",""),e.updatePlotArea()},updatePlotArea:function(){var e=this,t=e.systemConf;e.chartarea=xa(e.titlearea),e.plotarea=Object.create(e.chartarea);var a=t.chart,r=parseFloat(a.marginLeft),n=parseFloat(a.marginRight),i=parseFloat(a.marginTop),o=parseFloat(a.marginBottom),l=r+n>e.plotarea.width?0:r,s=r+n>e.plotarea.width?0:n,c=i+o>e.plotarea.height?0:i,u=i+o>e.plotarea.height?0:o;e.plotarea.left+=l,e.plotarea.right+=s,e.plotarea.bottom+=u,e.plotarea.top+=c,e.plotarea.width=e.plotarea.width-l-s,e.plotarea.height=e.plotarea.height-u-c},drawTitle:function(t,e){var a=this,r=a.svg,n=a.systemConf,i=za(t.x)&&za(t.y),o=window.location,l={top:Ea(t.marginTop,0),right:Ea(t.marginRight,0),bottom:Ea(t.marginBottom,0),left:Ea(t.marginLeft,0)},s=r.selectAll("g.chart"+e),c=i?{x:t.x+l.left,y:t.y+l.top,dy:"1",textAnchor:"left"===t.hAlign?"start":"right"===t.hAlign?"end":"middle"}:Cl.helpers.align(t.hAlign,t.vAlign,a.titlearea,l),u=!za(t.imageUrl),d=u?""===t.text?Qt:"text":"image";if(d!==Qt){var h=sn(s,d,[t],".","class",e);if(za(t.href)){function f(){if(function(e){var t=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g),a=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);return e.match(t)||e.match(a)}(t.href)){var e=t.target;"newtab"===e||"newwindow"===e?window.open(t.href,"popUpWindow","newwindow"===e?"status=yes":""):o.href=t.href}else Ct.log("invalid URL for credits")}Mo(h,{click:f},{tap:f})}if(u){var p=a.userdata.canvas?a.userdata.canvas.fontColor:null;h.attrs({x:c.x,y:c.y,dy:c.dy+"em","text-anchor":c.textAnchor}).styles({cursor:za(t.href)?Kt:"auto",display:"block"}).text(Ca(t.text)),!0===t.tooltip&&pn(h),fn(h,[{fontColor:"subtitle"!==e||za(t.fontColor)||za(p)?t.fontColor||p:"#CCCCCC"},t,n.canvas,Wr])}else h.attrs({x:c.x+("right"===t.hAlign?-t.imageWidth:0),y:c.y+("bottom"===t.vAlign?-t.imageHeight:0),width:t.imageWidth,height:t.imageHeight,"xlink:href":t.imageUrl}).styles({cursor:za(t.href)?Kt:"auto",display:"block"});var g=ba(h.node()),v={left:i?t.x+l.left:g.x,top:i?t.y+l.top:g.y,width:g.width,height:g.height},y={left:l.left,top:l.top,right:a.titlearea.width-l.right,bottom:a.titlearea.height};if(cn(h.node(),Ca(t.text),v,y,"bottom","..",{left:5,right:5,top:5,bottom:5}),!i){var m=g.height+l.bottom+l.top;"top"===t.vAlign&&(a.titlearea.top+=m,a.titlearea.height-=m),"bottom"===t.vAlign&&(a.titlearea.height-=m)}}s.selectAll(d===Qt?"text,image":"image"===d?"text":"image").style("display",Qt)},updateCommonBBSProp:function(e,t,a,r){var n,i=this,o=i.systemConf,l=a.border||{},s=a.background||{},c=a.shadow||{},u=!0===Va(s,"gradients.show");if(e.styles({"background-color":s.color,opacity:s.alpha}),za(s.imageUrl)){var d=Cl.helpers.getStyles4Image(s);e.styles(d)}else if(u){d=Cl.helpers.getStyles4Gradients(s);e.styles(d)}if(!0===l.show&&"canvas"===r){n="plotarea"===r?t:e;var h="canvas"===r?La(o.canvas.border,"size",0,10,i.canvasarea.width,i.canvasarea.height):La(o.chart.plot.border,"size",0,10,i.plotarea.width,i.plotarea.height);h=qa(h,2),n.styles({border:h+"px "+l.style+" "+l.color,"border-radius":ja(l.radius)+"px"}),n.node().border={size:h,clr:l.color}}else n="plotarea"===r?t:e,"plotarea"!==r&&n.style("border","");if(!0===c.show){var f=c.x+"px "+c.y+"px "+c.blur+"px "+c.color;!0===c.inset&&(f+=" inset"),e.style("box-shadow",f)}else e.style("box-shadow","")},updatePlotareaProp:function(){var e=this,t=e.systemConf,a=(e.d3container,e.plotareaPropertyElement),r=e.staticPaneSVG.selectAll("g.plotareaBorder-property"),n={position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:e.plotarea.width+"px",height:e.plotarea.height+"px","pointer-events":Qt,"box-sizing":"border-box"};n[Xr.prefix.css+"box-sizing"]="border-box",e.plotareaPropertyElement.styles(n),r.attrs({transform:"translate("+e.plotarea.left+","+e.plotarea.top+")"}),e.updateCommonBBSProp(a,r,t.chart.plot,"plotarea")},drawPlotareaClippath:function(){var e=this,t=e.systemConf,a=Oa(t,"chart.zoom.x")||za(e.scrolledX),r=Oa(t,"chart.zoom.y")||za(e.scrolledY),n=e.axes.rotated,i=to(e),o=(n?r:a)?e.plotarea.left:-i.left+e.plotarea.left,l=(n?a:r)?e.plotarea.top:-i.top+e.plotarea.top,s=e.plotarea.width+((n?r:a)?0:i.left+i.right),c=e.plotarea.height+((n?a:r)?0:i.top+i.bottom),u={name:"rect",id:e.id,x:o,y:l,width:s,height:c},d={chartObj:e},h=tn.get(tn.svg_clips,"rect",u,d);e.container.selectAll("g.seriesClippathholder, g.labelClippathholder, g.zcMapClipHighlight, g.threshold").attr("clip-path","url("+e.defsLocation+"#"+h+")");var f="highlight_group_clip_"+e.id,p={x:u.x+(e.scrolledX||0),y:u.y+(e.scrolledY||0),width:s,height:c};jo.rect(p,f,null,null,null,e),e.staticPaneSVG.selectAll("g#zcscatterCliphighlight, g#zcareaCliphighlight, g#zcbarCliphighlight, g.zcMapClipHighlight").attr("clip-path","url("+e.defsLocation+"#"+f+")")},getChartSeriesColor:function(){var r=this,e=r.systemConf,a=[],t=e.legend;if(t.colors)if(Ba(t.colors))a=t.colors;else{var n=[];for(var i in t.colors)t.colors.hasOwnProperty(i)&&n.push(t.colors[i]);a=n}else t.colorPallete&&(a="monochrome"===t.colorPallete.type?gl.getMonochromeColorPallette(t.colorPallete.options.monochrome):gl.colorpallete.get(t.colorPallete.options.multicolor)||gl.colorpallete.get("flat-ui-colors"));if(t.imagePallete){r.patternImageSizes=[];var o=gl.imagePallete.get(t.imagePallete);r.imagePallete=o;var l="stripes"===t.imagePallete?null:50,s=sn(r.getPatternSvg(),"image",[1],".","class","tempImage");o.map(function(e,t){s.attr("xlink:href",e);var a=ba(s.node());r.patternImageSizes[t]=[l||a.width||3,l||a.height||3]}),s.remove()}if(t.patterns)r.patternPallete=t.patterns;else if(t.patternPallete){var c=gl.patternPallete.get(t.patternPallete);!za(c)&&Ba(t.patternPallete)&&t.patternPallete.length&&(c=t.patternPallete),r.patternPallete=c}if(za(a)){var u=a.slice(0,a.length),d=0;r.seriesColor=u,Pn.isQuantileColorScale(r)||r.seriesdata.map(function(e,t){za(e.color)?r.seriesColor[t]=e.color:r.seriesColor[t]||(r.seriesColor[t]=a[d++%a.length])})}},resetdata:function(e){var t=this;t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),t.setCanvasDimension(),t.chartTypes=no.helpers.getAllChartTypes(e,"object"),t.processUserData(e,!0),t.setChartDimension(),t.globalProp=Nr(e,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.events={},t.dataObject&&(t.dataObject.formattedData={x:[],y:[]})},destroy:function(){var e=this;e.eventHandler&&(clearTimeout(e.eventHandler.mouseouttimer),clearTimeout(e.eventHandler.mousemovetimer),clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.destroy()),e.container.datum(null),e.d3container.remove(),e.destroying=!0},redraw:function(){var e=this,t=e.systemConf;e.updating=!0,e.phase="redraw",e.viewPortExtent=null,e.svg.styles({width:e.getChartDimension("width")+Zt,height:e.getChartDimension("height")+Zt}),e.staticPaneSVG.styles({width:e.getChartDimension("width")+Zt,height:e.getChartDimension("height")+Zt}),e.resetdata(t),Cl.helpers.constructChartGroups(e),e.render(!0),e.phase=null},drawPlotBorder:function(){var e=this,t=e.systemConf.chart.plot.border,a=e.staticPaneSVG.selectAll("g.plotareaBorder-property");if(za(t)&&!0===t.show){var r=a.selectAll("path.plotBorderPath"),n=La(t,"size",0,10,e.plotarea.width,e.plotarea.height),i=qa(e.tickarea,{left:0,right:0,top:0,bottom:0}),o=dn(-i.left||.5,-i.top||.5,e.plotarea.width+i.right+i.left,e.plotarea.height+i.bottom+i.top,ir(t.radius),!1,!1);n=null==n||""===n?2:n,r.styles({"stroke-width":n,stroke:t.color,"stroke-dasharray":on(t.style,n),fill:Qt,"pointer-events":Qt}).attrs({d:o}),a.selectAll("line").style("stroke",qt)}},handleNoData:function(e,t){this.clearChart();var a=this,r=a.systemConf,n=qa(t,a.wrap.selectAll("g.nodatahandler"));if(za(e.htmlEl)){var i=sn(a.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");i.style("position","absolute").html(e.htmlEl);var o=i.node();i.styles({left:qa(e.x,(a.chartWidth-o.offsetWidth)/2)+"px",top:qa(e.y,(a.chartHeight-o.offsetHeight)/2)+"px"})}else if(za(e.imageUrl)){sn(n,"image",[1]).attrs({x:e.x||a.chartarea.width/2-50,y:e.y||a.chartarea.height/2-50,width:100,height:100,"xlink:href":e.imageUrl})}else if(za(e.text)){var l=sn(n,"text",[e],".","class","nodata");l.attrs({x:e.x||a.chartarea.width/2,y:e.y||a.chartarea.height/2,"text-anchor":"middle"}).text(Ca(e.text||"No Data")),fn(l,[e,r.canvas,Wr])}},clearNoData:function(e,t){this.systemConf;var a=qa(t,this.wrap.selectAll("g.nodatahandler"));if(za(e.htmlEl))sn(this.container.selectAll("div.canvas-component"),"div",[],".","class","nodatahandler");else if(za(e.imageUrl))sn(a,"image",[]);else if(za(e.text))sn(a,"text",[],".","class","nodata")},clearChart:function(e,t,a){var r=this;a||sn(r.wrap,"g",[],".","class","chartgroup"),sn(r.staticPaneSVG,"g",[],".","class","plotareaBorder-property"),sn(r.staticPaneSVG,"g",[],".","class","labelClippathholder"),sn(r.container,"div",[],".","class","legendgroup"),sn(r.staticPaneSVG,"g",[],".","class","legendarea"),sn(r.container,"div",[],".","class","zcnotes"),sn(r.container,"canvas",[],".","class","zc-canvas"),sn(r.container,"canvas",[],".","class","zc-labelholder-canvas"),r.eventHandler&&(r.isAxisCategory||r.dataObject.isPolarAxisCategory||r.isGeoMap)&&r.positionEventTrackerElement(null,{})},showLoading:function(){var e=this.systemConf,t=e.loader;if(!0===t.enabled&&t.type!==Qt){var a=sn(this.container.selectAll("div.d3container"),"div",[1],".","class","loading");a.style("position","absolute").html(Cl.helpers.getLoader(this,t)),fn(a,[t,e.chart,e.canvas,Wr],!0);var r=a.node();a.styles({left:this.chartarea.width/2-r.offsetWidth/2+"px",top:this.chartarea.height/2-r.offsetHeight/2+"px"})}},hideLoading:function(){this.container.selectAll("div.loading").remove()},fixLegendPosition:function(){var e=this,t=e.legendarea;if(!0===e.systemConf.legend.enabled){var a=vl(e.plotarea,e,!1),r=ll.isContinousLegend(e);if("y"===t.adjust)if(r){var n=$n(t.element.node()).translate;t.element.attr("transform","translate("+n[0]+","+a[1]+")")}else t.element.style("top",a[1]+Zt)}},createEventGroups:function(){var e=this.systemConf,t=this.eventWrap=this.staticPaneSVG.selectAll("g.eventgroup").styles({"pointer-events":"visible"});t.append("g").attr("id","zcareaCliphighlight").append("g").attr("id","zcareahighlight"),t.append("g").attr("id","zcbarCliphighlight").append("g").attr("id","zcbarhighlight");if(e.tooltip.crosshair){var a=sn(t,"g",[1],".","class","crosshair");a.style("visibility","hidden"),sn(a,"line",[1],".","class","x-crosshair"),sn(a,"line",[1],".","class","y-crosshair")}t.append("g").attr("id","zcscatterCliphighlight").append("g").attr("id","zcscatterhighlight"),t.append("g").attr("class","zcplothighlight").styles({opacity:0,"pointer-events":Qt});this.dataObject.isHierarchy&&t.append("g").attr("id","zchierarchyhighlight").styles({opacity:0,fill:Qt,"pointer-events":Qt})},positionEventTrackerElement:function(e,t){var a=1<arguments.length&&void 0!==t?t:Fo(this,!0),r=this.eventHandler.trackerGroup,n=this.plotarea;r.attr("transform","translate("+(n.left||0)+" "+(n.top||0)+")"),(e=qa(e,this.eventHandler.trackerElement)).attr("transform","translate("+(a.left||0)+" "+(a.top||0)+")"),function(e,t){e.attr("width",t.width).attr("height",t.height).style("fill-opacity",0).style("stroke",qt)}(e,a)},__enableZoomBrush:function(e,t){function a(){r.systemConf.chart[t].enabled=!0,r.systemConf.chart[t].type=e,i.initiateBehaviour(n)}var r=this,n="PLOT_"+t.toUpperCase(),i=r.behaviouralEvents,o=i.eventManager.behaviours;o[n]?o[n]&&o[n].instance.options.type!==e&&a():a()},__enableZoom:function(e){this.__enableZoomBrush(e,"zoom")},__enableBrush:function(e){this.__enableZoomBrush(e,"brush")},zoomStep:function(e){var t=this.isGeoMap?"xy":Va(this.systemConf,"chart.zoom.type")||"x";this.__enableZoom(t),this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.step(e)},parseScale:function(){function n(e,t){var a="z"===e?"size":"clr"===e?"color":e,r=function(e){if("size"===e||"color"===e)return i.systemConf.legend}(a);return Ur(a,r,i.globalProp),r[a][t]||r[a]}var i=this,t=i.userdata.metadata.axes,e=i.dataObject.hasZaxis?["z"]:[],a={},o=[];for(var l in e.forEach(function(e){t[e]&&(a[e]=rt(t[e].length))}),a)a[l].forEach(function(e){var t=xl(l);if(t!=ta){var a=n(l,e),r=new t(l,e,a,i);o.push(r)}});o.forEach(function(e){return e.getScale()}),i.scales=o}};$a(Cl.prototype,kl),Cl.helpers={initializeChartHolders:function(e){var t,a,r=e.container,n=r.selectAll("div.d3container");if(!n.empty()){var i=n.datum();i&&i.destroy&&i.destroy(),n.remove()}t=e.getChartDimension("width"),a=e.getChartDimension("height"),n=e.d3container=sn(r,"div",[e],".","class","d3container");var o={width:t+"px",height:a+"px",position:"relative",left:"0px",top:"0px","box-sizing":"border-box","-moz-user-select":Qt,"-webkit-user-select":Qt,"-ms-user-select":Qt,"user-select":Qt};o[Xr.prefix.css+"box-sizing"]="border-box",n.styles(o),sn(n,"div",[1],".","class","canvas-property"),e.plotareaPropertyElement=sn(n,"div",[1],".","class","plotarea-property"),sn(e.d3container,"div",[1],".","class","zcoverview");var l=sn(n,"div",[1],".","class","canvas-component");l.style("-webkit-tap-highlight-color",qt);var s=sn(e.getBaseContainer(),"div",[1],"#","id","zctooltip"+e.idNumeric);s.node().isTooltipContainer=!0,e.tooltip={element:s},e.tooltip.element.styles({position:"fixed",display:"inline-block",visibility:"hidden","white-space":"nowrap","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":qt});var c=Cl.helpers.positionSVG(e);e.svg=sn(l,"svg",[1],".","class","svgarea",c),e.staticPaneSVG=sn(l,"svg",[e],".","class","static",c).style("pointer-events",Qt),l.append(Br).attr("class","legendarea"),e.notes=l.append("div").attr("class","zcnotes")},removeChartHolders:function(e){var t=e.container;t.select("div.d3container").remove(),t.select("div.zc-staticPane").remove(),t.select("div.zc-chartPane").remove()},align:function(e,t,a,r){var n={};return"center"===e?(n.x=a.width/2+r.left,n.textAnchor="middle"):"left"===e?(n.x=a.left+r.left,n.textAnchor="start"):"right"===e&&(n.x=a.width+a.left-r.right,n.textAnchor="end"),"top"===t?(n.y=a.top+r.top,n.dy=1):"bottom"===t&&(n.y=a.height+a.top-r.bottom,n.dy=-.21),n},getLoader:function(e,t){var a=t.htmlEl,r=t.imageUrl,n=t.type,i=t.text,o=t.colors;if(a)return a;if(r)return"<img src="+r+" height="+t.imageHeight+" width="+t.imageWidth+">";var l="",s=null;return n&&(s=function e(t,a){var r={type:"zBars",scale:1,duration:1.2},n=document.getElementById("ZCloader");for(var i in e.style||((n=document.createElement("style")).setAttribute("id","ZCloader"),document.head.appendChild(n),e.style=!0),a)a.hasOwnProperty(i)&&(r[i]=a[i]);var o=r.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],l=o[0%o.length],s=o[1%o.length],c=o[2%o.length],u=o[3%o.length],d=ml(),h="";if(void 0===d?d={cssPrefix:""}:"Internet Explorer"===d.name&&d.version<10&&(r.type="wheel"),!t.loader){var f=document.createElement("div");if("zBlocks"==r.type){if(!e.zBlocks){h="\n@"+d.cssPrefix+"keyframes "+r.type+" {";h+="0% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(0deg) scale(1)}",h+="25% { left:40px; top:0px; "+d.cssPrefix+"transform:rotate(90deg) scale(0.5)}",h+="50% { left:40px; top:40px; "+d.cssPrefix+"transform:rotate(180deg) scale(1.0)}",h+="75% { left:0px; top:40px; "+d.cssPrefix+"transform:rotate(270deg) scale(0.5)}",h+="100% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(360deg)scale(1)} }\n",n.innerHTML+=h,e.zBlocks=!0}bl(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+r.scale+")"});var p=document.createElement("div");p.innerHTML="&nbsp",f.appendChild(p),bl(p,{backgroundColor:l,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var g=document.createElement("div");g.innerHTML="&nbsp",f.appendChild(g),bl(g,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*1+"s"});var v=document.createElement("div");v.innerHTML="&nbsp",f.appendChild(v),bl(v,{backgroundColor:c,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*2+"s"});var y=document.createElement("div");y.innerHTML="&nbsp",f.appendChild(y),bl(y,{backgroundColor:u,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*3+"s"}),t.loader=!0}else if("zCircle1"==r.type){if(!e.zCircle1){h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ";h+="0% ,25%, 50%, 75%, 100%{ "+d.cssPrefix+"transform: scale(0.0);  } ",h+="12.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+l+";}",h+="37.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+s+";}",h+="62.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+c+";}",h+="87.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+u+";} }\n",n.innerHTML+=h,e.zCircle1=!0}bl(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+r.scale+")"});var m=document.createElement("div");m.innerHTML="&nbsp",f.appendChild(m),bl(m,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),t.loader=!0}else if("zBars"==r.type){if(!e.zBars){h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ";h+="0%, 40%, 100% { "+d.cssPrefix+"transform: scaleY(0.4) }",h+="20% { "+d.cssPrefix+"transform: scaleY(1.0) } }\n",n.innerHTML+=h,e.zBars=!0}bl(f,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale("+r.scale+")"}),(w=document.createElement("div")).innerHTML="&nbsp",f.appendChild(w),bl(w,{backgroundColor:l,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),bl(S,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.1)+"s"}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),bl(O,{backgroundColor:c,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.2)+"s"}),(A=document.createElement("div")).innerHTML="&nbsp",f.appendChild(A),bl(A,{backgroundColor:u,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.3)+"s"}),t.loader=!0}else if("zCircle2"==r.type){if(!e.zCircle2){h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ";h+="0%, 80%, 100% { "+d.cssPrefix+"transform: scale(0.0) }",h+="40% { "+d.cssPrefix+"transform: scale(1.0) } }\n",n.innerHTML+=h,e.zCircle2=!0}bl(f,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale("+r.scale+")"});var b=document.createElement("div");b.innerHTML="&nbsp",f.appendChild(b),bl(b,{backgroundColor:l,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",f.appendChild(x),bl(x,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.2)+"s"});var C=document.createElement("div");C.innerHTML="&nbsp",f.appendChild(C),bl(C,{backgroundColor:c,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.4)+"s"});var k=document.createElement("div");k.innerHTML="&nbsp",f.appendChild(k),bl(k,{backgroundColor:u,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.6)+"s"}),t.loader=!0}else if("zCrossBars"==r.type){if(!e.zCrossBars){h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ";h+="0%{left:-50%;}",h+="100%{left: 150%;} }\n",n.innerHTML+=h,e.zCrossBars=!0}var w,S,O,A;bl(f,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale("+r.scale+")"}),(w=document.createElement("div")).innerHTML="&nbsp",f.appendChild(w),bl(w,{backgroundColor:l,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration+"s"}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),bl(S,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*80+"s"}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),bl(O,{backgroundColor:c,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*60+"s"}),(A=document.createElement("div")).innerHTML="&nbsp",f.appendChild(A),bl(A,{backgroundColor:u,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*40+"s"}),t.loader=!0}else bl(f,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url('"+St+"loader_"+r.type+".gif')",backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return f}}(e.container.selectAll("div.loading"),{type:n,colors:o=o&&o.length?o:null}),l=(new XMLSerializer).serializeToString(s)),i&&(l+="<p style=position:relative;display:inline-block>"+i+"</p>"),l},constructChartGroups:function(e){var t,a=e.svg,r=e.systemConf,n=e.chartHeight;e.chartWidth;if(sn(a,"g",c(!0===r.canvas.title.show&&Mi(e,"title",n)),".","class","charttitle"),sn(a,"g",c(!0===r.canvas.subtitle.show&&Mi(e,"subtitle",n)),".","class","chartsubtitle"),sn(a,"g",c(r.credits&&!0===r.credits.enabled&&Mi(e,"credits",n)),".","class","chartcredits"),t=e.isGeoMap&&e.geo.isCanvasMode&&e.dataObject.hasPointChart?e.wrap=xn("g",".xychart",[1],e.staticPaneSVG,":first-child"):e.wrap=sn(a,"g",[1],".","class","xychart"),e.nochartdata)sn(t,"g",[1],".","class","nodatahandler");else{sn(t,"g",[0],".","class","nodatahandler");var i=sn(t,"g",[e.seriesdata],".","class","chartgroup");sn(i,"g",c(!0===r.chart.axes.xaxis.show),".","class","x-axis"),sn(i,"g",[e.seriesdata],".","class","y-axis"),sn(i,"g",[e.seriesdata],".","class","threshold");var o=sn(sn(i,"g",[e.seriesdata],".","class","seriesClippathholder"),"g",[e.seriesdata],".","class","seriesholder");e.filterEffectsID=function(e){var t=e.systemConf,a=t.chart.effects.choice;if(tn.svg_filters[a]){var r=t.chart.effects.options[a];return"dropShadow"===a&&(r.blur=Mt(0,r.blur)),tn.get(tn.svg_filters,a,r,{chartObj:e})}}(e),o.attr("filter",e.filterEffectsID?"url("+e.defsLocation+"#"+e.filterEffectsID+")":null);var l=sn(e.staticPaneSVG,"g",[e.seriesdata],".","class","labelClippathholder"),s=!1;if(e.dataObject&&(s=e.dataObject&&e.dataObject.noofBarEnabledSeries&&!e.dataObject.isCombinationalChart||e.dataObject.isHierarchy),s||sn(l,"g",[e.seriesdata],".","class","labelholder"),sn(e.staticPaneSVG,"g",[e.seriesdata],".","class","threshold"),sn(e.staticPaneSVG,"g",[1],".","class","qualitativeGroup"),sn(sn(e.staticPaneSVG,"g",[1],".","class","plotareaBorder-property"),"path",c(!0===r.chart.plot.border.show),".","class","plotBorderPath"),sn(e.staticPaneSVG,"g",[1],".","class","eventgroup"),s)l.raise(),sn(l,"g",[e.seriesdata],".","class","labelholder").style("pointer-events",Qt);sn(o,"rect",[1],".","class","dummy-rect-filter").style("pointer-events",Qt),Cl.helpers.createLegendArea(e)}function c(e){return e?[1]:[]}},handleErrors:function(e,t){Ct.error(t.stack),Ct.log(t.stack),e.breakOnErr=!0,Oa(e.systemConf,"canvas.events")&&Ta(e.systemConf.canvas.events.onerror,nt(),e,t)},positionSVG:function(e){return{width:e.getChartDimension("width")+Zt,height:e.getChartDimension("height")+Zt,position:"absolute",top:0,left:0}},createLegendArea:function(e){var t=ll.isContinousLegend(e),a=xn("g",".legendarea",[1],e.staticPaneSVG),r=e.container.selectAll("div.legendarea");if(t){var n=e.dataObject;n&&(n.noofBarEnabledSeries&&!n.isCombinationalChart||n.isHierarchy)&&a.raise(),r.style("display",Qt),e.legendarea.element=a}else a.style("display",Qt),e.legendarea.element=r},getChartId:function(e){return e.id},setChartId:function(e){e.id},getStyles4Gradients:function(e){var r=e.gradients||{};if(1===Xr.IE&&0===Xr.VERSION.indexOf("9.")){var t=r.stopColor?r.stopColor.map(Ln):["black","white"];return"linear"!==r.type?{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0, finishopacity=100, style=2)","background-color":t[1]}:{filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr="+t[0]+", endColorstr="+t[1]+")"}}var a,n=Xr.WEBKIT?"-webkit-":Xr.FIREFOX?"-moz-":Xr.IE?"-ms-":"",i="";return za(r.useCSS)?a=r.useCSS:(za(r.stopColor)&&r.stopColor.map(function(e,t){var a=za(r.stopOffset)&&za(r.stopOffset[t])?" "+r.stopOffset[t]:"";i+=0===t?e+" "+a:","+e+a}),"radial"===r.type?a="radial-gradient("+i+")":"linear"===r.type&&(a="linear-gradient("+i+")")),{"background-image":n+a}},getStyles4Image:function(e){return{"background-image":"url("+e.imageUrl+")","background-repeat":e.imageRepeat}}};var wl="datalabels",Sl="stackLabels",Ol="innerLabel",Al="parentLabels",Pl="x",Tl="y",_l="z",El="geo",Ll="per",Ml="splitper",zl="maxper",Dl="percent",Il="splitpercent",Rl="maxpercent",jl=H([Pl,Tl,_l,El,Ll,Ml,zl,Dl,Il,Rl]);function Hl(t,e,a,r,n,i,o,l){if(!a)return u(e);if(null==e)return t&&null!=t.nullformatting?u(Ta(t.nullformatting,e,a,t,n,r)):e;var s=t?t[n+"format"]||t.format:null;return s&&Object.keys(s).length||(s=Bl(a,t)),e.constructor==Array?e.map(function(e){return c(e)}).join(za(s.arraySeperator)?s.arraySeperator:o):c(e);function c(e){return a!==On||s.customFormat?a===An&&("axis"===n||n===Sl||n===wl&&r.dataObject.isHierarchy)&&"number"==typeof e&&12<Jl(e)&&(e=parseFloat(e.toFixed(12))):e=Vl(e,s,t),l&&s.customFormat&&((t=xa(t)).levelindex=l),u("function"==typeof s?s(e,a,t):s.customFormat?Ta(s.customFormat,e,a,t,n,r):Fl(s,e,t,a,l,n,r))}function u(e){return 0!=i?Ca(e):ka(e)}}function Bl(e,t){var a={};switch(e){case"time":t&&t.groupby?a={}:t&&t.subfunction?a=Wl(t.subfunction,t.useUTC):a.specifier="YYYY";break;case"numeric":a.thousandSeperator=",";break;case"geo":break;case"percent":a.decimalPlaces=1,a.suffix="%",a.trailingZeros=!1}return a}function Fl(t,n,i,e,o,a,r){var l;switch(e){case"time":var s,c=i&&!0===i.useUTC?U:G,u=t.specifier;if(za(i)&&(s=Ba(i.groupby)?i.groupby:i.AUTO_GROUP_ORDER),Ba(u)||Ba(s))l=[],u=u||[null],za(o)&&(u=za(u)?[u[o]]:[null]),(u=Ba(u)?u:[u]).forEach(function(e,t){var a=Ql(e),r=ql(c,a,i,o);l[t]=r?r(n):n}),a==wl&&(l=l&&l.toString());else if(u){var d=Ql(u);if("auto"===u||null==d)l=n;else if(Zl.test(d)){var h=ql(c,d,i,o);l=h(n)}else l=c(d)(n)}else{var f=Bl(e,i);l=f(n)}break;case"ordinal":var p=t.letterCase;n+="",l=p?"uppercase"===p?n.toUpperCase():"lowercase"===p?n.toLowerCase():n[0].toUpperCase()+n.substring(1).toLowerCase():n;break;case"geo":var g=t.mapBy;p=t.letterCase;if(l=n,g){var v=r.dataObject.userMapFeatures.get(n);v&&v.properties&&v.properties[g]&&(l=v.properties[g])}l=p?"uppercase"===p?l.toUpperCase():"lowercase"===p?l.toLowerCase():l[0].toUpperCase()+l.substring(1).toLowerCase():l;break;default:if("decimal"==t.type&&ja(n)!=n)return"";var y=t.decimalPlaces;n="decimal"==t.type||0===y?parseFloat(n):n;var m=t.currency,b=Kl(t,null,n),x=!1;if(l=b(n),/(e|s)/gi.test($l(t))?za(y)?l=l.replace(/[^a-z]+/i,function(){return Kl(t,"."+y+"f")(arguments[0])}):x=!0:za(y)&&0<y&&(l=l.replace(/[^a-z]+/i,function(){var e=rs(+arguments[0].replace(/,/g,""),y);return Kl(t,"."+y+"f")(e)})),!1===t.signEnabled&&(l=l.substring(1,l.length)),!Ea(t.trailingZeros,!0)||x){var C="";l=(l=l.replace(/[a-z]+(\+|-)*(\d)*$/i,function(){return C=arguments[0],""})).replace(/\.(\d)*0*$/gi,function(){var e=arguments[0];return parseFloat(e)?"."+es(+e).toString().split(".")[1]:""})+C}l=function(e,t){var a=e.thousandSeperator,r=e.decimalSeperator,n=t.split(/\./);return(null!=a&&","!=a?n[0].replace(/,/g,a):n[0])+(n[1]?(null!=r?r:".")+n[1]:"")}(t,l),null!=m&&(l=/(\+|\-)/.test(l[0])?l[0]+m+l.slice(1):m+l)}return l=function(e,t){if(Ba(t))return t;var a=qa(e.prefix,""),r=qa(e.suffix,"");return a+t+r}(t,l),t.breakSpace&&(l=l.split(" ")),l}function Wl(e,a){var r=(a=!0===a)?U:G;switch(e){case"YEAR":case"year":return r("%Y");case"MONTH":case"month":return r("%B");case"ABSDAY":return r("%a");case"DAY":case"day":return r("%e");case"WEEKDAY":return r("%A");case"WEEK":case"week":return r("Week %W");case"ABSHOUR":return r("%I");case"ABSSECOND":return r("%S");case"ABSMINUTE":case"MINUTE":return r("%M");case"MILLISEC":return r("%L");case"HOUR":return r("%H hrs");case"DATETIME":return r("%d %b %Y %H:%M:%S");case"DATE":return r("%x");case"TIME":return r("%X");case"TIMESTAMP":return r("%x %X hrs");case"ABSMONTH":return r("%b %Y");case"ABSWEEK":return r("W%U %Y");case"ABSQUARTER":return function(e){var t=a?e.getUTCFullYear():e.getFullYear();return r("Q"+ns(e,a)+" "+t)};case"QUARTER":return function(e){return r("Q"+ns(e,a))};case 100:return r("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: "+e}}function Vl(e,t,a){var r=a?a.inputformat:null,n=new Date(e.toString()),i="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(e instanceof Date)&&null!=r&&(i||"timestamp"!=r.toLowerCase())){e=i||(void 0===e?"undefined":_typeof(e))==String?e:e.toString();var o=X,l=i?i(e,a):o(Ql(r))(e);n=null==l?n:new Date(l)}return isNaN(n)&&(n=new Date(+e)),n}function Nl(e,t,a,r,n){return(e=e||{})[(n=(n&&e[n+"percentformat"]?n:"")+"percent")+"format"]||(e.percentformat=Bl("percent")),Hl(e,t,a,r,n)}var Yl={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z",QT:"$Q"},Gl={decimal:"d",exponent:"e",float:"f",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"},Ul={Q:ns},Xl=Object.keys(Ul).map(function(e){return"\\$"+e}),Zl=new RegExp(Xl.join("|"));function Ql(e){if(e)for(var t in Yl){var a=e.indexOf(t);0<=a&&"%"!==e[a-1]&&(e=e.replace(new RegExp(t,"g"),Yl[t]))}return e}function ql(e,t,a,r){var n;if(t)n=function(l,e,s){return function(e){for(var t,a=l(e),r=[],n=-1,i=0,o=a.length;++n<o;)36===a.charCodeAt(n)&&(r.push(a.slice(i,n)),t=a.charAt(++n),t=za(Ul[t])?Ul[t](e,s):t,r.push(t),i=n+1);return r.push(a.slice(i,n)),r.join("")}}(e(t),0,a.useUTC);else if(a.groupby){var i=Ba(a.groupby)?a.groupby:a.AUTO_GROUP_ORDER;n=Wl(0!==r&&za(r)?i[r-1]:a.subfunction,a.useUTC)}return n}function Kl(e,t,a){var r,n=za(e.signEnabled)?"+":"",i=null!=e.zeroPadding&&e.zeroPadding.enabled?"0"+e.zeroPadding.digits:"",o=null!=e.thousandSeperator?",":"",l=$l(e),s=/(e|s)/gi.test(l),c=e.decimalPlaces;return r=null!=c&&0<=c?s?Xr.IE?".20":"":"."+(0===c?c:c+3):s?"":"."+Jl(a),Y(n+i+o+(t||r+l))}function $l(e){e.decimalPlaces;var t=e.type;return Gl[t]||"f"}function Jl(e){return isNaN(e)?0:(e=+e,Math.floor(e)==e?0:es(e).toString().split(".")[1].length||0)}function es(e){if(/\d+\.?\d*e[+-]*\d+/i.test(e)){var t=String(e).toLowerCase().split("e"),a=t.pop(),r=Math.abs(a),n=a/r,i=t[0].split(".");if(-1==n)e="0."+new Array(r).join("0")+i.join("");else{var o=i[1];o&&(r-=o.length),e=i.join("")+new Array(r+1).join("0")}}return e}function ts(e){var t=Et(e/1e3),a=Et(t/60),r=Et(a/60),n=Et(r/24);return{seconds:t,minute:a,hour:r,day:n,month:Et(n/30.436854166666667),years:Et(n/365.24225)}}function as(e){var t=ts(e);return{subFunction:1<t.years?"YEAR":1<t.month?"ABSMONTH":1<t.day?"ABSDAY":1<t.hour?"ABSHOUR":1<t.minute?"ABSMINUTE":"ABSSECOND"}}function rs(e,t){var a=Math.pow(10,t);return+(Math.round((e+Xt)*a)/a).toFixed(t)}function ns(e,t){return Et((t?e.getUTCMonth():e.getMonth())/3)+1}var is={};function os(e,a,r){return e?Ue(e,function(e,t){return xr(r?r(e,t):e,a)?t:0}):0}function ls(e){return e.seriesIndices[e.seriesIndices.length-1]}function ss(e,t,a,r){var n=os(e.dataObject.getStackGroup(),t),i=e.renderer[t].commonRendererProp().params,o=e.dataset,l=o.getX(a),s=o.getY(a,i.yaxiscolumnorder||0),c=e.dataObject.getEncode("stack",n).layout.getAllExtents().filter(function(e){return e[0]==l});return r===Dl||r===Ll?c.reduce(function(e,t){return e+Dt(t[1])},0):c[s<i.hasNegValue&&c[1]?1:0][1]}is.filterBySum=function(e,a){function t(e,t){return e+(t.disabled?0:Dt(t[a]||0))}return e.filter(function(e){return 0<e.reduce(t,0)})},is.getKey=function(e,t,a,r){if(!r){var n=a.dataset,i=no.helpers.getParsedYAxisOrder(a.seriesdata[t].yaxiscolumnorder);r=[n.getX(e),n.getY(e,i)]}return"x("+r[0]+") y("+r[1]+")"};function cs(){}function us(e,t,a,r,n,i,o){r=+r;var l=e.systemConf.metadata.axes.y,s=-1,c=yo(e.chartTypes[t].value);if(e.dataObject.isstacked(e.chartTypes[t].value)&&!e.dataObject.isPercentChart&&/(datalabels|tooltip)/.test(o))return ss(e,t,n,i);if((Ba(l)||e.isGeoMap)&&(Ba(l)&&(Ba(l[0])?l.forEach(function(e,t){s=-1==s&&-1<e.indexOf(r)?t:s}):s=-1<l.indexOf(r)?0:-1),-1!=s||c)){var u;if(c){var d=is.getKey(n,t,e);u=e.subrenderer[a||0][d].total}else if(e.isAxisCategory||e.dataObject.isPolarAxisCategory){var h=e.axes.y.groups[s].scale;if(i!==zl&&h){u=(f=h.domain())[1]}else{var f=e.dataObject.ZC_BAR_getRangeY(s);u=e.dataset.getY(n,s)<0?-f[0]:f[1]}}else if(e.isNonAxisMultiSeriesCategory){var p=e.renderer[0];if(i===Ll)return p.total;if(p.extentY)return p.extentY[1];var g=p.getProcessedNode;u=(g?g(n):n).parent.value}else if("legend"===o){var v=e.seriesdata[0],y=e.dataset.yidx(no.helpers.getParsedYAxisOrder(v.yaxiscolumnorder));u=v.data[0].reduce(function(e,t){return e+(t.disabled?0:Dt(t[y]||0))},0)}else u=e.renderer[0].total;return u||0===u?u:null}return null}function ds(e){this.chart=e,this.data=e.systemConf,this.initialize()}function hs(e,t,a,r){var n=t&&t.animation?ga(e.animation,t.animation,!0):e.animation,i=a.systemConf.chart.plot.animation,o={},l=(n=n||{}).easingType||i.easingType||(/(scatter|bubble$|packedbubble|heatmap)/.test(r)?"cubic-in-out":null)||"linear";return Qa()||a.isHiddenCoainer||a.disableAnimation?o.enabled=!1:o.enabled=!!zi(a,"animation")&&_a([n,i],"enabled"),o.type=n.type,o.easingType=p(l),o.duration=o.enabled?Ea(n.duration,+(i.duration||(/(bar|bullet|gantt|waterfall)/.test(r)?300:/(line|area|arearange)/.test(r)?600:/(scatter|bubble$|funnel|pyramid|heatmap)/.test(r)?1e3:500))):0,o}function fs(i,o,l,s,e,c,t,a,u,d,h){var f=e==Zi,p=a.dataset,g=a.yaxiscolumnorder,v=f?0:-1,y=l.length,m=_t(t/(f?s.length-1:y));!function a(){v++;if(f)for(var e=0;e<y;e++)i[e]=l[e<v?e:Mt(0,v-1)],o[e]=l[e<v?e:v];else i[v-1]=l[v-1],o[v]=l[v];if(v<y){var t=1==v&&f?(s.indexOf(p.getX(l[0]))-(v-1))*m:0,r=(f?s.indexOf(p.getX(l[v]))-s.indexOf(p.getX(l[v-1])):1)*m,n=f?null!=p.getY(l[v],g)&&null!=p.getY(l[Mt(0,v-1)],g):null!=p.getY(l[v],g);n?d.attrs(u(i)).transition().delay(t).duration(r).ease(c).attrs(u(o)).on("end",h===fi?function(e,t){t==y-1&&a()}:a):a()}}()}function ps(e){var a=at(0,Yt);e.attrTween("transform",function(){var t=qe(this).attr("transform");return function(e){return t+" matrix("+jt(a(e))+",0,0,1,0,0)"}})}function gs(e){var t=at(0,1);e.styleTween("opacity",function(){return function(e){return t(e)}})}function vs(e){var a=at(0,1);e.attrTween("transform",function(){var t=qe(this).attr("transform")||"";return function(e){return t+" scale("+a(e)+")"}})}function ys(e){e.interrupt()}cs.get=function(e,p){var t,s=e.metadata,S=s.columns,O=s.axes,A=e.seriesdata.chartdata,P=no.helpers.getParsedYAxisOrder;t={},Object.keys(O).sort(function(e,t){return t.length>e.length?-1:t.length<e.length?1:0}).forEach(function(e){t[e]=O[e]});var c,a=S[(O=t).clr]||{},g=S.map(function(e,t){return function(r){var n=[];for(var e in O){if(O.hasOwnProperty(e))if(-1!=("y"==e?z(O[e]):O[e]).indexOf(r))return"y"==e&&O[e].map(function(e,t){var a=e.indexOf(r);-1!=a&&(n.push(t),n.push(a))}),{type:e,order:n}}}(t)}),T={xidx:S[O.x].dataindex,yidx:function(e){var t=e instanceof Array?O.y[e[0]][e[1]||0]:O.y[e][0];return S[t].dataindex},zidx:(S[O.z]||{}).dataindex,tooltipidx:function(e){return null!=O.tooltip?S[e].dataindex:null},clridx:a.levelindex?null:a.dataindex};return T.setDataObj=function(e){c=e},T.getX=function(e){return za(c)&&(c.hierarchical&&!c.hierarchical.groupByTime||c.isWaterfallEnabled)?e.index:this.getActualX(e)},T.getY=function(e,t,a){try{var r=this.yidx(t);return void 0===e[r]?null:null==a?e[r]:e[r][a]}catch(e){}},T.getZ=function(e){return e[this.zidx]},T.getClr=function(e){return e[this.clridx]},T.getGroupByValues=function(r,e){return null==e||0==e.length?null:e.reduce(function(e,t,a){return za(r[t])?e+r[t]:e},"")},T.getActualX=function(e){return e[this.xidx]},T.getDataType=function(e,t,a){if(a=a||T.seriesTypes.values().map(function(e){return+e}),"x"===e&&0<t)return"ordinalNonLinear";var r=null;if(null!=s.axes[e]){var n=this.getColumnIdx(e,t),i=S[n];r=i.datatype;var o="x"==e&&(c&&c.isPolarAxisCategory||-1!=a.indexOf(Ne.bar)||-1!=a.indexOf(Ne.stkdbar)||-1!=a.indexOf(Ne.bullet)||-1!=a.indexOf(Ne.gantt)||-1!=a.indexOf(Ne.boxplot)||-1!=a.indexOf(Ne.web)),l=-1!=a.indexOf(Ne.heatmap)&&("x"===e||"y"===e);r=o||i.useDiscrete||l?Sn:r}return r},T.getColumnIdx=function(e,a){var r,t=s.axes[e];return r="y"==e?a instanceof Array&&2==a.length?t[a[0]][a[1]]:t[a][0]:"tooltip"==e?t[a]:"x"==e&&0<a?(s.columns.filter(function(e,t){e.levelindex==a&&(r=t)}),r||t[0]):null==t?null:t[0]},T.getColumn=function(e,t){var a=this.getColumnIdx(e,t);return S[a]},T.getColumnName=function(e,t){return(0!=t?Ca:ka)(S[e].columnname)},T.getCustomizedVal=function(p,e,g,v,y,m,b,x,C,k,w){return Aa(C)&&(C=!/(tooltip|legend)/.test(b)),e.toString().replace(yt,function(){var e=arguments[0],t=arguments[1],a=arguments[2],r=arguments[3],n=arguments[4],i=arguments[5],o=arguments[7],l=arguments[8],s=t||a||r||n||i||l;if(-1!=e.indexOf("{{clr}}"))return x;if(null==S[s])return e;var c=b===Sl?m:T.getDataPoint(p,s,g,v,y,m);if(null==c)return"";var u=e.match(/[a-z]+/gi)[0];switch(u){case"col":return T.getColumnName(a,C);case"valatpos":case"val":var d=za(l),h=w;d&&(t=o,h=l);var f=T.getDataPointValue(p,c,t,g,!1,b,v,C,k,h);return-1<[wl,Sl,Ol,Al].indexOf(b)&&(f=f||""),f;case Ll:case Ml:case zl:return T.getDataPointValue(p,c,r||n||i,g,u,b,v,C,k)}})},T.getYaxisColumnIndexBySeriesIndex=function(e,t){var a=A[t].yaxiscolumnorder||[0,0];return Ba(a)?O.y[a[0]][a[1]||0]:O.y[a][0]},T.getDataPoint=function(e,t,a,r,n,i){var o=null,l=S[t=+t]||{},s=a,c=!0;if("y"===(g[t]&&g[t].type)&&this.getYaxisColumnIndexBySeriesIndex(e,a)!==t)return o;if(e.dataObject.isHierarchy){var u=e.renderer[0].getProcessedNode,d=u?u(i):i;c=O.clr&&O.clr[0]===t&&1===d.depth||-1!==e.systemConf.metadata.axes.y[0].indexOf(t)||d.children&&(l.levelindex===d.depth-1||Ba(l.levelindex)&&-1!==l.levelindex.indexOf(d.depth-1))||!d.children&&(null==l.levelindex||null!=l.dataindex)}if(null!=s&&c){var h=e.renderer[e.isAxisCategory||e.dataObject.isPolarAxisCategory?s:0],f=null!=h&&null!=h.seriesdataAfterUpdate?h.seriesdataAfterUpdate[r]:A[s].data[r];o=i||f[n]}return o},T.getDataPointValue=function(e,t,a,r,n,i,o,l,s,c){null!=a&&(a=+a),Aa(l)&&(l=!/(tooltip|legend)/.test(i));var u,d=S[a]||{},h=d.datatype,f=d.levelindex,p=d.dataindex,g=d[h];if(null!=t){if(e.dataObject.isHierarchy){var v=e.renderer[0],y=v&&v.getProcessedNode;u=y?y(t):t}if(null==O.clr&&"legend"!==i||a!=O.clr||e.dataObject.isHierarchy&&"legend"!==i&&null!=d.dataindex){if(e.dataObject.isHierarchy&&(f===u.depth-1||Ba(f)&&-1!==f.indexOf(u.depth-1)))return Hl(g,u.children||null==d.dataindex?t.seriesname:t[p],h,e,i,l);if(null!=f&&e.dataObject.hierarchical){var m=e.dataObject.hierarchical.getParentByIndex(t.index,f-1);return m&&m.value?Hl(g,m.value,h,e,i,l):""}w=a==this.getColumnIdx("y",P(e.seriesdata[r].yaxiscolumnorder))?" - ":void 0;var b,x=n?Nl:Hl;if(s){for(var C=0,k=0;k<s;k++)C+=T.getDataPointUnformattedValue(h,r,k,a,t,i,n,p,c);b=C}else b=T.getDataPointUnformattedValue(h,r,o,a,t,i,n,p,c);return""===b&&n?b:x(g,b,h,e,i,l,w)}return za(this.clridx)&&Pn.isQuantileColorScale(e)?"legend"!==i?Hl(g,this.getClr(t),h,e,i,l):Hl(g,t,h,e,i,l,w="-"):Hl(g,A[r].seriesname,h,e,i,l);var w}return null},T.getDataPointUnformattedValue=function(e,t,a,r,n,i,o,l,s){if(p.dataObject.isHierarchy)var c=p.renderer[0],u=c&&c.getProcessedNode,d=u?u(n):n;if(o){var h=e==An?us(p,t,a,r,n,o,i):null;return null!=h?(i==Sl?n:p.dataObject.isHierarchy&&d.children&&za(d.value)?d.value:p.dataObject.isPercentChart?n.y:n[l])/h*100||0:""}var f=this.getColumnIdx("y",P(p.seriesdata[t].yaxiscolumnorder));return p.dataObject.isHierarchy&&d.children&&r==f&&za(d.value)?d.value:i==Sl?n:za(s)?n[l][s]:n[l]},T.getMetaInfoObj=function(e,t,a){var r=e.systemConf.metadata.axes,n=e.systemConf.metadata.columns,i=e.systemConf.seriesdata.chartdata,o=(a=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?a:0,[]),l=i[a].yaxiscolumnorder||[0,0],s=l instanceof Array?r.y[l[0]][l[1]||0]:r.y[l][0];if(t instanceof Array&&t.forEach(function(e,a){var t=n.indexOf(n.filter(function(e,t){return e.dataindex==a&&(T.yidx(l)!=a||T.yidx(l)==a&&s==t)})[0]);o.push(u(t,e))}),null!=r.clr){var c=r.clr instanceof Array?r.clr[0]:r.clr;o.push(u(c,i[a].seriesname))}return o;function u(e,t){var a=xa(n[e]||{});return a.value=t,a.columnindex=e,a}},T.processMetaData=function(){var n=Va(s,"axes.clr");za(n)&&(n=n[0]),S.forEach(function(e,t){var a;if(t!==n){if(!za(e.datatype)){var r=T.getDataByColumnIndex(e.dataindex);a=T.findDataType(r),e.datatype=a}za(a)&&!za(e[a])&&(e[a]={})}})},T.getDataByColumnIndex=function(t){var a=null,r=!1;return p.seriesdata.some(function(e){return e.data.some(function(e){return e.some(function(e){if(za(e))return(r=za(e[t]))&&(a=e[t]),r})})}),a},T.findDataType=function(e){return"number"==typeof e?31536e6<e?On:An:Sn},T.processMetaData(),T},ds.prototype.initialize=function(){var t=this.chart,e=this.data,a=e.metadata.axes.x,r=e.metadata.columns[a].datatype,n=no.helpers,i=lt.discrete.some(function(e){return-1!==t.chartTypes.indexOf(e)}),o=n.getChartType(null,null,0,t.systemConf),l=o.value,s=o.name,c=so(l)||En(l)||co(l)||fo(l)||"line"===s;this.isHierarchyLayout()&&c&&(this.hierarchical=new no.HierarchicalOrdinalDataAdapter(this.chart),this.chart.seriesdata=this.hierarchical.getSeries()),this.processTimeData(),At&&(r===An||r===On&&!i)&&this.sortData(a,r)},ds.prototype.isHierarchyLayout=function(){return this.chart.systemConf.seriesdata.chartdata.some(ds.helpers.hasInnerSeries)},ds.prototype.processTimeData=function(){var n,e,t,a=this.chart.seriesdata;e=(n=ds.helpers.time.getDataInfo(this.data)).indices,t=n.formatConf.some(function(e){return za(e)&&za(e.inputformat)}),e&&e.length&&t&&a.forEach(function(e,t){var a=e.data,r=no.helpers.is3D(a);Ba(a)&&a.forEach(function(e,t){r&&Ba(e)&&e.forEach(function(e,t){ds.helpers.time.applyFormats(e,n)}),r||ds.helpers.time.applyFormats(e,n)})})},ds.prototype.sortData=function(r){var e=this.chart,n=this.data;return e.seriesdata.forEach(function(e){var t=e.data,a=n.metadata.columns[r].dataindex;no.helpers.is3D(t)?Ba(t)&&t.forEach(function(e){ds.helpers.linear.sort(e,a)}):ds.helpers.linear.sort(t,a)}),n};function ms(w,a){var x={},h={},C=w.defsLocation,S=w.userdata,k=!w.nochartdata&&Pn.isQuantileColorScale(w),O=no.helpers.getChartType,A=ll.filterSelectionByColor;function f(e,m){var b=a.selectAll("g.seriesholder"),t=O(null,"object",e,S).value,x=[],C=[],k=[];return function e(t,a){var r,n;if(go(t)){var i=b.selectAll("g.heatmapseries_"+a);r=i.selectAll("path")}else if(so(t)){var o=b.selectAll("g.barseries_"+a);r=o.selectAll("path.zcbar")}else if(t==Ne.line){var l=b.selectAll("g.lineseries_"+a);r=l.selectAll("path.line"),n=l}else if(En(t)||t==Ne.web){var s=b.selectAll("g.areaseries_"+a);r=s.selectAll("path.area"),n=s}else{if(co(t)){var c=b.selectAll("g.scatterseries_"+a);r=c.selectAll("g.scatter");var u=(r=A(r,!0,m,w)).selectAll("path.outer"),d=r.selectAll("path.inner");return C.push(u,d),x.push(t,t),n=c,void k.push(n)}if(t===Ne.bubblepie||t===Ne.geobubblepie){var h=b.selectAll("g.piegroup");r=h.selectAll("path#arc_"+a)}else if(vo(t)){var h=b.selectAll("g.piegroup");r=h.selectAll(za(m)?"path":"path#arc_"+a)}else if(t==Ne.funnel){var f=b.selectAll("g.funnelgroup"),p=f.selectAll("g.trapezoidgroup");r=p.selectAll(za(m)?"path":"path#funnel"+a)}else if(t==Ne.pyramid){var g=b.selectAll("g.pyramidgroup");r=g.selectAll(za(m)?"g":"g#section_"+a)}else if(t==Ne.wordcloud){var v=b.selectAll("g.wordcloudgroup");r=v.selectAll("text.series_"+a)}else if(-1!=lt.hierarchy.indexOf(t)){var y=b.selectAll("g.hierarchychart");r=y.selectAll(".series_"+a)}}r=A(r,!0,m,w);C.push(r);x.push(t);k.push(n);!En(t)&&t!=Ne.web||e(Ne.line,a);t==Ne.line&&T(m)&&e(Ne.scatter,a)}(t,e),{selectedSeries:C,charttypes:x,parentSeries:k}}function p(e,v){var y,m=[],b=[],x=[],C=a.selectAll("g.seriesholder");return function e(h,f){var p,g;if(w.isAxisCategory||w.isNonAxisMultiSeriesCategory||w.isGeoMap)w.seriesdata.forEach(function(e,t){if(1!=e.disabled&&(za(v)?xr(f,t):!xr(f,t))){g=h||O(null,"object",t,S).value;var a=za(v)?f:t;if(go(g)){var r=C.selectAll("g.heatmapseries_"+a);p=r.selectAll("path")}else if(so(g)){var n=C.selectAll("g.barseries_"+a);p=n.selectAll("path.zcbar")}else if(g==Ne.line){var i=C.selectAll("g.lineseries_"+a);p=i.selectAll("path.line")}else if(En(g)||g==Ne.web){var o=C.selectAll("g.areaseries_"+a);p=o.selectAll("path.area"),y=o}else{if(co(g)){var l=C.selectAll("g.scatterseries_"+a);p=l.selectAll("g.scatter");var s=(p=A(p,!1,v,w)).selectAll("path.outer"),c=p.selectAll("path.inner");return m.push(s,c),x.push(g,g),void b.push(a,a)}if(-1!=lt.hierarchy.indexOf(g)){var u=C.selectAll("g.hierarchychart");p=u.selectAll(".series_"+a)}else if(g==Ne.wordcloud){var d=C.selectAll("g.wordcloudgroup");p=d.selectAll(".series_"+a)}else lt.bubblePie.has(g)&&(p=C.selectAll("g.piegroup").selectAll("path#arc_"+t))}p=A(p,!1,v,w),m.push(p),b.push(t),x.push(g)}});else{g=h||O(null,"object",f,S).value;var i,t=function(e,t){var a=qe(this),r=+this.getAttribute("id").split(i).pop(),n=za(v)?!A(a,!1,v,w).empty():this.getAttribute("id")!=i+f;return n&&!xr(f,r)&&(m.push(a),b.push(r),x.push(g)),n};if(vo(g))i="arc_",p=C.selectAll("g.piegroup").selectAll("path").filter(t);else if(g==Ne.funnel)i="funnel",p=C.selectAll("g.trapezoidgroup").selectAll("path").filter(t);else if(g==Ne.pyramid){i="section_";var a=C.selectAll("g.pyramidgroup");p=a.selectAll("g").filter(t)}}!En(g)&&g!=Ne.web||e(Ne.line,f);g==Ne.line&&T(v)&&e(Ne.scatter,f)}(null,e),{unselectedSeries:m,indices:b,charttypes:x,parentSeries:y}}function g(e,t,a,r,n){if(null!=a&&a.constructor==Object&&null!=e&&null!=e.node()){var i=v(e,r,n),o={},l=y(r),s=ul(e);for(var c in a)if(a.hasOwnProperty(c)&&!xr(s,c)){l?(o[c]=o[c]||[],e.each(function(){o[c].push(qe(this).style(c))})):o[c]=e.styles(c);var u=a[c];Xr.SAFARI||Xr.IE?e.attr(c,function(e){return pa.getVal(u,[e,r])}).style(c,function(e){return pa.getVal(u,[e,r])}):e.style(c,function(e){return pa.getVal(u,[e,r])})}h[i]=h[i]||o,"select"===n&&x.raiseSelection(t||e)}}function d(e,t,a,r){if(null!=t&&t.constructor==Object&&null!=e&&null!=e.node()){var n=v(e,a,r),i=h[n],o=y(a),l=ul(e);for(var s in i)if(i.hasOwnProperty(s)&&!xr(l,s)){function c(){return o?u[d++]:u}var u=i[s],d=0;Xr.SAFARI||Xr.IE?e.style(s,c).attr(s,c):e.style(s,c)}}}function v(e,t,a){var r=e.node(),n=r.localName,i=r.getAttribute("class"),o=r.getAttribute("id"),l=n+"_"+t;return null!=i&&(l+="_"+i),null!=o&&(l+="_"+o),null!==a&&(l+="_"+a),l}function P(e){return ll.hasPatternPallete(w)?/(area|arearange)/.test(e)?"moody":"strokeEnlarge":/(bar|bullet|gantt|area|arearange|pie|funnel|pyramid|web|sunburst|waterfall|boxplot)/.test(e)?"hatchfill":"heatmap"===e||"geoheatmap"===e?"tinyHatchfill":/(treemap|wordcloud)/.test(e)?"blackyBorder":"strokeEnlarge"}function u(e,t,d){var h=Ba(t);x.selSeriesObj=[],(t=rr(t)).forEach(function(e){var t=f(e,d);x.selSeriesObj.push(t);for(var a=x.getLegendHighlightEffect(e,"selectedSeries"),r=t.selectedSeries,n=t.charttypes,i=t.parentSeries,o=r.length,l=0;l<o;l++){var s=ot.get(n[l]),c=h?ks(w,e,d):null,u=x.getEffect(a,s,c,null,e);g(r[l],i[l],u,e,"select")}})}function y(e){var t=O(null,An,e,S);return-1!=lt.hierarchy.indexOf(t)||k||uo(t)||w.rendererConf&&w.rendererConf[w.isAxisCategory?e:0].thresholdType}function r(){if(w.dataObject.isHierarchy){var e=x.getEffect(x.getLegendHighlightEffect(0,"selectedSeries"),w.chartTypes[0].name),t=Object.keys(e);return 0<t.length&&t.some(function(e){return"fill"!==e})}if(w.dataObject.noofAreaEnabledSeries||w.dataObject.noofAreaRangeEnabledSeries)return!0}function T(e){return Xr.IE||Xr.SAFARI||za(e)}return x.highlightSelectedSeries=function(e,t,a){if(x.baseClr=ks(w,t,a),w.isGeoMap&&mo(w.chartTypes[t].value))!function(e,t,a,r){if(x.previousFilterIndex!==r){var n=e.eventHandler.mapEvents,i=n.getPointsByIndex(a,r),o=e.dataObject.getMapFeaturesByDataPoint(i,"array"),l=n.getHighlightEffect(a,null,"selectedSeries","legend");n.highlightPoints(o,"feature",l),x.previousFilterIndex=r}}(w,0,t,a);else switch(w.plot.renderer.mode){case"svg":u(e,t,a);break;case"canvas":!function(f,e,t,p){var g=f.highlightContext||(f.highlightContext=Be.canvasRenderer.updateCanvasContext(f,"highlight-canvas",null,f.canvasScrollGroup));f.systemConf;if(f.canvasScrollGroup){var a=f.axes.rotated,r=a?f.scrolledY:f.scrolledX;qe(g.canvas).styles({left:"0px",top:"0px",transform:"translate("+(a?0:-r+Zt)+","+(a?-r+Zt:0)+")"})}t=rr(t);t.forEach(function(e){!function(e){var t=f.legendHighlight.getLegendHighlightEffect(e,"selectedSeries"),a=f.legendHighlight.getLegendHighlightEffect(e,"unselectedSeries");if(f.dataObject.isPolarAxisCategory&&g.translate(f.plotarea_approx.x,f.plotarea_approx.y),t!==Qt||xt.test(a)){var r=f.chartTypes[e],n=r.name,i=r.value,o=Be.canvasRenderer.createCanvasRenderer(n),l=f.seriesdata[e],s=null,c=f.isNonAxisMultiSeriesCategory&&!f.dataObject.isPolarAxisCategory?0:e,u=f.systemConf.chart.plot.plotoptions[n].fillOpacity,d=ks(f,e,p)||x.baseClr;if(ht.setRendererProp(f,o,l,c,c,{labelQueue:[]}),k&&(En(i)||co(i)))s=f.legendHighlight.getEffect(t,i);else switch(n){case"bar":case"bullet":case"area":case"arearange":case"heatmap":case"treemap":case"web":(h=$r[t]?Jr(t):null)&&(s=Cs(h,d,u,f));break;case"wordcloud":var h;s=(h=$r[t]?Jr(t):null)?{fill:Cs(h,d,u,f)}:f.legendHighlight.getEffect(t,i);break;case"scatter":case"geoscatter":case"bubble":case"geobubble":case"line":s=f.legendHighlight.getEffect(t,i)}Be.canvasRenderer.drawCanvas(f,l,o,g,s,p)}}(e)})}(w,0,t,a);break;default:!function(e,t){if(x.getLegendHighlightEffect(t,"selectedSeries")===Qt)return;x.baseClr=Bn(w,t);var a=w.chartTypes[t],r=a.name,n=a.value,i=f(t);if(0<i.selectedSeries[0].length)return function(e,t){e.style("visibility",t?"visible":"hidden")}(i.selectedSeries[0],!0);if(!w.chartRendered)return;w.systemConf.chart.plot.animation.enabled=!1,w.systemConf.chart.plot.plotoptions[r].animation.enabled=!1,w.seriesdata[t].plotoptions&&w.seriesdata[t].plotoptions.animation&&(w.seriesdata[t].plotoptions.animation.enabled=!1);var o=bs(r),l=w.systemConf.seriesdata.chartdata[t],s=0;if(n===Ne.bar||n===Ne.stkdbar)for(var c=0;c<t;c++)a=w.chartTypes[c],n=a.value,null!=w.seriesdata[c].disabled&&w.seriesdata[c].disabled||!so(n)||(s+=w.seriesdata[c].data.length);ht.setRendererProp(w,o,l,t,t,{labelQueue:[],barDatasetIndex:s}),xs(w,l,o),u(e,t)}(e,t)}},x.highlightUnselectedSeries=function(e,t,a){w.isGeoMap||"svg"===w.plot.renderer.mode?function(e,t,a){for(var r=p(t=rr(t),a),n=r.unselectedSeries,i=r.indices,o=r.charttypes,l=n.length,s=0;s<l;s++){var c=ot.get(o[s]),u=x.getLegendHighlightEffect(i[s],"unselectedSeries"),d=x.getEffect(u,c,$t,$t,i[s]);g(n[s],$t,d,i[s],"unselect")}}(0,t,a):function(){var e=qe(w.context.canvas),t=x.getLegendHighlightEffect(0,"unselectedSeries"),a=w.legendHighlight.getEffect(t,$t,$t,$t,0);g(e,$t,a,0,"unselect")}()},x.reset=function(e,t,a,r){if(w.isGeoMap&&mo(w.chartTypes[t].value))x.previousFilterIndex=null,w.eventHandler.mapEvents.clearHighlightedPoints();else switch(t=rr(t),w.plot.renderer.mode){case"svg":!function(e,t,c){x.selSeriesObj=[],t.forEach(function(e){for(var t=f(e,c),a=x.getLegendHighlightEffect(e,"selectedSeries"),r=t.selectedSeries,n=t.charttypes,i=r.length,o=0;o<i;o++){var l=ot.get(n[o]),s=x.getEffect(a,l,null,null,e);d(r[o],s,e,"select")}x.selSeriesObj.push(t)})}(0,t,a),function(e,t,a){x.unselSeriesObj=p(t,a);for(var r=x.unselSeriesObj.unselectedSeries,n=x.unselSeriesObj.indices,i=x.unselSeriesObj.charttypes,o=r.length,l=0;l<o;l++){var s=ot.get(i[l]),c=x.getLegendHighlightEffect(n[l],"unselectedSeries"),u=x.getEffect(c,s,null,null,n[l]);d(r[l],u,n[l],"unselect")}}(0,t,a);break;case"canvas":w.container.select(".highlight-canvas").style("visibility","hidden"),function(){var e=qe(w.context.canvas),t=x.getLegendHighlightEffect(0,"unselectedSeries"),a=w.legendHighlight.getEffect(t,$t,$t,$t,0);d(e,a,0,"unselect")}()}!1!==r&&(h={},this.resetSelection())},x.getLegendHighlightEffect=function(e,t,a){var r=O(null,"string",e,S),n=O(null,An,e,S),i=w.isAxisCategory||w.isNonAxisMultiSeriesCategory||w.isGeoMap?w.seriesdata[e].plotoptions:w.seriesdata[0].plotoptions,o=w.systemConf.chart.plot.plotoptions[r],l=w.systemConf.legend.highlightEffect[t],s=i&&i.legendHighlightEffect?pa.getValueOfPlotOptions(i.legendHighlightEffect,o.legendHighlightEffect)(t):o.legendHighlightEffect&&o.legendHighlightEffect[t];if("plot"===a)return"unselectedSeries"!==t||w.systemConf.legend.highlightEffect.applyUnselectedSeriesToPlot?s||l||P(r):Qt;var c="selectedSeries"===t&&k&&(En(n)||n===Ne.line)?"strokeEnlarge(6)":P(r);return s||l||c},x.getEffect=function(s,a,c,e,t,r){c=c||x.baseClr;var u=!!/(waterfall)/.test(a),n=Ta(s,w,c=u?b:c,$r,r||"legend");if(n&&n.constructor==Object)return n;s=null===s||function(e,t){return/(line|scatter)/.test(t)&&/(((\D)+fill$)|illuminate|moody|flip)/.test(e)}(s,a)?P(a):s;var i={};if(w.patternPallete&&/(flip|moody|illuminate)/.test(s)){function o(e,t){var a=u?b(e,t):c;if(d.ele)d.bgClr_base=zn(a,1,"darker",_);else{var r="flip"===s?a:zn(a,1,"moody"===s?"darker":"brighter",_);if(d.bgClr_base=r,d.stroke_base=r,"flip"===s){var n=(d=xa(d)).bgClr_base;d.bgClr_base=d.stroke_base,d.stroke_base=n;var i=Za(d.bgClr),o=Za(d.stroke);d.bgClr=o,d.stroke=i}}var l=tn.get(tn.svg_patterns,"svgPatternFill",d,{chartObj:w});return"url("+C+"#"+l+")"}var l=w.patternPallete[(t||0)%w.patternPallete.length],d=$r[l]?Jr(l):en(l);i.fill=u?o:o()}else if(/(saturate|grayscale|blur|glow|shadow|boxShadow)/.test(s)){var h,f=/(saturate|grayscale)/.test(s)?"colorMatrix":"dropShadow";switch(s){case"saturate":h={type:"saturate",values:"0.3"};break;case"grayscale":h={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":h={blur:2,source:"SourceGraphic"},i.opacity=.7;break;case"glow":h={blur:3,color:"gold"};break;case"shadow":h={dx:5,dy:5,blur:3};break;case"boxShadow":i.fill=c,i.stroke="white",h={dx:0,dy:0,blur:5,color:"rgba(0,0,0,0.3)"}}var p=tn.get(tn.svg_filters,f,h,{chartObj:w});i.filter="url("+C+"#"+p+")"}else if(/(moody|illuminate)/.test(s)){var g="moody"===s,v=function(e,t){var a=u?b(e,t):c;return-1!=a.indexOf("url")?g?"grey":"silver":zn(a,.6,g?"darker":"brighter",_)};i.fill=u?v:v()}else if(-1<s.indexOf("strokeEnlarge")){var y=s.split(/(\d+)/g)[1];if(i["stroke-width"]=za(y)?+y:3,k&&(i.visibility=$t),e)for(var m in e)i[m]=e[m]}else if("fadeOut"===s)i.opacity=.3;else if("blackyBorder"===s)i.stroke="rgba(0,0,0,0.5)",i["stroke-width"]=1;else if("invert"===s)i.fill="white",i.stroke=c,i["stroke-width"]=1,i["paint-order"]=null;else if("ridge"===s)i.fill=c,i.stroke="white",i["stroke-width"]=7;else if(s!==Qt){if(d=Jr(s)){v=function(e,t){var a=u?b(e,t):c,r=Jr(s);r.bgClr_base=a,r.stroke="transparent,white,white";var n=tn.get(tn.svg_patterns,"svgPatternFill",r,{chartObj:w});return"url("+C+"#"+n+")"};i.fill=u?v:v()}else i.fill=c}return i;function b(e,t){return c=x.baseClr||Bn(w,t),"waterfall"==a?Pn.getWaterfallColor(e,w.renderer[t].commonRendererProp().params.categoryColorConfig,c):c}},x.raiseSelection=function(e){r()&&e.raise()},x.resetSelection=function(){if(r()){var e,t=a.selectAll("g.seriesholder");if(w.dataObject.noofAreaEnabledSeries||w.dataObject.noofAreaRangeEnabledSeries){e=t.selectAll(function(){return this.childNodes}).filter(function(){return"g"==this.tagName})}else e=t.selectAll("g.hierarchychart").selectAll("*");e.sort(function(e,t){return e.index-t.index})}},x}var bs=(Be.svgRenderer=function(g,v){var e={},y=g.systemConf,m=no.helpers;return e.draw=function(u){if(g.scroll&&!g.scroll.initialized&&g.scroll.visible)return!1;g.dataset.getDataType("x")==Sn&&g.isAxisCategory&&it.barBandwidth(g),v.barDatasetIndex=0;var d,h=[];g.chartRendered=!1;var f=g.dataObject.isCombinationalChart,p=f?ht.arrangeSeriesRenderingOrder(g):g.seriesdata;g.seriesdata.forEach(function(e,t){var a=p[t],r=f?a.seriesidx:t;if(!(0<r)||g.isAxisCategory||g.dataObject.isPolarAxisCategory){(d=m.getChartType(a.type||g.userdata.seriesdata.type,An))==Ne.bubblepie&&Aa(g.bubblePieRendererIndex)&&(g.bubblePieRendererIndex=r);var n=[],i=ot.get(d),o=a.plotoptions,l=hs(y.chart.plot.plotoptions[i],o,g,i),s=l.enabled,c=l.type;null==g.renderer[r]&&(g.renderer[r]=bs(i),g.rendererConf[r]=new Be.rendererConf),g.renderer[r].chartRendered=!1,0==t&&(Lo(g,y.chart.plot.events,0,"init"),g.hideLoading(g.container)),ht.setRendererProp(g,g.renderer[r],a,r,t,v),s&&!u&&(co(d)||En(d))&&[qi,Zi,Yi,Di,Vi,Hi,Bi].indexOf(c)<0?(h[r]=!1,n[r]=setInterval(function(){g.renderer[r].chartRendered&&clearInterval(n[r]),!h[r]&&(0==r||0<r&&g.renderer[r-1].chartRendered)&&(xs(g,a,g.renderer[r]),h[r]=!0)},10)):xs(g,a,g.renderer[r])}}),ht.renderCompletedEvents(g,u,v)},e}).createSVGRenderer=function(e){switch(e){case"waterfall":case"gantt":case"boxplot":case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":case"geobubble":case"geoscatter":e="scatter";break;case"bubblepie":case"geobubblepie":e="bubblepie"}return new dt[e]},xs=Be.svgRenderer.drawSVG=function(e,t,a,r){if(r)a.update();else{clearTimeout(a.renderedTimer);var n=e.wrap.data([e.systemConf]),i=Fo(e);o(n,"seriesholder",{x:i.left,y:i.top}).datum(e.seriesdata).call(a),e.dataObject.isPolarAxisCategory&&n.selectAll("g.seriesholder").selectAll(function(){return this.childNodes}).attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),o(e.staticPaneSVG,"labelholder",{x:i.left,y:i.top})}function o(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}};function Cs(e,t,a,r){return e.bgClr_base=Mn(t,a),e.stroke="transparent,white,white",tn.get(tn.canvas_patterns,"canvasPatternFill",e,{chartObj:r})}function ks(e,t,a){if(za(a)){var r=e.systemConf.legend.colorBand.ranges;return r&&r.length?Bn(e,a):e.axes.clr.scale((a[0]+a[1])/2)}return Bn(e,t)}var ws={getSize:function(e,t,a,r){r=r||[];var n=t[0],i=t[1],o=a[0],l=a[1],s=r[0],c=r[1],u=mr(e.width,n,mr(o,n)),d=mr(e.height,i,mr(l,i)),h=mr(e.maxWidth,n,s||u),f=mr(e.maxHeight,i,c||d);return{w:zt(h,u),h:zt(f,d),maxw:h,maxh:f}},getPieColumnIndex:function(e){var a,r=Ea(e.systemConf.chart.plot.plotoptions.bubblepie.dataindex,3);return e.systemConf.metadata.columns.some(function(e,t){if(e.dataindex===r)return a=t,!0}),za(a)?a:e.dataset.getColumnIdx("y",0)},hasSharedSeries:function(e){return e.systemConf.tooltip.sharedSeriesInfo&&e.isAxisCategory&&!go(e.chartTypes[0].value)}},Ss={getContentTemplate:function(a,e,t,r){var i,n,o=a.systemConf,l=o.metadata,s=l.axes,c=l.columns,u=Ta(t||s.tooltip||rt(c.length),null,a.userdata.seriesdata.chartdata[0].data[0][0]),d=s.y&&z(s.y)||[],h=o.tooltip,f=mr(h.maxWidth||"40%",a.chartarea.width),p=ws.hasSharedSeries(a),g="column"===h.view,v=[];if(e)v=e;else{if(za(o.tooltip.theme)&&Oa(window.$ZC,"tooltip.getTheme"))u=a.tooltip.content;else if(p){var y=$();a.seriesdata.forEach(function(e,t){Ss.updateSharedInfo(a,y,t)}),u=Ss.getRawSharedContent(a,y,u)}u.forEach(function(e,t){var a,r,n=r="";if(c[e]){if(1<d.length&&-1<d.indexOf(e)&&!p){if(i)return;i=!0,u.forEach(function(e){-1<d.indexOf(e)&&(n+="{{col("+e+")}}",r+="{{val("+e+")}}")})}else n="{{col("+e+")}}",r="{{val("+e+")}}";a=[n,r]}else a=e;v.push(a)})}return n=g?"<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>"+(n=v.reduce(function(e,t){return e+(Ba(t)?"<tr style='vertical-align: top;'><td style='max-width:"+.4*f+"px;'>"+t[0]+": </td><td style='max-width:"+.6*f+"px;'><b>"+t[1]+"</b></td></tr>":"<tr style='vertical-align: top;'><td style='max-width:"+f+"px;'>"+t+"</td></tr>")},""))+"</tbody></table>":v.reduce(function(e,t,a){return e+(Ba(t)?t[0]+" : "+t[1]:t)+(a==v.length-1?"":"<br>")},""),r&&(n=n.replace(/{{clr}}/g,"black")),n},updateSharedInfo:function(e,t,a){var r=e.dataset,n=r.getColumnIdx("clr"),i=r.getColumnIdx("y",e.seriesdata[a].yaxiscolumnorder||[0,0]),o="{{val("+(e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?ws.getPieColumnIndex(e):i)+")}}";t.y_val_pattern=t.y_val_pattern||"",t.y_col_pattern=t.y_col_pattern||"",-1==t.y_val_pattern.indexOf(o)&&(t.y_val_pattern+=o,t.y_col_pattern+=e.ismultiy||Aa(n)?""!=t.y_col_pattern?"":"{{val(null)}}":"{{val("+n+")}}")}};Ss.getRawSharedContent=function(a,e,t){function r(e){var t=za(d)?d:e;return(Ba(u)?u:[u]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+t+")}}")||-1!=e.indexOf("{{per("+t+")}}"))})}var n=a.systemConf.metadata,i=n.axes,o=n.columns,l=z(i.y),s=a.dataset,c=[],u="",d=a.dataObject.pieWithAxis&&!a.dataObject.isCombinationalChart?ws.getPieColumnIndex(a):$t,h=t.some(function(e){return yt.lastIndex=0,"string"==typeof e&&yt.test(e)}),f=a.isAxisCategory;if(h)t.forEach(function(e,t){za(o[e])&&(e=["{{col("+e+")}}","{{val("+e+")}}"]),(Ba(u=e)||"string"==typeof e)&&l.some(r)&&f?a.seriesdata.forEach(function(){c.push(Ba(e)?wa(e):e)}):c.push(e)});else{var p="{{val("+s.getColumnIdx("x")+")}}",g=e.y_val_pattern,v=p,y=["<div style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:{{clr}}''></div>"+e.y_col_pattern,g];c.push(v),a.dataObject.pieWithAxis&&!a.dataObject.isCombinationalChart&&(c.push(["{{col("+s.getColumnIdx("y",0)+")}}","{{val("+s.getColumnIdx("y",0)+")}}"]),c.push(["{{col("+s.getColumnIdx("z")+")}}","{{val("+s.getColumnIdx("z")+")}}"])),f?a.seriesdata.forEach(function(){c.push(wa(y))}):c.push(wa(y))}return c};var Os={MAXHEIGHT_BLOCK:"50%",updatePlotarea4BlockTooltip:function(e){var t=e.systemConf.tooltip,a=t.block||{},r=t.position||"relative";if(t.enabled&&"block"===r){if(Aa(t.height)&&!t.content)ue.tooltip(e.tooltip.element,e.systemConf,e).initialize(),e.tooltip.element.selectAll("div#tooltipcontent").html(Ss.getContentTemplate(e,$t,$t,!0)),e.tooltip.preCalculatedHeight=e.tooltip.element.node().clientHeight;else e.tooltip.preCalculatedHeight="20%";var n=e.plotarea;e.tooltip.blockarea=xa(n);var i=a.vAlign||Ko,o=nr(qa(t.borderWidth,1)),l=o.top,s=o.right,c=o.bottom,u=o.left,d=e.chartarea,h=d.width-u-s,f=d.height,p=ws.getSize(t,[h,f],["100%",e.tooltip.preCalculatedHeight]),g=zt(p.h,mr(Os.MAXHEIGHT_BLOCK,f))+l+c;i===Xo&&(i=Ko),n.height-=g,n[i]+=g}}},As=function(){};function Ps(e,t){var a=t.nearest||t.selectionSet[0];Ts(this.chart);var r=this.chart.eventHandler.tooltipElement,n=!0===this.chart.systemConf.tooltip.enabled,i=ws.hasSharedSeries(this.chart),o=this.chart.eventHandler.getPointType(a),l=this.chart.dataset.getDataType("x"),s=0<this.chart.dataObject.noofBarEnabledSeries,c=(i=ws.hasSharedSeries(this.chart),l===Sn&&(s||i));if(n&&"series"==o){var u=ko(lo(this.chart.eventHandler.targetEvent),e,a._x,a._y,this.chart,a,this.chart.eventHandler.rotated,i,this.chart.eventHandler.tooltipSharedInfo,c,this.chart.eventHandler.isPolarAxisCategory,yo(this.chart.chartTypes[a.seriesIndex].value)&&this.chart.subrenderer[a.subSeriesIndex][is.getKey(a,a.seriesIndex,this.chart)].fillColorFunc);r.show(this.chart,u,null,!0,u.helpers)}else if(n&&("marker"==a.type||"levelMarker"==a.type)){var d=ko(lo(this.chart.eventHandler.targetEvent),e,0,0,this.chart,a,this.chart.eventHandler.rotated,i,{},!0,!1,!1),h=this.chart.eventHandler.bulletEvents.getTooltipContent(a,0);d.helpers.inheritColors=!0,d.helpers.itemIndex=a.sortedItemIndex,d.helpers.seriesIndex=a.sortedItemIndex,d.helpers.chartType=a.chartType,r.show(this.chart,d,h,!1,d.helpers)}}function Ts(e){if(!e.eventHandler.tooltipElement){e.eventHandler.tooltipElement=ue.tooltip(e.tooltip.element,e.systemConf,e),e.eventHandler.tooltipElement.initialize();var t=e.eventHandler.tooltipElement;e.eventHandler.addListeners(e.eventHandler.tooltipElement.element,"tooltip"),"auto"===e.systemConf.tooltip.pointerEvents&&(t.element.on("mouseenter",function(){e.eventHandler.mouseOnTooltip=!0}),t.element.on("mouseleave",function(){e.eventHandler.mouseOnTooltip=!1,e.eventHandler.handlers.mouseout.call(this)}));var a="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",r=e.container.node(),n=null;e.d3container.on(a,function(){var e=r.getBoundingClientRect();n&&(n.left===e.left&&n.top===e.top||t.hide(t.element)),n=e})}}function _s(e){e=qa(e,{}),this.startWeekDay=za(e.startWeekDay)?e.startWeekDay:1,this.startMonth=za(e.startMonth)?e.startMonth:0}function Es(e,r,n,t,i){var o=t.length;return e||function(e,t){var a=r.reverseColor?o-1-t:(n.isAxisCategory||n.isNonAxisMultiSeriesCategory||n.dataObject.isPolarAxisCategory||n.isGeoMap)&&!r.multiColoring?i:t;return Hn(n,a,e&&e.data?e.data:e,i)}}function Ls(e,t){return ga(t.systemConf.chart.plot.datalabels.boundBox,e.boundBox,!0)}function Ms(e,t){return!0===_a([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"show")}function zs(e,t){return Mt(Ea(_a([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"padding"),2),0)}function Ds(e,t){return Ea(_a([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"strokeWidth"),1)}function Is(e,t,a,r){return Mt(2*(a||0)+r-e-2*t,0)}function Rs(e){var t=!0===(e=e||{}).enabled,a={};return a.enabled=t,a.width=t?za(e.width)?+e.width:10:0,a.height=t?za(e.height)?+e.height:4:0,a}function js(e){return!(!1===e.display||Aa(e.text)||""===e.text)}function Hs(e,t,a,r){var n=t&&t.datalabels?ga(e.datalabels,t.datalabels,!0):e.datalabels;return a&&function(e,t,a){var r,n,i,o,l,s,c=t.chartTypes[a].name,u=Oa(t.userdata,"chart.plot.plotoptions."+c+".datalabels",!0)||{},d=Oa(t.seriesdata[a],"plotoptions.datalabels",!0)||{};(d.showAs||u.showAs)&&(e.showAs=d.showAs||u.showAs||e.showAs);(r=u.innerLabel)?((o=e.innerLabel).showAs=r.showAs||o.showAs,(n=r.parentLabel)&&((l=e.innerLabel.parentLabel).showAs=n.showAs||l.showAs)):(i=u.stackLabels)&&((s=e.stackLabels).showAs=i.showAs||s.showAs)}(n,a,r),n}function Bs(e,t,a,r,n,i,o){var l=a.systemConf;return Ba(r)&&za(i)&&(r=r[i]),fn(e,[{fontColor:Fs(l,r,t,a,n,i,o)},t,l.chart.plot.datalabels,l.chart,l.canvas,Wr])}function Fs(e,t,a,r,n,i,o){var l=a.fontColor;if("function"==typeof l){var s=Ta(l,t,r);if(za(s))return s}var c,u=Va(r.systemConf,"chart.plot.datalabels")||{},d=Va(r.systemConf,"map.labels")||{},h=r.isGeoMap?qa(u.fontColor,d.fontColor):u.fontColor,f=r.chartTypes[i||0].value,p=za(e.legend.imagePallete),g=so(f)&&r.dataObject.isstacked(f)&&!0!==o;Ms(a,r)&&(c=Ls(a,r).fillColor||t);if(l===ct&&h===ct){if(c&&c!==qt)return Ga(c);if(n&&p)return"#444444";if(n&&-1<lt.innerLabels.indexOf(f)||g||-1<lt.datalabelsInside.indexOf(f))return Ga(t)}return(p||(za(l)||null!==h)&&null!==l?l:t)||qa(h,e.chart.fontColor,e.canvas.fontColor,Wr.fontColor)}function Ws(e,t){return!(e.x1<t.x1||e.y1<t.y1||e.x2>t.x2||e.y2>t.y2)}function Vs(e,t){if(zi(t,wl)){var a=t.systemConf.metadata.axes.label;return a&&za(a[0])||!0===_a([e,t.systemConf.chart.plot.datalabels],"show")}return!1}function Ns(e,t){return t.dataObject.noofBarEnabledSeries&&t.dataObject.isstacked()&&!t.dataObject.isStackedPercentChart&&e&&e.show}function Ys(e,t,a,r,n,i){var o=+a[0],l=+a[1],s=t.plotarea,c={left:-r,right:-r,top:0,bottom:0},u=qo;n=n||{left:-o,top:-l,right:s.width-o,bottom:s.height-l},e.each(function(){var e=ba(this),t={left:e.x+(i?i[0]:0),top:e.y+(i?i[1]:0),width:e.width,height:e.height};cn(this,this.textContent,t,n,u,"..",c)})}function Gs(e){return e.staticPaneSVG.select(".labelholder")}function Us(r,e){var t,a,n=r.systemConf,i=r.dataObject,o=i.isstacked(),l=i.noofBarEnabledSeries,s="y"===e;if(t=r.seriesdata.some(function(e,t){if(!e.disabled){var a=e.plotoptions;return Vs(Hs(n.chart.plot.plotoptions[r.chartTypes[t].name],a),r)}}),s&&l&&o&&!i.isStackedPercentChart){var c=i.allChartTypes,u=r.dataObject.filterEncode("stack",function(e){return e.seriesIndices.some(function(e){return so(c[e])})});if(!u.length)return!1;var d=ls(u[0]),h=n.chart.plot.plotoptions[r.chartTypes[d].name].datalabels.stackLabels||{};a=!!h&&h.show}return t||a}function Xs(e){var t=e.systemConf,a=e.dataObject.totalnoofdatas;if(+t.canvas.intelligence.dataCount.datalabels<a)return!1;if(!0===Va(t.chart,"plot.datalabels.show"))return!0;for(var r=e.seriesdata,n=r.length;n--;){var i=t.chart.plot.plotoptions[e.chartTypes[n].name],o=i.datalabels;if(za(r[n].plotoptions)&&(o=Hs(i,r[n].plotoptions)),Vs(o,e))return!0}return!1}function Zs(e,t,a,r,n){var i="y"==a?r?e.x:e.y:r?e.y:e.x,o=r&&!n||!r&&n,l=u("y"==a?o?ge:T:o?T:ge).left(t,i,0,r&&n?t.length:t.length-1),s=r?i:t[l],c=r?t[l-1]:i;return 0<l&&c<s?l-1:l}function Qs(e,t,a,r,n){var i=it.getOuterPadding(e,t,a,r);return 2*(zt(e[0],e[1])+n*i)}function qs(t){return t.ordinalRange||(t.ordinalRange=t.domain().map(function(e){return t(e)}))}function Ks(e){var t=no.helpers.getChartType(e.type||this.globalChartType,An);return!e.disabled&&so(t)}_s.MILLISEC=0,_s.SECOND=1,_s.MINUTE=2,_s.HOUR=3,_s.DATE=4,_s.MONTH=5,_s.SECOND_TYPE="ABSSECOND",_s.MINUTE_TYPE="ABSMINUTE",_s.HOUR_TYPE="ABSHOUR",_s.DAY_TYPE="ABSDAY",_s.DATETIME_TYPE="DATETIME",_s.DATE_TYPE="DATE",_s.ABSWEEK_TYPE="ABSWEEK",_s.ABSMONTH_TYPE="ABSMONTH",_s.ABSQUARTER_TYPE="ABSQUARTER",_s.ABSYEAR_TYPE="YEAR",_s.D3_WEEKDAY_FNS=[C,k,w,O,A,I,R],_s.DAY_MILLIS=864e5,_s.prototype.setZero=function(e,t){for(var a=0,r=0;r<=t;r++)switch(r){case _s.MILLISEC:a+=this.getMilliseconds(e),this.setMilliseconds(e,0);break;case _s.SECOND:a+=this.getSeconds(e),this.setSeconds(e,0);break;case _s.MINUTE:a+=this.getMinutes(e),this.setMinutes(e,0);break;case _s.HOUR:a+=this.getHours(e),this.setHours(e,0);break;case _s.DATE:a+=this.getDate(e)-1,this.setDate(e,1);break;case _s.MONTH:a+=this.getMonth(e),this.setMonth(e,this.startMonth);break;default:throw"unknown type 333: "+t}return a},_s.prototype.getBaseValue=function(e,t,a){switch(t){case _s.SECOND_TYPE:case _s.DATETIME_TYPE:var r=this.setZero(e,_s.MILLISEC);a&&0<r&&this.setSeconds(e,this.getSeconds(e)+1);break;case _s.MINUTE_TYPE:r=this.setZero(e,_s.SECOND);a&&0<r&&this.setMinutes(e,this.getMinutes(e)+1);break;case _s.HOUR_TYPE:r=this.setZero(e,_s.MINUTE);a&&0<r&&this.setHours(e,this.getHours(e)+1);break;case _s.DAY_TYPE:case _s.DATE_TYPE:r=this.setZero(e,_s.HOUR);a&&0<r&&this.setDate(e,this.getDate(e)+1);break;case _s.ABSWEEK_TYPE:r=this.setZero(e,_s.SECOND);var n=this.startWeekDay;a?(0<r&&this.setDate(e,this.getDate(e)+1),n<this.getDay(e)?this.setDate(e,this.getDate(e)+(7-this.getDay(e)+n)):this.setDate(e,this.getDate(e)+(n-this.getDay(e)))):n>this.getDay(e)?this.setDate(e,this.getDate(e)-(7-n+this.getDay(e))):this.setDate(e,this.getDate(e)-(this.getDay(e)-n));break;case _s.ABSQUARTER_TYPE:case _s.ABSMONTH_TYPE:r=this.setZero(e,_s.DATE);a&&0<r&&this.setMonth(e,this.getMonth(e)+1);break;case _s.ABSYEAR_TYPE:r=this.setZero(e,_s.MONTH);a&&r>this.startMonth&&this.setFullYear(e,this.getFullYear(e)+1);break;default:throw"unknow type 222: "+t}},_s.prototype.getTicksList=function(e,t,a,r){for(var n=new Array,i=t.getTime(),o=e.getTime(),l=new Date(o);o<=i;){switch(n.push(l),l=new Date(o),r){case _s.SECOND_TYPE:case _s.DATETIME_TYPE:l.setTime(l.getTime()+1e3*Et(a));break;case _s.MINUTE_TYPE:l.setTime(l.getTime()+6e4*a);break;case _s.HOUR_TYPE:l.setTime(l.getTime()+36e5*a);break;case _s.DAY_TYPE:case _s.DATE_TYPE:l.setTime(l.getTime()+a*_s.DAY_MILLIS);break;case _s.ABSWEEK_TYPE:this.setDate(l,this.getDate(l)+a);break;case _s.ABSMONTH_TYPE:case _s.ABSQUARTER_TYPE:this.setMonth(l,this.getMonth(l)+a);break;case _s.ABSYEAR_TYPE:this.setFullYear(l,this.getFullYear(l)+a)}o=l.getTime()}return n},_s.prototype.range=function(e,t,a,r,n){switch(e=new Date(e.getTime()),t=new Date(t.getTime()),this.getBaseValue(e,r,!1),this.getBaseValue(t,r,!0),r){case _s.SECOND_TYPE:case _s.DATETIME_TYPE:var i=1,o=Lt((t.getTime()-e.getTime())/1e3);return s=d(s=Lt(o/a)||i,n),{TYPE:j,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.MINUTE_TYPE:i=1;return s=d(s=Lt((t.getTime()-e.getTime())/(6e4*a))||i,n),{TYPE:B,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.HOUR_TYPE:i=1;return s=d(s=Lt((t.getTime()-e.getTime())/(36e5*a))||i,n),{TYPE:B,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.DAY_TYPE:case _s.DATE_TYPE:i=1;return s=d(s=Lt((t.getTime()-e.getTime())/(a*_s.DAY_MILLIS))||i,n),{TYPE:F,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.ABSWEEK_TYPE:i=1;var l=Lt((t.getTime()-e.getTime())/(a*_s.DAY_MILLIS*7));l=d(l,n);var s=7*Lt(l)||i;return{TYPE:W,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.ABSMONTH_TYPE:i=1;return s=d(s=Lt(this.getMonthsDiff(e,t)/a)||i,n),{TYPE:V,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case _s.ABSQUARTER_TYPE:i=1;var c=this.getMonthsDiff(e,t)/a||i,u=Lt(c/3);return u=d(u,n),{TYPE:V,INTERVAL:s=3*u,TICKS:this.getTicksList(e,t,s,r)};case _s.ABSYEAR_TYPE:i=1;return s=d(s=Lt((t.getFullYear()-e.getFullYear())/a)||i,n),{TYPE:N,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};default:throw"UNKNOWN TYPE 111: "+r}function d(e,t){return null!=t&&e<=t?t:e}},_s.MAX_DATE=new Date(2008,8,29,23,23,23,999),_s.prototype.getMaxDate=function(e,t){return Hl(e,_s.MAX_DATE,On,null,"axis",null,null,t)},_s.prototype.getMonthsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},_s.prototype.getYearsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},_s.prototype.getFullYear=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCFullYear():e.getFullYear()},_s.prototype.getMonth=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMonth():e.getMonth()},_s.prototype.getDay=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDay():e.getDay()},_s.prototype.getDate=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDate():e.getDate()},_s.prototype.getHours=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCHours():e.getHours()},_s.prototype.getMinutes=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMinutes():e.getMinutes()},_s.prototype.getSeconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCSeconds():e.getSeconds()},_s.prototype.getMilliseconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMilliseconds():e.getMilliseconds()},_s.prototype.setFullYear=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCFullYear(t):e.setFullYear(t)},_s.prototype.setMonth=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMonth(t):e.setMonth(t)},_s.prototype.setDate=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCDate(t):e.setDate(t)},_s.prototype.setHours=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCHours(t):e.setHours(t)},_s.prototype.setMinutes=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMinutes(t):e.setMinutes(t)},_s.prototype.setSeconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCSeconds(t):e.setSeconds(t)},_s.prototype.setMilliseconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)},Pn.quantileScale=function(){var a=[],t=[],n=[];function r(a){var r;return n.forEach(function(e,t){a>=e[0]&&a<=e[1]&&(r=t)}),za(r)?t[r]:null}return r.domain=function(e){if(arguments.length){a=e;for(var t=0;t<a.length;t+=2)n.push([a[t],a[t+1]]);return r}return a},r.range=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Pn.quantileScale().domain(a).range(t)},r},it.getScale=function(c,u,e,t,d,a,h,r,n){var i,f,o=!(9<arguments.length&&void 0!==arguments[9])||arguments[9],p=c.systemConf,l=a.getDataType(h,d),s=function(e,t,a){return"x"===t?e.systemConf.chart.axes.xaxis:"clr"===t?e.systemConf.legend.colorBand:e.systemConf.chart.axes.yaxis[a||0]}(c,h,d),g=u.hierarchical,v=za(s.minRange),y=za(s.maxRange),m=c.chartTypes[0].name,b=p.chart.plot.plotoptions[m],x="dial"===m||"web"===m&&"x"===h,C="heatmap"===m,k="clr"===h&&Pn.isQuantileColorScale(c),w=o?Va(p,"chart.brush."+h+"["+d+"]"):ct,S=function(e,t,a,r){var n=e.systemConf,i=e.chartTypes[0].name,o=e.plotarea;{if("dial"===i||"web"===i&&"x"===t){var l=n.chart.plot.plotoptions[i],s=l.startAngle,c=l.endAngle;return r?[Ea(c,2*Yt),Ea(s,0)]:[Ea(s,0),Ea(c,2*Yt)]}return"clr"===t?e.imagePallete||e.seriesColor:r?"bottom"===a||"top"==a?[Ro(e,"width",o),0]:[0,Ro(e,"height",o)]:"bottom"===a||"top"==a?[0,Ro(e,"width",o)]:[Ro(e,"height",o),0]}}(c,h,t,s.reversed),O=x||C||"x"!=h?0:Ea(b.padding,u.noofBarEnabledSeries?.2:.9),A=x||k||C||n?0:"y"===h?Ea(s.outerPadding,c.datalabels.hasFixedPosition?1e-8:.05):null!=A?A:Ea(b.outerPadding,.02);switch("clr"===h&&(f=Pn.getColorDomain(c),S=Pn.getProcessedColorRange(S,f,p.legend,c)),l){case"numeric":r?f=r:"x"===h?f=u.getMinMaxX(0,o):"y"===h&&(f=u.getMinMaxY(d,A,ct,o));var P=f[0],T=f[1];if("NoData"==f[0]&&"NoData"==f[1]&&(f=[0,0]),!w&&(r||"x"==h)){var _=0==(U=f[1]-f[0])?c.plotarea.width/2:U*A;f[0]=v?f[0]:f[0]-_,f[1]=y?f[1]:f[1]+_}V="log"===s.scaleType?d3.scaleLog:"clr"===h&&s.ranges&&s.ranges.length?Pn.quantileScale:Je,s.padding&&(S[0]>S[1]?(S[0]-=s.padding,S[1]+=s.padding):(S[0]+=s.padding,S[1]-=s.padding)),i=V().domain(f).range(S),"log"===s.scaleType&&i.clamp(!0);var E=(X=[P,T]).map(i);i.actualRange=E,i.origRange=S,i.originalDomain=X,i.correction=_;break;case"ordinal":if(r)f=r;else if("clr"!==h){var L=u.getCategories(h,d,o);f=u.getDomain(L,!0)}var M,z=0,D=[S[0],S[1]];if(O=1===f.length?0:O,A&&!n&&!C&&"clr"!==h&&!x){z=it.getOuterPadding(S,f.length,O,A);var I=function(e,t,a){var r=0,n=0,i=e[0]<e[1],o=i?0:1,l=i?1:0;(c.datalabels.moduleExists&&Xs(c)||u.isBubbleEnabled)&&(n=u.extendOuterpadding(f,e,p,O,a,h,d));r+=n;var s=Dt(e[1]-e[0]);return r+=s*t,e[o]=e[o]+r,e[l]=e[l]-r,{range:e,outerPaddingPx:r}}(S,A,z);S=I.range,M=I.outerPaddingPx}i=(V="clr"===h?K:Q)().domain(f),"clr"===h?i.range(S):i.range(S).paddingInner(O).paddingOuter(0),qs(i),i.origRange=D,i.outerPaddingPx=M||0;break;case"time":var R=a.getColumn(h,d),j=R[R.datatype],H=j&&j.subfunction,B=qa(j&&j.useUTC,!1);r?f=r:"x"===h?f=u.getMinMaxX(0,o):"y"===h&&(f=u.getMinMaxY(d,0,o));var F=new Date(f[0]),W=new Date(f[1]);P=F,T=W;za(H)||(H=as(W-F).subFunction);var V,N=0,Y=void 0;if(!w&&"clr"!==h){if(!p.chart.axes[h+"axis"].disableBaseValue){var G=new _s(j);G.useUTC=B,G.getBaseValue(F,H,!1),G.getBaseValue(W,H,!0)}var U;u.isBubbleEnabled&&(Y=u.overBubbles([F.getTime(),W.getTime()],h,"y"==h?d:null),F=new Date(F.getTime()-Y[0]),W=new Date(W.getTime()+Y[1])),P=F,N=(0==(U=(T=W).getTime()-F.getTime())?c.plotarea.width/2:U*A)+(0==A?0:u.getCorrectionOverDataLabels([F.getTime(),W.getTime()],"x")),F=new Date(v?f[0]:F.getTime()-N),W=new Date(y?f[1]:W.getTime()+N),f=[F,W]}i=(V="clr"===h&&s.ranges&&s.ranges.length?Pn.quantileScale:q)().domain(f).range(S);var X;E=(X=[P,T]).map(i);i.originalDomain=X,i.correction=N,i.actualRange=E,i.outerPaddingPx=zt.apply(null,E),i.origRange=S,i.correctionOverBubbles=Y;break;case"ordinalNonLinear":L=u.getCategories(h,d,o);f=u.getDomain(L);D=[S[0],S[1]];var Z=g.rangeList?g.rangeList[d-1]:null;(i=function e(){var r,t,n,a,i;function o(e){return r?r.get(e):null}return o.domain=function(e){return arguments.length?(t=e,o):t},o.rangeBand=function(){return 0},o.rangeBands=function(e){if(!arguments.length)return n;if(null==e)return o;i=e,n=new $,r=new $;for(var t=-1,a=e.length;++t<a;)r.set(t,e[t][0]),n.set(t,e[t][1]-e[t][0]);return o},o.discreteWidth=function(e){return n?n.get(e):null},o.range=function(e){return arguments.length?(a=e,o):a},o.copy=function(){return e().domain(t).rangeBands(i).range(a)},o}().domain(f).range(S).rangeBands(Z)).origRange=D}return i.outerPadding=A,i.padding=O,i},it.getEventScale=function(e,t,a,r,n,i,o){i.getDataType(o,n);return it.getScale(e,t,a,r,n,i,o)},it.constructor=function(o,e,l,s){var t,a=it.getScale,r=it.getEventScale;l=qa(l,a),s=qa(s,r);switch(e){case"left":t=o.axes.rotated?n():i();break;case"bottom":t=o.axes.rotated?i():n()}return t;function n(){var e=o.dataObject,t=e.hierarchical,a=0,r=o.viewPortExtent,n=o.axes.x;if(o.axes.x.scale=l(o,o.dataObject,o.plotarea,o.axes.x.orient,0,o.dataset,"x",r),o.axes.x.eventscale=null==s?o.axes.x.scale:s(o,o.dataObject,o.plotarea,o.axes.x.orient,null,o.dataset,"x"),za(t)){o.axes.x.rangeScale=o.axes.x.scale.copy(),o.axes.x.rangeScale.outerPaddingPx=o.axes.x.scale.outerPaddingPx,t.groupByDiscreteTime&&o.axes.x.rangeScale.domain(e.getDomain(e.getCategories("x"))),a=t.finalDepth,t.setRanges(o.axes.x.rangeScale);for(var i=0;i<a;i++)n.levels[i]||(n.levels[i]={}),n.levels[i].scale=l(o,e,o.plotarea,o.axes.x.orient,i+1,o.dataset,"x",r,null)}return[{scale:o.axes.x.scale}].concat(n.levels)}function i(){for(var e=o.axes.y.count,t=o.axes.y,a=0;a<e;a++)t.groups[a]||(t.groups[a]={}),t.groups[a].scale=l(o,o.dataObject,o.plotarea,o.axes.y.orient,a,o.dataset,"y"),t.groups[a].eventscale=null==s?t.groups[a].scale:s(o,o.dataObject,o.plotarea,o.axes.y.orient,a,o.dataset,"y");return o.axes.y.groups}},it.invert=function(e,t,a,r,n,i,o){var l;switch(e){case"numeric":case"time":var s="y"==n?r?t.x:t.y:r?t.y:t.x;l=a.invert(s);break;case"ordinal":var c=qs(a),u=a.bandwidth(),d=a.maxBandWidth,h=d?zt(u,d):u,f=1<c.length?Dt(c[1]-c[0]):0,p=Dt(f-u),g=d&&d<u?(u-h)/2:0;l=Zs(t,c=c.map(function(e){return e-p/2}),n,r,i);var v="y"==n?r?t.x:t.y:r?t.y:t.x,y=a.ordinalRange[l]+g;o&&!Ma(v,[y,y+h])&&(l=null)}return l},it.ordinalSubInvert=function(e,a,t,r,n,i,o){var l=t.bandwidth(),s=t.range(),c=r.ordinalRange,u=t.domain(),d=s[1]-s[0]-u.length*l;return Zs(e,u.map(function(e,t){return c[a]+t*(l+d)}),i,n,o)},it.barBandwidth=function(e){var t,a=e.systemConf,r=e.dataObject,n=e.chartTypes[0],i=e.dataset.seriesTypes,o=r.barChartType||(r.noofBarEnabledSeries?i.has(Ne.stkdbar)?Ne.stkdbar:i.has(Ne.bar)?Ne.bar:i.has(Ne.bullet)?Ne.bullet:i.has(Ne.waterfall)?Ne.waterfall:n.value:n.value);if(r.barChartType=o,r.isstacked(o)){t=Or(r.getEncode("stack")).filter(function(e){return Ks.call(r,e.seriesData[0])}).length||1}else t=E(e.seriesdata.map(function(e){if(Ks.call(r,e))return e.data.length}));var l=n.name,s=n.value==Ne.bullet,c=(go(n.value),a.chart.plot.border),u=!0===c.show?c.size:0,d=("gantt"==l||"bullet"==l||"bar"==l||"waterfall"==l||"boxplot"==l)&&a.chart.plot.plotoptions[l].padding||.2,h=1==t?0:("bar"==l||"gantt"==l||"waterfall"==l||"boxplot"==l)&&a.chart.plot.plotoptions[l].interPadding||0,f=a.chart.plot.plotoptions[l].outerPadding;f=null!=f&&""!==f?f:.02;var p,g,v=e.axes.x.scale.domain().length,y=e.axes.rotated?[Ro(e,"height",e.plotarea)-u,u]:[u,Ro(e,"width",e.plotarea)-u];f=it.getOuterPadding(y,v,d,f),(e.datalabels.moduleExists&&Xs(e)||r.isBubbleEnabled)&&(f+=r.extendOuterpadding(rt(v),y,a,d,f,"x")),e.barscale1=p=e.axes.x.scale,e.barscale2=g=Q().domain(rt(t)).range([0,p.bandwidth()]).paddingInner(h);var m=r.noofBarEnabledSeries&&!s?a.chart.plot.plotoptions[l].maxBandWidth||p.bandwidth():200;if(p.maxBandWidth=a.chart.plot.plotoptions[l].maxBandWidth,!s&&g.bandwidth()>m){var b=(p.bandwidth()-t*m)/2;g.range([b,p.bandwidth()-b]).paddingInner(h)}return[p,g]},it.getOuterPadding=function(e,t,a,r){var n=Dt(e[1]-e[0]),i=r*n;return i/((n-2*i)/(t-a+0))},it.getOrdinalOuterPadding=function(e,t,a,r){return r*Dt(e[1]-e[0])/2},it.getContinuousRangeBand=function(e,t,a){var r=e(t[0]),n=a&&t[a]?e(t[a]):r,i=(a&&t[a+1]?e(t[a+1]):e(t[1]))-n,o=e.range();return{outerPaddingInPixel:(i<0?-1:1)*zt(Dt(r-o[0]),Dt(i/2)),rangeBand:i/2}},it.getDiscreteRangeBand=function(e){var t=e.bandwidth(),a=e.outerPaddingPx+t/2,r=qs(e),n=1<e.domain().length?r[1]-r[0]-t:0;return{outerPaddingInPixel:zt(a,t/2+n/2),rangeBand:t/2+n/2}},it.getRangeBand=function(e,t,a){return e.bandwidth?it.getDiscreteRangeBand(e):it.getContinuousRangeBand(e,t,a)};var $s={parse:ac,drawPath:function(e,t){ac(e).forEach(function(e){t[e.type].apply(t,e.args)})}};function Js(e){return Rt(It(e[0],2)+It(e[1],2))}function ec(e,t){var a=1;return e[0]*t[1]-e[1]*t[0]<0&&(a=-1),a*Math.acos(function(e,t){var a=function(e,t){return e[0]*t[0]+e[1]*t[1]}(e,t)/(Js(e)*Js(t));return a<0?Mt(-1,a):zt(1,a)}(e,t))}function tc(e,t,a,r,n,i,o,l){if(0!==t&&0!==a){r*=Math.PI/180,t=Math.abs(t),a=Math.abs(a);var s,c=function(e,t){var a=jt(t),r=Math.sin(t);return[a*e[0]+r*e[1],-1*r*e[0]+a*e[1]]}(function(e,t){return[(e[0]-t[0])/2,(e[1]-t[1])/2]}(e,o),r),u=function(e,t){return[e[0]*t[0],e[1]*t[1]]}(c,c),d=It(t,2),h=It(a,2),f=Rt(u[0]/d+u[1]/h);1<f&&(a*=f,d=It(t*=f,2),h=It(a,2)),s=Rt(Math.abs((d*h-d*u[1]-h*u[0])/(d*u[1]+h*u[0]))),n===i&&(s*=-1);var p=function(e,t){return[e*t[0],e*t[1]]}(s,[t*c[1]/a,-a*c[0]/t]),g=function(e,t){return[e[0]+t[0],e[1]+t[1]]}(function(e,t){var a=jt(t),r=Math.sin(t);return[a*e[0]-r*e[1],r*e[0]+a*e[1]]}(p,r),function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}(e,o)),v=[(c[0]-p[0])/t,(c[1]-p[1])/a],y=[(-1*c[0]-p[0])/t,(-1*c[1]-p[1])/a],m=ec([1,0],v),b=m+ec(v,y);l.push({type:"save",args:[]},{type:"translate",args:[g[0],g[1]]},{type:"rotate",args:[r]},{type:"scale",args:[t,a]},{type:"arc",args:[0,0,1,m,b,1-i]},{type:"restore",args:[]})}else l.push({type:"lineTo",args:o})}function ac(e){var o=[0,0],l=[0,0],i=[],a="",r=!1;function s(e,t){return-1==="mlazhvcsqt".indexOf(e)?o=t:(o[0]+=t[0],o[1]+=t[1]),a=e,o.slice(0)}function n(e,t){for(var a=[],r=o.slice(0),n=0;n<t.length;n+=2){o=r.slice(0);var i=s(e,t.slice(n,n+2));a=a.concat(i),n===t.length-4&&(l=i.slice(0))}return a}function c(){-1==="CcSsQqTt".indexOf(a)&&(l=o.slice(0));var e=[0,0];return e[0]=2*o[0]-l[0],e[1]=2*o[1]-l[1],e}var u,d={m:function(e,t){var a=e;for(r=r&&!(a="M"),i.push({type:"moveTo",args:s(a,t)});t.length;)u=t.splice(0,2),i.push({type:"lineTo",args:s(e,u)})},z:function(){i.push({type:"closePath",args:[]})},l:function(e,t){for(;t.length;)u=t.splice(0,2),i.push({type:"lineTo",args:s(e,u)})},h:function(e,t){i.push({type:"lineTo",args:function(e,t){var a=[t,0];return"H"===e&&(a[1]=o[1]),s(e,a)}(e,t)})},v:function(e,t){i.push({type:"lineTo",args:function(e,t){var a=[0,t];return"V"===e&&(a[0]=o[0]),s(e,a)}(e,t)})},c:function(e,t){for(;t.length;)u=t.splice(0,6),i.push({type:"bezierCurveTo",args:n(e,u)})},s:function(e,t){i.push({type:"bezierCurveTo",args:c().concat(n(e,t))})},q:function(e,t){for(;t.length;)u=t.splice(0,6),i.push({type:"quadraticCurveTo",args:n(e,t)})},t:function(e,t){var a=c();i.push({type:"quadraticCurveTo",args:a.concat(n(e,t))}),l=a.slice(0)},a:function(e,t){var a=[o.slice()],r=[s(e,t.slice(-2))],n=a.concat(t.slice(0,-2),r,[i]);tc.apply(this,n)}},t=vn(e);return t.length&&t.forEach(function(e){var t=e.function.toLowerCase();d[t](e.type,e.moves)}),i}var rc={drawPath:function(e,t){$s.drawPath(t,e)},getRadianAngle:function(e){return e*Yt/180},constant:function(e){return function(){return e}},pointX:function(e){return e[0]},pointY:function(e){return e[1]},rgba:function(e,t){t=qa(t,1);var a=Pe(e);return"rgba("+a.r+","+a.g+","+a.b+","+t*a.opacity+")"},roundedRect:function(e,t,a,r,n,i,o,l){var s=dn(t,a,r,n,i,o,l);$s.drawPath(s,e)},boundBoxWithHook:function(e,t){$s.drawPath(t,e)},getFontStyles:function(e,t,a,r,n,i){return Bs(null,t,e,a,r,n,i)}};var nc={CLIP_TRACK:function(e,t,a,r){var n=[0,0],i=e.d3_brush.extent()()[1];t=t||e.getSelection();var o={d:"x"===e.options.type?"M"+n[0]+" "+n[1]+"L"+t[0]+" "+n[1]+"L"+t[0]+" "+i[1]+"L"+n[0]+" "+i[1]+"ZM"+t[1]+" "+n[1]+"L"+i[0]+" "+n[1]+"L"+i[0]+" "+i[1]+"L"+t[1]+" "+i[1]+"Z":"M"+n[0]+" "+n[1]+"L"+i[0]+" "+n[1]+"L"+i[0]+" "+t[0]+"L"+n[0]+" "+t[0]+"ZM"+n[0]+" "+t[1]+"L"+i[0]+" "+t[1]+"L"+i[0]+" "+i[1]+"L"+n[0]+" "+i[1]+"Z",name:"brush",id:a.id},l="brush_tracker_clip_"+r+"_"+a.id;Xr.PHANTOMJS?l=tn.get(tn.svg_clips,"polygon",o,{chartObj:a}):jo.polygon(o,l,null,null,null,a),e._track.attr("clip-path","url("+a.defsLocation+"#"+l+")")}};function ic(e,t,a){return{line:{strokeColor:"grey",strokeWidth:2,height:e[t?1:0]+20},triangleUp:{size:15,fillColor:"#4C4C4C"},triangleDown:{size:15,fillColor:"#4C4C4C"},triangleUpDown:{size:15,fillColor:"#4C4C4C",padding:e[t?1:0]+15},box:{strokeWidth:1,strokeColor:"black",fillColor:"transparent",height:e[t?1:0],width:a?e[t?0:1]/a:10},enlarge:{range:1.2,height:e[t?1:0],width:a?e[t?0:1]/a:10},lever:{height:26,width:9,radius:2,stripeHeight:8,stripePadding:2,fillColor:"white",strokeColor:"#DADADA",stripeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},hollowCircle:{size:25,outerFillColor:"white",outerStrokeColor:"#DADADA",innerStrokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},circle:{size:25,outerStrokeColor:"white",outerStrokeWidth:2,innerFillColor:"white",shadow:"0 0 2px rgba(0,0,0,0.2)"},vernier:{height:26,width:9,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},pentagon:{size:8,bandWidth:3,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)",height:e[t?1:0]},lineCircle:{size:15,strokeWidth:2,strokeColor:"blue",position:t?"end":"start"},rectangle:{fillColor:"#333",strokeWidth:1}}}var oc=$();var lc=function(e,t,a,r,n){var i=4<arguments.length&&void 0!==n?n:[0,0];if(oc.has(e))return oc.get(e);var o=null,l=void 0,s={x:1,y:0}[a],c="x"===a,u=sc(a,e,r,t.size);switch(u=u.map(function(e,t){return e+i[t]}),e){case"line":o={shape:Ji("vertical-line")(t.height),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleUp":o={shape:Ji("triangle-down")(t.size),style:{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleDown":o={shape:Ji("triangle-up")(t.size),style:{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleUpDown":var d=t.padding/2,h=c?[0,d]:[d,0],f=h.map(function(e){return-1*e});f=[f[0]+u[0],f[1]+u[1]],h=[h[0]+u[0],h[1]+u[1]],o={shape:[Ji("triangle-down")(t.size),Ji("triangle-up")(t.size)],style:[{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth,transform:"translate("+f+")"},{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth,transform:"translate("+h+")"}]};break;case"box":var p=t.strokeWidth;o={shape:dn(-((y=t.width)-p)/2,-((m=t.height)-p)/2,y-p,m-p,ir()),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth,fill:t.fillColor}};break;case"enlarge":p=t.strokeWidth;var g=t.range||1;o={shape:dn(-(y=t.width*g)/2,-(m=t.height*g)/2,y,m,ir()),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth,fillColor:t.fillColor}};break;case"lever":var v=ir(t.radius);o={shape:[dn(-t.width/2,-t.height/2,t.width,t.height,v),"M"+-t.stripePadding/2+" "+-t.stripeHeight/2+" L"+-t.stripePadding/2+" "+t.stripeHeight/2+" M"+t.stripePadding/2+" "+-t.stripeHeight/2+" L"+t.stripePadding/2+" "+t.stripeHeight/2],style:{fill:t.fillColor,stroke:t.strokeColor}};break;case"hollowCircle":o={shape:[Ji()(t.size),Ji()(.4*t.size)],style:[{fill:t.outerFillColor,stroke:t.outerStrokeColor},{fill:t.innerFillColor,stroke:t.outerStrokeColor}]};break;case"circle":o={shape:[Ji()(t.size),Ji()(.3*t.size)],style:[{fill:t.outerFillColor,stroke:t.outerStrokeColor,"stroke-width":t.outerStrokeWidth},{fill:t.innerFillColor,stroke:t.outerStrokeColor}]};break;case"vernier":var y;o={shape:[["M"+.5*-(y=t.width)+" "+.5*-(m=t.height)+" L"+.5*y+" "+.5*-m+" L"+.5*y+" "+.5*m+" L"+.5*-y+" "+.2*m+" Z"],["M"+.5*-y+" "+.5*-m+" L"+.5*y+" "+.5*-m+" L"+.5*y+" "+.2*m+" L"+.5*-y+" "+.5*m+" Z"]],style:{fill:t.fillColor,stroke:t.strokeColor}};break;case"pentagon":var m,b=t.size,x=t.bandWidth;o={_effectElementIndex:1,shape:["M"+.5*-b+" "+.5*-(m=t.height)+" L"+.5*b+" "+.5*-m+" L"+.5*b+" "+.5*m+" L"+.5*-b+" "+.5*m+"Z","M"+(.5*-b-x)+" "+(.5*-m-x)+" L"+(.5*b+x)+" "+(.5*-m-x)+" L"+(.5*b+x)+" "+.5*m+"L0 "+(.5*m+1.5*x+2)+" L"+(.5*-b-x)+" "+.5*m+"ZM"+.5*-b+" "+.5*-m+" L"+.5*b+" "+.5*-m+" L"+.5*b+" "+(.5*m-.5*x)+"L0 "+(.5*m+.5*x)+" L"+.5*-b+" "+(.5*m-.5*x)+"Z"],style:[{},{"fill-rule":"evenodd",fill:t.fillColor,stroke:t.strokeColor}]};break;case"lineCircle":b=t.size;var C=r[s],k=b/2*("end"===t.position?1:-1);"end"===t.position&&(k+=r[s]),l=[0,k],c||l.reverse(),l=l.map(function(e,t){return e+i[t]}),o={shape:[Ji("circle")(b),Ji("vertical-line")(C)],style:[{fill:t.fillColor,stroke:t.strokeColor,transform:"translate("+l.join(" ")+")"},{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}]};break;case"rectangle":return{shape:"default",style:_extends({},t)}}return l=u&&"translate("+u.join(" ")+") "||"",rr(o.style).forEach(function(e){var t=e.transform||l;"y"===a&&(t+=" rotate(-90)"),e.transform=t}),o},sc=function(e,t,a,r){var n={x:1,y:0}[e],i=[0,0];switch(t){case"triangleUp":i[n]=-r/2;break;case"triangleDown":i[n]=a[n]+r/2;break;default:i[n]=a[n]/2}return i};function cc(e,t,a,r,n,i){var o=function(e,t,a,r,n,i){var o=[a[1][0]-a[0][0],a[1][1]-a[0][1]],l=ic(o,"x"===e,r)[t],s=_extends({},l,n),c=lc(t,s,e,o,i);return rr(c).forEach(function(e){e.alignCenter=!1}),c}(e,1<arguments.length&&void 0!==t?t:"lever",a,3<arguments.length&&void 0!==r?r:null,n,i);return function(e){return{x:[{type:"w"},{type:"e"}],y:[{type:"n"},{type:"s"}]}[e]}(e).map(function(e){return _extends({},e,o)})}function uc(e,t,a,r,n){var i=3<arguments.length&&void 0!==r?r:0,o=n,l=e.axes.rotated,s=o||dc(e,t,i,a),c={x:l?"y":"x",y:l?"x":"y"},u=s[1]-s[0],d="x"===c[a]?"width":"height",h=e.plotarea[d]/u,f=0,p=0;return"height"==d?p=-s[0]:f=-s[0],g.scale(h).translate(f,p)}function dc(e,t,a,r,n,i,o){var l=!(5<arguments.length&&void 0!==i)||i,s=o;t=[t[0],t[t.length-1]];var c=ri(e,r,a)||{},u=c.scale,d=c.baseScale,h=void 0;return u=qa(s,l?d:u),h=t.map(u).sort(ge),u.bandwidth&&(h=function(e,t,a){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],n=qs(t).slice(0).sort(ge),i=(n[1]-n[0]-t.bandwidth())/2,o=e.outerPaddingPx;!1===r&&(i=o=0);var l=t.bandwidth(),s=n[0]===a[0]?a[0]-o:a[0]-i,c=n[n.length-1]===a[1]?a[1]+l+o:a[1]+l+i;return[s,c]}(u,s||d||u,h,n,e.axes.rotated)),h}function hc(e,t,a){var r=function(e){var a=e.systemConf.chart.scroll.overview.data;if(!a){a=xa(e.userdata),Na(a,"chart.marginTop",0),Na(a,"chart.marginBottom",0),Na(a,"chart.marginLeft",0),Na(a,"chart.marginRight",0),Na(a,"canvas.title.show",!1),Na(a,"canvas.subtitle.show",!1),Na(a,"canvas.border.show",!1),Na(a,"canvas.shadow.show",!1),(a.metadata.axes.y||[]).forEach(function(e,t){Na(a,"chart.axes.yaxis["+t+"].show",!1)});var t=e.dataset.getColumn("x",0);Na(a,"chart.axes.xaxis.show",t.datatype===On&&"auto"===Va(t,"time.format.specifier")),Na(a,"chart.axes.xaxis.label.show",!1)}return Na(a,"__$overview",!0),Na(a,"chart.plot.renderer.mode","canvas"),Na(a,"chart.axes.rotated",e.axes.rotated),Na(a,"chart.plot.datalabels.show",!1),Na(a,"chart.plot.events.enabled",!1),Na(a,"credits.show",!1),Na(a,"notes.enabled",!1),Na(a,"chart.scroll.enabled",!1),Na(a,"chart.axes.xaxis.ticklabel.textOverflow","none"),Na(a,"chart.axes.animation.enabled",!1),Na(a,"metadata.axes.label",[]),Na(a,"legend.enabled",!1),no.helpers.getAllChartTypes(a,"object").forEach(function(e){Na(a,"chart.plot.plotoptions."+e.name+".datalabels.show",!1),Na(a,"chart.plot.plotoptions."+e.name+".datalabels.stackLabels.show",!1),Na(a,"chart.plot.plotoptions."+e.name+".animation.enabled",!1)}),a}(e),n=e.container.selectAll("div.zcoverview");n.styles({position:"absolute","pointer-events":Qt,"box-sizing":"border-box",width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px"}),e.overview=Xn(n.node(),r),a&&a(e.overview)}function fc(e,t){var a=H(["lineCircle"]),r=e.settings.resizer||{},n=r.type;return r.enabled&&a.has(n)?function(e,t,a,r,n){var i=ic([a[1][0]-a[0][0],a[1][1]-a[0][1]],"x"===e,r)[t];return _extends({},i,n)}("x",r.type,t,null,r[n]||{}).size:0}function pc(a){var r=this,e=r.dimension,n=r.settings,t=r.brushExtent,i=n.overview||{},o=a.axes.rotated,l=r.scrollDomain,s=i.selection||l;!1!==i.syncScale&&(r.brushScale=a.axes.x.scale),"plot"===i.bindTo&&(t=gc(a,n,!0));var c=r.addEvent(t,s),u=function(e,t){return t.width=_t(t.width),sr(xn("canvas",".overview-grayscale",[1],e.d3container.select(".canvas-component"),"svg.static").attrs({width:t.width,height:t.height}).styles({position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:t.width+"px",height:t.height+"px"}).node().getContext("2d"))}(a,e),d=function(e){return e.getImageData(0,0,e.canvas.width,e.canvas.height)}(a.context);!function(e,t){for(var a=1<arguments.length&&void 0!==t?t:"gray",r=Pe(a),n=e.data,i=0;i<n.length;i+=4){var o=n[i]+n[i+1]+n[i+2];"grayscale"===a?n[i]=r.r=n[i+1]=n[i+2]=o:0!==o&&(n[i]=r.r,n[i+1]=r.g,n[i+2]=r.b,n[i+3]=255*r.opacity)}}(d,i.unselectedEffect);function h(){var e=c.getSelection(),t=function(e,t,a,r){var n=e[1]-e[0],i=a?0:e[0]-r.left,o=a?e[0]-r.top:0,l=a?t.height:n,s=a?n:t.height;return{x:i,y:o,width:l,height:s}}(e,n,o,a.plotarea);u.putImageData(d,0,0),u.clearRect(t.x,t.y,t.width,t.height),nc.CLIP_TRACK(c,e,r.chart,"overview")}h(),c.addHook("brush.clipCanvas",h)}function gc(e,t,a){var r=e.plotarea;return a?[[r.left,r.top],[r.width+r.left,r.height+r.top]]:[[0,0],e.axes.rotated?[t.height,e.plotarea.height]:[e.plotarea.width,t.height]]}function vc(e){_classCallCheck(this,vc),this.settings=_extends({},yc,e)}var yc={extent:[[0,0],[0,0]],handleSize:6,type:"xy",snap:null,element:null,metaKey:null,styles:{track:{},selection:{},handles:{}}},mc=(_createClass(bc,[{key:"initialize",value:function(){var n,i,o=this,e=o.options,t=e.extent,a=o.type=qa({x:"brushX",y:"brushY",xy:"brush"}[o.type],"brush"),r=o.d3_brush=o.d3_brush||d3[a]();Ba(t)&&Ba(t[0])&&Ba(t[1])&&r.extent(t),e.metaKey&&r.filter(function(){return!nt()[e.metaKey]}),r.handleSize(qa(e.handleSize,6)),n=o._signal=f("start","brush","end"),i=o.behaviour_signal=f("init","start","brush","end");var l=[0,0],s=!1,c=void 0;r.on("start",function(){var e=nt(),t=void 0,a=e;if(!e.selection)return!1;for(s=!1;t=a.sourceEvent;)a=t;var r=a&&a.target&&a.target.getAttribute?a.target:null;c=r&&/handle/.test(r.getAttribute("class"))?"resize":"move",e.mode=c,i.call("start",o,e),n.call("start",o,e)}),r.on("brush",function(){if(bc.isInvalidBrush())return!1;var e=nt();e.mode=c;var t="brush"===o._snap.when&&Mr(o._snap.calculate)&&o._snap.calculate(e);if(t){if(bc.isInvalidBrush())return;var a=qa(t,l);o.setSelection(a),l[0]===a[0]&&l[1]===a[1]||(l=e.selection=a,o.positionCustomHandles(l),i.call("brush",o,e),n.call("brush",o,e))}else o.positionCustomHandles(),i.call("brush",o,e),n.call("brush",o,e);e&&e.sourceEvent&&"end"!==e.sourceEvent.type&&(s=!0)}),r.on("end",function(){if(!bc.isInvalidBrush()){var e=nt(),t=o.getSelection(),a="end"===o._snap.when&&Mr(o._snap.calculate)&&o._snap.calculate(o,e);if(e.mode=c,a&&t){var r=qa(a,l);o.setSelection(r,o._snap.duration),l[0]===r[0]&&l[1]===r[1]||(l=e.selection=r,i.call("end",o,e,s),n.call("end",o,e,s))}else o.positionCustomHandles(),i.call("end",o,e,s),n.call("end",o,e,s)}})}},{key:"snap",value:function(e,t,a){this._snap={when:e,calculate:t,duration:a}}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(e,t){this.hookCount++;var a=e+"."+this.hookCount;return this._signal.on(a,t),a}},{key:"removeHook",value:function(e){this._signal.on(e,null)}},{key:"addBehaviourHook",value:function(e,t){this.hookCount++;var a=e+"."+this.hookCount;return this.behaviour_signal.on(a,t),a}},{key:"removeBehaviourHook",value:function(e){this.behaviour_signal.on(e,null)}},{key:"bindTo",value:function(e){var t=this,a=t.d3_brush,r=t.options.styles||{},n=xn("g",".brush-group-wrapper",[1],e);(t.parent_group=n).call(a),t._track=n.selectAll("rect.overlay"),t._selection=n.selectAll("rect.selection"),t._handles=n.selectAll("rect.handle"),kn(t._track,r.track),kn(t._selection,r.selection),kn(t._handles,r.handle),!1===t.options.resizer&&n.selectAll("rect.handle").remove(),za(t.behaviour)&&t.behaviour.call(t),t.behaviour_signal.call("init",t)}},{key:"addCustomHandle",value:function(e){return e.isD3Selection?this.customHandles=e:"default"===e[0].shape?kn(this._handles,e[0].style):(this.customHandles=bc.ADD_HANDLE(e,this.parent_group).attrs({cursor:function(e){return bc.getCursor(e.type)},"pointer-events":"all"}),this.positionCustomHandles(),this.customHandles)}},{key:"positionCustomHandles",value:function(){var t=this,e=t.getSelection();t.customHandles&&(e?t.customHandles.attr("transform",function(e){return"translate("+t.getCustomHandlePosition(e).join(" ")+")"}).style("display",null):t.customHandles.style("display","none"))}},{key:"getCustomHandlePosition",value:function(e){var t=this.getSelection(),a=wr(qa(this.options.extent,this.d3_brush.extent()())),r=0,n=0;if(!1!==e.alignCenter&&(r=a.width/2,n=a.height/2),t)return{e:[t[1],n],w:[t[0],n],n:[r,t[0]],s:[r,t[1]]}[e.type]}},{key:"setSelection",value:function(e,t){var a=this.options.type,r=this.getRange(a);e="xy"===a?[[Mt(r[0][0],e[0][0]),zt(r[0][1],e[0][1])],[zt(r[1][0],e[1][0]),zt(r[1][1],e[1][1])]]:[Mt(r[0],e[0]),zt(r[1],e[1])],nt()&&(nt().selection=e),Fa(t)&&0<t?this.parent_group.transition().duration(t).call(this.d3_brush.move,e):(this.__checkSameType=!0,this.parent_group.call(this.d3_brush.move,e))}},{key:"getSelection",value:function(){return nt()&&nt().selection||Z(this.parent_group.node())}},{key:"getRange",value:function(){var e=this.d3_brush.extent()();switch(this.options.type){case"x":return[e[0][0],e[1][0]];case"y":return[e[0][1],e[1][1]];default:return e}}},{key:"hide",value:function(){this.parent_group.attr("display","none")}},{key:"show",value:function(){this.parent_group.attr("display",null)}},{key:"reset",value:function(){this.parent_group.call(this.d3_brush.move,null)}},{key:"destroy",value:function(){var a=this;a.parent_group.on(".brush",null),a.parent_group.selectAll("rect.overlay, rect.handle, rect.selection").remove(),Ka(a,function(e,t){a[t]=null,delete a[t]})}},{key:"update",value:function(e){this.options=e,this.type=qa(e.type,"xy"),this.initialize()}},{key:"updateExtent",value:function(e){Ba(e)&&Ba(e[0])&&Ba(e[1])&&(this.d3_brush.extent(e),this.parent_group&&this.parent_group.call(this.d3_brush))}}],[{key:"isInvalidBrush",value:function(e){var t=nt(),a=t&&t.sourceEvent;return a&&a.type===(e||nt().type)}},{key:"getCursor",value:function(e){return{e:"ew-resize",w:"ew-resize",n:"ns-resize",s:"ns-resize"}[e]}},{key:"ADD_HANDLE",value:function(o,e){var t=xn("g",".handle--custom",o=rr(o),e);return xn("path",".custom-handle-path",function(t,a){var e=rr(t.shape);return Ba(t.shape[a])&&(e=t.shape[a]),rr(e).map(function(e){return{type:t.type,shape:e,i:a}})},t).attr("d",function(e){return e.shape}).each(function(e,t){var a=qe(this),r=o[e.i],n=rr(r.style),i=rr(r.attributes);a.attrs(qa(i[t],r.attributes)),kn(a,qa(n[t],r.style))}),t}}]),bc);function bc(e){_classCallCheck(this,bc);var t=this.options=e.settings;if(this.type=this.options.type,this.initialize(),this.hookCount=0,this._snap={},za(t.behaviour)){if(!bc.behaviours.has(t.behaviour))throw new TypeError(t.behaviour+" behaviour not found");this.behaviour=bc.behaviours.get(t.behaviour)}t.element&&t.element.isD3Selection&&this.bindTo(t.element)}function xc(d,h,e,t,a,r,n,i,f){var o=i.enabled,p=i.width,g=i.height,l=dn(d,h,e+2*r,t+2*r,a);if(o&&n){var s=n===qo?7:n===Ko?3:n===Qo?5:1,c=vn(l);!function(t,a,e){e.forEach(function(e){t.splice(a,0,{function:"l",moves:e})})}(c,s,function(e,t,a){var r=t[a-1].moves[a-1?5:0],n=t[a].moves[0],i=t[a-1].moves[a-1?6:1],o=t[a].moves[1],l=(r+n)/2,s=(i+o)/2;if(h=t[a].moves[1],d=t[a].moves[0],za(f)&&f){var c=0<f?1:-1,u=e===qo?r-n:n-r;l-=0<(u-p)/2-f*c?f:(u-p)/2*c}switch(e){case qo:return[[l-p/2,h],[l,h+g],[l+p/2,h]];case Ko:return[[l+p/2,h],[l,h-g],[l-p/2,h]];case Zo:return[[d,s-p/2],[d-g,s],[d,s+p/2]];case Qo:return[[d,s+p/2],[d+g,s],[d,s-p/2]]}}(n,c,s)),l=function(e){return e.reduce(function(e,t){return e+t.function.toUpperCase()+(t.moves&&t.moves.join(" ")||"")},"")}(c)}return l}mc.prototype.on=mc.prototype.addHook,mc.behaviours=$(),mc.addBehaviour=function(e,t){if(!za(t))return mc.behaviours.remove(e);mc.behaviours.set(e,t)},na.setComponent("BrushD3",mc),na.setComponent("BrushD3Options",vc);function Cc(e){this.chartObj=e.chartObj,this.config=e.config;var t=this.container=sn(e.container,"g",this.config.enabled?[1]:[],".","class","zc-svg-tooltip");t.style("pointer-events",Qt).style("display",Qt),this.boundBoxEle=sn(t,Rr,[1]),this.textEle=sn(t,Dr,[1]),this.styleText(),this.styleBoundBox()}Cc.prototype.show=function(e,t){ys(this.container),this.container.styles({opacity:$t,display:$t}),this.updateTextContent(e),this.positionTooltip(t),this.drawBoundBox()},Cc.prototype.hide=function(e){this.container.transition().duration(e?0:250).style("opacity",0).on("end",function(){qe(this).style("display",Qt)})},Cc.prototype.styleText=function(){var e=this.textEle,t=this.config.orient,a=this.chartObj.systemConf,r=t===Ko||t===qo;fn(e,[this.config,a.chart,a.canvas,Wr]),e.attrs({"text-anchor":r?"middle":t===Zo?"start":"end",dy:r?t===Ko?"0.9em":"-0.3em":"0.3em"})},Cc.prototype.styleBoundBox=function(){var e=this.config;this.boundBoxEle.styles({fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth})},Cc.prototype.updateTextContent=function(e){this.textEle.text(e)},Cc.prototype.positionTooltip=function(e){e&&this.container.attr("transform","translate("+e[0]+","+e[1]+")")},Cc.prototype.drawBoundBox=function(){var t=this.textEle.nodes(),e=this.config,a=e.padding,r=ir(e.borderRadius||0),n=0;this.boundBoxEle.attr("d",function(){var e=ba(t[n++]);return xc(e.x-a,e.y-a,e.width,e.height,r,a,Ko,{},0)})};var kc={padding:5,margin:5};function wc(e,t,a,r,n,i){var o=t.customHandles,l={chartObj:n,config:_extends({},kc,e,{orient:a}),container:o};this.dataFinder=r,this.chart=n;var s=this.super=new Cc(l);this.container=s.container,this.boundBoxEle=s.boundBoxEle,this.tooltipOptions=s.config,this.customActions=i||{},this.positionTooltip(o,a),this.addHoverEvents(t.parent_group)}wc.prototype.show=function(){var e=this,t=0;e.super.show(function(){return e.dataFinder(t++)}),e.customActions.show&&e.customActions.show()},wc.prototype.hide=function(e){this.super.hide(e),this.customActions.hide&&this.customActions.hide()},wc.prototype.positionTooltip=function(e,t){var a,r,n=this.tooltipOptions,i=ba(e.node()),o=n.padding+n.margin;switch(t){case qo:a=0,r=i.y-o;break;case Qo:a=i.x-o,r=0;break;case Zo:a=i.x+i.width+o,r=0;break;case Ko:a=0,r=i.y+i.height+o}this.container.attr("transform","translate("+a+","+r+")")},wc.prototype.addHoverEvents=function(e){var t=this,a=!0;Mo(e,{mousemove:function(){"overlay"!==qe(nt().srcElement||nt().target).attr("class")?(t.show(),a=!0):a&&(t.hide(),a=!1)},mouseleave:function(){t.hide(),a=!1}})};function Sc(e,t,a){var r,n=void 0,i=ri(e,t,0).baseScale;if(i.bandwidth){var o=1<(n=i.domain()).length?1:0;n=[n[o],n[o]]}else n=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=[],i=e.dataset.getColumn(t,r).dataindex;return e.seriesdata.some(function(e){return e.data.some(function(e){return e.some(function(e){var t=e[i];if(za(t)&&!xr(n,t)&&n.length!==a)return n.push(t),n.length===a})})}),n}(e,2);if((r=dc(e,n,0,"x",!0))[0]!==r[1])return(r[1]-r[0])*a;var l=i.range();return Dt(l[1]-l[0])}function Oc(e,t,a){var r=this.chart,n=t.point,i=Va(this,"behaviours.PLOT_ZOOM.instance");if(r.scroll&&r.scroll.visible&&!r.scrolling&&n.x){var o=n.x[0].domain,l=Ac(r,o,a);(i&&r.zooming||!i)&&(r.scroll.scrollDomain=o,r.scroll.brushInstance.setSelection(l))}}function Ac(e,t,a){var r=e.scroll.brushScale,n=void 0,i=(r.origRange||r.range()).slice(0).sort(ge);if(Ba(t)&&r.bandwidth&&(t=[t[0],t[t.length-1]]),r.bandwidth&&a&&a.invert){var o,l="width",s="X";e.axes.rotated&&(l="height",s="Y"),n=[o=a["invert"+s](0),e.plotarea[l]/a.k+o]}else t&&(n=dc(e,t,0,"x",!1,!1,r));return n.sort(ge),n[0]=Mt(n[0],i[0]),n[1]=zt(n[1],i[1]),n}function Pc(e,t,a,r){var n,i,o=e.scale,l=e.baseScale,s=e.zoomScale,c=e.baseZoomScale,u=1<a.k;if(t=t.toUpperCase(),o.bandwidth){var d=r||l.range();i=d.map(function(e){return a["apply"+t](e)}),u&&(i=function(e,t){var a=_slicedToArray(t,2),r=a[0],n=a[1];return e=t[0]<t[1]?[zt(e[0],r),Mt(e[1],n)]:[Mt(e[0],r),zt(e[1],n)]}(i,d)),o.range(i)}else n=a["rescale"+t](l).domain(),u&&(n=Gn(n,l.originalDomain||o.originalDomain,o.outerPadding)),o.domain(n);if(s){var h=a["rescale"+t](c).domain();s.domain(e.zoomDomain=h)}return{domain:n,range:i}}function Tc(e,t){var a=e;return"x"===t?a=[[e[0],0],[e[1],0]]:"y"===t&&(a=[[0,e[0]],[0,e[1]]]),a}function _c(e,a,t,r,n,i){var o,l=e.chart,s=e.behaviours.PLOT_ZOOM,c=t.split("").map(function(e,t){return dc(l,Ba(a[0])?a[t]:a,r,e)});"xy"!==t&&(c=c[0]),o=Tc(c,Yn(t,l.axes.rotated)),s.instance.zoomToBounds(o,n,i)}function Ec(e,t,a,r){var n=e.instance,i=this.behaviours,o=n.chart,l=t.point,s=l.x.domain,c=i.PLOT_BRUSH,u=i.PLOT_ZOOM,d=n.brushScale.range();o.axes.x.scale;if(o.viewPortExtent=s,n.lastScroll=a.map(n.scrollPositionScale.invert),o.cache.scroll.selection=a,o.cache.scroll.domain=s,!o.zooming){if(o.scroll.scrollDomain=s,o.disableAnimation=!!r.sourceEvent,o.scrolling=!0,Ba(s)){if(u){s=[s[0],s[s.length-1]];var h=uc(o,s,"x",0,a);u.instance.zoomToIdentity(h,0)}else!0===n.settings.smooth?function(e,t,a,r,n){var i=uc(r,e.x.domain,"x",0,t),o=ri(r,"x",0),l=o.scale,s=o.orient,c=o.reversed,u=Pc({scale:l,baseScale:a.brushScale,orient:s,reversed:c},r.axes.rotated?"y":"x",i,n),d=u.range,h=u.domain;a.transform=i,e.x.range=d,e.x.domain=h,Un.FILTER_CHART(e,r)}(l,a,n,o,d):Un.FILTER_CHART(l,n.chart);c&&c.instance.updateExtent([[0,0],[o.plotarea.width,o.plotarea.height]])}n.tooltip&&r.sourceEvent&&n.tooltip.show(),clearTimeout(n.timer),n.timer=setTimeout(function(){return o.scrolling=!1,o.disableAnimation=!1},50)}}var Lc=(_createClass(Mc,[{key:"initialize",value:function(){var e=this,t=e.chart,a=e.settings,r=e.rotated?"left":"bottom",n=!0===Va(t.systemConf,"chart.zoom.enabled"),i=n||a.smooth,o=(e.brushScale=e.getScale(t,t.plotarea,e.type,r,!i),Ba(a.selection)?a.selection.slice().sort(ge):null),l=a.resizer||{},s=a.slider||{},c=!0===l.enabled;!c&&s.enabled&&(c=!0,l=s,e.behaviour="slider"),e.updatePositionScale(),e.minimumVisiblePoints=a.minimumVisiblePoints||3,e.resizerSettings=l,e.resizerEnabled=c,e.overviewEnabled=!0===Va(a,"overview.enabled"),e.isSmooth=i,n||e.fixScaleOuterPadding();var u=t.plotarea[e.rotated?"height":"width"],d=e.getInitialDomain(),h=o||e.getScrollSelection(d),f=Dt(h[1]-h[0]),p=e.resizerEnabled||n||1<=u-f;(e.visible=p)&&(e.initialSelection=h,e.scrollDomain=d,e.isSmooth||e.resizerEnabled||(e.visiblePointCount=d.length),e.isSmooth||(t.viewPortExtent=d),e.updatePlotAreaByScroll())}},{key:"fixScaleOuterPadding",value:function(){var e=this.brushScale;if(!e.bandwidth){var t=_r(this.getInitialDomain()),a=this.chart.chartTypes[0].name,r=this.chart.systemConf.chart.plot.plotoptions[a].outerPadding||.02,n=(t[1]-t[0])*r,i=this.brushScale.domain();i=function(e,t,a){var r=e[0]instanceof Date;if(r&&(e=e.map(function(e){return e.getTime()})),Ba(a))e=[e[0]-a[0],e[1]+a[1]];else{var n=Dt(e[1]-e[0])*t;e=[e[0]-n,e[1]+n]}return r&&(e=e.map(function(e){return new Date(e)})),e}(i,null,[n,n]),e.domain(i),e.originalDomain=i}}},{key:"updatePositionScale",value:function(){var e=this.chart,t=void 0;t=e.axes.rotated?[e.plotarea.height,0]:[0,e.plotarea.width],this.scrollPositionScale=Je().range(t).domain([0,100])}},{key:"update",value:function(){if("redraw"===this.chart.phase)return this.settings=this.chart.systemConf.chart.scroll,void(this.rotated=this.chart.axes.rotated);if(this.visible){var e=this.chart,t=e.axes.x.scale,a=e.axes.x.baseScale.domain();this.updatePositionScale(),e.cache.scroll.selection=null,t.bandwidth&&(e.viewPortExtent=null),this.scrollDomain=e.cache.scroll.domain,this.render(),this.brushScale.originalDomain=a,t.originalDomain=a}}},{key:"render",value:function(){var t=this,e=t.chart,a=t.settings,r=t.rotated,n=a.overview||{};if(t.parent=xn("g",".brush-scroll",t.visible?[1]:[],e.staticPaneSVG,"g.legendarea"),!t.parent.empty()){t.brushType=Yn("x",r),t.brushExtent=gc(e,a),t.position=t.getPosition();var i=t.position;t.dimension=function(e,t){var a=t.settings,r=e.axes.rotated,n=e.plotarea;return{width:r?a.height:n.width,height:r?n.height:a.height,left:t.position.x,top:t.position.y}}(e,t),t.parent.attr("transform","translate("+i.x+","+i.y+")"),t.initialized=!1,n.enabled?hc(e,t.dimension,function(e){pc.call(t,e)}):t.addEvent(t.brushExtent),t.isRedraw=!0}}},{key:"getScrollSelection",value:function(e){var t=this,a=t.chart,r=a.behaviouralEvents&&a.behaviouralEvents.eventManager.behaviours||{},n=t.transform||r.PLOT_ZOOM&&r.PLOT_ZOOM.instance.getTransform(),i=void 0;if((i=t.lastScroll?t.lastScroll.map(t.scrollPositionScale):Ac(a,e,n)).sort(ge),!t.isRedraw&&!t.overviewEnabled&&!t.resizerEnabled){var o=t.rotated?1:0;if(t.brushScale.bandwidth){var l=t.brushScale.origRange,s=a.axes.x.reversed;t.rotated?s?i[0]=l[0]:i[1]=l[0]:s?i[1]=l[0]:i[0]=l[0]}else i[o]=t.brushScale(t.brushScale.originalDomain[0])}return i}},{key:"addEvent",value:function(e,t){function a(e){return e.radius&&(e.rx=e.ry=e.radius)}var r=this,n=r.chart,i=r.settings,o=r.resizerSettings,l=r.resizerEnabled,s=i.tracker,c=i.thumb,u=n.cache.scroll=n.cache.scroll||{},d=n.overview&&[n.overview.plotarea.left,n.overview.plotarea.top],h=(Ba(i.selection)?i.selection.slice().sort(ge):null)||r.getScrollSelection(u.domain||t||r.scrollDomain);a(c),a(s);var f=new vc({type:r.brushType,behaviour:r.behaviour||"scroll",extent:e,resizer:l&&"rectangle"===o.type,styles:{track:s,selection:c}}),p=r.brushInstance=new mc(f);if(p.bindTo(r.parent),Ka(r._hooks,function(e,t){return r.brushInstance.addHook(t,e)}),l){var g=o[o.type]||{};a(g);var v=cc(r.brushType,o.type,e,null,g,d);p.addCustomHandle(v),r.enableTooltip(o)}return r.initialized=!0,r.constrain(p),p.setSelection(h),p}},{key:"enableTooltip",value:function(){var r=this.settings.resizer.tooltip||{};if(!0===r.enabled){var n=this.chart,i=n.dataset.getColumn("x"),o=i.datatype,l=i[o]||{},e=this.rotated?"right":"bottom";this.tooltip=new wc(r,this.brushInstance,e,function(e){var t=[n.viewPortExtent[0],n.viewPortExtent[n.viewPortExtent.length-1]];if(i.datatype===On&&"auto"===(Va(l,"tooltipformat.specifier")||Va(l,"format.specifier"))){var a=as(Dt(t[1]-t[0]));l={subfunction:{YEAR:"DATE",MONTH:"DATE"}[a.subFunction]||"DATETIME"}}return za(r.content)?Ta(n,t[e],i):Hl(l,t[e],o,n,"tooltip",ct,"-")},this.chart)}}},{key:"on",value:function(e,t){this._hooks=this._hooks||{},this._hooks[e]=t}},{key:"getScale",value:function(e,t,a,r,n){return e.axes.x.scrollScale=it.getScale(e,e.dataObject,t,r,0,e.dataset,a,null,n,!1)}},{key:"constrain",value:function(e){var t=this,r=Sc(t.chart,"x",t.minimumVisiblePoints),n=void 0;e.addHook("start",function(e){n=e.selection,o=i=null}),e.addHook("brush",function(e){"resize"!==e.mode||t.isSmooth||(t.visiblePointCount=null)}),e.addHook("end",function(e){"resize"!==e.mode||t.isSmooth||(t.visiblePointCount=t.scrollDomain.length)});var i=null,o=null;e.snap("brush",function(e){var t=e.selection;if("move"===e.mode)return t;"left"===(o=o||(+t[0]!=+n[0]?"left":"right"))?t[1]=zt(n[1],t[1]):t[0]=Mt(n[0],t[0]);var a=rs(Dt(t[1]-t[0]),2);return"left"===o&&i&&t[0]>=n[1]-r?i:"right"===o&&i&&t[1]<=n[0]+r?i:a<r?i="right"===o?[t[0],t[0]+r]:[t[1]-r,t[1]]:t})}},{key:"getInitialDomain",value:function(){return this.getCategoryPosScreen()}},{key:"getInitialSelection",value:function(e){return dc(this.chart,e,0,"x",!1,!0,this.brushScale)}},{key:"getCategoryPosScreen",value:function(){var e=this.chart,t=this.settings,a=e.plotarea,r=t.visibleCategories,n=e.chartTypes[0].name,i=("gantt"==n||"bullet"==n||"bar"==n)&&e.systemConf.chart.plot.plotoptions[n].padding||.2,o=e.systemConf.chart.plot.plotoptions[n].outerPadding||.02;if(this.resizerEnabled){var l=e.dataObject.getCategories("x",0,!1);return l=l&&l.length?l:e.dataObject.findXCategories(),this.isSingleDomain=1===l.length,this.brushScale.domain()}return r?(r=Mt(this.minimumVisiblePoints,t.visibleCategories),this.getCategoryPosByCount(a,i,o,r)):this.getCategoryPosByThickness(a,i,o,t.categoryThickness||15)}},{key:"getActualScreenValue",value:function(e,t,a){return e.bandwidth?e.ordinalRange[t]:e(a)}},{key:"getScrollBarLength",value:function(e,t,a){var r=this.rotated;return Ba(a)?a[1]-a[0]:e.bandwidth?r?e.range()[0]-t:t+e.bandwidth():r?e.range()[0]-t:t}},{key:"getCategoryPosByCount",value:function(e,t,a,r){var n,i=this,o=i.chart,l=i.chart.axes.x.scrollScale,s=(n=(n=o.dataObject.getCategories("x",0,!1))&&n.length?n:o.dataObject.findXCategories()).length,c=o.dataObject.isWaterfallEnabled,u=zt(r,s),d=o.behaviouralEvents&&o.behaviouralEvents.eventManager.behaviours,h=o.systemConf.chart.brush;if(i.allCategoriesVisible=s<=u,c&&(n=l.domain()),i.allCategoriesVisible)return i.lastScroll=null,o.cache.scroll&&(o.cache.scroll.domain=null),l.bandwidth&&!i.isSmooth&&"redraw"===o.phase&&(o.viewPortExtent=n),i.brushScale.domain();if(i.chart.cache.scroll&&i.chart.cache.scroll.domain){var f=i.chart.cache.scroll.domain;if(l.bandwidth){if(d.PLOT_BRUSH&&Ba(h.x))return f;if(f.length!==u)return i.lastScroll=null,o.cache.scroll.domain=null,function(e,t,a){var r=e.length-t;if(r<a){var n=Math.max(t-(a-r),0);return e.slice(n)}return e.slice(t,t+a)}(n,n.indexOf(f[0]),u)}return i.chart.cache.scroll.domain}var p=n.slice(0,u);return l.bandwidth?p:_r(p)}},{key:"getCategoryPosByThickness",value:function(e,t,a,r){var n=this.chart.axes.x.scrollScale,i=(this.rotated?e.height:e.width,function(e,t){return e/(1-t)}(r,t)),o=this.getVisibleNumCategories(this.chart,e,a,i);return a=n&&n.bandwidth?Qs(n.range(),o,t,a,i):i*a*2,o=this.getVisibleNumCategories(this.chart,e,a,i),this.getCategoryPosByCount(e,t,a,o)}},{key:"getVisibleNumCategories",value:function(e,t,a,r){return this.rotated?Et((t.height-a)/r):Et((t.width-a)/r)}},{key:"updatePlotAreaByScroll",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.chart.plotarea,a=this.settings,r=this.rotated,n=fc(this,gc(this.chart,a)),i=a.height+n,o=t.left,l=t.top,s=ti(a,0),c=a.orient;r?(t.width-=i+s.left+s.right,"left"===c?t.left+=i+s.left+s.right:o+=t.width,o+=s.left):(t.height-=i+s.top+s.bottom,t.bottom+=i+s.top+s.bottom,"top"===c?t.top+=i+s.top+s.bottom:l+=t.height,l+=s.top),this._position={x:o,y:l}}},{key:"getPosition",value:function(){var e=this.chart.plotarea;return this.chart.axes.rotated?{x:this._position.x,y:e.top}:{x:e.left,y:this._position.y}}},{key:"destroy",value:function(){this.chart.overview&&this.chart.overview.destroy(),this.brushInstance.destroy(),this.parent.remove()}}]),Mc);function Mc(e,t){_classCallCheck(this,Mc),this.chart=e,this.rotated=this.chart.axes.rotated,this.settings=e.systemConf.chart.scroll,this.type=t}var zc=(_createClass(Dc,[{key:"getBehaviouralEventInstance",value:function(e,t){var a=void 0;if(t){var r=na.getComponent(t._constructor),n=na.getComponent(t._arguments);return(a=this.behaviours[e]||{}).instance=new r(n(this.chart)),this.behaviours[e]=a}}},{key:"dataFinder",value:function(e,t){e.dataFinder=t}},{key:"setListenerTypes",value:function(e,t){e.listenerTypes=t}},{key:"getData",value:function(e,t,a){var r=e.dataFinder,n={point:null};return r[t]&&(n.point=r[t].apply(this,[e,t,a])),n}},{key:"attachListeners",value:function(a,e){var r=this,n=a.listenerTypes,i=a.instance;Ka(e,function(e,t){n.has(t)&&rr(e).forEach(function(e){i.on(t,function(){e.apply(r,[a].concat(Array.prototype.slice.call(arguments)))})})})}},{key:"getBehaviours",value:function(e,t){var a=[],r=e.defaultBehaviour[t],n=e.customBehaviour&&e.customBehaviour[t];return n&&(a=[].concat(_toConsumableArray(rr(n).map(function(e){return{type:"custom",behaviour:e}})))),r&&(a=[].concat(_toConsumableArray(a),_toConsumableArray(rr(r).map(function(e){return{type:"default",behaviour:e}})))),a}},{key:"setBehaviours",value:function(e,t,a,r){e[(2<arguments.length&&void 0!==a?a:"default")+"Behaviour"]=t}},{key:"associateBehaviours",value:function(t,e,a,r,n){var i=this,o=i.getBehaviours(t,e),l=!0;Ba(o)&&o.length&&o.forEach(function(e){"custom"===e.type?(Ta(!0,e.behaviour,i,t,a,r,n),l=n.allowDefault):l&&e.behaviour.apply(i,[t,a,r,n])})}},{key:"detachListeners",value:function(){}}]),Dc);function Dc(e){_classCallCheck(this,Dc),this.chart=e,this.behaviours={}}na.setComponent("ZCChartScroll",function(e){return e.scroll}),na.setComponent("ZCChartScrollArguments",function(e){return e});var Ic={PLOT_ZOOM:{_property:"chart.zoom",_feature_name:"zoom",_handlers:function(e){return e.isGeoMap?"_mapZoomHandlers":"_chartZoomHandlers"},_behavior:{_constructor:"ZoomD3",_arguments:"_getPlotZoomArguments"}},PLOT_BRUSH:{_property:"chart.brush",_feature_name:"brush",_handlers:function(e){return e.isGeoMap?"_mapBrushHandlers":"_chartBrushHandlers"},_behavior:{_constructor:"BrushD3",_arguments:"_getPlotBrushArguments"}},CHART_SCROLL:{_property:"chart.scroll",_feature_name:"scroll",_handlers:"_chartScrollHandlers",_behavior:{_constructor:"ZCChartScroll",_arguments:"ZCChartScrollArguments"}}},Rc=(_createClass(jc,[{key:"init",value:function(){var a=this;a.chart,Ka(Ic,function(e,t){a.initiateBehaviour(t)})}},{key:"update",value:function(){var t=this;Ka(this.eventManager.behaviours,function(e){e&&e._update&&e._update.call(t,e)}),this.init()}},{key:"initiateBehaviour",value:function(e){var t=this.eventManager,a=t.chart,r=a.systemConf,n=Ic[e],i=Va(r,n._property)||{},o=i.actions,l=na.getComponent(va(n._handlers,[a]));if(za(l)&&l!==ta&&l.SUPPORTED(a)&&i.enabled){za(a.systemConf.chart.width)||a.renderVisiblePointsOnly||(a.renderVisiblePointsOnly=!1!==i.renderVisiblePointsOnly),Ur(n._feature_name,r.chart,a.globalProp);var s=t.getBehaviouralEventInstance(e,va(n._behavior,[a]));l.BEHAVIOUR&&(s._update=l.UPDATE,t.setBehaviours(s,l.BEHAVIOUR),t.dataFinder(s,l.DATA_FINDER),t.setListenerTypes(s,l.LISTENER_TYPES),t.attachListeners(s,l.LISTENER),(o=i.actions)&&t.setBehaviours(s,o,"custom"))}else za(t.behaviours[e])&&(t.behaviours[e].destroy&&t.behaviours[e].destroy(),t.behaviours[e]=null,delete t.behaviours[e])}}]),jc);function jc(e){_classCallCheck(this,jc),this.chart=e,this.eventManager=new zc(e),this.init()}function Hc(e,a,t,r){var n=e.chart,i=e.behaviours.PLOT_BRUSH,o=e.behaviours.PLOT_ZOOM,l=t.split("").map(function(e,t){return dc(n,Ba(a[0])?a[t]:a,r,e,za(o),!1)});l="xy"===t?[[l[0][0],l[1][0]],[l[0][1],l[1][1]]]:l[0],i.instance.setSelection(l)}function Bc(e,t,a,r){if(e.systemConf.__$overview)return!1;if(a){if(pt&&t.labelQueue.length){var n=e.systemConf.chart.plot.datalabels.events;Lo(e,n,0,"init"),pt.drawLabelsFromQueue(t.labelQueue,t.labelArray,e),Lo(e,n,0,r?"onreload":"onload")}t.labelArray=[],t.labelQueue=[];var i=e.systemConf.notes;za(i)&&i.enabled;t.notesArray=za(i)&&!0===i.enabled?As.draw(e,t.notesArray):[]}}function Fc(e,t){this.container=e,this.userdata=t,this.dataObject=null,this.dataset=null,this.svg=null,this.seriesColor=[],this.axes={x:{levels:[]},y:{groups:[]}},this.ismultiy=null,this.plotarea_approx=null,this.nochartdata=!1,this.chartRendered=!1,this.plot={},this.events={},this.viewPortExtent=null,Cl.call(this,e,t),this.initialize()}function Wc(e){this.chart=e,this.originalSeries=e.seriesdata,this.initialize()}function Vc(e){no.HierarchicalDataAdapter.call(this,e),this.dataType=Sn,this.categoryTree=!0,this.update(!0)}na.setComponent("BehaviouralEvents",Rc),no.helpers={isCatNull:function(e,t,a){var r=e.hasNullFormatter&&!e.hasNullFormatter[t+(za(a)?a:"")];return function(e){return!za(e)&&r}},is3D:function(e){return Ba(e)&&Ba(e[0])&&Ba(e[0][0])},getParsedYAxisOrder:function(e){return Ba(e)?e[0]:e||0},getChartType:function(e,t,a,r){if(null!=e||null!=a){var n,i,o=r&&r.seriesdata.chartdata;return za(a)&&(e=qa((o[a]||o[0]).type,r.seriesdata.type)),isNaN(+e)?(n=e.toLowerCase(),i=Ne[n]):(i=+e,n=ot.get(i)),"string"===t?n:t===An?i:{name:n,value:i}}},getAllChartTypes:function(e,a){var r=this,n=e.seriesdata&&e.seriesdata.type;return qa(Va(e,"seriesdata.chartdata"),[]).map(function(e){var t=r.getChartType(qa(e.type,n),qa(a,An));return a||"object"!==a?t:{}})},filterDataToViewPort:function(e,n,i,o,l){var s=Ba(n)&&Ba(o),c=0;return e.filter(function(e){var t,a=i&&i(e),r=l&&l(e);return(t=s?null!==a&&null!==r&&a>=n[0]&&a<=n[1]&&r>=o[0]&&r<=o[1]:null!==a&&a>=n[0]&&a<=n[1])?(e._filter=!1,e.counter=c++):e._filter=!0,t})},getDataPosition:function(e,t,a,r,n,i,o,l){var s=2<arguments.length&&void 0!==a?a:0,c=3<arguments.length&&void 0!==r?r:0,u=n,d=i,h=o,f=l,p=u.renderer[s],g=u.rendererConf[s],v=g.yaxiscolumnorder(),y=u.axes.rotated,m=g.stacked(),b=null;if(d=qa(d,u.chartTypes[s].name),h=qa(h,g.xscale()),f=qa(f,g.yscale()),"bar"===d)b=p.getParamValue(t,e,c,0,p.commonOption);else if("bubblepie"===d){var x=e[s];b=u.dataObject.getXYvalue(y,m,h,f,v,x,t)}else b=u.dataObject.getXYvalue(y,m,h,f,v,e,t);return isNaN(b)&&(b=null),b},filterPointsInViewport:function(t,e,a,r,n,i){var o=4<arguments.length&&void 0!==n?n:0,l=5<arguments.length&&void 0!==i?i:0;if(t.isGeoMap)return e;var s=xr(["line","area","bar","arearange","canvasscatter"],a),c=t.plotarea,u=[0,c.width],d=[0,c.height],h=t.axes.rotated,f=no.helpers.getDataPosition;if("x"===r&&Ba(t.scrollView)&&(u=t.scrollView.map(t.axes.x.baseScale).sort(ge)),s&&(1<e.length||"bar"===a))if("bar"===a)h&&(u=d),u=[u[0]-t.barscale2.bandwidth(),u[1]];else{var p=f(e[1],"x",o,l,t,a)-f(e[0],"x",o,l,t,a),g=f(e[1],"y",o,l,t,a)-f(e[0],"y",o,l,t,a);if(h){var v=[g,p].map(Dt),y=_slicedToArray(v,2);p=y[0],g=y[1];var m=[d,u];u=m[0],d=m[1]}u=[u[0]-p,u[1]+p],d=[d[0]-g,d[1]+g]}function b(e){return f(e,h?"y":"x",o,l,t,a)}function x(e){return f(e,"y",o,l,t,a)}return"xy"===r?no.helpers.filterDataToViewPort(e,u,b,d,x):"x"===r?no.helpers.filterDataToViewPort(e,u,b):"y"===r?no.helpers.filterDataToViewPort(e,d,x):void 0},groupByDataIndices:function(e){var t=e.columns;return(e.axes.groupby||[]).map(function(e){return t[e].dataindex})}},(ds.helpers={time:{},ordinal:{},numeric:{},linear:{}}).hasInnerSeries=function(e){return Ba(e.data)&&"object"===_typeof(e.data[0])&&za(e.data[0].seriesname)},ds.helpers.time={getDataInfo:function(t,a){var r,n,i,e=t.metadata.axes,o=e.x,l=e.z||[],s=e.clr||[],c=z([o,z(t.metadata.axes.y),l,s]),u=/timestamp/i,d=[],h=[];return c.map(function(e){i=qa(t.metadata.columns[e],{}),r=qa(i.time,{}),"time"!==i.datatype||e===o||a||(n=r.inputformat,u.test(n)&&"function"!==n&&"function"!=typeof window[n]?h.push(null):h.push(r),d.push(t.metadata.columns[e].dataindex))}),{indices:d,formatConf:h}},applyFormats:function(a,e){var t=e.indices,r=e.formatConf;return t.map(function(e,t){za(a[e])&&(Ba(a[e])?a[e]=a[e].map(function(e){return Vl(e,0,r[t]).getTime()}):a[e]=Vl(a[e],0,r[t]).getTime())}),a}},ds.helpers.linear={sort:function(e,a){return e.sort(function(e,t){return(e=e[a])<(t=t[a])?-1:t<e?1:t<=e?0:NaN})}},no.prototype.convertTo3DArray=function(e,t,a){var r=e.data;if(0<t.length&&(a===Ne.bar||a===Ne.stkdbar)){var n=function(e,t){var a=e.data.map(function(a){return t.reduce(function(e,t){return e+a[t]},"")});return{distintGroupbyCat:Sr(a),allGroupbyCat:a}}(e,t),i=n.distintGroupbyCat,o=n.allGroupbyCat,l=[];e.data.forEach(function(e,t){var a=i.indexOf(o[t]);l[a]=l[a]||[],l[a].push(e)}),r=e.data=l}else za(r)&&(!r.length||za(r[0])&&Ba(r[0]))&&(e.data=[],e.data.push(r),r=e.data);return r},no.prototype.totalDataCount=function(a){var r=this,n=0;return a.map(function(e){if(!a.disabled&&Ba(e)){var t=r.isAxisCategory||r.isPolarAxisCategory||r.isNonAxisMultiSeriesCategory?e.length:e.reduce(function(e,t){return e+(t.disabled?0:1)},0);n+=1!==t||null!==e[0]&&e[0].length?t:0}}),this.totalnoofdatas+=n,n},Be.rendererConf=function(){var a={params:{},xscale:function(e){return arguments.length?(a.params.xscale=e,a):a.params.xscale},yscale:function(e){return arguments.length?(a.params.yscale=e,a):a.params.yscale},stacked:function(e){return arguments.length?(a.params.stacked=e,a):a.params.stacked},datasetIndex:function(e){return arguments.length?(a.params.datasetIndex=e,a):a.params.datasetIndex},renderingOrderIndex:function(e){return arguments.length?(a.params.renderingOrderIndex=e,a):a.params.renderingOrderIndex},axisrotated:function(e){return arguments.length?(a.params.axisrotated=e,a):a.params.axisrotated},commonPlotOptions:function(e){return arguments.length?(a.params.commonPlotOptions=e,a):a.params.commonPlotOptions},color:function(e){return arguments.length?(a.params.color=e,a):a.params.color},chartObj:function(e){return arguments.length?(a.params.chartObj=e,a):a.params.chartObj},notes:function(e){return arguments.length?(a.params.notesArray=e,a):a.params.notesArray},updateLabelArrayAndLabelQueue:function(e,t){return arguments.length?(a.params.labelArray=e,a.params.labelQueue=t,a):[a.params.labelArray,a.params.labelQueue]},hasNegValue:function(e){return arguments.length?(a.params.hasNegValue=e,a):a.params.hasNegValue},dataset:function(e){return arguments.length?(a.params.dataset=e,a):a.params.dataset},yaxiscolumnorder:function(e){return arguments.length?(a.params.yaxiscolumnorder=e,a):a.params.yaxiscolumnorder},threshold:function(e){return arguments.length?(a.params.threshold=e,a):a.params.threshold},thresholdType:function(e){return arguments.length?(a.params.thresholdType=e,a):a.params.thresholdType},colorOverlay:function(e){return arguments.length?(a.params.colorOverlay=e,a):a.params.colorOverlay}};return a},Be.render=function(t){var e=t.systemConf.chart.plot.renderer.mode.toLowerCase(),a=t.chartTypes[0],r={mode:-1<lt.svgOnly.indexOf(a.value)||t.dataObject.pieWithAxis?"svg":e.toLocaleLowerCase()},n={labelQueue:[],notesArray:[],labelArray:[]};if(t.rendererConf||(t.rendererConf=[]),"function"!=typeof Be[r.mode+"Renderer"])throw new SyntaxError(r.mode+"Renderer not found");return r[r.mode]=Be[r.mode+"Renderer"](t,n),r.draw=function(e){t.chartRendered=!1,this[this.mode].draw(e)},r},ht.renderCompletedEvents=function(t,e,a,r){var n,i=t.systemConf,o=t.dataObject.hasLevelMarker&&!t.isAxisCategory,l=(t.isAxisCategory||t.dataObject.isPolarAxisCategory)&&!t.dataObject.pieWithAxis||o||t.isGeoMap&&!t.dataObject.hasBubblePie,s=t.renderer,c=!1;t.isAxisCategory||t.dataObject.isPolarAxisCategory?setTimeout(function(){c=!0},t.axes.animationDuration+17):c=!0;var u=setInterval(function(){if(Qa()&&(t.chartRendered=!0),t.destroying)return!0;for(n=s.length;n--;)if(!0!==s[n].chartRendered||!c)return!1;return function(){try{t.divScroll&&Xr.CHROME&&t.divScroll.fixScrollView(!0,t.canvasarea,t),Lo(t,i.chart.plot.events,0,e?"onreload":"onload"),Bc(t,a,!(l&&e),e),t.handleHiddenContainer(!0),Lo(t,i.canvas.events,0,e?"onreload":"onload")}catch(e){Cl.helpers.handleErrors(t,e)}}(),clearInterval(u),Mr(r)?r():(t.updating=!1,t.chartRendered=!0),!0},1e3/60);l&&Bc(t,a,o||e,e)},ht.arrangeSeriesRenderingOrder=function(e){var t=e.seriesdata,s=no.helpers;if(e.dataObject.isCombinationalChart){var c={defaultType:0,area:0,geoheatmap:0,bar:1,line:2,bubble:3,geobubble:3,bubblepie:4,geobubblepie:4,scatter:5,geoscatter:5},u=e.userdata.seriesdata.type,a=xa(t);return a.map(function(e,t){return e.seriesidx=t,e}),a.sort(function(e,t){var a=s.getChartType(e.type||u,"string"),r=s.getChartType(t.type||u,"string"),n=null==c[a]?c.defaultType:c[a],i=null==c[r]?c.defaultType:c[r],o=e.seriesidx,l=t.seriesidx;return n<i?-1:i<n?1:o<l?-1:l<o?1:0}),a}return t},ht.setRendererProp=function(p,e,t,a,r,n){var i,o,l,s,c,u=p.chartTypes[a],d=u.name,h=u.value,g=p.systemConf,f=no.helpers;i=a,o=d,l=p.seriesdata[i].color||p.seriesColor[i%p.seriesColor.length],s=p.seriesdata[i].yaxiscolumnorder,c=f.getParsedYAxisOrder(s),p.rendererConf[i].chartObj(p).dataset(p.dataset).yaxiscolumnorder(c).commonPlotOptions(p.systemConf.chart.plot.plotoptions[o]).color("bubblepie"==o?p.seriesColor:p.isAxisCategory?function(e,t,a,r,n,i){var o=g.chart.axes.xaxis.threshold.coloroverlay,l=null!=g.chart.axes.yaxis[n]&&null!=g.chart.axes.yaxis[n].threshold?g.chart.axes.yaxis[n].threshold.coloroverlay:null,s=o.show||null!=l&&l.show;if(s){var c=null!=l&&l.show?"y":o.show?"x":null,u=null!=l&&l.show?l:o.show?o:null,d=null!=l&&l.show?"y":o.show?"x":null,h=s?Ae.threshold.overlay(p,"continous"):null,f="y"===d?n:0;return p.rendererConf[r].threshold(s?u:null).thresholdType(d).colorOverlay(s?Ae.threshold.overlay(p,"discrete",c,u):null),"bar"==i||"scatter"==i||"bubble"==i?a:h(a,u,f,d)}return a}(0,0,l,i,c,o):p.dataObject.isPolarAxisCategory?l:p.seriesColor).notes(n.notesArray).updateLabelArrayAndLabelQueue(n.labelArray,n.labelQueue),e.commonRendererProp(p.rendererConf[a]);var v=p.seriesdata[a].yaxiscolumnorder,y=f.getParsedYAxisOrder(v);if(e.chartRendered=!1,p.isAxisCategory||p.dataObject.isPolarAxisCategory){var m=p.axes.y.groups[y].scale;p.rendererConf[a].xscale(p.axes.x.scale).yscale(m).datasetIndex(a).renderingOrderIndex(r).axisrotated(p.axes.rotated).hasNegValue(p.dataObject.containsNegativeData(y)).stacked(p.dataObject.isstacked(h)),n.labelArray=p.rendererConf[a].params.labelArray,n.labelQueue=p.rendererConf[a].params.labelQueue}if(so(h)&&!go(h)&&(e.bandwidth1(p.barscale1).bandwidth2(p.barscale2),n.image||e.barDatasetIndex(n.barDatasetIndex),null!=t.disabled&&t.disabled||(n.barDatasetIndex=n.barDatasetIndex+p.seriesdata[a].data.length)),ho(h)){var b=p.rendererConf[a].params;b.categoryColorConfig=ht.getWaterfallCategoriesConfig(p.seriesdata[a].plotoptions,b.commonPlotOptions)}},ht.saveSeriesdataInRenderer=function(a,e){var t=a.rendererConf[e].params,r=t.xscale,n=t.yscale,i=t.yaxiscolumnorder,o=a.dataset,l=o.getDataType("x"),s=o.getDataType("y",i),c=a.seriesdata[e].data,u=a.renderer[e];if(l==Sn||s==Sn){u.seriesdataAfterUpdate=[];var d=no.helpers,h=(d.isCatNull(o,"x"),d.isCatNull(o,"y",i),l==Sn?r.domain():null),f=s==Sn?n.domain():null;c.forEach(function(e,t){u.seriesdataAfterUpdate[t]=a.dataObject.updateSeriesdatabyCategories(wa(e),h,f,i)})}else u.seriesdataAfterUpdate=null},Xn.get=function(e,t){return new Fc(e,t)},Ja(Fc,Cl),Fc.helpers=Cl.helpers,Fc.prototype.initialize=function(){var t=this;try{t.processUserData(t.themeoptions),t.setChartDimension(),t.legendHighlight=new ms(t,t.svg),Cl.helpers.constructChartGroups(t)}catch(e){Cl.helpers.handleErrors(t,e)}},Fc.prototype.draw=function(){this.render(!1)},Fc.prototype.render=function(e){var t=this;try{t.updateCanvasArea();var a=t.systemConf;if(t.applyChartProperties(),t.nochartdata)t.hideLoading(t.container),t.handleNoData(a.noDataHandler),t.chartRendered=!0,Lo(t,a.canvas.events,0,e?"onreload":"onload");else{if(t.clearNoData(a.noDataHandler),t.getChartSeriesColor(),t.isAxisCategory=t.dataObject.isAxisCategory,t.isNonAxisMultiSeriesCategory=t.dataObject.isNonAxisMultiSeriesCategory,t.isPolarAxisCategory=t.dataObject.isPolarAxisCategory,t.parseScale(),t.zscale=t.scales[0]&&t.scales[0].getScale(),Te.render(t,e),Os.updatePlotarea4BlockTooltip(t),Oa(t.systemConf,"notes")&&t.systemConf.notes.enabled&&As.addBlockAnnotations(t),(t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker)&&(t.axes.rotated=ii(a),t.axes.rotated?(t.axes.x.orient="left",t.axes.y.orient="bottom"):(t.axes.x.orient="bottom",t.axes.y.orient="left"),t.ismultiy=1<t.getAxesCount("y"),t.ismultix=1<t.getAxesCount("x")),Oa(t.systemConf.chart,"scroll")&&t.systemConf.chart.scroll.enabled?t.scroll?t.scroll.update():(Ur("scroll",t.systemConf.chart,t.globalProp),t.scroll=new Lc(t,"x")):t.scroll&&(t.scroll.destroy(),t.scroll=null,t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL=null,delete t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL,delete t.scroll),t.isAxisCategory&&(t.systemConf.chart.width||t.systemConf.chart.height)){var r=new Ho;(t.divScroll=r).initialize(t)}if(Lo(t,a.chart.axes.events,0,"init"),t.drawPlotBorder(),t.isAxisCategory)Ae.render(t,t.chartWidth,t.chartHeight,e);else if(t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker){var n=t.dataObject.hasLevelMarker?"y":"x";Ae.polar.render(t,n)}if(t.legend.isSingleLayout&&(t.zscale=t.dataObject.hasZaxis&&!t.dataObject.isHierarchy?t.scales[0].create():null),Lo(t,a.chart.axes.events,0,e?"onreload":"onload"),t.updatePlotareaProp(),t.plot.renderer)t.plot.renderer.draw(e);else(t.plot.renderer=Be.render(t,e)).draw(!1);t.isAxisCategory&&t.drawThreshold(e),t.handleEvent(e),t.drawPlotareaClippath(),t.positionEventTrackerElement(t.wrap.selectAll("rect.dummy-rect-filter"))}}catch(e){Cl.helpers.handleErrors(t,e)}},Fc.prototype.processUserData=function(e,t){var a,r,n,i=this;i.systemConf=a=ga(e,i.userdata,!0,!0),r=Va(a,"seriesdata")||{},i.seriesdata=n=r.chartdata,Lo(i,a.canvas.events,0,"init"),i.nochartdata=!za(n)||za(n)&&n.length<1,i.nochartdata?i.seriesdata=null:(i.dataset=new cs.get(a,i),i.preProcessor=new ds(i),i.dataObject=i.getDataObject(),i.nochartdata=i.dataObject.totalnoofdatas<1)},Fc.prototype.getDataObject=function(){var e,t,a=this.chartTypes[0].value;return e=xr(lt.hierarchy,a)?"hierarchyDataProcessor":xr(lt.axis,a)||xr(lt.polarAxis,a)||bo(a,xi)?"cartesianDataProcessor":xr(lt.flow,a)?"flowchartDataProcessor":"defaultDataProcessor",function(e){var t=e.prototype,a={getAxisRotated:function(){return ii(this.data)},isstacked:function(){return!1}};for(var r in a)t[r]||(t[r]=a[r])}(t=na.getComponent(e)),new t(this.systemConf,this.dataset,this)},Fc.prototype.getAxesCount=function(e){var t=1,a=this.systemConf.metadata;if("x"===e){var r=this.dataset.getColumnIdx(e),n=a.columns[r].datatype,i=qa(a.columns[r][n],{}),o=i.subfunction;za(this.dataObject.hierarchical)?t=this.dataObject.hierarchical.finalDepth+1:Ba(i.groupby)&&i.groupby.length?t=i.groupby.length+1:"AUTO"===i.groupby&&(t=no.HierarchicalTimeDataAdapter.getAutoGroupOrder(o).length+1),this.axes[e].count=t}else{var l=a.axes.y;t=this.axes[e].count=l.length}return t},Fc.prototype.drawThreshold=function(e){if(Ae.threshold){this.cache.thresholdCustomPoints=[],Ae.threshold(this,e)}},Fc.prototype.handleEvent=function(e){var t=this,a=t.systemConf,r=na.getComponent("ZC_ChartEvents");if(e&&t.eventHandler)t.eventHandler.update(),function(e){e.eventHandler.tooltipElement=ue.tooltip(e.tooltip.element,e.systemConf,e),e.eventHandler.tooltipElement.initialize()}(t);else{t.createEventGroups(e);var n=xn("g",".trackerGroup",[1],t.eventWrap).attr("pointer-events","all"),i=xn("rect",".eventhandler",[1],n);t.eventHandler=new r(t,n),t.eventHandler.trackerGroup=n,t.eventHandler.trackerElement=i,t.dataObject.isPolarAxisCategory&&function(e){var t=e.plotarea_approx,a={name:"polarClip",id:e.id,cx:t.x,cy:t.y,r:t.radius},r={chartObj:e},n=tn.get(tn.svg_clips,jr,a,r);e.eventHandler.trackerElement.attr("clip-path","url("+e.defsLocation+"#"+n+")"),window.PointerEvent||"canvas"!==e.plot.renderer.mode||Do(e.container.selectAll("canvas.zc-labelholder-canvas,canvas.highlight-canvas,canvas.zc-canvas"))}(t),t.eventHandler.init(),Ts(t)}(t.isAxisCategory||t.dataObject.isPolarAxisCategory)&&(t.renderer.length&&!t.dataObject.flattenPoints&&t.dataObject.flattenData(),t.positionEventTrackerElement()),t.isAxisCategory&&(t.systemConf.chart.width||t.systemConf.chart.height)&&t.divScroll.defaultScroll(t),t.behaviouralEvents?t.behaviouralEvents.update():!0!==a.__$overview&&(t.behaviouralEvents=new Rc(t)),t.scroll&&t.scroll.render()},Fc.prototype.addRemoveSeries=function(e,t,a,r){var n=this,i=n.systemConf;if(n.phase="legendFilter",Pn.isQuantileColorScale(n))return n.phase="legendFilter-colorScale",void n.plot.renderer.draw(!0);n.dataObject.formattedData={x:[],y:[]},n.dataObject.initialize("addorremoveseries"),Lo(n,i.chart.axes.events,0,"init"),n.isAxisCategory?(n.updateZscale(),r?n.axes.y.groups.forEach(function(e,t){n.updateScale([t,0],"y")}):n.updateScale(a,"y"),n.updateScale(0,"x",n.viewPortExtent),n.dataObject.hierarchical&&(n.axes.x.rangeScale=n.axes.x.scale.copy(),n.axes.x.rangeScale.outerPaddingPx=n.axes.x.scale.outerPaddingPx,n.dataObject.hierarchical.groupByDiscreteTime&&n.axes.x.rangeScale.domain(rt(n.axes.x.scale.domain().length)),n.dataObject.hierarchical.setRanges(n.axes.x.rangeScale),n.axes.x.levels.forEach(function(e,t){n.updateScale(a,"x",null,t+1)}),n.dataObject.hierarchical.categoryTree&&Ae.TickLabelFilter.updateTickEventHandler(n,e.disabled)),n.drawThreshold(!0),n.updatePlotareaProp()):n.dataObject.isPolarAxisCategory&&Ae.polar.render(n,"x"),Lo(n,i.chart.axes.events,0,"onreload"),n.events={},n.plot.renderer.draw(!0),n.drawPlotareaClippath(),(n.isAxisCategory||n.dataObject.isPolarAxisCategory)&&(n.positionEventTrackerElement(),(n.systemConf.chart.width||n.systemConf.chart.height)&&n.divScroll.defaultScroll(n,"addorremoveseries")),n.scroll&&n.scroll.update()},Fc.prototype.pushDataPoint=function(e,u,d){var h=this,f=h.dataObject.isCombinationalChart,p=f?ht.arrangeSeriesRenderingOrder(h):h.seriesdata;if(!Array.isArray(e)){var t=[],a=[];t.push(e),a.push(u),e=t,u=a}h.cache.data={},h.cache.search={},e.forEach(function(e,t){var a,r,n,i=p[e],o=f?i.seriesidx:e,l=h.seriesdata[o],s=h.renderer[o];if(n=Ba(d)?d[t]:d,l.data[0].push(u[t]),h.dataObject.flattenData([{seriesindex:o,subseriesindex:0,data:[[u[t]]]}]),n){a=l.data[0][0];var c=l.data[0].shift();c._filter=!0,za(s.shiftInfo())?(r=s.shiftInfo()).count++:r={count:0},r.point=a,r.shiftedData=c,s.shiftInfo(r)}else s.shiftInfo(null);h.ismultiy&&h.updateScale(l,"y")}),h.dataObject.initialize(),h.updateScale(null,"x"),h.ismultiy||h.updateScale(h.seriesdata[0],"y"),h.plot.renderer.draw(!0),h.drawThreshold(!0)},Fc.prototype.popDataPoint=function(e){var t=this.seriesdata[e];t.data.forEach(function(e){e.pop()}),this.dataObject.initialize(),this.updateScale(t,"x"),this.updateScale(t,"y"),this.plot.renderer.draw(!0),this.drawThreshold(!0)},Fc.prototype.zoomX=function(e,t){this.__enableZoom("x"),_c(this.behaviouralEvents.eventManager,t,"x",e)},Fc.prototype.zoomY=function(e,t){this.__enableZoom("y"),_c(this.behaviouralEvents.eventManager,t,"y",e)},Fc.prototype.zoomXY=function(e,t,a){this.__enableZoom("xy"),_c(this.behaviouralEvents.eventManager,[t,a],"xy",e)},Fc.prototype.zoomReset=function(){this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.reset()},Fc.prototype.brushON=function(e){this.__enableBrush(e)},Fc.prototype.brushOFF=function(){this.__enableBrush(null)},Fc.prototype.brushX=function(e,t){this.__enableBrush("x"),Hc(this.behaviouralEvents.eventManager,t,"x",e)},Fc.prototype.brushY=function(e,t){this.__enableBrush("y"),Hc(this.behaviouralEvents.eventManager,t,"y",e)},Fc.prototype.brushXY=function(e,t,a){this.__enableBrush("xy"),Hc(this.behaviouralEvents.eventManager,[t,a],"xy",e)},Fc.prototype.changeZoomType=function(e){var t=this.systemConf;this.zoom||Ur("zoom",t.chart,this.globalProp),t.chart.zoom.type=e},Wc.prototype={initialize:function(){this.hierarchyLayout=!0,this.finalDepth=0,this.dataCount=0,this.categories=[],this.leafNodes=[],this.series=[],this.categoriesByDepth=[],this.globalChartType=this.originalSeries.type},setDepth:function(){var o=this,e=o.categories,l=o.categoriesByDepth=[],s=o.leafNodes=[],c=o.leafCategories=[],u=o.categoriesList=[],d=o.dataType===On||o.groupByDiscreteTime?"point":"value";!function e(t,r,n,i){r>o.finalDepth&&(o.finalDepth=r);i=qa(i,"");t.forEach(function(t,a){za(n)&&(t.parent=n),t.leaf?(t.index=o.dataCount++,Ba(t.data)&&t.data.forEach(function(e){e.index=t.index,e.level=i+a+"_"}),s.push(t),c.push(t[d])):(l[r]||(l[r]=[],u[r]=[]),u[r].push(t[d]),t.itemIndex=l[r].length,l[r].push(t),e(t.children,r+1,t,i+a+"_"))})}(e,0),u.reverse()},getCategories:function(){return this.categories},getCategoriesByDepth:function(e){return za(e)||(e=0),e===this.finalDepth?this.leafNodes:e<this.finalDepth?this.categoriesByDepth[e]:void 0},getCategoriesByLevelIndices:function(e){var a=this.categories,r=e.length-1;return e.forEach(function(e,t){a=t===r?a[e]:a[e].children}),a},getParentByIndex:function(e,t){for(var a=this.leafNodes[e],r=null,n=this.finalDepth+1;n--;){if(a.depth===t){r=a;break}if(0===a.depth)break;a=a.parent}return r},setRanges:function(s){var a,r,c=this,n=za(s.bandwidth),e=c.finalDepth,u=0,i=0,t=c.leafNodes,o=qs(s);if(n){var d=n&&s.bandwidth();s.range();a=t[0],r=t[t.length-1],u=Ba(o)&&1<o.length?(o[1]-(o[0]+d))/2:0,i=s.outerPaddingPx,i=zt(i,u)}else{a=t[0],r=t[t.length-1];var l=it.getContinuousRangeBand(s,c.leafCategories);u=l.rangeBand/2,i=l.outerPaddingInPixel}function h(e,t){!function(e){return za(e.children[0])&&!0===e.children[0].leaf}(e)?(e.rangeBand=e.children.reduce(y,0),e.range=[e.children[0].range[0],e.rangeBand+e.children[0].range[0]]):(e.rangeBand=function(e){{if(c.categoryTree)return e.reduce(y,0);var t=e[0],a=e[e.length-1],r="point",n=d;if(c.groupByContinuousTime){if(n=0,za(c.tickValues[t.index+1])){var i=c.tickValues[t.index],o=c.tickValues[t.index+1],l=s(o)-s(i);u=l/2}}else r="index";return s(a[r])-s(t[r])+m(t,!0)+m(a)+n}}(e.children),f=s(n?e.children[0].index:e.children[0].point)-m(e.children[0],!0),e.range=[f,f+e.rangeBand]),g.push(e.rangeBand),v.push(e.range)}for(c.scaleList=[],c.rangeList=[];e--;){var f,p=c.getCategoriesByDepth(e),g=[],v=[];p.forEach(h),c.rangeList.push(v)}function y(e,t){return t.leaf?e+d+m(t,!0)+m(t):e+t.rangeBand}function m(e,t){return t&&e===a||!t&&e===r?i:u}return c.scaleList}},Wc.getValuesByKey=function(e,t){return e.map(function(e){return e[t]})},Wc.is3D=function(e){return Ba(e)&&Ba(e[0])},Wc.isArrayOfSeries=function(e){return Wc.is3D(e.data)&&za(e.seriesname)},Wc.keysObject=function(e){var t={};return e&&e.length&&e.forEach(function(e){t[e.value]=e}),t},Wc.getValues=function(e){return za(e)?e.map(function(e){return e.value}):null},Wc.getAllChildren=function(e,t){return t=qa(t,[]),e.children?(e.children.forEach(function(e){e.leaf?Array.prototype.push.apply(t,e.data):Wc.getAllChildren(e,t)}),t):e.data};var Nc={update:function(e){e||this.initialize(),this.process(),this.setDepth()},process:function(){this.originalSeries.forEach(this.searchHierarchy,this)},getSeries:function(e){return za(e)?this.series[e]:this.series},searchHierarchy:function(e,t){var a=this.chart,c=this.series[t],r=qa(a.dataset.getColumn("x"),{}),n=r.datatype,u=qa(r.dataindex,0),d=e.disabled,i=za(r[n])&&za(r[n].nullformatting),h=function(e){return i||za(e)};this.series[t]||((c=this.series[t]=xa(e)).data=[]),function i(e,o,l){var s=no.HierarchicalDataAdapter.keysObject(l);e.forEach(function(e){var t=ds.helpers.hasInnerSeries(e),a=no.HierarchicalDataAdapter.isArrayOfSeries(e),r=null;if(s[e.seriesname]?r=s[e.seriesname]:(r={value:a||t?qa(e.seriesname,""):"",depth:o,children:[]},d||l.push(r)),t)s[e.seriesname]||(s[e.seriesname]=r),i(e.data,o+1,s[e.seriesname].children),0===r.children.length&&er(l,r);else{no.HierarchicalDataAdapter.is3D(e.data)||(e.data=[e.data]);var n=no.HierarchicalDataAdapter.keysObject(r.children);e.data.forEach(function(e){var t={value:e[u],depth:o+1,leaf:!0,data:[e]};d?e.seriesDisabled=!0:delete e.seriesDisabled,h(e[u])&&(n[e[u]]?n[e[u]].leaf?n[e[u]].data.push(e):n[e[u]].children&&!d&&n[e[u]].children.push(t):(d||r.children.push(t),n[e[u]]=t),c.data.push(e))}),0===r.children.length&&er(l,r)}})}(e.data,0,this.categories)}};function Yc(e,t,a,r,n){no.HierarchicalDataAdapter.call(this,e),this.dataType=On,this.chart=e,this.columnInfo=n,r?this.groupByDiscreteTime=!0:this.groupByContinuousTime=!0,Ba(a)?this.groupOrder=a.slice(0).reverse():"AUTO"===a&&(this.groupOrder=Yc.getAutoGroupOrder(n.time.subfunction)),this.groupByTime=!0,this.update(t)}Ja(Vc,no.HierarchicalDataAdapter=Wc),$a(Vc.prototype,Nc),no.HierarchicalOrdinalDataAdapter=Vc;var Gc=["January","February","March","April","May","June","July","August","September","October","November","December"],Uc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Xc=["YEAR","QUARTER","MONTH","WEEK","DAY"],Zc={YEAR:"YEAR",ABSQUARTER:"QUARTER",QUARTER:"QUARTER",MONTH:"MONTH",ABSMONTH:"MONTH",WEEK:"WEEK",ABSWEEK:"WEEK",ABSDAY:"DAY"};function Qc(e,a){var r=null;return e.reduce(function(e,t){return e[r=a.call(null,t)]=e[r]||[],e[r].push(t),e},{})}function qc(e){return e.map(function(e){return{YEAR:e.getFullYear(),QUARTER:ns(e),MONTH:function(e){return Gc[e.getMonth()]}(e),WEEK:function(e){var t=new Date(e.getFullYear(),0,1);return Lt(((e-t)/864e5+t.getDay()+1)/7)}(e),DAY:function(e){return Uc[e.getDay()]}(e),timestamps:e.getTime(),data:e}})}function Kc(e,t,a,r){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o={depth:a};n.push(o),t?(o.leaf=!0,o.value=r?e[i].data.getTime():e[i].data,o.point=e[i].data.getTime()):(o.value=i,o.point=e[i][0].data,o.children=e[i])}return n}var $c={update:function(e){this.groupByDiscreteTime&&(e=qa(this.chart.dataObject.findXCategories(),e)),this.dataCount=0,this.tickValues=function(e,t){return e.map(function(e){return Vl(e,0,t)})}(e,this.columnInfo),this.process(),this.setDepth()},process:function(){var e=this.tickValues,t=qa(this.groupOrder,Xc),o=this.groupByDiscreteTime,a=qc(e),r=t.slice(0),n=r.shift(),i=Kc(Qc(a,function(e){return e[n]}),!1,0,o);this.categories=function t(e,a,r){var n,i=a.shift();return e.forEach(function(e){i?(n=Qc(e.children,function(e){return e[i]}),e.children=Kc(n,!1,r,o),t(e.children,a.slice(0),r+1)):e.children=Kc(e.children,!0,r,o)}),e}(i,r.slice(0),1)},getPossibleGroupBy:function(e,t){var a=e[0],r=e[e.length-1],n=a.getFullYear()===r.getFullYear(),i=t[0],o=ts(e[e.length-1]-e[0]);for(var l in o)if(o.hasOwnProperty(l)&&(1<o[l]||"YEAR"===l&&!n)){i=l;break}return i}};Yc.getAutoGroupOrder=function(e){var t=Xc.indexOf(Zc[e]);return Xc.slice(0,t)},Ja(Yc,no.HierarchicalDataAdapter),$a(Yc.prototype,$c),no.HierarchicalTimeDataAdapter=Yc;function Jc(e,t,a){var r=this._base=0;this._extent=[r,r],this._data=[],this._list=$(),e&&this.add.apply(this,arguments)}var eu=Jc.prototype;function tu(e,u,a){var d,h,f=no.helpers,p=f.isCatNull(u,"x");e.forEach(function(s,e){var t=f.getChartType(null,An,e,a.data);if((a.isstacked(t)||a.isPercentChart)&&!so(t)){function c(e){return u.getX(e)}d||(d=a.getDomain(a.getCategories("x"),!0),h=d.length),s.data.forEach(function(e){for(var t=e.map(c),a=0,r=h;a<r;a++){var n=d[a],i=t.indexOf(n);if(0<=i&&i!=a&&(e.splice(a,0,e[i]),e.splice(i+1,1),t=e.map(c)),_typeof(t[a])!=ct&&p(t[a])&&e.splice(a,1),i<0){var o=[],l=f.getParsedYAxisOrder(s.yaxiscolumnorder);o.splice(u.xidx,0,n),o.splice(u.yidx(l),0,0),o.isDummy=!0,e.splice(a,0,o),t=e.map(c)}}h!=e.length&&e.splice(h,e.length-h)})}})}function au(e){return/(left|right)/.test(e)?"bottom":"left"}function ru(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function nu(e){var t=[];return za(e.threshold)&&Ka(e.threshold,function(e){!0===e.show&&e.values.length&&(t=t.concat(e.values))}),t}function iu(e,t){return[jt(t-=Yt/2)*e,Ht(t)*e]}function ou(e){return(e=e%(2*Yt))<0?e+2*Yt:e}function lu(e,t,a,r,n){var i=0-(e.x-.5*n),o=e.width+n-i,l=0-(e.y-.5*n);return[t/2-(r-i)/2+(r-o)/2,a/2-(r-l)/2+(r-(e.height+n-l))/2]}function su(e){return Je().range([0,1]).domain([e<Yt?Yt/2:3*Yt/2,Yt])(e)}function cu(e,t,a){return t<e&&(t=e+((e=t)-t)),e<0&&t<0&&(e+=2*Yt,t+=2*Yt),e<0&&0<=t&&(a<0?t=2*Yt:e=0),e<=(a=a<0?a+2*Yt:a)&&a<=t}function uu(e){return 180*e/Yt}function du(e,t){var a=za(e.bandWidth)||e.levelMarker&&za(e.levelMarker.bandWidth),r=za(e.maxBandWidth)||e.levelMarker&&za(e.levelMarker.maxBandWidth),n=Mt(0,mr(e.innerRadius,t,0));if(a||r){var i=za(e.bandWidth)?mr(e.bandWidth,t,0):t-n,o=za(e.levelMarker.bandWidth)?mr(e.levelMarker.bandWidth,t,0):t-n,l=Ea(e.maxBandWidth,t),s=Ea(e.levelMarker.maxBandWidth,t);return i=zt(i,l),o=zt(o,s),t-Mt(i,o)}return zt(n,t)}eu.add=function(e,l,s){var c=this._list,u=this._extent,d=this._base;e.forEach(function(e){var t,a=l(e),r=s(e)||d,n=+(d<=r);c.has(a)?t=c.get(a):((t=[ct,ct]).key=a,c.set(a,t));var i=t[n]||d,o=i+r;e.y0=i,e.y=r,t[n]=o,u=oe([].concat(_toConsumableArray(u),[o,d]))}),this._extent=u,this._data=this._data.concat(e)},eu.getExtent=function(){return this._extent},na.setComponent("stackLayout",Jc),Jc.prototype.getAllExtents=function(){if(this._keyExtents)return this._keyExtents;var e=this._list,a=[];return e.each(function(e){var t=e.key;0<=e[1]&&a.push([t,e[1]]),e[0]<0&&a.push([t,e[0]])}),this._keyExtents=a},Jc.prototype.toPercent=function(e,n){var i=this._list;e.forEach(function(e){var t=n(e),a=i.get(t),r=a&&a[1];isNaN(r)||null==r||0==r||(e.y0/=r/100,e.y/=r/100)})},no.prototype.getMinMaxX=function(e){var t,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this,i=n.xaxisData,o=n.processedseriesData,l=n.chartObj,s=n.dataset,c=i.minRange,u=i.maxRange,d=s.getDataType("x"),h=n.xRange;if(e=qa(e,.05),Oa(l.systemConf,"chart.brush.x["+r+"]")&&a){var f=l.systemConf.chart.brush.x[r];return[f.minRange,f.maxRange]}if(!za(h)){t=o.map(function(e){return e.data.map(function(e){return oe(e,function(e){return s.getX(e)})})});var p=qa(Va(l.userdata,"chart.axes.xaxis"),{});h=n.xRange=oe(z(z(t)).concat(nu(p)))}!n.isBubbleEnabled||d===On||za(c)||za(u)||(t=n.overBubbles(h,"x"),h=[h[0]-t[0],h[1]+t[1]]),n.needMarkerCorrection()&&d!==On&&(t=n.overMarker(h,"x",e),h=[h[0]-t[0],h[1]+t[1]]);var g,v,y=0;return d!==On&&0!==e&&(y=n.getCorrectionOverDataLabels(h,"x")),0===(g=h[1]-h[0])&&(g=1),v=g*e+y,[qa(c,h[0]-v,0),qa(u,h[1]+v,0)]},no.prototype.getMinMaxY=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],a=arguments[2],r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],n=this,i=n.yaxesData,o=n.hasNegativeValue,l=n.baseline,s=n.yRange,c=n.chartObj,u=n.dataset,d=n.isstacked()||n.isPercentChart,h=qa(i[e],{}),f=u.getDataType("y",e),p=h.minRange,g=h.maxRange,v=0,y=n.getEncode("y",e);if(!y)return["NoData","NoData"];if(Oa(c.systemConf,"chart.brush.y["+e+"]")&&r){var m=c.systemConf.chart.brush.y[e],b=[m.minRange,m.maxRange];return n.saveBaseLine(e,b,null,!0),b}if(t=qa(t,h.outerPadding,c.datalabels.hasFixedPosition?1e-8:.05),l[e]=!0===Va(h,"baseline.show")?h.baseline.value:null,!s[e]){var x;if(x=n.isWaterfallEnabled?n.processDataForWaterFall(e):d?function(l,e){var s=l.dataset,c=l.processedseriesData,u=no.helpers,t=l.getEncode("y",e),a=t.seriesData,d=t.seriesIndices;if(l.isPercentChart)return[0,100];var r=a.map(function(e,t){var a=d[t],r=l.seriesAssist[a];if(xr(r.layout||[],"stack")){var n=r.stackIndex;return l.encodes.stack[n].layout.getExtent()}var i=z(e.data),o=u.getParsedYAxisOrder(c[a].yaxiscolumnorder);return oe(i,function(e){return s.getY(e,o)})});return oe(z(r))}(n,e):function(e,t){var a=z(t.seriesExtermes[e]);return 0!=a.length?oe(a):a.enabled?[0,0]:null}(e,n)){var C=nu(qa(Va(c.userdata,"chart.axes.yaxis["+e+"]"),{})),k=n.overLevelMarker(e);x=x.concat(C,k),x=oe(x)}s[e]=x}var w=s[e];if(Aa(w))return["NoData","NoData"];n.saveBaseLine(e,w,p);var S=f==An&&function(e,t,a){if(1<a.getAxesCount("y")){var r=t.allChartTypes,n=e.seriesIndices.map(function(e){return r[e]});return n.some(function(e){return so(e)||e===Ne.area||e===Ne.stkdarea})}return t.noofBarEnabledSeries&&!t.noofBoxplotEnabledSeries||t.noofAreaEnabledSeries}(y,n,c),O=S&&(null==o[e]||0<o[e]);S&&w[1]-w[0]==0&&(w=oe(z([w,[0]]))),n.isBubbleEnabled&&f!==On&&Aa(h.minRange)&&Aa(h.maxRange)&&(w[0]=O?0:w[0],x=n.overBubbles(w,"y",e),w=[w[0]-x[0],w[1]+x[1]]),n.needMarkerCorrection()&&f!==On&&(x=n.overMarker(w,"y",e,t),w=[O?0:w[0]-x[0],w[1]+x[1]]);var A=w[1]-w[0];0===A&&(A=1),n.isPercentChart||n.hasLevelMarker||n.isWaterfallEnabled||(v=A*t),Aa(p)&&(p=O?0:w[0]-v),Aa(g)&&(g=w[1]+v);var P=0;"time"===f||0===t||a||(P=c.datalabels.hasFixedPosition&&za(h.maxRange)&&h.maxRange<=w[1]?0:n.getCorrectionOverDataLabels([p,g],"y",e));if(O||c.datalabels.hasFixedPosition||(p=p-P||0),g=g+P||0,n.isWaterfallEnabled){var T=n.getCorrectionForWaterfall([p,g],"y",e,c,P);p=T[0],g=T[1]}if("log"===h.scaleType){var _=h.logBase||10,E=Lt(Er(g,_));p=Mt(Et(Er(p),_),1),g=Math.pow(_,E)}return[p,g]},no.prototype.ZC_BAR_getRangeY=function(e){var t=this.yRange[e]||[];return oe(z([t,[0]]))},no.prototype.getCategories=function(e,t){var a,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=arguments[3],i=this.chartObj,o=this.hierarchical,l=this.categoriesStore,s=za(o)&&o.categoryTree&&"x"===e&&0===t||i.dataObject.isWaterfallEnabled;return t=t||0,r&&Oa(i.systemConf,"chart.brush."+e+"["+t+"].categories")&&(n=i.systemConf.chart.brush[e][t].categories,!s)?n:this.isAxisCategory||this.isPolarAxisCategory?("x"===e?(a=za(o)?o.groupByTime?0<t?o.categoriesList[t-1]:o.groupByDiscreteTime?qa(this.xaxisData.categories,l.x.sort(ge)):o.leafCategories:0<t?o.categoriesList[t-1]:o.leafCategories:this.xaxisData.categories,t=""):a=this.yaxesData[t].categories,za(a)&&0!==a.length||(a=l[e+t]),"y"!==e||l["y"+t].enabled||(a=["NoData","NoData"]),s&&Ba(n)&&(a=n.map(function(e){return a[e]})),a):[]},no.prototype.getXYvalue=function(e,t,a,r,n,i,o,l,s){var c=this.yaxesData,u=this.dataset;if(this.isPolarAxisCategory){var d=c[n].reversed&&!t?r.domain().length-1:0,h=a(u.getX(i)),f=t?r(i.y+i.y0):r(u.getY(i,n))+(null!=r.bandwidth?r.bandwidth()/2:0),p=iu(f=Mt(f,r.range()[d]),h);return"x"===o?p[0]:p[1]}switch(o){case"x":return e?t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0):a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0);case"y":return e?a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0):t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0);case"z":return l(u.getZ(i)||l.domain()[0])}},no.prototype.getTransRectValue=function(e,t,a,r,n,i,o){var l=this.dataset,s=n&&n.yscale,c=n&&n.addRangeBand(s),u=n&&"waterfall"==n.charttype,d=n&&n.stacked||u,h=n&&l.getY(t,n.yaxiscolumnorder)instanceof Array,f=n&&(s.bandwidth?s.ordinalRange[0]+c:s.range()[0]),p=n&&s.range()[1];switch(this.dataset.yAccessor=this.isPercentChart?function(e){return e.y}:this.dataset.getY,e){case"x":if(n.axisrotated){var g=l.getY(t,n.yaxiscolumnorder);o=null!=o?o:h?g[0]<g[1]?0:1:null;var v=this.dataset.yAccessor(t,n.yaxiscolumnorder,o);return s.bandwidth?s.origRange[0]:s(d?zt(t.y0,t.y+t.y0):null!=o||h?v:null!=n.hasNegValue?v<n.hasNegValue?v:n.hasNegValue:zt(v,s.domain()[0]))}var y=l.getX(t);return(n.stacked?n.bandwidth1(y)+n.bandwidth2(n.stackGroupIndex):n.bandwidth1(y)+n.bandwidth2(n.barDatasetIndex+a))+n.padding;case"y":if(n.axisrotated){y=l.getX(t);return(n.stacked?n.bandwidth1(y)+n.bandwidth2(n.stackGroupIndex):n.bandwidth1(y)+n.bandwidth2(n.barDatasetIndex+a))+n.padding}g=l.getY(t,n.yaxiscolumnorder);o=null!=o?o:h?g[0]>g[1]?0:1:null;v=this.dataset.yAccessor(t,n.yaxiscolumnorder,o);return d?s(Mt(t.y0,t.y+t.y0))+c:s(null!=s.bandwidth||h?v:Mt(n.hasNegValue||0,v))+c;case"width":if(n.axisrotated){v=s(v=h?Ue(l.getY(t,n.yaxiscolumnorder)):this.dataset.yAccessor(t,n.yaxiscolumnorder,o));var m=null==n.hasNegValue?h?s(this.dataset.yAccessor(t,n.yaxiscolumnorder,0)):f:s(h?Oe(l.getY(t,n.yaxiscolumnorder)):n.hasNegValue);return o=h?1:null,s.bandwidth?v+c:d?Dt(s(t.y+t.y0)-s(t.y0))+c:(Dt(p-m-(p-v))||0)+c}return n.barWidth;case"height":if(n.axisrotated)return n.barWidth;v=s(v=h?Ue(l.getY(t,n.yaxiscolumnorder)):this.dataset.yAccessor(t,n.yaxiscolumnorder,o))+c;m=null==n.hasNegValue||h?h&&!d?s(Oe(l.getY(t,n.yaxiscolumnorder))):f:s(n.hasNegValue);return o=h?1:null,s.bandwidth?Dt(s.origRange[0]-v):d?Dt(m-s(t.y+t.y0)-(m-s(t.y0)))+c:Dt(m-v);case"radius":return ir(i)}},no.prototype.getCorrectionOverDataLabels=function(e,t,a){var r=this,n=r.chartObj,i=r.xaxisData,o=r.yaxesData,l=r.domainCorrections,s=r.rangeCorrections.datalabels,c="x"==t,u=t+(za(a)?a:""),d=c?i:o[a],h=d.minRange,f=d.maxRange,p=n.plotarea.height;if(!r.isPercentChart&&(!r.isBubbleEnabled||r.pieWithAxis)&&(r.isAxisCategory||r.isNonAxisMultiSeriesCategory)&&(null==h||null==f)&&pt&&(null==l.byDatalabels[u]||p!=l.plotHeight)){l.plotHeight=p;var g=n.axes[t].orient,v=n.plotarea["left"==g?"height":"width"],y=e[1]-e[0],m=r.getEncode(t,a).seriesData,b=0;null!=m&&(Aa(s[u])&&Us(n,t)&&(s[u]=ft.DATALABELS_getPreCalculatedSize(t,m,n)),b=s[u]||0),l.byDatalabels[u]=y/(v-b)*b}return l.byDatalabels[u]||0},no.prototype.findXCategories=function(n){var e=this.categoriesStore,t=this.processedseriesData,i=this.dataset,o=e.x;return t.forEach(function(e,t){var a=e.disabled&&!n,r=e.data;a||null==r||r.constructor!=Array||r.map(function(e,t){if(null!=e&&e.constructor==Array)return e.map(function(e){var t=i.getX(e);null!=t&&-1==o.indexOf(t)&&o.push(t)})})}),o},no.prototype.storeCategories=function(a,e,n,r,i,o,l,s){var c=this,u=c.dataset,d=c.categoriesStore,h=d.x,f=d["y"+l],t=no.helpers,p=t.isCatNull(u,"x"),g=t.isCatNull(u,"y",l);e?a.map(function(r,e){if(!a.disabled&&Ba(r))return r.map(function(e){var t=u.getActualX(e),a=0<n.length?u.getGroupByValues(e,n):null;t>c.lastCategoryValue&&!c.needXCategoriesSorting?c.lastCategoryValue=t:c.needXCategoriesSorting||-1!=h.indexOf(t)||(c.needXCategoriesSorting=!0),p(t)||-1!=h.indexOf(t)&&!s||h.push(t),null!=a&&(r.groupByVal=a,e.groupByVal=a,-1==d.subseries.indexOf(a)&&d.subseries.push(a))})}):i!==Sn&&o!==Sn||a.map(function(e,t){if(!a.disabled&&Ba(e))return e.map(function(e){var t=u.getActualX(e),a=u.getY(e,l);i!==Sn||p(t)||!s&&-1!==h.indexOf(t)||h.push(t),o===Sn&&(r===Ne.arearange||r===Ne.gantt?(za(a)&&-1===f.indexOf(a[0])&&f.push(a[0]),za(a)&&-1===f.indexOf(a[1])&&f.push(a[1])):g(a)||-1!==f.indexOf(a)||f.push(a))})})},no.prototype.overLevelMarker=function(e){if(!function(e,t){var a=[oi,li,xi,_i],r=e.getEncode("y",t).seriesIndices,n=e.allChartTypes;return r.some(function(e){return xr(a,ot.get(n[e]))})}(this,e))return[];this.qualitativeRanges||(this.qualitativeRanges=[]);var a,r,n,t=no.helpers,i=this.qualitativeRanges[e],o=this.getEncode("y",e).seriesData,l=t.getChartType(o[0].type||this.globalChartType,"string"),s=this.data.chart.plot.plotoptions[l],c=s.levelMarker,u=s.targetMarker,d=s.whiskers;return i||(i=this.qualitativeRanges[e]=[],o.forEach(function(e){var t=e.plotoptions||{};c=ga(c,t.levelMarker),u=ga(u,t.targetMarker),d=ga(d,t.whiskers),a=c.dataindex,r=u.dataindex,n=d.dataindex,(c.enabled||u.enabled||d.enabled)&&(a||r||n?e.data.forEach(function(e){e.forEach(function(e){u.enabled&&za(e[r])&&i.push(e[r]),c.enabled&&za(e[a])&&(Ba(e[a])?i=i.concat(e[a]):i.push(e[a])),d.enabled&&za(e[n])&&(i=i.concat(e[n]))})}):c.enabled&&(Ba(c.ranges)?i=z(c.ranges):za(c.values)&&(i=i.concat(c.values))))})),isNaN(i[1]-i[0])&&!this.hasLevelMarker?[]:oe([].concat(_toConsumableArray(i),[0]))},no.prototype.isstacked=function(e){var t=this.data,a=t.chart.plot.plotoptions,r=this.stackedChart,n=no.helpers;if(za(e)){var i=n.getChartType(e,An);return a=a[e=n.getChartType(e,"string")],i===Ne.stkdarea||i===Ne.stkdbar||xr(lt.stacked,i)&&Va(a,"stacked.enabled")}if(Aa(r)){var o=this.allChartTypes||n.getAllChartTypes(t),l=this;this.stackedChart=r=o.some(function(e){return l.isstacked.call(l,e)})}return r},no.prototype.isStackedPercent=function(){var t=this.dataset.seriesTypes,a=this.data.chart.plot.plotoptions;return lt.stackedPercent.some(function(e){return t.has(e)&&a[ot.get(e)].stacked.showAs===Dl})};var hu=no.prototype;function fu(e,t,a){this.values=[],this.minmaxY=[],this.stackeddata=[],this.stackedChart=null,this.hasNegativeValue=[],this.baseline=[],this.xRange=null,this.yRange=[],this.domainCorrections={plotHeight:null,byDatalabels:{},forBubbles:{}},this.rangeCorrections={datalabels:{}},this.xaxisData=e.chart.axes.xaxis,this.yaxesData=e.chart.axes.yaxis,this.qualitativeRanges=null,this.groupedByStack=$(),this.categoriesStore=null,this.hierarchical=a.preProcessor.hierarchical,this.initialize=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){var t=this,a=arguments;e.apply(t,a),r.forEach(function(e){return e.apply(t,a)})}}(no.prototype.initialize,pu),no.apply(this,arguments)}hu.getStackGroup=function(){if(!this.isstacked())return $t;var e=this.cache;return e.stackGroup?e.stackGroup:e.stackGroup=this._createStackGroup()},hu._createStackGroup=function(){function n(e,t){var a;t=rr(t),r[e]=r[e]||[],(a=r[e]).push.apply(a,_toConsumableArray(t))}var i,o=this,e=o.chartObj.seriesdata,l=o.globalChartType,s=no.helpers,r={},t=o.data.seriesdata.stackGroup;return t&&(i=z(t),t.forEach(function(e,t){n("user_"+t,e)})),e.forEach(function(e,t){var a=s.getChartType(e.type||l,An);if(o.isstacked(a)&&(!i||!xr(i,t))){var r=s.getParsedYAxisOrder(e.yaxiscolumnorder);n(r+"_"+a,t)}}),Or(r)},na.setComponent("cartesianDataProcessor",fu),Ja(fu,no);var pu=function(e){var p=this,t=p.domainCorrections,a=p.yaxesData,g=p.allChartTypes,r=p.data,v=p.chartObj,y=p.globalChartType,n=r.metadata.axes.y.length,i=r.metadata,o=i.axes,m=r.chart.plot.plotoptions,b=p.isstacked(),x=p.dataset,C=p.categoriesStore={},l=p.processedseriesData,k=no.helpers;p.hierarchical&&!p.hierarchical.groupByTime&&za(e)&&p.hierarchical.update(),p.xRange=null,p.yRange=[],p.qualitativeRanges=null,p.cache={},t.plotHeight=null,t.forBubbles={},p.lastCategoryValue=0,p.isBubbleEnabled=!1,p.noofBarEnabledSeries=0,p.noofAreaEnabledSeries=0,p.noofAreaRangeEnabledSeries=0,p.noofBoxplotEnabledSeries=0,p.isContinousChart=!0,p.isPercentChart=!1,C.x=[],C.z=[[0]],C.subseries=[],x.hasNullFormatter={},p.seriesExtermes=[],p.seriesAssist=[];var w=v.axes.y.groups;v.cache.data={},v.cache.search={};for(var s=0;s<n;s++)C["y"+s]=[],p.seriesExtermes[s]=[],za(a[s])||(a[s]={}),w[s]=w[s]||{},w[s].disabled=!0;if(Ba(l)){var S,O,A=o.x?x.getColumn("x"):null,P=A?A.datatype:null,T=za(o.z),_=k.groupByDataIndices(i),c=r.metadata.axes.x,u=r.metadata.columns[c].datatype;p.hasZaxis=za(x.zidx)&&lt.zaxis.some(function(e){return xr(g,e)}),p.needXCategoriesSorting=!1,l.forEach(function(e,t){var a=e.disabled,r=e.data,n=k.getChartType(e.type||y,An),i=k.getParsedYAxisOrder(e.yaxiscolumnorder),o=x.getDataType("y",i);if(p.isBubbleEnabled=p.isBubbleEnabled||!a&&uo(n),p.isWaterfallEnabled=p.isWaterfallEnabled||!a&&ho(n),p.pieWithAxis=p.pieWithAxis||!a&&n==Ne.bubblepie,p.noofBarEnabledSeries+=so(n)&&!a?1:0,p.noofAreaEnabledSeries+=n!=Ne.area&&n!=Ne.stkdarea||a?0:1,p.noofAreaRangeEnabledSeries+=n!=Ne.arearange||a?0:1,p.noofBoxplotEnabledSeries+=n!=Ne.boxplot||a?0:1,p.isContinousChart=p.isContinousChart&&(n==Ne.line||En(n)||fo(n)),!a&&Ba(r)){C["y"+i].enabled=!0,w[i].disabled=!1,S=n===Ne.waterfall&&null==S,p.seriesAssist[t]={};var l=x.getDataType("x",null,g),s=x.getColumn("y",i);za(x.hasNullFormatter.x)||(x.hasNullFormatter.x=!(l!==Sn||!Oa(A[P],"nullformatting"))),za(x.hasNullFormatter["y"+i])||(x.hasNullFormatter["y"+i]=!(o!==Sn||!Oa(s[s.datatype],"nullformatting"))),p.saveEncode("x",0,t),p.saveEncode("y",i,t),za(x.zidx)&&xr(lt.zaxis,n)&&p.saveEncode("z",0,t),Pn.isQuantileColorScale(v)&&p.saveEncode("color",0,t);var c=p.isstacked(n),u=bo(ot.get(n),oi)&&m.bar.showAs;if(c||u){var d=os(p.getStackGroup(),t);p.saveEncode("stack",d,t),p.seriesAssist[t].layout=["stack"],p.seriesAssist[t].stackIndex=d;var h=p.getEncode("stack",d),f=na.getComponent("stackLayout");h.layout=h.layout||new f,function(e,t,a,r,n){var i=e.groupedByStack,o={si:a,d:t};if(so(n)){if(i.has(r)){var l=i.get(r);i.set(r,l.concat([o]))}else i.set(r,[o]);i.get(r).stackLabelIndex=o.si}}(p,r,t,d,n)}O=O||u,p.storeCategories(r,b,_,n,l,o,i,S),p.setExtremes(r,b,o,n,T,i)}});var d=Va(v.userdata,"chart.axes.xaxis.categories");if(p.isAxisCategory&&u!==Sn&&p.needXCategoriesSorting&&(!za(d)||za(d)&&0===d.length)&&C.x.sort(ge),p.isCombinationalChart=1<Sr(g,function(e){return ot.get(e)}).length,p.isStackedPercentChart=b&&p.isStackedPercent(),p.isPercentChart=p.isStackedPercentChart||O,p.pieWithAxis&&(p.bubblepieData=p.processBubblePieData()),!b&&!p.isPercentChart||p.isWaterfallEnabled||(tu(l,x,p),function(e,c,u){var d=no.helpers;e.forEach(function(e,t){var a=u.seriesAssist[t];if(!e.disabled&&xr(a.layout||[],"stack")){var r=a.stackIndex,n=u.getEncode("stack",r).layout,i=e.data,o=d.getParsedYAxisOrder(e.yaxiscolumnorder),l=z(i);if(so(d.getChartType(null,An,t,u.data))){var s=u.getDomain(u.getCategories("x",0,!1),!0);l=u.updateSeriesdatabyCategories(l,s)}n.add(l,function(e){return c.getX(e)},function(e){return c.getY(e,o)})}})}(l,x,p)),p.isPercentChart)!function(e,n){Ka(e,function(e,t){var a=e.seriesData,r=e.layout;a.map(function(e){var t=z(e.data);r.toPercent(t,function(e){return n.getX(e)})})})}(p.getEncode("stack"),x)}},gu=fu.prototype;function vu(e,t,a){this.data=e,this.dataset=t,this.chartObj=a,this.globalChartType=null,this.processedseriesData=a.seriesdata,this.initialize()}function yu(e,t){return t=t||0,e.forEach(function(e){Ba(e[0])?t=yu(e,t):t++}),t}gu.getSeriesData=function(){var e=this.chartObj;if(za(this.hierarchical)&&this.hierarchical.categories){var t=this.hierarchical.getSeries();return e.seriesdata=t}return e.seriesdata},gu.containsNegativeData=function(e){return this.hasNegativeValue[e]},gu.saveBaseLine=function(e,t,a,r){var n=this.dataset.getDataType("y",e),i=$t;if(n===An){var o=this.baseline[e],l=this.isstacked()||this.isPercentChart;i=!za(o)||l||r&&!Ma(o,t)?a<0||t[0]<0?0:$t:o}this.hasNegativeValue[e]=i},gu.getMinMaxZ=function(){return oe(z(this.categoriesStore.z))},gu.updateSeriesdatabyCategories=function(e,n,i,o,l){var s=this.dataset,t=no.helpers,c=t.isCatNull(s,"x"),u=t.isCatNull(s,"y",o),d=H(),h=0;return e=e.filter(function(e){var t=!0,a=s.getX(e);if(n&&(t=t&&!c(a)&&-1<n.indexOf(a)),i){var r=s.getY(e,o);t=t&&!u(r)&&-1<i.indexOf(r)}return n&&l&&t&&(d.has(a)?t=!1:d.add(a)),t?(e._filter=!1,e.counter=h++):e._filter=!0,t})},gu.setExtremes=function(e,t,a,r,n,i){var o=this.dataset,l=this.categoriesStore.z;if(((a===An||a===On)&&!t||n)&&!e.disabled&&Ba(e)){var s=z(e);if(n){var c=oe(s,function(e){return o.getZ(e)});l.push(c)}if(a===An||a===On){var u;if(lt.rangePlot.has(r)){var d=z(s.map(function(e){return o.getY(e,i)}));u=oe(d)}else u=oe(s,function(e){return o.getY(e,i)});this.seriesExtermes[i].push(u)}}},gu.getDomain=function(e,t){return this.hierarchical&&(!this.hierarchical.groupByDiscreteTime||!t)||this.isWaterfallEnabled?rt(e.length):e},na.setComponent("hierarchyDataProcessor",vu),vu.prototype.initialize=function(e){var s=this,c=s.data,u=s.dataset,t=s.chartObj,a=s.processedseriesData,r=s.globalChartType=c.seriesdata&&c.seriesdata.type,d=no.helpers;u.seriesTypes=H(),s.totalnoofdatas=0,s.isNonAxisMultiSeriesCategory=!0,s.isHierarchy=!0,s.seriesExtermes=[[]],null!=a&&Ba(a)&&("addorremoveseries"!=e&&(a=t.seriesdata=s.processedseriesData=function n(e){return e.map(function(e){var t;if(e.data&&e.data[0]&&Ba(e.data[0])){t=e.data;var a=e.leafColors;a&&t.forEach(function(e,t){e.color=a[t%a.length]})}else t=e.data?(s.hasHierarchyData=!0,n(e.data)):e;for(var r in e)e.hasOwnProperty(r)&&"data"!==r&&(t[r]=e[r]);return t})}(a)),function o(l){l.forEach(function(e,t){if(e.level=null!=l.level?l.level+"_"+t:""+t,Ba(e[0]))o(e);else{var a=+e.level.split("_")[0],r=c.seriesdata.chartdata[a],n=d.getParsedYAxisOrder(r.yaxiscolumnorder);if(!r.disabled){var i=oe([e],function(e){return u.getY(e,n)});s.seriesExtermes[0].push(i),s.totalnoofdatas++}}})}(a),a.forEach(function(e,t){var a=d.getChartType(e.type||r,An);u.seriesTypes.add(a)}))},no.prototype.extendOuterpadding=function(e,t,a,r,n,i,o){var l=this.rangeCorrections.datalabels,s=this.needMarkerCorrection(),c=this.chartObj,u=0;if(c.datalabels.moduleExists&&Xs(c)||this.isBubbleEnabled||s){t[0]>t[1]&&(t=[t[1],t[0]]);var d=Q().domain(e).range(t).paddingInner(r).paddingOuter(n),h=t;if(this.isBubbleEnabled){var f=this.updateMinMaxForBubble(t,d,i,o),p=.5*Mt(t[0]-f[0],f[1]-t[1]);h=[f[0]-p,f[1]+p]}else if(s)h=this.updateMinMaxForMarker(scale,i);else if(pt){var g=this.getEncode(i,o).seriesData,v=d(d.domain()[0])-d.range()[0],y=i+(za(o)?o:"");Aa(l[y])&&Us(c,i)&&(l[y]=ft.DATALABELS_getPreCalculatedSize(i,g,c));p=l[y]||0;p=Mt(0,p-v),h=[t[0]-p,t[1]+p]}u=Mt(h[1]-t[1],-h[0])}return u};var mu=no.prototype.processBubblePieData=function(e){e=e||Ne.bubblepie;var l=this,t=l.processedseriesData,s=l.chartObj,c=l.dataset,i=Ea(l.data.chart.plot.plotoptions[ot.get(e)].dataindex,3),u=[],d=[],h={x:$t,y:[]},a=Va(s.userdata,"chart.axes.xaxis.categories");return c.getDataType("x")==Sn&&a&&a.length&&(h.x=a),t.forEach(function(e,i){var o=no.helpers.getParsedYAxisOrder(e.yaxiscolumnorder),t=Va(s.userdata,"chart.axes.yaxis["+o+"].categories");c.getDataType("y",o)==Sn&&t&&t.length&&(h.y[o]=t),e.data.forEach(function(e,n){e.forEach(function(e){var t=function(e,t){var a=s.seriesdata[t],r=no.helpers.getParsedYAxisOrder(a.yaxiscolumnorder),n=a.disabled||!yo(s.chartTypes[t].value),i=c.getX(e),o=c.getY(e,r);h.x&&(n=n||-1===h.x.indexOf(i));h.y[r]&&(n=n||-1===h.y[r].indexOf(o));s.isGeoMap&&!n&&(n=!l.isValidPoint(e));return n}(e,i);if(d[n]=d[n]||[],u[n]=u[n]||[],!t){var a=is.getKey(e,i,s),r=d[n].indexOf(a);-1===r&&(r=d[n].length,u[n][r]=function(e,t){var a=[];return a.x=c.getX(e),a.y=c.getY(e,t),a.z=c.getZ(e),a.reference=e,a}(e,o)),u[n][r][i]=e,d[n].push(a)}e.disabled=e.dummy=t}),u[n]=u[n]||[]})}),u.forEach(function(e){e.forEach(function(a){t.forEach(function(e,t){a[t]||(a[t]=function(e,t){var a=no.helpers.getParsedYAxisOrder(s.seriesdata[t].yaxiscolumnorder),r=s.dataset,n=[];return n[r.xidx]=e.x,Mr(r.yidx)&&(n[r.yidx(a)]=e.y),n[r.zidx]=e.z,n[i]=null,n.dummy=!0,n}(a,t))})})}),u};function bu(e,t,a,r,n){var i=n.chart,o=n.animationOptions.enabled,l=n.axisrotated,s=n.renderer,c=n.seriesindex,u=l?s.getParamValue("height",t[0],c,null,s.commonOption):s.getParamValue("width",t[0],c,null,s.commonOption),d=zt(u/10,1),h=function(a){return a.map(function(e,t){return a[t][3]})}(a),f={inner:0,outer:1},p=l?"triangle-left":"triangle-down";sn(sn(e,"g",r.enabled?[1]:[],".","class","zcmarkerPointers"),"g",h,".","class","markers",null,function(e,t){return a[t]&&a[t].y}).each(function(e,t){var a=qe(this);a.attrs({transform:function(e){return"translate("+e[0]+","+e[1]+")"}}).style("opacity",0).transition().duration(o?n.animationOptions.duration:0).style("opacity",1),eo(a,null,{size:d,symbol:p,outerFillOpacity:r.strokeOpacity,outerStrokeOpacity:r.strokeOpacity},{symbolSize:f,color:r.strokeColor||"black"},i)})}function xu(e,t){return t?Cu(e,t):e.y+e.y0}function Cu(e,t){var a=e.index,r=t.filter(function(e,t){return e[0]==a})[0];if(!r||!r.length)return 0;var n=r[1],i=r[2];return function(e){return 0<e}(n)?i:i+Dt(n)}function ku(e,t,a,r){var n=a.renderer,i=a.axisrotated,o=a.seriesindex;if(r){if(i&&"width"==t)return 0;var l=Cu(e,r);return i&&"x"==t||!i&&"y"==t?n.commonOption.yscale(l):n.getParamValue(t,e,o,null,n.commonOption)}return n.getParamValue(t,e,o,null,n.commonOption)}no.prototype.overBubbles=function(e,t,a){var r=this.domainCorrections,n=this.xaxisData,i=this.yaxesData,o=this.chartObj,l=t+(za(a)?a:""),s=o.plotarea.height,c=this.chartObj;if(za(r.forBubbles[l])&&r.plotHeight===s)return r.forBubbles[l];r.plotHeight=s;var u="x"===t,d=c.axes[t].orient,h=0,f=c.plotarea["left"===d?"height":"width"],p=[h,f],g=u?n:i[a],v=Je().domain(e).range(p),y=this.updateMinMaxForBubble(p,v,t,a);return h=za(g.minRange)?h:v.invert(y[0]),f=za(g.maxRange)?f:v.invert(y[1]),r.forBubbles[l]=[e[0]-h,f-e[1]],r.forBubbles[l]},no.prototype.updateMinMaxForBubble=function(e,u,t,d){this.processedseriesData;var h=this.dataset,f=this.chartObj,n=no.helpers,p=e[0],g=e[1],v="x"==t,a=this.getEncode(t,d);return a?(a.seriesData.forEach(function(e,t){var a=e.data,r=e.disabled,l=n.getParsedYAxisOrder(e.yaxiscolumnorder);if(!r){var s=n.isCatNull(h,"x"),c=n.isCatNull(h,"y",l);a.forEach(function(e){e.forEach(function(e){var t=v?h.getX(e):h.getY(e,d),a=h.getZ(e)||f.zscale.domain()[0];if(e&&!e.isDummy&&!s(h.getX(e))&&!c(h.getY(e,l))){var r=f.zscale(a),n=u(t)+(null!=u.bandwidth?u.bandwidth()/2:0),i=n+r/2,o=n-r/2;g<i&&(g=i),o<p&&(p=o)}})})}}),[p,g]):e},no.prototype.needMarkerCorrection=function(){return!1},no.prototype.updateMinMaxForMarker=function(e,t,a){var r=this.chartObj,n=to(r),i=r.axes[t].orient===qo,o=n[i?Zo:Ko],l=n[i?Qo:qo],s=e.range(),c=e.domain(),u=s[0],d=s[1],h=0,f=0;if(a=a||0,e.bandwidth){h=e(c[0])+e.bandwidth()/2-u-5,f=d-(e(c[c.length-1])+e.bandwidth()/2)-5}else h=f=a/2*(d-u);return[u-=Mt(0,o-h),d+=Mt(0,l-f)]},no.prototype.overMarker=function(e,t,a,r){var n=this.chartObj,i="x"===t?this.xaxisData:this.yaxesData[a],o=n.axes[t].orient,l=[0,n.plotarea[o===Zo?"height":"width"]],s=Je().domain(e).range(l),c=this.updateMinMaxForMarker(s,t,r),u=za(i.minRange)?0:l[0]-c[0],d=za(i.maxRange)?0:c[1]-l[1],h=l[1]-l[0],f=(e[1]-e[0])/(h-u-d);return[u*f,d*f]},ht.getWaterfallCategoriesConfig=function(e,t){return{cascaded:e&&e.cascadeCategories?ga(t.cascadeCategories,e.cascadeCategories,!0):t.cascadeCategories,rising:e&&e.risingCategories?ga(t.risingCategories,e.risingCategories,!0):t.risingCategories,falling:e&&e.fallingCategories?ga(t.fallingCategories,e.fallingCategories,!0):t.fallingCategories}},Pn.getWaterfallColor=function(e,t,a){return e.isCascaded?t.cascaded.color||a:e.isPositive?t.rising.color||a:t.falling.color||a},dt.waterfallHelpers=function(){},dt.waterfallHelpers.drawComparisonLine=function(e,t,a){var r=a.chart,n=function(v,y){var e=y.chart,m=y.renderer,t=e.dataset,b=y.seriesindex,a=y.yaxiscolumnorder,x=y.stacked,C=e.dataObject.waterfall.layout._keys,r=(no.helpers.isCatNull(t,"y",a),v.length,y.axisrotated?m.getParamValue("height",v[0],b,null,m.commonOption):m.getParamValue("width",v[0],b,null,m.commonOption)),k=(zt(r/10,1),y.chart.dataObject.stackedChart?y.chart.dataObject.waterfall.stackExtent[0]:null),w=(function(e){e.filter(function(e,t){return e.isCascaded})}(v),0),S=[];return v.map(function(e,t){var a=v[t];if(a.isCascaded&&v[t+1]){var r=function(e,t,a){var r=e[t],n=a.chart.dataObject.stackedChart?a.chart.dataObject.waterfall.stackExtent[0]:null,i=0,o=r;if(!r)return;for(;!r.isCascaded;){var l=xu(r,n);if(i<l&&(o=r,i=l),!(r=e[++t]))return}return{point:r,maxPt:o}}(v,t+1,y);if(r){var n=r.maxPt,i=(ku(a,"x",y,k),ku(n,"x",y,k)),o=ku(n,"y",y,k),l=ku(a,"x",y,k),s=ku(a,"y",y,k),c=ku(a,"width",y,k),u=ku(a,"height",y,k),d=0==a.index||a.index==v.length-1,h=r.point,f=function(e,t,a,r,n){var i,o,l,s,c=n.axisrotated,u=n.chart.dataObject.stacked,d=n.chart.dataObject.waterfall.datalabelPadding,h=Mt(a.x,u?t.x:t.x+t.width),f=zt(a.y,t.y),p=e.unshared?e.width/2:e.width/2+e.width/4,g=t.unshared?t.width/2:t.width/4,v=e.unshared?e.height/2:e.height/4,y=t.unshared?t.height/2:t.height/2+t.height/4;s=c?(i=[e.x+e.width+d,e.y+v],o=[h+d+30,e.y+v],l=[h+d+30,t.y+y],[t.x+t.width+d,t.y+y]):(i=[e.x+p,e.y-d],o=[e.x+p,f-d-30],l=[t.x+g,f-d-30],[t.x+g,t.y-d]);return[i,o,l,s]}({x:l,y:s,width:c,height:u,unshared:d},{x:ku(h,"x",y,k),y:ku(h,"y",y,k),width:ku(h,"width",y,k),height:ku(h,"height",y,k),unshared:0==h.index||h.index==v.length-1},{x:i,y:o},0,y);if(x){var p=C[a.index],g=C[h.index];f.y=(g.stackedValue-p.stackedValue)/Mt(p.stackedValue,g.stackedValue)*100}else f.y=(h.y-a.y)/a.y*100;if(h.percent=f.y,0==w&&0!=t){m.getParamValue("y",v[0],b,null,m.commonOption);a.percent=(a.y-v[0].y)/a.y*100}S.push(f)}w++}}),S}(t,a),i=a.plotoptions,o=a.commonPlotOptions,l=hs(o,i,r,"waterfall"),s=l.enabled,c=i&&i.comparisonLine?ga(o.comparisonLine,i.comparisonLine,!0):o.comparisonLine;a.animationOptions=l;var u=S().x(function(e,t){return e[0]}).y(function(e,t){return e[1]});sn(sn(e,"g",c.enabled?[1]:[],".","class","zccomparisonLines"),"path",n,".","class","lines",null,function(e){return e.y}).attr("d",function(e,t){return u(e)}).styles({fill:"none",stroke:c.strokeColor||"black","stroke-width":c.strokeWidth||1,"stroke-dasharray":on(c.dashStyle,c.strokeWidth||1),"stroke-opacity":0}).transition().duration(s?l.duration:0).styles({"stroke-opacity":c.strokeOpacity||1}),bu(e,t,n,c,a),function(e,t,a,r){var n=r.chart,i=n.systemConf,o=r.axisrotated,l=r.animationOptions.enabled,s=a.label||{},c=s.labelPos,u=pa.getVal(_a([s,i.chart,i.canvas,Wr],"fontSize")),d="fixedTop"==c?o?n.plotarea.width:u:null,h={format:{decimalPlaces:"2",signEnabled:!0,suffix:"%"}},f=sn(e,"g",a.enabled?[1]:[],".","class","zccomparisonLabels");sn(f,"text",t,".","class","labels",null,function(e){return e.y}).attrs({x:function(e){return o?d||e[1][0]+10:e[0][0]+(e[2][0]-e[0][0])/2},y:function(e){return o?e[1][1]+(e[2][1]-e[1][1])/2:d||e[1][1]-10}}).text(function(e,t){return Hl(h,e.y,An,n)}).styles({"text-anchor":o?"fixedTop"==c?"end":"start":"middle",opacity:0}).transition().duration(l?r.animationOptions.duration:0).styles({opacity:1}),fn(f,[s,i.chart,i.canvas,Wr])}(e,n,c,a)};function wu(e){$a(wu.prototype,Jc.prototype);var t=this._base=0;this._stack=!1,this._extent=[t,t],this._data=[],this._rows={},this._keys={},this._sum=t,e&&this.add.apply(this,arguments)}dt.waterfallHelpers.drawComparisonLine;var Su=wu.prototype;Su.add=function(e,c,u,d,h){var t=this,f=t._stack,p=t._keys,g=t._rows,v=t._extent,y=t._base,m=t._sum,b=y,x=y,a=p[c];p[c]=a={},a.runningTotal=[$t,$t],a.absoluteTotal=[y,y],e.forEach(function(e,t){u(e);var a=d(e)||y,r=h(e),n=+(y<=a),i=f?c:t,o=f?t:c,l=p[c].runningTotal,s=p[c].absoluteTotal;r&&(a=a||g[o]||b,n=+(y<=a),b=m=y,g[o]=y,d(e,a)),f&&(b=l[n]||m||y,l[n]=b+a,s[n]+=a,g[o]=(g[o]||y)+a,x+=a),e.y0=b,e.y=a,e.index=i,e.isPositive=n,e.isCascaded=r,b+=a,v=oe([].concat(_toConsumableArray(v),[b,y]))}),t._extent=v,t._data=t._data.concat(e),t._sum=a.runningTotal[+(y<x)]},Su.stack=function(e){this._stack=e},no.prototype.processDataForWaterFall=function(){var r,a=this,o=a.dataset,e=a.data,t=a.chartObj,n=t.dataObject,i=a.processedseriesData,l=i.length,s=n.getCategories("x"),c=s.length,u=a.isstacked("waterfall"),d=Ea(e.chart.plot.plotoptions.waterfall.cascadeCategories.dataindex,2),h=[];a.waterfall={};function f(e){return o.getActualX(e)}function p(e,t){return t&&(e[o.yidx(r)]=t),o.getY(e,r)}function g(e){return e[d]}var v=new wu;if(u){v.stack(!0);for(var y=[],m=0;m<c;m++){for(var b=s[m],x=(e=[],0);x<l;x++){var C=i[x],k=C.disabled,w=C.data,S=w.length;if(r=no.helpers.getParsedYAxisOrder(C.yaxiscolumnorder),!k)for(var O=0;O<S;O++){var A=w[O];if(o.getActualX(A[m])==b)A[m].dummy||e.push(A[m]);else{var P=[];P[o.xidx]=b,P.dummy=!0,A.splice(m,0,P)}}}var T=v._sum||0;if(e.length){v.add(e,m,f,p,g);var _=v._keys[m];_.index=m,_.stackedValue=E(_.absoluteTotal),_.isPositive=+(0<_.stackedValue),_.isCascaded=g(e[0]),_.y=_.absoluteTotal[_.isPositive],_.y0=_.isCascaded?0:T;for(x=_.absoluteTotal.length-1;0<=x;x--)_.absoluteTotal[x]&&y.push([m,_.absoluteTotal[x],_.runningTotal[x]])}h=v._extent}a.waterfall.stackExtent=[],Ka(a.getEncode("stack"),function(e,t){a.waterfall.stackExtent[t]=y,e.layout.getAllExtents=function(){return y}})}else i.forEach(function(e,t){var a=e.data;r=no.helpers.getParsedYAxisOrder(e.yaxiscolumnorder),a.forEach(function(i,e){s.forEach(function(e,t){var a=e,r=i[t];if((r?o.getActualX(r).toString():null)!==a.toString()){var n=[];return n[o.xidx]=a,n.dummy=!0,void i.splice(t,0,n)}}),v.add(i,t,f,p,g),h=v._extent})});return t.dataObject.waterfall.layout=v,oe(h)},no.prototype.getCorrectionForWaterfall=function(e,t,a,r,n){var i=function(e,t){var a=e.dataObject.getEncode("y",t).seriesData,r=e.systemConf.chart.plot.plotoptions.waterfall;return a.some(function(e){var t=e.plotoptions;return(t&&t.comparisonLine?ga(r.comparisonLine,t.comparisonLine,!0):r.comparisonLine).enabled})}(r,a);n=!r.datalabels.hasFixedPosition&&n;var o=r.systemConf.chart.plot.datalabels.handleOverlapping,l=r.datalabels.isStackedLabels||r.datalabels.hasFixedPosition||!o,s=n?l?10:0:10;r.dataObject.waterfall.datalabelPadding=n?r.dataObject.rangeCorrections.datalabels.y0+s:s;var c,u=(e=function(e){e[1]<0&&(e[1]=0);return e}(e))[1]-e[0],d=r.axes.y.orient,h=r.plotarea["left"==d?"height":"width"],f=5,p=u/(h-f)*f;if(i){c=u/(h-(f+=function(e){var i=e.systemConf.chart.plot.plotoptions.waterfall,o=e.axes.rotated,l=e.systemConf,s=0,c=sn(e.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText");return e.seriesdata.forEach(function(e,t){if(e.plotoptions||!s){var a=e.plotoptions,r=(a&&a.comparisonLine?ga(i.comparisonLine,a.comparisonLine,!0):i.comparisonLine).label;c.text("800%").style("fill","none"),fn(c,[r,l.chart,l.canvas,Wr]);var n=ba(c.node());s=Mt(o?n.width:n.height,s)}}),c.remove(),s+10}(r)+30+s))*f}return e[1]+=i?c:p,e[0]-=r.dataObject.waterfall.hasNegativeCascaded?p:0,e};var Ou=(_createClass(Au,[{key:"initialize",value:function(){var a=this,e=a.getLayoutData(),t=e.nodes.map(function(e){var t=[];return t[a.dataset.xidx]=e.nameOriginal,t});a.layoutData={legend:t,layout:e,graph:{nodes:e.nodes.filter(function(e){return e.name!==a.dummyNodeKey}),links:e.links.filter(function(e){return e.target.name!==a.dummyNodeKey})}}}},{key:"getLayoutData",value:function(){var l=this,e=l.processedseriesData,s=l.dataset,c={nodes:[],links:[]},u=!1;if(null!=e&&Ba(e))return e.forEach(function(e,t){var a=no.helpers.getChartType(null,null,t,l.data),r=a.name,n=a.type,o=Va(l.data,"chart.plot.plotoptions."+r+".link.renderEmpty");s.seriesTypes.add(n),Ba(e.data)&&!no.helpers.is3D(e.data)&&(e.data=[e.data]),e.data.forEach(function(e){e.forEach(function(e){var t=s.getX(e,0),a=s.getY(e,0),r=s.getZ(e);if(za(t)){var n=void 0;if(c.nodes.push(n={name:""+t,nameOriginal:t}),o)c.nodes.push({name:""+a,point:e,nameOriginal:a}),c.links.push({source:""+t,target:""+a,value:r}),l.totalnoofdatas++;else{za(a)?c.nodes.push({name:""+a,nameOriginal:a}):n.fixedValue=r;var i=qa(a,l.dummyNodeKey);i!==l.dummyNodeKey||u||(c.nodes.push({name:l.dummyNodeKey,fixedValue:0}),u=!0),c.links.push({source:""+t,target:i,value:r,point:e})}}})})}),l.seriesExtermes[0].push(oe(c.links,function(e){return e.value})),c.nodes=function(e,t){var a,r={},n=[],i=e.length;for(a=0;a<i;a++){var o=t(e[a]);r[o]||(r[o]=!0,n.push(e[a]))}return n}(c.nodes,function(e){return e.name}),c}}]),Au);function Au(e,t,a){_classCallCheck(this,Au),this.data=e,this.dataset=t,this.chartObj=a,this.globalChartType=null,this.processedseriesData=a.seriesdata,t.seriesTypes=H(),this.totalnoofdatas=0,this.seriesExtermes=[[]],this.isFlowChartCategory=!0,this.globalChartType=e.seriesdata&&e.seriesdata.type,this.initialize(),this.dummyNodeKey="__dummy__$"}function Pu(e,t){var a,r=e.params,n=r.stacked,i=r.chartObj,o=r.yscale,l=i.dataObject,s=no.helpers,c=i.renderer[t].barDatasetIndex?i.renderer[t].barDatasetIndex():0,u=r.commonPlotOptions,d=s.getChartType(i.seriesdata[t].type||i.userdata.seriesdata.type,"string"),h="bullet"==d,f=i.seriesdata[t].plotoptions,p=f&&f.levelMarker?ga(u.levelMarker,f.levelMarker,!0):u.levelMarker,g=u.levelMarker||{},v=i.barscale2.bandwidth()||0,y=+(u.bandWidth||null)||(h?v/3:v),m=+(g.bandWidth||v),b=+(g.maxBandWidth||v),x=+(u.maxBandWidth||v);a=zt(m,b,v),y=zt(y,x,v);var C,k=Mt(0,(v-y)/2),w=Mt(0,(v-a)/2);if(n){var S=l.allChartTypes;C=os(l.getStackGroup().filter(function(e){return e.some(function(e){return!i.seriesdata[e].disabled&&so(S[e])})}),t)}else C=0;var O={stacked:n,categories:r.xscale.domain(),axisrotated:r.axisrotated,bandwidth1:i.barscale1,bandwidth2:i.barscale2,barDatasetIndex:c,padding:k,yscale:o,hasNegValue:r.hasNegValue,yaxiscolumnorder:r.yaxiscolumnorder,addRangeBand:function(){return o.bandwidth?o.bandwidth()/2:0},barWidth:y,charttype:d,levelMarker:p,levelMarkerWidth:a,levelMarkerPadding:w,stackGroupIndex:C};return i.renderer[t].commonOption=O}function Tu(e,t){var a=(e.data||e).slice(),r=a.splice(0,a.length);return null!=t&&r.push(t),r}function _u(e,t,a,r,n){"plot"==n?e.plotValues.push({data:t,text:a}):e[n+"Values"].push({id:t,text:a,x:r[0],y:r[1]})}function Eu(e,t,a,r,n,i){return n<e+a&&(e-=e+a-n),i<t+r&&(t-=t+r-i),[e,t]}function Lu(e,t,a){var r=e[a+"Values"];return r.indexOf(r.filter(function(e){return"plot"===a?Wa(e.data)==Wa(t):e.id==t})[0])}function Mu(e){var t=e.instance,a=this.chart.systemConf.chart.brush;kn(t._selection,a.selectionArea)}function zu(e,t){var a=this.getData(e,t.type,t.selection),r=a.point;("start"===t.type||r.x||r.y)&&this.associateBehaviours(e,t.type,a,t.selection,t)}function Du(e,t,a,r){var n=this.chart,i=e.instance,o=i.options.type,l=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n={};if(e)if(e=rr(e),"xy"===t){var i=_slicedToArray(e,2),o=i[0],l=i[1];n={x:l[0]-o[0]>a,y:l[1]-o[1]>a}}else e[1]-e[0]>a&&(n[t]=!0);else r&&("xy"===t?n.x=n.y=!0:n[t]=!0);return Object.keys(n).filter(function(e){return n[e]})}(a,Yn(o,n.axes.rotated),ct,r);return i.brushedAxes=l,Un.GET_DOMAIN_INFO(a,l,o,n)}na.setComponent("flowchartDataProcessor",Ou),Gr.notes=function(e){return{enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:e.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:e.fontL1Size.l5}}}},As.draw=function(r,e){var t=r.systemConf.notes;if(za(t)&&!0===t.enabled){var a=r.dataObject.isPolarAxisCategory;if(qa(t.chartValues,[]).forEach(function(e){As.addNotes(r,{coordinate:[e.x,e.y],conf:e})}),r.isAxisCategory||a||r.isGeoMap)for(var n=0,i=r.seriesdata.length;n<i;n++){var o=r.renderer[n];"image"===r.plot.renderer.mode&&ht.setRendererProp(r,o,r.seriesdata,n,n,{image:!0});var l,s,c=r.rendererConf[n].params,u=c.xscale,d=c.yscale,h=c.stacked,f=c.datasetIndex,p=c.axisrotated,g=c.yaxiscolumnorder,v=r.chartTypes[f].value;if(r.isGeoMap||(s=r.dataset.getDataType("x")==Sn?u.domain():r.dataObject.getCategories("x")),so(v)){var y=Pu(r.rendererConf[f],f);l=function(e,t,a){return[r.dataObject.getTransRectValue("x",e,t,a,y),r.dataObject.getTransRectValue("y",e,t,a,y)]}}else l=function(e){var t=a?[r.plotarea_approx.x,r.plotarea_approx.y]:[0,0];return[r.dataObject.getXYvalue(p,h,u,d,g,e,"x")+t[0],r.dataObject.getXYvalue(p,h,u,d,g,e,"y")+t[1]]};e=As.preprocessAnnotations(r.seriesdata,f,l,e,r,c,s)}e.forEach(function(e){As.addNotes(r,e)})}return e=[]},As.addNotes=function(r,e){var t,a,n,i,o=r.systemConf.notes,l=r.plotarea,s=r.canvasarea,c=s.width,u=s.height,d=e.coordinate,h=e.basedOn||"chart",f=e.data,p=e.conf||{},g=e.disabled,v=qa(p.type,o.type,"stickyNote"),y="block"===h||"plot"===h?l:s,m=p.overflow||o.overflow||"scroll";"block"===h&&(n="scroll"===m?"auto":"hidden",t=mr(o.maxWidth||"100%",y.width)),"block"===h&&(i="scroll"===m?"auto":"hidden",a=mr(o.maxHeight||"10%",y.height));var b="plot"==h?Wa(f):"block"==h?ya(p,""):Wa(e.conf);b="plot"!=h&&null!=p.id?p.id:h+b.replace(/[`~!@#$%^&*( )_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),p.id=b;var x=sn(r.notes,"div",[1],"#","id",h);x.styles({width:"0",height:"0"});var C=sn(x,"div",[e],"#","id",b);C.styles({display:g?Qt:null,position:"absolute",left:"0",top:"0","overflow-x":n,"overflow-y":i,"max-width":za(t)?t+Zt:$t,"max-height":za(a)?a+Zt:$t});var k=As["stickyNote"===v?"stickyNote":"customNote"](),w=ga(o.options[v],e.conf||{},!0);if(k.chartObj(r).conf(w),fn(C,[w,r.systemConf.canvas,Wr],!0),C.call(k),!g){var S=C.node(),O="stickyNote"===v?Mt(parseFloat(C.selectAll(".head").style("width")),parseFloat(C.selectAll(".body").style("width"))):0,A="stickyNote"===v?parseFloat(C.selectAll(".head").style("height"))+parseFloat(C.selectAll(".body").style("height")):0;d=d.map(function(e,t){var a="plot"===h?e+r.plotarea[0==t?Zo:Ko]:Ta(e,r,p,S);return isNaN(+a)?mr(e,0==t?c:u,0):a}),d=Ta("plot"===h||"block"===h?p.transform:null,r,p,S,d)||d,k.coordinate(d),d=Eu(d[0],d[1],O,A,c,u),C.styles({left:d[0]+Zt,top:d[1]+Zt});var P="plot"==h?f:b;return-1==Lu(o,P,h)&&_u(o,P,"",e.coordinate,h),C}},As.preprocessAnnotations=function(h,e,f,n,p,t,g){if(!p.destroying){var a=p.systemConf.notes;if(!za(a)||!za(a.enabled)||!1===a.enabled)return n;var r=a.plotValues,v=p.isAxisCategory,y=p.isNonAxisMultiSeriesCategory,m=p.dataset,b=t.stacked,x=p.plotarea,C=t.yaxiscolumnorder,k=h[e],w=Ei.pointInRectangle,S=p.dataObject.isHierarchy?k:k.data,O=(v||y)&&1<h.length?k.seriesname:null,A=p.chartTypes[e].name,P=p.dataObject.seriesNames||(p.dataObject.seriesNames=p.seriesdata.map(function(e){return e.seriesname}));return(v&&1<h.length?r.filter(function(e){var t=e.data[e.data.length-1];return O==t||-1==P.indexOf(t)}):r).forEach(function(e,t){for(var a=!1,r=e.data,n=0,i=v?S.length:1;n<i&&!a;n++)for(var o=0,l=S[n].length;o<l&&!a;o++){var s=Tu(u=S[n][o],O);if(Wa(s)==Wa(r))a=!0,T(c=f(u,n,o),s,e,!(!v||w(c,x))||(v||y?k.disabled:u.disabled)||!jn(m.getClr(u),p))}if(v&&!a&&("bar"!==A||-1!=g.indexOf(m.getX(r)))){a=!0;var c,u=Tu(r);b&&(u.y=m.getY(r,C),u.y0=0),T(c=f(u,0,o),u,e,!(!v||w(c,x))||!(v&&1<h.length&&-1==P.indexOf(r[r.length-1]))&&k.disabled)}if(!a&&"sunburst"===A){var d=[O,k.value];Wa(d)===Wa(r)&&T(f(k),d,e,k.disabled)}}),n}function T(e,t,a,r){n.push({coordinate:e,data:t,conf:a,disabled:r,basedOn:"plot"})}},As.addBlockAnnotations=function(h){var f=h.systemConf.notes;if(za(f)&&!1!==f.enabled){Ur("notes",h.systemConf,h.globalProp);var p,g,e=(f=h.systemConf.notes).blockValues,v=h.plotarea,y=mr(f.maxWidth||"100%",v.width),m=mr(f.maxHeight||"10%",v.height),b=v.width,x=v.height,C=v.left,k=v.top,w=v.bottom;e.forEach(function(e){var t=e.hAlign,a=e.vAlign,r=e.overflow||f.overflow||"scroll",o=t===Qo,l=t===Zo,n=a===Ko,i=a===qo;if(!(g&&n||p&&i)){var s=As.addNotes(h,{coordinate:[function(e,t,a){var r=a.getBoundingClientRect(),n=o?C+b:l?C:C+b/2,i=o?r.width:l?0:r.width/2;return Mt(n-i,0)},function(e,t,a){var r=a.getBoundingClientRect();return(n?k:k+x)-(n?0:r.height)}],conf:e,basedOn:"block"}),c=s.node(),u=c.getBoundingClientRect(),d=u.height;u.width;"fire"===r&&(c.scrollHeight>m||c.scrollWidth>y)?s.remove():(v.height=x-d,n?v.top=k+d:i&&(v.bottom=w+d)),g=g||n,p=p||i}})}},As.customNote=function(){var i,t,o;function a(e){e.each(function(r){var n=this;qe(this).each(function(){var e=qe(n),t=Ta(i.htmlEl,o,r.conf);if(t&&(t.isD3Selection||1===t.nodeType)){e.html("");var a=t.isD3Selection?t.node():t;1===a.nodeType&&n.appendChild(a)}else e.html(t)})})}return a.coordinate=function(e){return arguments.length?(t=e,a):t},a.conf=function(e){return arguments.length?(i=e,a):i},a.chartObj=function(e){return arguments.length?(o=e,a):o},a},As.stickyNote=function(){var S,O,A;function t(e){e.each(function(e){var t=qe(this),d=S.systemConf.notes,h=S.canvasarea.width,f=S.canvasarea.height,n=S.notes,p=e.basedOn||"chart",u=(e.data,e.coordinate),g="string"==typeof u[0]&&-1<u[0].indexOf("%"),v="string"==typeof u[1]&&-1<u[1].indexOf("%"),a=O.text,r=n.selectAll(".head").size(),i=O.color,o="open"===O.mode,y=Ea(O.bodyWidth,100),m=Ea(O.bodyHeight,100),b=Ea(O.headWidth,15),x=Ea(O.headHeight,15),C=o?0:1;i=i instanceof Array?i[r%i.length]:i;P().on("drag",function(e,t){if(!nt().defaultPrevented){var a=qe(this.parentNode),r=parseFloat(a.style("left"))+nt().x,n=parseFloat(a.style("top"))+nt().y,i=Mt(C%2!=0?0:y,b),o=(C%2!=0?0:m)+x;r=h-i<r?h-i:r<0?0:r,n=f-o<n?f-o:n<0?0:n,A[0]=r,A[1]=n;var l=r+Zt,s=n+Zt;if(a.styles({left:l,top:s}),"plot"!=p){var c=a.attr("id"),u=Lu(d,c,p);-1!=u&&(d.chartValues[u].x=g?r/h*100+"%":r,d.chartValues[u].y=v?n/f*100+"%":n)}}});t.attr("class","group").styles({width:0,height:0,"z-index":2});var k=sn(n,"textarea",[1]);k.styles({width:y+Zt,height:m+Zt,position:"absolute","border-color":qt,"border-radius":(O.bodyBorderRadius||0)+Zt,"background-color":qt,overflow:"hidden",display:Qt,resize:Qt,"z-index":2,outline:Qt}).on("blur",function(e,t){var a=k.attr("eleID");if(k.style("display",Qt),null!=a){var r=qe("#"+a);r.selectAll(".body").style("color",null),r.style("z-index",2)}}).on("input",function(){var e=qe(this);if(e.style("display")!==Qt){var t=qe("#"+e.attr("eleID")),a=t.selectAll(".body"),r=t.attr("id"),n=k.node().value,i=t.datum(),o=i.basedOn||"chart",l=i.data;a.text(n);var s="plot"==o?l:r,c=Lu(d,s,o);-1==c?_u(d,s,n,u,o):d[o+"Values"][c].text=n}}).text(a);var l=sn(t,"div",[1],".","class","head");l.attr("customColor")||l.style("background-color",i).attr("customColor",i),l.styles({width:b+Zt,height:x+Zt,border:O.border,"border-radius":(O.headBorderRadius||0)+Zt,"z-index":"auto"}),Mo(l,{click:s=function(){if(!nt().defaultPrevented){var e=C%2==0,t=qe(this.nextSibling),a=qe(this.parentNode);if(k.on("blur")(),e)a.transition().delay(250).duration(0).styles({left:A[0]+Zt,top:A[1]+Zt});else{var r=Eu(parseFloat(a.style("left")),parseFloat(a.style("top")),y,x+m,h,f);a.styles({left:r[0]+Zt,top:r[1]+Zt})}t.style("color",null).transition().ease(Ke).styles({width:e?0+Zt:y+Zt,height:e?0+Zt:m+Zt,display:e?null:"block"}),t.transition().delay(250).style("display",e?Qt:null),n.selectAll(".group").style("z-index",1),a.style("z-index",2),C++}}},{tap:s});var s,c=t.selectAll("div.body").empty()?{"background-color":i}:{},w=sn(t,"div",[1],".","class","body");w.styles({width:o?y+Zt:"0",height:o?m+Zt:"0",display:o?null:Qt,border:O.border,overflow:"hidden","box-shadow":O.shadow,"border-radius":(O.bodyBorderRadius||0)+Zt,"z-index":"auto"}).styles(c).text(a),Mo(w,{click:s=function(){var e=qe(this),t=qe(this.parentNode);k.on("blur")(),k.styles({display:null,left:t.style("left"),top:parseFloat(t.style("top"))+x+Zt,color:t.style("color"),"font-size":t.style("font-size"),"font-family":t.style("font-family"),"font-weight":t.style("font-weight"),"font-style":t.style("font-style")}).attr("eleID",t.attr("id")),k.node().value=e.text(),k.node().focus(),e.style("color",qt),n.selectAll(".group").style("z-index",1),t.style("z-index",2),k.style("z-index",3)}},{tap:s})})}return t.chartObj=function(e){return arguments.length?(S=e,t):S},t.conf=function(e){return arguments.length?(O=e,t):O},t.coordinate=function(e){return arguments.length?(A=e,t):A},t};var Iu=$();function Ru(t){var a=this;Iu.keys().forEach(function(e){Iu.get(e).call(a,t).selectAll("*").remove()})}function ju(e,t){var a=this.chart,r=a.eventHandler.eventManager;Ru(this.chart),a.eventHandler.tooltipElement.hide(),a.eventHandler.handlers.mouseout.call(r)}Iu.set("bar",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcbarhighlight")}),Iu.set("scatter",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcscatterhighlight")}),Iu.set("area",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcareahighlight")});var Hu=0,Bu=(_createClass(Fu,[{key:"init",value:function(){var e=this,t=ti(e.button,5),a=e.group=xn("g",".custom-button-"+Hu++,[1],e.parent),r=e._rect=xn("rect",".custom-button-rect",[1],a),n=e._text=xn("text",".custom-button-text",[1],a);n.text(e.label.text).attrs({dy:".9em"}),kn(e._text,e.label.style);var i,o=yr(n),l=qa(e.button.width,o.width),s=qa(e.button.height,o.height),c={width:l+t.left+t.right,height:s+t.top+t.bottom},u={x:c.width/2-o.width/2,y:c.height/2-o.height/2};(i=e.button).radius&&(i.rx=i.ry=i.radius),kn(r,_extends({},c,e.button),ct,{width:"width",height:"height"}),n.attrs(u),e.group.styles({cursor:Kt}),e.bounds={text:_extends({},u,{width:o.width,height:o.height}),rect:c}}},{key:"translate",value:function(e){this.group.attr("transform","translate("+e.join(" ")+")")}},{key:"show",value:function(){this.group.style("display",null)}},{key:"hide",value:function(){this.group.style("display","none")}}]),Fu);function Fu(e,t,a){_classCallCheck(this,Fu),this.label=e,this.button=t,this.parent=a,this.init()}function Wu(e){var t=e.systemConf.chart.brush.resetButton,a=e.behaviouralEvents.eventManager,r=a.brushResetButton;if(a.brushResetButton){var n=qa(pa.getVal(t.x,[e,r.bounds.rect]),e.plotarea.left+e.plotarea.width-r.bounds.rect.width),i=qa(pa.getVal(t.y,[e,r.bounds.rect]),10);r.translate([n,i])}}var Vu=function(e,t,a){var r=e.border,n=e.label,i=r.show,o=i?r.radius:0,l=on(r.style,r.size),s=[n,t.systemConf.chart,t.systemConf.canvas,{fontColor:"white",fontSize:11},Wr];return{label:{text:qa(n.text,a?"Reset Zoom":"Reset Brush"),style:_extends({},n,{fill:n.fontColor||"white","font-size":n.fontSize,"font-family":_a(s,"fontFamily"),"text-shadow":_a(s,"textShadow")})},button:{radius:o,fill:e.fillColor,"fill-opacity":e.fillOpacity,stroke:r.color,"stroke-width":i?r.size:0,"stroke-dasharray":l,"stroke-linecap":ln(r.lineCap,l),marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft,filter:wn(e.shadow,t)}}};function Nu(e,t,a){var r=e.instance,n=this.behaviours.PLOT_BRUSH,i=this.chart,o=t.point;i.disableAnimation=!1,Ka(o,function(e,r){Ka(e,function(e,t){var a=ri(i,r,t);a.scale.ordinalRange&&(a.scale.ordinalRange=null)})});var l=[[0,0],[i.plotarea.width,i.plotarea.height]];n&&n.instance.updateExtent(l),i.positionEventTrackerElement(),r.updateExtent(l),i.zooming=!1,i.brushing=!1}var Yu={LISTENER:{start:zu,brush:zu,end:zu},DATA_FINDER:{start:Du,brush:Du,end:Du},BEHAVIOUR:{start:[ju,Mu],end:[function(e){e.instance.reset()},function(e,t,a){var r=this.behaviours,n=this.chart,i=e.instance,o=n.systemConf.chart.brush,l=t.point,s=n.scroll&&n.scroll.settings.smooth;if(a){if(r.PLOT_ZOOM){var c=Tc(a,i.options.type),u=r.PLOT_ZOOM.instance,d=u.getTransform();u.zoomToBounds(c.map(function(e){return d.invert(e)}))}else s||function(e,l,s){Ka(e,function(e,o){Ka(e,function(e,t){if(e.domain){var a=ri(s,o,t),r=o+"["+t+"]",n=Va(l,r),i=rr(e.domain);za(n)||Na(l,r,n={}),e.dataType===Sn?n.categories=i:(n.minRange=i[0],n.maxRange=i[1]),a.domain=e.domain||a.baseScale.domain()}})})}(l,o,n),Un.FILTER_CHART(l,n);i.updateExtent([[0,0],[n.plotarea.width,n.plotarea.height]])}},Oc,function(e){(function(e,t){if(t.brushResetButton)return t.brushResetButton;var a=e.systemConf.chart.brush.resetButton,r=Vu(a,e,za(t.behaviours.PLOT_ZOOM)),n=t.brushResetButton=new Bu(r.label,r.button,e.staticPaneSVG.select(".eventgroup"));n.group.classed("zmbtn",!0),Wu(e);function i(){(function(){var e=this.chart,t=e.systemConf.chart.brush,a=this.behaviours,r=a.PLOT_BRUSH,n=a.PLOT_ZOOM,i=void 0;t.x=t.y=null,n?n.instance.reset():e.scroll&&e.scroll.visible?(e.scroll.visiblePointCount=null,e.scroll.brushInstance.setSelection(e.scroll.brushInstance.getRange())):(i=Du.apply(this,[r,null,null,!0]),Un.FILTER_CHART(i,e)),this.brushResetButton.hide(),r.instance.updateExtent([[0,0],[e.plotarea.width,e.plotarea.height]]),e.positionEventTrackerElement()}).call(t,n)}var o={click:i,tap:i};return Mo(n.group,o,o),n})(this.chart,this).show()},Nu]},LISTENER_TYPES:H(["start","brush","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory},UPDATE:function(){Wu(this.eventManager.chart)}};function Gu(e,t){var a=e.options.type,r=t||e.getSelection(),n=To(this)["x"===a?0:1],i=r[1]-r[0],o=n-i/2,l=n+i/2,s=e.getRange(),c=_slicedToArray(s,2),u=c[0],d=c[1],h=d<l?[d-i,d]:o<u?[u,u+i]:[o,l];e.setSelection(h)}function Uu(e,t){e[0]===e[1]&&(e[1]+=1e-9,e[0]-=1e-9,t.setSelection(e,0))}function Xu(e,t){t.selection&&this.associateBehaviours(e,t.type,{},t.selection,t)}na.setComponent("_chartBrushHandlers",Yu),Gr.brush=function(e){return{enabled:!1,type:"x",pan:!0,snap:!1,selectionArea:{fillColor:"#3a8aea",fillOpacity:.2,strokeColor:"#3a8aea",dashStyle:"",strokeWidth:.8},resetButton:{fillColor:"#3c3c3c",label:{marginTop:6,marginRight:10,marginBottom:6,marginLeft:10,fontSize:14,fontColor:"white",fontWeight:500},border:{show:!0,size:1,radius:2,color:"transparent"}}}},Ka({scroll:function(){var t=this,a=0;this._track.datum({type:"selection"}).on("mousedown touchstart",function(){Gu.call(this,t)}),t.addBehaviourHook("brush.scroll",function(){a=t.getSelection()}),t.addBehaviourHook("end.scroll",function(e){e.sourceEvent&&a[0]===a[1]&&Uu(a,t)})},reposition:function(){var a=this,r=void 0;a.addBehaviourHook("brush.reposition",function(){return r=a.getSelection()}),a.addBehaviourHook("end.reposition",function(e,t){e.sourceEvent&&(t||Gu.call(a.parent_group.node(),a,r))})},resizeToMouse:function(){var n=this,i=n.getSelection(),o=n.options.type;n.addBehaviourHook("brush.resizeToMouse",function(){i=n.getSelection()}),n.addBehaviourHook("end.resizeToMouse",function(e,t){if(e.sourceEvent)if(!t&&Ba(i)){var a=To(n.parent_group.node())["x"===o?0:1],r=i.indexOf(function(e,a){var r,n;return e.some(function(e){var t=Math.abs(a-e);if(n<t)return!0;r=e,n=t}),r}(i,a));i[r]=a,n.setSelection(i)}else Uu(i,n)})},slider:function(){function e(){var e=d3.mouse(n.parent_group.node()),t=_slicedToArray(e,1)[0];n.setSelection([0,t])}var n=this,i=n.getSelection();n.options.type;this._selection.datum({type:"none"}),this._track.datum({type:"none"}),this._track.on("click touchstart",e),this._selection.on("click touchstart",e),n.addBehaviourHook("start.slider",function(e){n.customHandles&&qe(n.customHandles.node()).remove()}),n.addBehaviourHook("brush.slider",function(e){var t=_slicedToArray(e.selection,2),a=t[0],r=t[1];i=[0,r],0<a&&n.setSelection(i)}),n.addBehaviourHook("end.slider",function(e){return e.sourceEvent&&Uu(i,n)})}},function(e,t){return mc.addBehaviour(t,e)}),na.setComponent("_getPlotBrushArguments",function(e){var t=e.systemConf.chart.brush,a=e.systemConf.chart.zoom,r=[[0,0],[e.plotarea.width,e.plotarea.height]],n=na.getComponent("BrushD3Options"),i=e.isGeoMap?"xy":Yn(t.type,e.axes.rotated),o=void 0;return!0===t.pan&&a.enabled&&(o="shiftKey"),new n({type:i,extent:r,element:e.eventHandler.trackerGroup,metaKey:o,styles:{selection:{fillColor:"transparent",strokeColor:"transparent"}}})});var Zu={LISTENER:{start:Xu,end:Xu},DATA_FINDER:{},BEHAVIOUR:{start:Mu,end:function(e,t,a){var r=this.behaviours;if(a&&r.PLOT_ZOOM){var n=r.PLOT_ZOOM.instance,i=n.getTransform();e.instance.reset(),n.zoomToBounds(a.map(function(e){return i.invert(e)}))}}},LISTENER_TYPES:H(["start","brush","end"]),SUPPORTED:function(e){return e.isGeoMap}};function Qu(e,t){return{vertical:mr(qa(e.height,e.maxHeight,Ae.ticks.maxTickSizeRatio_Vert),t.height),horizontal:mr(qa(e.width,e.maxWidth,Ae.ticks.maxTickSizeRatio_Hori),t.width)}}function qu(e,t){var a=null!=e?e[(1<arguments.length&&void 0!==t?t:"axis")+"format"]||e.format:null;return a&&"auto"===a.specifier}function Ku(e,C,k,w,S,O,A,t,P,a,r,n,i){if("none"==S)return b;var o,T,_,E,l=k.plotarea,s=k.chartarea,c=k.canvasarea,u=k.actChartObj||k,d=function(e,t){return("bottom"==e||"top"==e)&&!t||("left"==e||"right"==e)&&t?"x":"y"}(C,u.axes.rotated),h="x"==d?u.systemConf.chart.axes.xaxis:u.systemConf.chart.axes.yaxis[r||0],L=null==S||"ellipsis"==S?"..":"",f=h.tickmark.align,M=pa.getVal(_a([a,u.systemConf.chart,u.systemConf.canvas,Wr],"fontSize")),p=(a="ticklabel"==P?a:{},ri(u,d,r||0).ticks),z=null!=O.discreteWidth;null==e&&"ticklabel"==P&&(o=null==t.tickValues()?O.ticks?O.ticks.apply(O,[10]):O.domain():t.tickValues(),e=A.selectAll(".tick").data(o,O).selectAll("text.ticklabel"));if("ticklabel"==P&&t&&!z&&(p.isHierarchy()||"between"==f)){E=!0,o=o||t.tickValues(),T=it.getRangeBand(O,o,0);var g=o[0],v=o[o.length-1];h.reversed&&(g=o[o.length-1],v=o[0]);var y=Dt(T.outerPaddingInPixel),m=O.bandwidth?O.bandwidth()/2:0}var D=Qu(a,s),I=za(a.width)||za(a.maxWidth),R=D.vertical,j=D.horizontal,H=function(e){var t={};E?"bottom"==C||"top"==C?(t.left=O(g)-Dt(m-y),t.right=O(v)+(y+m)):"left"!=C&&"right"!=C||90!=w&&270!=w||(t.top=O(v)-y,t.bottom=O(g)+y):(t.top=t.left=0,t.right="bottom"==C||"top"==C?Ro(e,"width",l):0,t.bottom="bottom"==C||"top"==C?0:Ro(e,"height",l));return t}(u),B=function(e,t,a,r){var n={};E?(n.left=n.right=0,n.top=n.bottom=0):(n.left="axislabel"==e?r*(a.width-(t.left+t.width)):r*t.left,n.right=r*(a.width-(t.left+t.width)),n.top=r*t.top,n.bottom=r*t.bottom);return n}(P,l,c,.5);return k.actChartObj||"axislabel"==P&&e.node()?b(e.node()):b;function b(e,t){if("none"!=S){var a=e,r=[a.childNodes[0]],n=qe(a).selectAll("tspan").nodes();if(n&&n.length&&(n.sort(function(e,t){return t.textContent.length-e.textContent.length}),r=n),r){if(E){_=_||A.selectAll("text.ticklabel").nodes().length;var i=Dt(T.outerPaddingInPixel);"bottom"==C||"top"==C?I?j=D.horizontal:90!=w&&270!=w&&(j=0==t||t==_-1?2*i:2*Dt(T.rangeBand)):"left"!=C&&"right"!=C||90!=w&&270!=w||(R=0==t||t==_-1?2*i:2*Dt(T.rangeBand))}for(var o=0;o<r.length;o++){var l,s=n&&n.length?r[o]:a,c=s.textContent,u="tspan"==s.nodeName?Zr:Qr,d=m=u(s),h=-1,f={width:j,height:R},p=E?0:M;if(z&&"ticklabel"==P&&!k.actChartObj){var g="left"==C||"right"==C?j:Math.abs(O.discreteWidth(e.__data__))||j,v=zt(j,g);return void gn(s,s,s.textContent,v,R,m,L)}if("ticklabel"==P){if(j<m.width){h=(m.width-j)/m.width;var y=Lt((1-h)*s.textContent.length);s.textContent=s.textContent.substring(0,y-2)+L,m=u(s)}if(R<m.height){h=(m.height-R)/m.height;y=Lt((1-h)*s.textContent.length);s.textContent=s.textContent.substring(0,y-2)+L,m=u(s)}}var m,b=A.selectAll(".domain").node().getBoundingClientRect(),x={left:m.left-b.left,right:m.left+m.width-b.left,top:m.top-b.top,bottom:m.top+m.height-b.top,width:m.width,height:m.height};if("left"!=C&&"right"!=C||0==w||180==w||360==w?"bottom"!=C&&"top"!=C||90==w||270==w||(x.left+Mt(p,B.left)<H.left||x.right-Mt(p,B.right)>H.right)&&(l=!0,cn(s,s.textContent,x,H,C,L,B,f,s)):(x.top+Mt(p,B.top)<H.top||x.bottom-Mt(p,B.bottom)>H.bottom)&&(l=!0,cn(s,s.textContent,x,H,C,L,B,f,s)),"ticklabel"==P&&!l)(m=u(s)).width==d.width&&m.height==d.height||gn(s,a,c,f.width,f.height,m,L);s.textContent==L&&(s.textContent=k.actChartObj?".":"")}}}}}na.setComponent("_mapBrushHandlers",Zu),Gr.axes=function(e){return{xaxis:{show:!0,label:{show:!0,text:"Xaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"transparent",strokeWidth:null},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}}]}};var $u={};function Ju(e,t,a){if(e.dataObject.noofBarEnabledSeries){var r=a===Sl,n=Hs(e.systemConf.chart.plot.plotoptions[e.chartTypes[t].name],r?$t:e.seriesdata[t].plotoptions,e,t);r&&(n=n.stackLabels||{});var i=e.dataObject,o=e.axes.rotated,l=i.isstacked(),s=n.labelPos||Ko,c=n.textDirection;return(r?Ns(n,e):Vs(n,e))?(c=!c||l&&!r?o?Jo:el:c,a===wl&&s===$o&&(l||o&&c!==Jo||!o&&c===Jo)&&(s=Ko),s):void 0}}function ed(e,t,a,r,n){return null==e?e:"wrapOnSpace"==t?e.split(" "):"wrapAll"==t?function(e,t,a,r){var n,i=e.split(/\s+/).reverse(),o=[],l=[],s=r;for(t=t;n=i.pop();){if(o.push(n),t<pa.fontUtils.getTextWidth(o.join(" "))){if(1<o.length&&(o.pop(),l.pop(),l.push(o.join(" "))),a<s)return l;s+=r,o=[n],l.push(n)}else l.pop(),l.push(o.join(" "))}return l}(e,a,r,n):e}function td(e,t,a){var r=0,n=0;return t&&(r=t.baseZoomScale(t.zoomDomain[0])),a&&(n=a.baseZoomScale(a.zoomDomain[0])),g.scale(e).translate(-r,-n)}function ad(e,t,a,r,n,i,o){var l={},s="0.71em",c="0.35em",u="left"===e||"right"===e?"width":"height",d=(i=null==i?r.tickPadding():i,o&&o.isInline),h=o&&o.inlineToPlot,f=d&&!h?o.longTickSize[u]:Math.max(n,0)+i,p="top"===e||"left"===e?-1:1,g=h?-p:p,v=d&&o.showGrid;switch(e){case"top":l.rotate=[t,0,g*f],0<=t&&t<45||315<t&&t<=360?(l.dy=d?s:"0em",l.dy1="-1em"):45<=t&&t<=90||90<=t&&t<=135||225<=t&&t<=315?l.dy=c:135<t&&t<225&&(l.dy=s),l.textAnchor="0"==t||180==ja(t)||360==ja(t)?"middle":ja(t)<180?"end":"start";break;case"bottom":l.rotate=[t,0,g*f],0<=t&&t<45||315<t&&t<=360?(l.dy=d?"0em":s,l.dy1="1.71em"):45<=t&&t<=90||90<=t&&t<=135||225<=t&&t<=315?l.dy=c:135<t&&t<225&&(l.dy="0em");var y="0"==t||180==ja(t)||360==ja(t)?"middle":ja(t)<180?"start":"end";l.textAnchor=d?"start"==y?"end":"end"==y?"start":y:y;break;case"left":l.rotate=[t,g*f,0],0<=t&&t<45?l.dy=v?"-"+c:c:45<=t&&t<=90||90<=t&&t<=135?l.dy=s:(135<t&&t<225||225<=t&&t<=315||315<t&&t<=360)&&(l.dy=d?"1em":"0em");y="90"==t||270==ja(t)?"middle":90<t&&t<270?"start":"end";l.textAnchor=d?"start"==y?"end":"end"==y?"start":y:y;break;case"right":l.rotate=[t,g*f,0],0<=t&&t<45||135<t&&t<225?l.dy=v?"-"+c:c:225<=t&&t<=315||315<t&&t<=360?l.dy=s:(90<=t&&t<=135||45<=t&&t<=90)&&(l.dy="0em"),l.textAnchor=d?"end":"90"==t||270==ja(t)?"middle":90<t&&t<270?"end":"start"}return l}$u.getAvailableBound=function(e,t){var a=e.plotarea,r=a.width,n=a.height,i=zt(r/2,mr(t.outerPadding,r/2,0)),o=zt(n/2,mr(t.outerPadding,n/2,0));return{x:i,y:o,width:r-2*i,height:n-2*o}},$u.updatePlotareaByBandWidth=function(a,e){var r,t=a.dataObject;if((t.noofBarEnabledSeries||t.isCombinationalChart)&&t.allChartTypes.some(function(e){var t=no.helpers.getChartType(e,"string");if(so(e))return r=a.systemConf.chart.plot.plotoptions[t],!0}),r&&r.strictBandWidth){var n=t.getCategories("x").length,i=qa(r.padding,.2),o=r.outerPadding;o=za(o)?o:.2,o=it.getOuterPadding(u?[0,e.width]:[e.height,0],n,i,o);var l=r.levelMarker,s=r.targetMarker||{},c=a.plotarea,u=a.axes.rotated,d=(u?e.height:e.width)/(n-i+2*o)*(1-i),h=[],f=Ea(l.bandWidth,d),p=Ea(l.maxBandWidth,d),g=zt(f,p,d);l.enabled&&h.push(g),s.enabled&&h.push(za(s.size)?zt(10*s.size,d):0);var v=Ea(r.bandWidth,g),y=Ea(r.maxBandWidth,v);h.push(zt(v,y,d));var m=Mt.apply(null,h);m=m/(1-i)*(n-i+2*o),u?(c.height=m+(c.height-e.height),c.top+=c.adjust=(e.height-m)/2):(c.width=m+(c.width-e.width),c.left+=c.adjust=(e.width-m)/2)}},Ae.ticks=function(z,D,C,I,R,k){var v={};Ae.ticks.maxTickSizeRatio_Vert="50%",Ae.ticks.maxTickSizeRatio_Hori="50%";z.dataObject;var j,w=z.systemConf,S=z.svg,e=z.canvasarea["bottom"==R||"top"==R?"height":"width"];v.isHierarchy=c,v.isHierarchialLevelType=s;var H=z.dataset.getDataType(C,I),O=z.axes.rotated,t=D.label||{},B=D.ticklabel||{},a=D.tickmark,F=parseFloat(pa.getVal(_a([B,w.chart,w.canvas,Wr],"fontSize"))),W=pa.getVal(_a([B,w.chart,w.canvas,Wr],"fontFamily")),V=null!=B&&null!=B.rotation&&"auto"!=B.rotation?B.rotation:0;c()&&(V=0),V=360<(V=(V=null==V||""==V?0:parseFloat(V))<0?360-Dt(V):V)?Dt(V)%360:V;var y,m,b,x,A=!1===t.show||!za(t.text)||""===t.text||!Mi(z,C+"axislabel",e)||c()&&I<z.axes.x.count-1;y=A?m=b=x=0:(x=qa(t.marginTop,5),b=qa(t.marginBottom,5),m=qa(t.marginLeft,5),qa(t.marginRight,5));var P=ti(B),r=z.systemConf.metadata,n=z.dataset.getColumnIdx(C,I),i=r.columns[n].datatype,o=r.columns[n][i],l="y"==C&&1<r.axes.y[I].length,N=o;N=l&&"y"==C?Jn(I,z):o,this.preCalcAxisLen=0;var T=qa(a.size,6);function s(){return c()&&0<I}function c(){return"x"==C&&1<z.axes.x.count}function Y(e,t,a){return a.customTickInfo.userRawTicks[za(t)?t:e.index]}return v.preCalcApproxAxisLength=function(e){var t=null;"x"===C&&0===I&&(t=z.viewPortExtent);var a=ri(z,C,I),r={axisRotated:O,axisOrder:I,chart:z,orient:R};a.Ticks||(a.Ticks=new Ae.Ticks(C,D,e,r)),this.tickValueObj=v.getTickValues(e.width,e.height,t,!0,null,a.Ticks,e);var n=C+"-axis-"+I,i=sn(z.svg.selectAll("g."+C+"-axis"),"g",[D],".","class",n);sn(i,"g",[D],".","class","axisgroup").selectAll("line.majorTicks").style("display","");var o=this.tickValueObj.axisgroup,l=o.width,s=o.height,c=B.maxWidth,u=B.maxHeight;"left"!==R&&"right"!==R||!za(B.width)?za(B.height)&&(s=mr(rd(B.height,u)||Ae.ticks.maxTickSizeRatio_Vert,e.height)):l=mr(rd(B.width,c)||Ae.ticks.maxTickSizeRatio_Hori,e.width),o=this.preCalcTickLen={x:o.left,y:o.top,width:l,height:s};var d="x"===C&&!O,h={systemConf:w,bound:o,horizontal:d,vertical:!d,axisOrder:I,plotRect:e,hide:A,tickObj:this.tickValueObj},f=0;if(a.axisLabel?(a.axisLabel.show=!A,a.axisLabel.transformLabel(o,e,R)):a.axisLabel=new Ae.AxisLabel(D,h,R,i),A)this.preCalcAxisLen="bottom"===R||"top"==R?o.height+P.bottom:o.width+P.left;else switch(f=a.axisLabel.getBBox().height,R){case"left":var p=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?o.width:o.width+P.left;this.preCalcAxisLen=p+y+f+m;break;case"right":p=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?o.width:o.width+P.right;this.preCalcAxisLen=p+m+f+y;break;case"bottom":var g=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?o.height:o.height+P.bottom;this.preCalcAxisLen=g+b+f+x;break;case"top":g=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?o.height:o.height+P.top;this.preCalcAxisLen=g+x+f+b}return this.preCalcAxisLen},v.getTickValues=function(e,t,a,r,n,i,o){var l={},s={axisRotated:O,axisOrder:I,chart:z,orient:R,extent:a,maxTickSize:this.tickValueObj?this.tickValueObj.maxTickSize:null},c=i.getTicks(k,n,s),u=za(B.showAs);V=isNaN(c.rotation)?V:c.rotation;var d=c.tickMargin,h=ai(R,P,ni(D,C,z)),f=ad(R,V,0,null,T,h,this.tickValueObj),p="left"===R||"right"===R?"x":"y",g="left"===R||"right"===R?1:2;d[p]+=this.tickValueObj&&this.tickValueObj.isInline&&!this.tickValueObj.inlineToPlot?f.rotate[g]:0,d.dy=f.dy,f.rotate[g]=d[p],H=z.dataset.getDataType(C,I);var v=qa(o,k),y=S.append("g").attr("class","dummy"),m="right"==R?v.left+v.width:v.left,b="bottom"==R?v.top+v.height:v.top;y.attr("transform","translate("+m+","+b+")");var x=y.append("g").attr("class","tick");return function(e,t,a,r,n,i){var o=sn(e,"text",[1],".","class","dummyText");o.attrs({x:a.x||0,y:a.y||0,dy:a.dy||0}).attr("transform","rotate("+r+" "+a.x+" "+a.y+")"),n?t=Y(i.longestTickValue,null,i):o.text(t);return yn(o,t,null,n),fn(o,[B,w.chart,w.canvas,Wr]),o}(x,c.longestTickValue.formattedVal,d,V,u,c).call(function(e){l=function(e,t,a,r,n,i,o,l){var s,c=t,u=H===On&&qu(N),d=n.formatterTickValues;j=n.rawTickValues;var h,f,p=n.longestTickValue,g=n.maxTickSize,v=n.tickValueIndices,y=n.scale;za(n.customTickInfo)&&n.customTickInfo.length&&(h=n.customTickInfo.styles,f=n.customTickInfo.userRawTicks);function m(e,t){var a,r;return za(h)&&(a=h[t]),r=qr(e,F,W,a),o?r.width*r.height:"left"==R||"right"==R?r.width:r.width*r.height}var b=function(n){for(var e=n.length,t=new Array(e),a=0;a<e;++a)t[a]=a;return t.sort(function(e,t){var a=n[e],r=n[t];return za(a)||(a=""),za(r)||(r=""),r.length>a.length?1:r.length<a.length?-1:0}),t}(d);if(!i){a.append("line").attr("class","domain").attrs({x1:0,y1:0,x2:"bottom"==R||"top"==R?e.width:1e-4,y2:"bottom"==R||"top"==R?1e-4:e.height}).style("stroke","black");var x,C=B.textOverflow==Qt?"":B.textOverflow,k=!1,w=-1,S=p.actualVal,O=p.formattedVal;o&&(O=Y(n.longestTickValue,null,n)),yn(t,O,null,o),function(e,t,a){e.attrs({dy:"zigzag"==a.mode&&t.dy1||t.dy,transform:"rotate("+t.rotate[0]+" "+t.rotate[1]+" "+t.rotate[2]+")"}).styles({"text-anchor":t.textAnchor})}(t,l,n);var A,P,T,_=(y(S)||0)+(null==y.bandwidth?0:y.bandwidth()/2);for(_="bottom"==R||"top"==R?_+",0":"0,"+_,r.attr("transform","translate("+_+")"),Ku(t,R,{svg:z.svg,canvasarea:z.canvasarea,plotarea:e,chartarea:z.chartarea,legendarea:z.legendarea,actChartObj:z},V,C,y,a,null,"ticklabel",B,I),P=A=o?O:bn(t);"ordinalNonLinear"!=H&&!k&&w<j.length;){x=b[w+=1];_=(y(S)||0)+(null==y.bandwidth?0:y.bandwidth()/2);_="bottom"==R||"top"==R?_+",0":"0,"+_,r.attr("transform","translate("+_+")"),Ku(t,R,{svg:z.svg,canvasarea:z.canvasarea,plotarea:e,chartarea:z.chartarea,legendarea:z.legendarea,actChartObj:z},V,C,y,a,null,"ticklabel",B,I),A=bn(t),m(A,x)>m(P,x)&&(O=A,o&&(O=Y(null,x,n)),P=O),yn(t,P,null,o);var E=!j.length||w===j.length-1||1===j.length;T=E?null:u?d[x]:d[x]||"",!E&&m(A,x)<m(T,x)?(S=j[x],O=A=T,o&&(O=Y(null,x,n)),yn(t,O,null,o)):k=!0}}var L=c.node().getBoundingClientRect(),M=a.node().getBoundingClientRect();s={ticks:j,rotation:V,longTickSize:L,longtick:p,axisgroup:M,customTicks:f,mode:n.mode,isInline:n.isInline,inlineToPlot:n.inlineToPlot,maxTickSize:g,showGrid:D.grid.show&&D.grid.color!=qt},v&&(s.tickValueIndices=v);return s}(v,e,y,x,c,za(n),u,f)}),y.remove(),l},v.getActualTicklabel=function(){var a=this.tickValueObj,r=a.ticks;return this.isHierarchy()&&!this.isHierarchialLevelType()&&a.tickValueIndices?function(e){var t=a.tickValueIndices.indexOf(e);return-1!=t?r[t]:null}:z.dataObject.isWaterfallEnabled&&a.tickValueIndices?function(e){return r[e]}:function(e){return r[e]}},v.getTicksforAxisComp=function(){var e=z.dataset.getDataType(C,I);return c()&&z.dataObject.hierarchical.categoryTree&&(e==Sn||"ordinalNonLinear"==e)||s()&&z.dataObject.hierarchical.groupByTime?null:z.dataObject.isWaterfallEnabled&&"x"==C?this.tickValueObj.tickValueIndices||null:this.tickValueObj.ticks},v},Ae.constructTickObj=function(e,t,a,r,n,i){var o,l,s=e.systemConf;o="left"==r&&e.axes.rotated||"bottom"==r&&!e.axes.rotated?"x":"y";for(var c=e.axes[o].count,u=0;u<c;u++){var d=s.chart.axes.yaxis;if(0<u&&"y"==o){l=i?d[u]:ga(d[u],d[0],!1);var h=null!=d[u]&&""!==d[u]?d[u]:{};l.interval=h.interval,l.tickCount=h.tickCount,l.minRange=h.minRange,l.maxRange=h.maxRange,l.categories=h.categories,d[u]=l}var f="bottom"==(r=(l="x"==o?s.chart.axes.xaxis:d[u]).orient||("x"==o?e.axes.rotated?"left":"bottom":e.axes.rotated?0==u?"bottom":"top":0==u?"left":"right"))||"top"==r?a:t;if(!0===l.show&&Mi(e,o+"axis",f)){var p=ri(e,o,u);"y"!=o||p||(p={}),"x"!=o||p||(p=0<u?{}:p);var g=ni(l,o,e),v=0,y=!0===Va(l,"label.show");if(p.ticks=Ae.ticks(e,l,o,u,r,n),g&&"x"==o&&!y||(v=p.ticks.preCalcApproxAxisLength(n)),"y"!=o||!e.axes.y.groups[u].disabled){var m=e.plotarea;"left"==r?(n.left+=v,n.width=n.width-v,m.left=n.left,m.width=n.width):"right"==r?(n.width=n.width-v,m.width=n.width):"bottom"==r?(m.height=m.height-v,m.bottom+=v,n.height=m.height,n.bottom+=m.bottom):"top"==r&&(m.height=m.height-v,m.top+=v,n.height=m.height,n.top+=m.top)}}else{var b="y"==o?e.axes.y.groups[u]:e.axes.x;b.axisLabel=b.Ticks=null}}"y"==o&&e.scroll&&e.scroll.initialize()};var rd=function(e,t){return za(e)&&za(e)?t<e?t:e:e||t};function nd(e,t,a,r){var n=e.length;t=_t(t),a=a||Lt(n/Dt(t));for(var i=0,o=[],l=r?[]:null,s=r?[]:null,c=!!r&&za(e[0].index);i<n;)r?c?(o.push(e[i].value),l.push(e[i].index),s.push(e[i])):(o.push(e[i]),l.push(i)):o.push(e[i]),i+=a;return r?{nodes:s,ticks:o,indices:l}:o}function id(e,s,t,c,a,u){var d=[],h=[],f=[],p={data:[t]};return t.columnindex=qa(t.columnindex,a),e.forEach(function(e,t){var a=Ta(s.showAs,e,s,p,c,t,u),r=[],n=[];if(Ba(a)?(d.push(r),h.push(n)):(r=d,n=h),f.push(a),za(a)){var i=document.createElement("div");i.innerHTML=a;var o=Pa(i.querySelectorAll("tspan")),l=i.querySelectorAll("image,img");o.length?o.forEach(function(e){r.push(e.textContent.trim()),n.push({fontSize:e.style.fontSize&&parseFloat(e.style.fontSize),fontFamily:e.style.fontFamily,fontStyle:e.style.fontStyle,fontWeight:e.style.fontWeight})}):r.push(i.textContent),l.length&&Pa(i.querySelectorAll("image,img")).forEach(function(e){r.push({width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.push({})})}}),{tickValues:d,styles:h,userRawTicks:f}}function od(e,n,i,o,l,s,c){kt.save(),kt.font=i+"px "+o;var u,d,h,f=0,p=null,g=null;l=qa(l,[]),za(n)||(n=[]);return e.forEach(function(e,t){var a=qr(e,i,o,l[t]),r=a.width;s&&(r=a.width*a.height),c&&!d&&(d=-1!=e.indexOf(" ")),f<r&&(f=r,p=e,g=n[t],u=l[t],h=t)}),kt.restore(),{actualVal:g,formattedVal:p,style:u,index:h,hasWhiteSpace:d}}function ld(e,t,a,r,n,i){return"height"===e?Math.abs(n+a.top+a.bottom):0<r?sd(r,t.width,n,i).tickSpacing+a.left+a.right:t.width+a.left+a.right}function sd(e,t,a,r){var n=e*(2*Yt/360),i=2*Yt/360*(90-e);return"bottom"===r||"top"===r?{tickSpacing:Dt(a/Ht(n))+5,baseLen:0}:{tickSpacing:Dt(Ht(i)*a)+Dt(jt(i)*a*Ft(n))+5,baseLen:Dt(jt(i)*t)}}function cd(e,t,a,r,n,i){var o=a.dataObject,l=t.minmaxlabels||{};if(!0===l.show){var s=it.getScale(a,o,a.plotarea,i,n,a.dataset,r).domain();Ea(l.excludeIntervals,!0)?e=s:(s[0]!==e[0]&&e.splice(0,0,s[0]),s[1]!==e[e.length-1]&&e.push(s[1]))}return e}function ud(e,t,a,r){this.axis=e,this.config=e.label,this.axisRect=t.bound,this.parentNode=r.isD3Selection?r:qe(r),this.orient=a,this.systemConfig=t.systemConf,this.order=t.axisOrder,this.plotRect=t.plotRect,this.show=!t.hide,this.tickObj=t.tickObj,this.show?this.add():this.element=sn(this.parentNode,"text",[],".","class","axislabel")}ud.prototype={add:function(){this.element=sn(this.parentNode,"text",[1],".","class","axislabel"),this.text=this.config.text,this.element.text(this.text),this.rect=null,this.transformLabel()},remove:function(){this.rect=null,this.element=sn(this.parentNode,"text",[],".","class","axislabel")},setStyles:function(){var e=this.systemConfig;fn(this.element,[this.config,e.chart,e.canvas,Wr])},getBBox:function(){if(!za(this.rect)){if(!this.element.isD3Selection||this.element.empty()||this.parentNode.style("display")===Qt)return function(){var e={};return e.x=e.y=e.width=e.height=0,e}();this.rect=ba(this.element)}return this.rect},transformLabel:function(e,t,a){var i=this;if(!0!==i.show)return i.remove();if(i.element.empty()&&!0===i.show||i.text!==i.config.text)return i.add();i.setStyles();var r,n,o=i.systemConfig,l="middle",s=qa(a,i.orient),c={top:0,right:90,bottom:0,left:270}[s],u=qa(e,this.axisRect),d=qa(t,this.plotRect),h=i.axis.ticklabel,f=i.config,p=ti(h),g=ti(f),v=parseFloat(pa.getVal(_a([i.config,o.chart,o.canvas,Wr],"fontSize")));i.fontSize!==v?i.rect=null:i.fontSize=v,i.element.attr("dy","-0.25em");var y=this.tickObj.isInline,m=this.tickObj.inlineToPlot,b=y&&!m?0:p[s];switch(s){case"top":var x=m?0:u.height+b;C(c,r=d.width/2,-(n=x+g.bottom));break;case"right":x=m?0:u.width+b;C(c,r=d.height/2,-(n=x+g.left));break;case"bottom":x=m?0:u.height+b;r=d.width/2,n=x+g.top,i.element.attr("dy","0.91em"),C(c,r,n);break;case"left":C(c,-(r=(x=m?0:u.width+b)+g.right),n=d.height/2,-r,n)}function C(e,t,a,r,n){r=qa(r,0),n=qa(n,0),i.element.attrs({x:t,y:a,transform:function(e,t,a){return"rotate("+e+" "+(t||0)+" "+(a||0)+")"}(e,r,n),"text-anchor":l})}}};function dd(e,t,a,r,n){this.type=e,this.config=t.ticklabel,this.axis=t,this.plotRect=a,this.helpers=r,this.tickCount=n,this.maxSize=function(){return Qu(this.config,this.plotRect)},this.cache={}}function hd(e,a,r,n,i,o,l,s,c,u){var d="wrapOnSpace"==s||"wrapAll"==s;return e.map(function(e){var t;return t=a(r,e,i,n,o,null,null,l),t=d?ed(t,s,c.horizontal,c.vertical,u):t})}function fd(e,t){if(1===t)return s=pd(e,1),[a=Math.ceil(e[0]/s)*s];var a,r,n,i=(e[1]-e[0])/t,o=t-1,l=e[1]-e[0],s=l/o,c=Et(Bt(s)/Vt),u=It(10,c),d=function(e,t){for(var a,r,n=null,i=t,o=[1,1.2,1.5,1.75,2,2.2,2.5,3,3.5,4,4.5,5,6,7,8,9,10],l=0;l<o.length;l++)(a=Dt(e-(r=o[l]*t)))<(n=null==n?a:n)&&r<=e&&(n=a,i=r);return i}(i,u=+(u*=Math.floor(s/u)).toFixed(12));return a=e[0],r=e[1],r=(r=+(r=(a=+(a=function(e,t,a,r){var n,i,o=[1,2,5,10],l=o.length,s=e+t/2;s=+s.toFixed(12);for(var c=0;c<l;c++){var u,d=a/o[c],h=Dt(s-(u=e%d?e-e%d+d:e));(h<n||null==n)&&(n=h,i=u)}if(null==i||i<e){var f=Et(Bt(r)/Vt);f<0&&(i=+e.toFixed(Dt(zt(0,f)))),i=e}return i=e<i?i:e}(a,n=l-d*o,It(10,Et(Bt(n)/Vt)+1),d)).toFixed(12))+d*t).toFixed(12))>e[1]?+e[1]:r,rt(a,r,d)}function pd(e,t){var a=za(t)?t:10,r=e[1]-e[0],n=It(10,Et(Bt(r/a)/Vt)),i=a/r*n;return i<=.15?n*=10:i<=.35?n*=5:i<=.75&&(n*=2),n}function gd(e,t){return rt(function(e,t){var a=pd(e);za(t)&&(a=Mt(t,a));return Lt(e[0]/a)*a}(e,1),e[1],function(e,t){return Lt(pd(e,t))}(e,t))}function vd(e,i,o){e.nodes().forEach(function(e,t){var a="left"==o||"right"==o?1:0,r=[0,0],n=i.discreteWidth(t)/2;r[a]=r[a]+n,e.setAttribute("transform","translate("+r[0]+","+r[1]+")")})}dd.prototype={getScale:function(){var e=this.helpers.chart,t=this.helpers;return it.getScale(e,e.dataObject,this.plotRect,t.orient,t.axisOrder,e.dataset,this.type,this.extent)},getTicks:function(e,t,a){var r,n,i,o,l,s,c,u,d,h,f=this,p=qa(a,f.helpers),g=p.chart,v=g.systemConf,y=g.dataObject,m=f.plotRect=qa(e,f.plotRect),b=f.axis,x=f.type,C=b.interval,k=b.tickCount,w=b.interval,S=qa(t,0),O=a.extent,A=O,P=p.axisOrder,T=p.axisRotated,_=g.dataset.getDataType(x,P),E=g.systemConf.metadata,L=g.dataset.getColumnIdx(x,P),M=E.columns[L],z=E.columns[L].datatype,D="y"==x&&1<E.axes.y[P].length,I=E.columns[L],R=qa(D&&"y"==x?Jn(P,g):I[z],{}),j=R.subfunction,H="y"===x&&g.dataObject.isPercentChart?Nl:Hl,B=ti(f.config),F=ni(f.axis,x,g),W=!!F&&function(e,t){var a=v.chart.axes.yaxis[0].reversed;if("x"==e&&("bottom"==t&&!a||"left"==t&&!a||"top"==t&&a||"right"==t&&a))return!0}(x,p.orient),V=function(e,t,a,r,n,i){var o=qa(a.size,6),l=ai(e,t,i),s="left"===e||"right"===e?"x":"y",c="top"===e||"left"===e?-1:1,u=(c=n?-c:c,{});return u["left"===e||"right"===e?"y":"x"]=0,u[s]=c*(l+o),u}(p.orient,B,f.axis.tickmark,f.axis.ticklabel,W,F),N=parseFloat(pa.getVal(_a([f.config,v.chart,v.canvas,Wr],"fontSize"))),Y=pa.getVal(_a([f.config,v.chart,v.canvas,Wr],"fontFamily")),G=function(e){var t=e.alignMode,a=e.alignMode&&-1!=e.alignMode.indexOf("rotate"),r=za(e.rotation),n=0;if(a){var i=/\(([^)]+)\)/.exec(t);n=i?parseInt(i[1]):"auto"}else r&&!za(e.alignMode)?(n="auto"==e.rotation?e.rotation:parseInt(e.rotation),t="rotate",a=!0):za(e.alignMode)||(t="rotate(0)",a=!0);return{alignmentMode:t,isRotateMode:a,rotation:n}}(f.config),U=G.alignmentMode,X=G.isRotateMode,Z=G.rotation,Q=function(e,t){return"x"==e&&t||"y"==e&&!t}(x,T)?"height":"width",q=function(e,t,a,r){var n=1<e.axes.x.count&&"x"==t&&0<a;return"auto"==r&&!n}(g,this.type,P,Z),K=1<g.axes.x.count&&"x"==x&&0<P?0:Z,$=g.chartTypes[0].name,J=g.systemConf.chart.plot.plotoptions[$].outerPadding||0,ee=g.systemConf.chart.plot.plotoptions[$].padding||.2,te=null,ae=Ro(p.chart,Q,m),re="x"===x?ae*J*2:0,ne={},ie=a.maxTickSize||this.maxSize(),oe=Ba(R.groupby)&&0<R.groupby.length||"AUTO"===R.groupby&&"YEAR"!==j,le=oe?P:null,se=Va(g,"behaviouralEvents.eventManager.behaviours")||{},ce=se.PLOT_ZOOM||se.CHART_SCROLL&&g.scroll&&g.scroll.settings.smooth&&"x"===x;if(oe&&"AUTO"===R.groupby&&(R.AUTO_GROUP_ORDER=no.HierarchicalTimeDataAdapter.getAutoGroupOrder(j).reverse()),se.PLOT_ZOOM||se.PLOT_BRUSH||se.CHART_SCROLL){var ue=ri(g,x,P);h=ue.scale,O="x"===x&&se.CHART_SCROLL?g.viewPortExtent||ue.domain||O:ue.domain||O,A=ce?null:O;var de=h.range();if(ae=Dt(de[1]-de[0]),re="x"===x?ae*J*2:0,"time"===_&&Ba(O)&&h){O[0]instanceof Date&&(O=O.map(function(e){return e.getTime()}));var he=Dt(O[1]-O[0])*h.outerPadding;O[0]=O[0]+he,O[1]=O[1]-he}}switch(q||(K<0?K=360-Dt(K):360<K&&(K=Dt(K)%360)),_){case"numeric":var fe;if(n=za(O)?O:"x"===x?y.getMinMaxX():y.getMinMaxY(p.axisOrder,ct,g.datalabels.hasFixedPosition),"y"===x&&g.datalabels.hasFixedPosition){var pe=y.rangeCorrections.datalabels,ge=x+p.axisOrder;if(Aa(pe[ge])){var ve=y.getEncode("y",p.axisOrder);pe[ge]=ft.DATALABELS_getPreCalculatedSize(x,ve.seriesData,g)}fe=pe[ge]}else fe=0;r="height"===Q?(c=m.height-fe,S=S||_t(c/40),[c,0]):(c=m.width-fe,S=S||_t(c/100),[0,c]),za(k)&&(w=(n[1]-n[0])/k);var ye,me=za(C)&&(n[1]-n[0])/C<c,be=b.logBase||10;(ye="log"===b.scaleType?h||d3.scaleLog().base(be):h||Je()).domain(n).range(r),A=cd(A=me?function(e,t){var a=Et((e[1]-e[0])/t),r=void 0;if(a){var n=pd(e,a);if((r=Lt(e[0]/n)*n)-e[0]>t){var i=It(10,Et(Bt(t)/Vt)),o=Et((r-e[0])/i);r-=o*i}}else{var l=e[1]-e[0];i=It(10,Et(Bt(l)/Vt));r=e[0]-e[0]%i+i}return rt(r,e[1],t)}(n,w):0<+k?fd(n,k):"integer"===j?gd(n):ye.ticks(S),f.config,g,x,p.axisOrder,p.orient),"log"===b.scaleType&&(A=A.filter(function(e){return Number.isInteger(Er(e,be))})),S=A.length;break;case"ordinalNonLinear":case"ordinal":var xe,Ce,ke=N,we=y.hierarchical;o=za(we)&&we.categoryTree&&"x"==x&&0==P||y.isWaterfallEnabled,s=Ce="auto"===p.chart.systemConf.chart.width||"auto"===p.chart.systemConf.chart.height;var Se=null;if(y.isWaterfallEnabled&&za(h)&&Ba(A)&&(Se=A),za(A)||(A=y.getCategories(x,p.axisOrder).slice(0)),o&&za(we)&&(A=y.hierarchical.leafNodes),z===On&&!za(j)){var Oe=as(A[A.length-1]-A[0]);j=R.subfunction=Oe.subFunction}S=A.length,(u={}).width=u.height=N,d=ld(Q,u,B,K,N,p.orient),(xe=_t((ae-re)/d))<S&&"width"===Q&&(K||0<f.config.rotation)&&(d=sd(45,N,ke,p.orient).tickSpacing+B.left+B.right),"x"==x&&0<P||s||(k<S?A=nd(A,k,null,o):za(w)?A=nd(A,S,w,o):xe<S&&(A=nd(A,xe,null,o))),o&&(i=A.nodes||A,l=A.indices,A=A.ticks||y.getCategories(x,p.axisOrder,!0,Se).slice(0)),S=A.length;break;case"time":var Ae=qu(R);if(!Ae){var Pe,Te,_e;if(n=za(O)?O:"x"===x?y.getMinMaxX(0):y.getMinMaxY(p.axisOrder,0),Pe=new Date(n[0]),Te=new Date(n[1]),za(I[z])||(I[z]=R),!za(j)||"AUTO"===j){Oe=as(Te-Pe);j=R.subfunction=Oe.subFunction}(_e=new _s(R)).useUTC=!0===R.useUTC,u=qr(te=ed(te=_e.getMaxDate(R,le),U,ie.horizontal,ie.vertical,N),N,Y),d=ld(Q,u,B,K,N,p.orient),S=(ae-re)/d;var Ee=_e.range(Pe,Te,Lt(S),j,w,g);A=cd(Ee.TICKS,f.config,g,x,p.axisOrder,p.orient),S=Ee.TICKS.length;break}var Le=h||it.getScale(g,y,m,p.orient,p.axisOrder,g.dataset,x,O);A=Le.ticks(),Me=A.map(function(e){return Le.tickFormat()(e)}),S=A.length}if("ordinalNonLinear"===_){var Me=Ae?Me:hd(A,H,R,g,z,"axis",le,U,ie,N);za(f.config.showAs)&&(ne=id(A,f.config,M,g,L,P),Me=ne.tickValues,ne.length=Me.length);var ze=od(Me,A,N,Y,ne.styles);return{rawTickValues:A,formatterTickValues:Me,longestTickValue:ze,scale:f.getScale(),longestTickDimension:qr(ze.formattedVal,N,Y),margin:B,tickMargin:V,rotation:K,customTickInfo:ne,mode:U,isInline:F,inlineToPlot:W,maxTickSize:ie}}var De,Ie,Re,je,He=(ye=h||f.getScale()).actualRange,Be=He&&He[0]===He[1];Be&&(A=[ye.invert(He[0])]),g.renderVisiblePointsOnly&&!o&&(De=A,Ie=Dt(ye.origRange[1]-ye.origRange[0]),Re=ye.bandwidth?ye.bandwidth()/2:0,je=[-Re,Ie-Re],A=De.filter(function(e){var t=ye(e);return null!==t&&je[0]<=t&&t<=je[1]})),S=A.length,Me=Ae?Me:hd(A,H,R,g,z,"axis",le,U,ie,N),za(f.config.showAs)&&(ne=id(A,f.config,M,g,L,P),Me=ne.tickValues,ne.length=Me.length),ze=od(Me,A,N,Y,ne.styles),za(te)||(te=ze.formattedVal);var Fe=qr(te,N,Y,ze.style,!0),We=Qu(f.config,g.chartarea);Fe.width=zt(Fe.width,We.horizontal),Fe.height=zt(Fe.height,We.vertical),Ce&&f.recalculatePlotSize(p.chart,ae,Fe,Q,S,B,ee,J);var Ve=function(e){{if("auto"===U){var t=Ze(Fe,0);if(t.maxTickCount<e){var a=_==Sn?Qe(Fe):Ze(Fe,45,!0);if(a.maxTickCount<e){var r=Ze(Fe,45,!0);return r.maxTickCount<e&&ze.hasWhiteSpace?qe():r}return a}return t}if(X)return Ze(Fe);if("zigzag"==U)return Qe(Fe);if("wrapOnSpace"==U)return qe();if("wrapAll"==U)return{mode:"wrapAll",maxTickCount:Xe(K,Fe,x),rotation:K}}}(S),Ne=Ve.mode,Ye=Ve.maxTickCount;if(K=Ve.rotation,!Be&&(Ye<S||Ve.recalculate))if(_===On)if(Ae){Le=h||it.getScale(g,y,m,p.orient,p.axisOrder,g.dataset,x,null);var Ge=Ye<S&&X&&0===K;A=Le.ticks(Ge?.5*Ye:Ye),Ye<S&&!Ge&&(K=45),Me=A.map(function(e){return Le.tickFormat()(e)}),ze=od(Me,A,N,Y,ne.styles)}else Ee=_e.range(Pe,Te,Ye,j,w,g),A=cd(Ee.TICKS,f.config,g,x,p.axisOrder,p.orient),Me=hd(A,H,R,g,z,"axis",le,U,ie,N);else Ye<S&&(o?(l=(A=nd(i||A,Ye,null,o)).indices,A=A.ticks):(A=nd(A,Ye),f.config.showAs&&(ne.styles=nd(ne.styles,Ye),ne.userRawTicks=nd(ne.userRawTicks,Ye))),Me=nd(Me,Ye),ze=od(Me,A,N,Y,ne.styles));z===On&&oe&&(oe&&!za(y.hierarchical)?y.hierarchical=new no.HierarchicalTimeDataAdapter(g,A,R.groupby,_!==On,M):oe&&y.hierarchical.update(A)),(za(ne.styles)||R&&R.format&&R.format.breakSpace)&&(ze=od(Me,A,N,Y,ne.styles,!0));var Ue=qr(te,N,Y,ze.style);return{rawTickValues:A,formatterTickValues:Me,longestTickValue:ze,scale:ye,longestTickDimension:Ue,margin:B,tickMargin:V,rotation:K,mode:Ne,isInline:F,inlineToPlot:W,tickValueIndices:l,customTickInfo:ne,maxTickSize:ie};function Xe(e,t,a){var r,n,i=0,o=Ro(p.chart,Q,f.plotRect);if("x"===a&&(i=o*J*2),r=o-i,n=t||Fe,!!e){if("height"===Q&&(90===e||270===e))return r/(n.width+Dt(B.top)+Dt(B.bottom));var l=e%90;if("height"===Q?0<l:0<l||90===e||270===e)return r/(sd(e,n.width,n.height,p.orient).tickSpacing+Dt(B.left)+Dt(B.right))}return r/("height"===Q?n.height+Dt(B.top)+Dt(B.bottom):n.width+Dt(B.left)+Dt(B.right))}function Ze(e,t,a){var r,n=za(t)?t:K;return"auto"===n?(r=Xe(K=0,e,x),a=!Be&&r<S&&("width"===Q&&(r=Xe(K=1<p.chart.axes.x.count&&"x"==x&&0==P?90:45,e,null)),!0)):(r=Xe(n,e,x),K=n),{mode:"rotate",rotation:K,maxTickCount:r,recalculate:a}}function Qe(e){return{mode:"zigzag",rotation:0,maxTickCount:2*Xe(0,e,x)}}function qe(){if("auto"==U){var e=od(Me=Me.map(function(e,t){return e.split(" ")}),A,N,Y,ne.styles);za(te)||(te=e.formattedVal);var t=qr(te,N,Y,e.style,!0)}return{mode:"wrapOnSpace",maxTickCount:Xe(K,t,x),rotation:K}}},recalculatePlotSize:function(e,t,a,r,n,i,o,l){var s,c=Va(e.systemConf,"chart.scroll.categoryThickness")||a[r];t="height"===r?[s=(c+=i.top+i.bottom)*n,0]:[0,s=(c+=i.left+i.right)*n],s+=Qs(t,n,o,l,c),e.systemConf.chart[r]=s}},Ae.Ticks=dd,Ae.AxisLabel=ud,Ae.Ticks.prototype.ticklabelFitModels=function(e,t){var a={},r=e.length;return a.zigzag={},a.rotate={},a.type=t<r?2*r<t?"zigzag":"rotate":"default",a},Ae.render=function(ie,oe,le,e){var se=ie.systemConf,ce=ie.dataObject,W={left:!1,right:!1,top:!1,bottom:!1},ue=ie.wrap,de=function(){var e=se.chart.axes.animation||{},t=e.enabled;if(!za(t)){var a=ie.isAxisCategory||ie.isNonAxisMultiSeriesCategory?ie.seriesdata:ie.seriesdata.slice(0,1);t=a.some(function(e,t){var a=ie.chartTypes[t].name;return hs(se.chart.plot.plotoptions[a],e.plotoptions,ie,a).enabled})}return t?qa(e.duration,600):0}(),he=ie.systemConf.metadata,V=0,N=0,fe=no.helpers.getParsedYAxisOrder;ie.axes.animationDuration=de,ie.legend.isSingleLayout&&(ie.zscale=ie.dataObject.hasZaxis?ie.scales[0].create():null),ie.datalabels.hasFixedPosition=ie.datalabels.moduleExists&&function(r){if(r.dataObject.noofBarEnabledSeries){var n;if(r.seriesdata.some(function(e,t){return(n=Ju(r,t,wl))===$o}),n===$o)return!0;var e=r.dataObject.getEncode("stack");return Object.keys(e).some(function(e){var t=r.dataObject.getEncode("stack",e);if(t){var a=ls(t);return(n=Ju(r,a,Sl))===$o}}),n===$o}}(ie),ie.tickarea={left:0,right:0,top:0,bottom:0};var Y={left:ie.plotarea.left,top:ie.plotarea.top,width:ie.plotarea.width,height:ie.plotarea.height};Ae.constructTickObj(ie,oe,le,"left",Y,e),Ae.constructTickObj(ie,oe,le,"bottom",Y,e),ie.legend.isSingleLayout&&(ie.zscale=ie.dataObject.hasZaxis?ie.scales[0].create():null),$u.updatePlotareaByBandWidth(ie,Y);for(var t=it.constructor(ie,"left"),a=ie.axes.rotated?"x":"y",r=ie.axes[a].count,n=0;n<r;n++){s("left",n);c(t[n].scale,"left",n,e)}var i=it.constructor(ie,"bottom"),o=ie.axes.rotated?"y":"x";for(n=0;n<i.length;n++){s("bottom",n);c(i[n].scale,"bottom",n,e)}for(n=0;n<t.length;n++){null!=(l=ri(ie,a,n)).component&&d(l.component,n,a,e)}for(n=0;n<i.length;n++){var l;null!=(l=ri(ie,o,n)).component&&d(l.component,n,o,e)}function pe(e,t,a,r,n,i){var o=se.chart.plot.border,l=ie.staticPaneSVG.selectAll("g.plotareaBorder-property"),s=null;if(za(o)&&!0===o.show)ie.drawPlotBorder();else{var c,u,d,h,f=t.axisline,p=0==f.show||null==f.color?qt:f.color,g=Ea(f.strokeWidth,1),v=f.style||"solid",y=ni(t,i,ie)&&!r.tickObj.tickValueObj.inlineToPlot,m="left"==e||"right"==e?r.preCalcTickLen().width:r.preCalcTickLen().height,b=y?m:0,x=sn(l,"line",[1],".","class",e);if(0==n||0==t.show||a.style("display")==Qt)return void x.style("stroke",qt);"bottom"==e?(c=-ie.tickarea.left,u=ie.plotarea.width+ie.tickarea.right,d=ie.plotarea.height+.5+b,h=ie.plotarea.height+.5+b):"left"==e?(u=c=.5-b,d=0,h=ie.plotarea.height+ie.tickarea.bottom):"right"==e?(c=ie.plotarea.width+.5+b,u=ie.plotarea.width+.5+b,d=0,h=ie.plotarea.height+ie.tickarea.bottom):"top"==e&&(c=-ie.tickarea.left,u=ie.plotarea.width+ie.tickarea.right,h=d=.5-b),x.styles({"stroke-width":g,stroke:p,"shape-rendering":"crispedges","stroke-dasharray":on(v,g)}).attrs({x1:c,x2:u,y1:d,y2:h}),s={size:g,clr:p},l.node()["border-"+e]=s}a.selectAll("path.domain").style("stroke",qt)}function ge(e,t,a){var r=e.orient,n=ie.axes.rotated;return r=null==r?"x"==t?n?"left":"bottom":n?0==a?"bottom":"top":0==a?"left":"right":r}function s(e,t){var a=[];switch(e){case"left":a=ie.axes.rotated?u("x",t):u("y",t);break;case"bottom":a=ie.axes.rotated?u("y",t):u("x",t)}return a}function c(e,t,a){var r="left"==t?ie.axes.rotated?"x":"y":ie.axes.rotated?"y":"x";return function(e,t,r,i,a){var n=e.component,o="x"==t?se.chart.axes.xaxis:se.chart.axes.yaxis[a],l="bottom"==(i=ge(o,t,a))||"top"==i?le:oe,s=!0===o.show&&Mi(ie,t+"axis",l),c=ti(o.ticklabel),u=ai(i,c,ni(o,t,ie)),d=ie.plotarea;"y"!==t||s&&!ie.axes.y.groups[a].disabled||V++;if(n&&!W[i]){var h="y"===t&&ie.axes.y.groups[a].disabled;n.plotBorderDrawn=!(!s||h)||n.plotBorderDrawn,W[i]=n.plotBorderDrawn}if(e.index=a,e.reversed=o.reversed,e.baseScale=it.getScale(ie,ce,d,i,a,ie.dataset,t,ct,ct,!1),e.scale.originalDomain=e.baseScale.originalDomain,function(e,t){!0===Va(t.systemConf,"chart.zoom.enabled")&&(e.zoomScale=Je().range([0,t.axes.rotated?t.plotarea.height:t.plotarea.width]).domain([0,100]),e.baseZoomScale=e.zoomScale.copy())}(e,ie),function(e,t,a,r,n,i){var o=n.behaviouralEvents&&Va(n.behaviouralEvents.eventManager,"behaviours.PLOT_ZOOM");if(o&&o.types&&!0===o.types[t]){var l=o.instance.getTransform(),s=_defineProperty({},t,i);Pc(i,t,td(l.k,s.x,s.y,n))}}(r,t,0,o.reversed,ie,e),r.ordinalRange=null,r.ordinalRange=qs(r),s){ie.axes.y.groups;var f=ri(ie,t,a).ticks,p=f.preCalcAxisLen,g=(f.preCalcApproxAxisLength(Y),f.preCalcAxisLen-p),v=f.tickValueObj,y=t+"-axis-"+a,m=sn(ue.selectAll("g."+t+"-axis"),"g",s?[o]:[],".","class",y);if(m.attr("filter",null),1<Dt(g)&&(be(i,g),Y=ie.plotarea),null!=n){var b="y"==t&&1<he.axes.y[a].length,x=f&&f.isHierarchy()&&ie.dataObject.hierarchical.groupByTime,C=ie.dataset.getColumnIdx(t,x?0:a),k=he.columns[C].datatype;k=f&&f.isHierarchialLevelType()&&ie.dataObject.hierarchical.categoryTree?Sn:k;var w=he.columns[C][k],S=(w=b&&"y"==t?Jn(a,ie):w)&&(w.axisformat||w.format),O=Ea(o.tickmark.size,6),A=ce.isPercentChart&&"y"==t?Nl:Hl,P=x?a:null,T=!(f&&f.isHierarchy())&&w&&S&&S.specifier&&S.specifier.constructor==Array||"wrapOnSpace"==v.mode||"wrapAll"==v.mode,_=v.isInline&&!v.inlineToPlot,E="left"===i||"right"===i?"width":"height";ie.tickarea[i]=_&&n.plotBorderDrawn?v.axisgroup[E]:ie.tickarea[i]||0,n.orient(i).scale(r).tickPadding(u).tickSize(O).tickSizeOuter(0).majorTicks(a===("y"===t?V:N)?G(i,t,v):null).plotarea(ie.plotarea).systemconf(ie.systemConf).tickRotation(v.rotation).preCalcTickLen(f.preCalcTickLen).chartObj(ie).columnIndices(b&&"y"==t?he.axes.y[a]:[C]).isMultiLineTick(T);var L=null!=w?w.axisformat||w.format:null;if(L&&"auto"==L.specifier&&!r.bandwidth)n.tickValues(f.getTicksforAxisComp()).tickFormat(function(e,t){var a=r.tickFormat()(e);qe(this).text(a),this.formattedVal=a});else{n.tickValues(f.getTicksforAxisComp());var M=f.getActualTicklabel(),z=f.tickValueObj.maxTickSize.horizontal,D=f.tickValueObj.maxTickSize.vertical,I=pa.getVal(_a([o.ticklabel,ie.systemConf.chart,ie.systemConf.canvas,Wr],"fontSize")),R="wrapOnSpace"==f.tickValueObj.mode||"wrapAll"==f.tickValueObj.mode,j=n.isMultiLineTick(),H=za(o.ticklabel.showAs),B=[null,i,ie,v.rotation,o.ticklabel.textOverflow,n.scale(),m,n,"ticklabel",o.ticklabel,a,!0],F=Ku.apply(null,B);n.tickFormat(function(e,t){var a=M(t),r=A(w,a,k,ie,"axis",null,null,P);if(qe(this).text(r),this.formattedVal=r,j)R&&(r=ed(r,f.tickValueObj.mode,z,D,I)),yn(qe(this),r,{orient:i});else if(H&&za(f.tickValueObj.customTicks[t])){this.innerHTML="",yn(qe(this),f.tickValueObj.customTicks[t],null,!0);var n=bn(qe(this));this.formattedVal=Ba(n)?n.join(" "):n}F(this,t)})}n.tickObj=f,n.hideAxisLabel=!Mi(ie,t+"axislabel",l)}}return n}(ri(ie,r,a),r,e,t,a)}function u(e,t){var a=ri(ie,e,t),r="x"==e?se.chart.axes.xaxis:se.chart.axes.yaxis[t]||se.chart.axes.yaxis[0],n=a.component;return n||(a.component="x"==e?r.show&&Mi(ie,"xaxis",le)?Ae.get():null:r.show?Ae.get():null,n)}function d(e,t,a){return function(e,t,a){var r="x"==t?se.chart.axes.xaxis:se.chart.axes.yaxis[a],n=(r.ticklabel,ge(r,t,a)),i="bottom"==n||"top"==n?le:oe,o=!0===r.show&&Mi(ie,t+"axis",i),l=t+"-axis-"+a,s=sn(ue.selectAll("g."+t+"-axis"),"g",o?[r]:[],".","class",l),c=ri(ie,t,a),u=ie.axes[t].count;if(u-1<a)return sn(ue.selectAll("g."+t+"-axis"),"g",[],".","class",l),void(1==e.plotBorderDrawn&&pe(n,r,s,e,!1,t));s.style("display","y"===t&&ie.axes.y.groups[a].disabled?Qt:null),"x"===t&&o?ve(r,a,e,!0):ye(r,a,e,null,!0);if(o){c.ticks.tickValueObj;ie.plotarea=e.plotarea(),s.transition().duration(de).call(e,t,a),"y"==t&&1==e.plotBorderDrawn?pe(n,r,s,e,o,t):"x"==t&&0==a&&pe(n,r,s,e,o,t)}else 1==e.plotBorderDrawn&&pe(n,r,s,e,o,t)}(e,a,t)}function ve(e,t,a,r){var n={left:0,top:0,right:0,bottom:0},i=ie.axes.x.count;if(0==t){for(var o=0;o<i;o++){var l=ri(ie,"x",o).component,s=a.orient(),c=r?me(e.label,e.ticklabel,l.preCalcTickLen(),ie,"x",o,s):l.tickLabelWidth(),u=ue.selectAll(".x-axis-"+o),d="right"==s?ie.plotarea.left+ie.plotarea.width+n.right:ie.plotarea.left-n.left,h=ie.axes.rotated||"top"==s?ie.plotarea.top-n.top:ie.plotarea.top+ie.plotarea.height+n[s];n[s]+=c,u.attr("transform","translate("+d+","+h+")"),u.attr("x",d),u.attr("y",h)}u=ue.selectAll("g.x-axis-0")}}function ye(e,t,a,r){var n=se.chart.axes.yaxis,i=ie.axes.y.count,o=ue.selectAll(".y-axis-0"),l=n[0].orient||(ie.axes.rotated?"bottom":n[0].orient||"left");if(r||0==t){for(var s={left:0,top:0,right:0,bottom:0},c=0;c<i;c++){var u=n[c],d=u.orient,h="bottom"==(d=d||(ie.axes.rotated?0==c?"bottom":"top":null!=u.orient?u.orient:0==c?"left":"right"))||"top"==d?le:oe;if(!0===u.show&&Mi(ie,"yaxis",h)){var f=ie.axes.y.groups[c].component,p=ue.selectAll(".y-axis-"+c),g=p.style("display")==Qt?f.tickLabelWidth():me(u.label,u.ticklabel,f.preCalcTickLen(),ie,"y",c,d),v="bottom"==d||"top"==d?ie.plotarea.left:"left"===d?ie.plotarea.left-s[d]:ie.plotarea.left+ie.plotarea.width+s[d],y="left"==d||"right"==d?ie.plotarea.top:"bottom"===d?ie.plotarea.height+ie.plotarea.top+s[d]:ie.plotarea.top-s[d];s[d]+=ie.axes.y.groups[c].disabled?0:g,p.attr("transform","translate("+v+","+y+")"),f&&1==f.plotBorderDrawn&&pe(d,u,p,a,"y")}}ie.axes.rotated||o.selectAll("line.majorTicks").attr("x2","right"==l?-ie.plotarea.width:ie.plotarea.width)}}function me(e,t,a,r,n,i,o){var l={top:0,right:0,bottom:5,left:0},s=0,c=0,u=ri(r,n,i),d=u.component,h=u.ticks;c="clr"===n?0:u.axisLabel.getBBox().height,d.hideAxisLabel||!1===e.show||!za(e.text)||""===e.text||h.isHierarchy()&&i<r.dataObject.hierarchical.finalDepth?l.top=l.bottom=l.left=l.right=0:(l.top=qa(e.marginTop,5),l.bottom=qa(e.marginBottom,5),l.left=qa(e.marginLeft,5),l.right=qa(e.marginRight,5));var f=qa(t.marginRight,5),p=qa(t.marginLeft,5),g=qa(t.marginBottom,5),v=qa(t.marginTop,5);switch(o){case"top":s=(s=null!=a?a.height+v+l.bottom:0)+c+l.top;break;case"bottom":s=(s=null!=a?a.height+g+l.top:0)+c+l.bottom;break;case"left":s=(s=null!=a?a.width+p+l.right:0)+c+l.left;break;case"right":s=(s=null!=a?a.width+f+l.left:0)+c+l.right}return d.tickLabelWidth(s),s}function G(e,t,a){var r,n,i,o;r=n=i=o=0;var l=a.isInline&&!a.inlineToPlot,s=a.longTickSize,c=l&&("left"==e||"right"==e)?s.width:0;if("bottom"==e?(n=c,o=-ie.plotarea.height):"top"==e?(n=-c,o=ie.plotarea.height):"left"==e?(r=-c,i=ie.plotarea.width):"right"==e&&(r=c,i=-ie.plotarea.width),"x"===t&&ie.datalabels.hasFixedPosition){var u=ie.axes.y.groups.map(function(e){return e.disabled}).indexOf(!1),d=se.chart.axes.yaxis[u].reversed,h=function(e){var t,a=it.getScale(ie,ie.dataObject,ie.plotarea,ie.axes.y.orient,e,ie.dataset,"y"),r=a.origRange;if(ie.dataset.getDataType("y",e)===Sn){var n=a.domain();t=a(n[n.length-1])+a.bandwidth()/2}else{n=ie.dataObject.getMinMaxY(e,0,ie.datalabels.hasFixedPosition);t=a(n[1])}return zt(Dt(t-r[0]),Dt(t-r[1]))}(u);"bottom"==e?d?n-=h:o+=h:"top"==e?d?o-=h:n+=h:"left"==e?d?r+=h:i-=h:"right"==e&&(d?i+=h:r-=h)}return{x1:r,y1:n,x2:i,y2:o}}function be(e,t){var a=ie.plotarea;"left"===e?(a.left+=t,a.width-=t):"right"===e?a.width-=t:"bottom"===e?(a.height-=t,a.bottom+=t):(a.height-=t,a.top+=t)}function xe(e,t,a,r,n,i){W={left:!1,right:!1,top:!1,bottom:!1},ie.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line").style("stroke",qt);var o=t.orient(),l=(t.majorTicks(),t.tickLabelWidth());"none"===e.style("display")&&"remove"===i||("left"==o||"right"==o?(ie.plotarea.width="add"==i?ie.plotarea.width-l:ie.plotarea.width+l,ie.plotarea.left="left"==o?"add"==i?ie.plotarea.left+l:ie.plotarea.left-l:ie.plotarea.left):(ie.plotarea.height="add"==i?ie.plotarea.height-l:ie.plotarea.height+l,ie.plotarea.top="top"==o?"add"==i?ie.plotarea.top+l:ie.plotarea.top-l:ie.plotarea.top));var s=0,c="add"==i?"":Qt;e.style("display",c),e.attr("filter",!0),"add"==i&&e.style("display",null);for(var u=0;u<ie.axes.y.groups.length;u++){var d=ue.selectAll("g.y-axis-"+u),h=ie.axes.y.groups[u].component,f=h.orient(),p=h.majorTicks(),g=se.chart.axes.yaxis[u]||se.chart.axes.yaxis[0];d.node()&&(d.style("display")!=Qt&&0==s?(p=G(f,n,h.tickObj.tickValueObj),h.majorTicks(p),d.transition().duration(0).call(h,n,u,!0),s++):null!=p&&0<s&&(h.majorTicks(null),d.transition().duration(0).call(h,n,u,!0)),d.style("display")===Qt||W[f]?(h.plotBorderDrawn=!1,""==d.style("display")||"inline"==d.style("display")?d.selectAll("path.domain").style("stroke",g.axisline.color):d.selectAll("path.domain").style("stroke",qt)):(W[f]=!0,h.plotBorderDrawn=!0))}ye(0,r,t,!0)}ie.dataset.getDataType("x")==Sn&&it.barBandwidth(ie),ie.updateZscale=function(){ie.legend.isSingleLayout&&ie.dataObject.hasZaxis&&ie.zscale.domain(ce.getMinMaxZ())},ie.updateScale=function(t,r,a,n,i){function e(e,t){var a=!(1<arguments.length&&void 0!==t)||t;return l=it.getScale(ie,ce,P,m,n,C,r,e,ct,a)}function o(e,t){e&&p.scale.domain(p.domain=e),t&&p.scale.range(p.range=t),p.scale.bandwidth&&(p.scale.ordinalRange=null),a=e,p.eventscale=p.scale}var l,s,c,u=5<arguments.length&&void 0!==arguments[5]&&arguments[5],d=(null==t||Ba(t)?t:t.yaxiscolumnorder)||n,h="y"==r?fe(d):0,f=(n="x"==r&&za(n)?n:h,ue.selectAll("g."+r+"-axis-"+n)),p=ri(ie,r,n),g=p.ticks,v="x"==r?se.chart.axes.xaxis:se.chart.axes.yaxis[h],y=v.ticklabel,m=p.component?p.component.orient():ge(v,r,h),b="bottom"==m||"top"==m?le:oe,x=!0===v.show&&Mi(ie,r+"axis",b),C=ie.dataset,k=ie.dataset.getColumnIdx(r,h),w=he.columns[k].datatype,S=(w=g&&g.isHierarchialLevelType()&&ie.dataObject.hierarchical.categoryTree?Sn:w,he.columns[k][w]),O=g&&g.isHierarchy()&&ie.dataObject.hierarchical.groupByTime?n:null,A=!1,P=ie.plotarea,T=a,_=ie.behaviouralEvents.eventManager.behaviours,E=0<Object.keys(_).length,L=_.PLOT_ZOOM&&_.PLOT_ZOOM.types&&_.PLOT_ZOOM.types[r],M=L||_.CHART_SCROLL&&ie.scroll&&ie.scroll.settings.smooth&&"x"===r;if(!a){var z=(s=ie.chartTypes[0].name,c=se.chart.plot.plotoptions[s].outerPadding,(w===Sn?ce.getCategories(r,n):"x"===r?ie.dataObject.getMinMaxX(Ea(c,.2)):ie.dataObject.getMinMaxY(h))||[]);A="NoData"===z[0]&&"NoData"===z[1]}if(p.scale.bandwidth&&!M&&p.domain&&1===p.domain.length&&(u=!1,Ba(T)&&(p.domain=T)),!u&&("x"===r&&M&&p.scale.bandwidth&&(a=null),l=e(a),p.eventscale=p.scale=l,M)){p.baseScale=e(ct,!1),l.originalDomain=p.baseScale.originalDomain;var D=void 0;if(D=L?_.PLOT_ZOOM.instance.getTransform():ie.scroll.transform){var I=Pc(p,Yn(r,ie.axes.rotated),D);T=I.domain,i=I.range,o(T,i)}}u&&(o(M?null:a,i),ie.axes.animationDuration=ie.disableAnimation?0:de);var R="y"==r&&!f.empty()&&A,j="y"==r&&!f.empty()&&1!=v.disabled&&f.style("display")==Qt&&!!f.attr("filter");if(R)x&&xe(f,p.component,0,h,"y","remove");else if(j&&!E)x&&xe(f,p.component,0,h,"y","add");else if(ce.isBubbleEnabled&&"y"==r&&!M&&(p.eventscale=p.scale=it.getScale(ie,ce,ie.plotarea,m,h,ie.dataset,"y")),x&&E&&j&&xe(f,p.component,0,h,"y","add"),x){p.component.scale(p.scale),S=1<he.axes.y[h].length&&"y"==r?Jn(h,ie):S;var H=ce.isPercentChart&&"y"==r?Nl:Hl,B=null!=S?S.axisformat||S.format:null,F=(g=p.ticks,"bottom"==m||"top"==m?g.tickValueObj.longTickSize.height:g.tickValueObj.longTickSize.width),W=g.getTickValues(ie.plotarea.width,ie.plotarea.height,a,!1,null,p.Ticks,ie.plotarea);g.tickValueObj=W;var V="bottom"==m||"top"==m?g.tickValueObj.longTickSize.height:g.tickValueObj.longTickSize.width,N=g.preCalcTickLen,Y=V<F?V-F:F<V?V-F:0;"bottom"==m||"top"==m?N.height=N.height+Y:N.width=N.width+Y;var G=!f.empty()&&f.style("display")===Qt&&"y"===r;G&&f.style("display",null);var U=g.getTicksforAxisComp(),X=me(v.label,v.ticklabel,p.component.preCalcTickLen(),ie,r,n,m);p.component.tickValues(U).tickRotation(W.rotation),p.component.tickLabelWidth(X);var Z=g.getActualTicklabel(),Q=g.tickValueObj.maxTickSize.horizontal,q=g.tickValueObj.maxTickSize.vertical,K=pa.getVal(_a([v.ticklabel,ie.systemConf.chart,ie.systemConf.canvas,Wr],"fontSize")),$="wrapOnSpace"==g.tickValueObj.mode||"wrapAll"==g.tickValueObj.mode,J=p.component.isMultiLineTick(),ee=za(v.ticklabel.showAs),te=[null,m,ie,W.rotation,v.ticklabel.textOverflow,p.scale,f,p.component,"ticklabel",v.ticklabel,n,!0],ae=Ku.apply(null,te);if(B&&"auto"==B.specifier&&!p.scale.bandwidth?p.component.tickFormat(function(e,t){qe(this).text(p.scale.tickFormat()(e))}):p.component.tickFormat(function(e,t){var a=Z(t),r=H(S,a,w,ie,"axis",null,null,O);qe(this).text(r),J?($&&(r=ed(r,g.tickValueObj.mode,Q,q,K)),yn(qe(this),r,{orient:m})):ee&&za(g.tickValueObj.customTicks[t])&&(this.innerHTML="",yn(qe(this),g.tickValueObj.customTicks[t],null,!0)),ae(this,t)}),p.component.isMultiLineTick()||za(y.showAs)?f.call(p.component,r,n):f.transition().duration(de).call(p.component,r,n),G&&xe(f,p.component,0,h,"y","add"),1<Dt(Y)){G||be(m,Y);var re="x"===r?"y":"x";("x"==re?[ie.axes.x]:ie.axes.y.groups).forEach(function(e){e.disabled||(M?(T=e.domain,i=e.range,ie.updateScale(t,re,T,e.index,i,!1)):ie.updateScale(t,re,null,e.index))}),ie.drawPlotareaClippath(),ie.updatePlotareaProp()}"y"===r?(f.styles({display:null,visibility:"visible"}),ye(0,h,p.component,!0)):ve(v,n,p.component);var ne=ie.plotarea.width;ie.axes.rotated||"y"!=r||ue.selectAll(".y-axis-"+h).selectAll("line.majorTicks").attr("x2","right"!=m?ne:-ne),1==p.component.plotBorderDrawn&&pe(m,v,f,p.component,r)}}};var yd=function(e){return e};function md(e){return"translate("+(e+.5)+",0)"}function bd(e){return"translate(0,"+(e+.5)+")"}function xd(){return!this.__axis}function Cd(e,t,a){var r=[],n=t.chart,i=t.axis,o=i.ticks.tickValueObj,l=t.tickValues,s=t.tickFormat,c=t.tickSizeInner,u=t.tickSizeOuter,d=t.gridSize,h=t.tickPadding,f=t.rotation,p=t.orient,g=t.scale,v=o&&o.isInline,y=o&&o.inlineToPlot,m="top"===p||"left"===p?-1:1,b=y?-m:m,x=v?-m:m,C="left"===p||"right"===p?"x":"y",k="left"===p||"right"===p?"width":"height",w="top"===p||"bottom"===p?md:bd,S=n.dataObject.isPolarAxisCategory?"H":"h",O=(a.label,a.ticklabel),A=O.events,P=a.tickmark,T=a.axisline,_=a.grid,E=t.renderGrid,L=t.renderTicklabel,M=null!=A&&0==Ea(A.enabled,!0)?"auto":A&&A.cursor||"pointer",z=n.systemConf.chart.plot.border,D=null==l?g.ticks?g.ticks.apply(g,r):g.domain():l,I=null==s?g.tickFormat?g.tickFormat.apply(g,r):yd:s,R=v&&!y?o.longTickSize[k]:Math.max(c,0)+h,j=v&&!y?o.axisgroup[k]:0,H=g.origRange?g.origRange:g.range(),B=+H[0]+.5,F=+H[H.length-1]+.5,W=(g.bandwidth?function(t){var a=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(a=Math.round(a)),function(e){return+t(e)+a}}:function(t){return function(e){return+t(e)}})(g.copy()),V=e.selection?e.selection():e,N=V.selectAll(".domain").data([null]),Y=V.selectAll(".tick").data(D,g).order(),G=Y.exit(),U=Y.enter().append("g").attr("class","tick"),X=Y.select("line.minorTicks"),Z=(d&&_.show?Y.select("line.majorTicks"):Y.select("line.majorTicks").remove(),Y.select("text").attr("class","ticklabel"));if(N=N.merge(N.enter().insert("path",".tick")).attr("class","domain").styles({stroke:!1===T.show||T.hideParent?"transparent":T.color||"#000","stroke-width":qa(T.strokeWidth,1),"stroke-dasharray":on(T.style,qa(T.strokeWidth,1))}),X=xn("line",".minorTicks",[1],Y=Y.merge(U)).attr(C+"1",m*j).attr(C+"2",m*j+x*c).styles({fill:"none","shape-rendering":"crispedges","stroke-width":P.strokeWidth,stroke:P.color}),E&&d&&_.show){var Q=qa(_.strokeWidth,1),q=on(_.style,Q),K=ln(_.lineCap,_.style);xn("line",".majorTicks",[1],Y).attr("stroke","#000").attrs({x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2}).styles({fill:"none","shape-rendering":"crispedges","stroke-width":Q,stroke:_.color,"stroke-dasharray":q,"stroke-linecap":K})}var $=[O,n.systemConf.chart,n.systemConf.canvas,Wr],J=pa.getVal(_a($,"fontSize")),ee=_a($,"fontFamily"),te=_a($,"fontWeight"),ae=_a($,"fontStyle"),re=_a($,"textShadow"),ne=_a($,"fontColor"),ie=_a($,"textDecoration"),oe=(_a($,"strokeColor"),ad(p,f,0,null,P.size,h,o));if(Z=Z.merge(U.append("text")),L&&(Z.attr("class","ticklabel").style("font-size",J+"px").style("font-family",ee).style("font-weight",te).style("font-style",ae).style("text-shadow",re).style("text-decoration",ie).style("fill",ne).style("text-anchor",oe.textAnchor).style("cursor",M).style(C,b*R).attr(C,b*R).attr("dy",function(e,t){return o&&"zigzag"==o.mode&&t%2&&oe.dy1?oe.dy1:oe.dy}).attr("transform","rotate("+oe.rotate[0]+" "+oe.rotate[1]+" "+oe.rotate[2]+")"),function(e,t,a,r,n,i,o){var l=r.minmaxlabels||{},s=o.systemConf;if(!0===l.show){var c=!0===n.reversed,u=+pa.getVal(_a([l,r,s.chart,s.canvas,Wr],"fontSize")),d=i.domain(),h=d.length-1,f=e.filter(function(e,t){return!(e-d[0]&&e-d[h])});"top"!==t&&"bottom"!==t||"middle"!==a.textAnchor?"left"!==t&&"right"!==t||!(o.plotarea.top<u/2||o.plotarea.bottom<u/2)||f.attr("dy",function(e){return e-d[c?h:0]?"0.9em":"-0.3em"}):f.style("text-anchor",function(e){return e-d[c?h:0]?"end":"start"}),fn(f,[l,r,s.chart,s.canvas,Wr])}}(Z,p,oe,O,a,g,n),i.ticks.isHierarchialLevelType()&&Z.call(vd,g,p)),Y.attr("transform",function(e){return w(W(e))}),e!==V&&(Y=Y.transition(e),X=X.transition(e),Z=Z.transition(e),G=G.transition(e).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=W(e))?w(e):this.getAttribute("transform")}),U.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return w((t&&isFinite(t=t(e)),W(e)))})),G.remove(),N.attr("d","left"===p||"right"==p?"M"+m*(u+j)+","+B+S+"0.5V"+F+"H"+m*(u+j):"M"+B+","+m*u+"V0.5H"+F+"V"+m*u),Y.attr("opacity",1).attr("transform",function(e){return w(W(e))}),o&&o.isInline&&za(z)&&!0===z.show){var le="left"==p||"right"==p,se=le?1:0,ce=le?J*parseFloat(oe.dy):0,ue=le?[0,n.plotarea.height]:[n.plotarea.left+.05*n.plotarea.left,n.plotarea.width+.05*n.plotarea.width];Y.style("display",function(){var e=$n(this).translate[se];return Ma(ce+e,ue)?"":"none"})}X.attr(C+"2",m*j+x*c),V.filter(xd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===p?"start":"left"===p?"end":"middle"),V.each(function(){this.__axis=W}),L&&(Z.each(I),!0===O.tooltip&&Z.each(function(e){pn(qe(this),this.formattedVal)}))}function kd(e,r,t,n){var i=t.datatype,o=t[i],l="threshold";return e.replace(yt,function(e,t){var a="";return Ba(r[t])?(a=Hl(o,r[t][0],i,n,l,!1),a+=" - "+Hl(o,r[t][1],i,n,l,!1)):a=Hl(o,r[t],i,n,l,!1),a})}Ae.get=function(){var A,P,T,_,E,L,M,z,D,t,I,R,j,H,B,F,a=[],W=null,V=null,N=6,Y=6,G=3,U=null,r=null,X=0;function Z(e,S,O,t){return e.each(function(e){var t=qe(this);z=e.label,L=e.ticklabel,M=e.tickmark,D=e.grid;var a=ri(I,S,O),r=a.ticks,n=r.tickValueObj,i=(X=qa(X,0))<0?360-Dt(X):X;i=360<i?Dt(i)-360:i,_&&t.selectAll("g.axisgroup").selectAll("*").remove();var o,l=sn(t,"g",[e],".","class","axisgroup");if(t.selectAll("g#ticklabelG_"+I.id).remove(),n&&n.inlineToPlot){t.selectAll("g.axisgroup").selectAll("*").remove(),(o=sn(t,"g",[1],"#","id","ticklabelG_"+I.id)).style("pointer-events","visible");var s=sn(I.staticPaneSVG,"use",[1]);s.attr("xlink:href","#ticklabelG_"+I.id),s.attr("x",t.attr("x")),s.attr("y",t.attr("y"))}if(T&&A.ticks(T[0],T[1]),I.isAxisCategory&&"clr"!==S){var c=function(e,t,a,r,n){var i=xa(e.plotarea);i.chartId=e.id;var o=sn(e.svg,"defs",[1]),l=ya(i,r+n),s=sn(sn(o,"clipPath",[1],"#","id",l),"rect",[1]),c="x"==r?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[n],u={},d=t.axisgroup,h=.5*e.plotarea.left,f=.5*(e.canvasarea.width-(e.plotarea.left+e.plotarea.width)),p=.5*e.plotarea.top,g=.5*e.plotarea.bottom;switch(a){case"top":u.x=-h,u.y=-d.height-c.tickmark.size,u.height=d.height+e.plotarea.height+c.tickmark.size,u.width=d.width+h+f;break;case"right":u.x=-e.plotarea.width,u.y=-p,u.width=d.width+e.plotarea.width+(c.axisline.strokeWidth||1),u.height=d.height+p+g;break;case"bottom":u.x=-h,u.y=-e.plotarea.height,u.height=d.height+e.plotarea.height,u.width=d.width+h+f;break;case"left":u.x=-d.width,u.y=-p,u.width=d.width+e.plotarea.width+(c.axisline.strokeWidth||1),u.height=d.height+p+g}return s.attrs(u),l}(I,n,j,S,O);l.attr("clip-path","url("+I.defsLocation+"#"+c+")"),n.inlineToPlot&&o.attr("clip-path","url("+I.defsLocation+"#"+c+")")}F=I.axes.animationDuration;var u={tickValues:W,tickFormat:V,tickSizeInner:N,tickSizeOuter:Y,gridSize:U,tickPadding:G,orient:j,rotation:i,scale:P,chart:I,axis:a};"clr"===S||za(L.showAs)||B?(u.renderGrid=!0,u.renderTicklabel=!0,l.call(Cd,u,e)):(u.renderGrid=!0,u.renderTicklabel=!n.inlineToPlot,l.transition().duration(F).call(Cd,u,e),n.inlineToPlot&&(u.renderGrid=!1,u.renderTicklabel=!0,o.transition().duration(F).call(Cd,u,e)));var d=l.selectAll(".tick"),h=null==W?P.ticks?P.ticks.apply(P,[d.nodes().length]):P.domain():W,f=l.selectAll(".tick").data(h,P),p=f.select("line.majorTicks"),g=a.axisLabel,v=l.selectAll("text.ticklabel").data(h,P);r.isHierarchialLevelType()&&function(e,t,a){var r=ri(I,t,a),n=r.component,i=e.selectAll("line.minorTicks"),o=function(e,t){var a=0;for(;0<t;){var r=ri(I,e,t-1).component;a+=r.tickLabelWidth(),t--}return a}(t,a);r.ticks.tickValueObj.tickMarkSize=o+n.tickSize();var l=a,s="left"==j||"right"==j?"x1":"y1",c="left"==j||"top"==j?o:-o,u="left"==j?"y1":"x1";if(l===I.dataObject.hierarchical.finalDepth){"bottom"==j&&M.size;var d=e.nodes();e.selectAll("line#minorTicksAlign").remove();var h=sn(qe(d[d.length-1]),"line",[1],"#","id","minorTicksAlign"),f=I.axes.x.levels[l-1].scale,p=f.domain().length,g="top"==j||"bottom"==j?f.discreteWidth(p-1)+",0":"0,"+f.discreteWidth(p-1),v="left"==j||"right"==j?"x2":"y2",y="left"==j||"top"==j?-M.size:M.size;h.attr("transform","translate("+g+")").attr(s,c).attr(v,y),q(M,h)}i.attr(u,null),i.attr(s,c)}(f,S,O);ad(j,i,0,A,M.size);var y={data:H.map(function(e){return ga(I.systemConf.metadata.columns[e],{columnindex:e},!0)})};if(!function(o,e,t,a,r,n){var i=t.events,l=null!=i&&0==Ea(i.enabled,!0),s={mousemove:i?i.mousemove:null,mouseout:i?i.mouseout:null,click:i?i.click:null,dblclick:i?i.doubleclick:null},c={tap:i?i.tap:null,tapHold:i?i.taphold:null,tapHoldEnd:i?i.tapholdend:null,dbltap:i?i.doubletap:null};if(!l){var u={},d={};for(var h in s){var f=null;s[h]?(f="click"==h?function(e,t){p(a,e,t,n,!1,r),Ta(s[arguments.callee.eventtype],nt(),g(a,e,t,n),o)}:function(e,t){Ta(s[arguments.callee.eventtype],nt(),g(a,e,t,n),o)}).eventtype=h:"click"==h&&(f=function(e,t){p(a,e,t,n,!0,r)}),u[h]=f}for(var h in c){f=null;c[h]?(f="tap"==h?function(e,t){p(a,e,t,n,!1,r),Ta(c[arguments.callee.eventtype],nt(),g(a,e,t,n),o)}:function(e,t){Ta(c[arguments.callee.eventtype],nt(),g(a,e,t,n),o)}).eventtype=h:"tap"==h&&(f=function(e,t){p(a,e,t,n,!1,r)}),d[h]=f}Mo(e,u,d)}function p(e,t,a,r,n,i){o.dataObject.hierarchical&&o.dataObject.hierarchical.categoryTree&&"x"===i&&Ta(Ae.TickLabelFilter,nt(),g(e,t,a,r),o,n)}function g(e,t,a,r){return e.data=e.data.map(function(e){return e.value=e.datatype===On?Vl(t,0,e.time).getTime():t,e.itemIndex=a,e.levelindex=r,e}),e}}(I,v,L,y,S,O),r.isHierarchialLevelType()||"between"!=M.align||Q(P,f,"minorTicks"),"clr"!==S){!0===z.tooltip&&pn(g.element),g.tickObj=n,g.transformLabel(R,E,j);var m="left"==j?270:"right"==j?90:0;Ku(g.element,j,I,m,"ellipsis",P,l,Z,"axislabel")}if(U&&D.show&&(P.bandwidth&&"between"==M.align&&Q(P,f,"majorTicks"),"clr"!==S)){var b=P.range(),x=null==Z.tickValues()?null:P(Z.tickValues()[0])+(P.bandwidth?P.bandwidth()/2:0),C=I.systemConf.chart.plot.border,k=!0===C?C.color:e.axisline.color;za(x)&&"transparent"!==D.color&&"transparent"!==k&&b[0]===x&&qe(p.nodes()[0]).style("stroke","transparent")}var w=e.baseline;null!=w&&sn(l,"line",!0===w.show&&P.domain()[0]<=w.value&&w.value<P.domain()[1]?[1]:[],".","class","zeroBase").attrs({x1:"left"==j||"right"==j?0:P(w.value),y1:"left"==j||"right"==j?P(w.value):-E.height,x2:"left"==j||"right"==j?E.width:P(w.value),y2:"left"==j||"right"==j?P(w.value):0}).styles({fill:Qt,stroke:w.color,"shape-rendering":"crispedges","stroke-width":w.strokeWidth})}),Z}function Q(a,e,t){var r,n,i,o,l=e.nodes(),s=qe(e.node()),c=qe(l[l.length-1]),u=e.selectAll("line."+t+":not(#minorTicksAlign)"),d=c.selectAll("line."+t),h=sn(s,"line",[1],"#","id",t+"Align"),f=g(a);if("minorTicks"==t?(i="bottom"==j||"top"==j?0:-M.size,o="bottom"==j?M.size:"top"==j?-M.size:0,q(M,h)):(r=U.x1,n=U.y1,i=U.x2,o=U.y2,function(e,t){var a=qa(e.strokeWidth,1),r=on(e.style,a),n=ln(e.lineCap,D.style);t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":a,stroke:D.color,"stroke-dasharray":r,"stroke-linecap":n})}(D,h)),a.bandwidth)u.attr("transform","translate("+f.mid+")"),d.attr("transform","translate("+f.end+")"),h.attr("transform","translate("+f.start+")").attrs({x1:r,y1:n,x2:i,y2:o});else{var p=0;u.attr("transform",function(e,t){return"translate("+g(a,p++).mid+")"}),d.attr("transform","translate("+f.end+")"),h.attr("transform","translate("+f.start+")").attrs({x1:r,y1:n,x2:i,y2:o})}}function g(e,t){var a,r,n,i,o;if(e.bandwidth){var l=e.bandwidth(),s=(e.range(),e.ordinalRange),c=e.outerPaddingPx+l/2,u=1<e.domain().length?s[1]-s[0]-l:0;o=zt(c,i=l/2+u/2)}else{var d=I.dataObject.hierarchical?I.dataObject.hierarchical.leafCategories:Z.tickValues(),h=it.getContinuousRangeBand(e,d,t);i=l=h.rangeBand,o=h.outerPaddingInPixel}return n="bottom"===j||"top"==j?(a=-(o-.5)+",0",r=i+.5+",0",o+.5+",0"):(a="0,"+-o,r="0,"+i,"0,"+o),{start:a,mid:r,end:n}}function q(e,t){t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":e.strokeWidth,stroke:e.color})}return Z.axis=A,Z.scale=function(e){return arguments.length?(P=e,A?A.scale(P):(A=l(j,P)).scale(P),Z):P},Z.systemconf=function(e){return arguments.length?(t=e,Z):t},Z.orient=function(e){return arguments.length?(za(j)&&(j!=e?(_=!0,I.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("*").remove(),A=null):_=!1),j=e,Z):j},Z.tickArguments=function(e){return arguments.length?(a=null==e?[]:Array.prototype.slice.call(e),Z):a.slice()},Z.tickValues=function(e){return arguments.length?(W=null==e?null:Array.prototype.slice.call(e),Z):W&&W.slice()},Z.tickFormat=function(e){return arguments.length?(V=e,Z):V},Z.tickSize=function(e){return arguments.length?(N=Y=+e,Z):N},Z.tickSizeInner=function(e){return arguments.length?(N=+e,Z):N},Z.tickSizeOuter=function(e){return arguments.length?(Y=+e,Z):Y},Z.tickPadding=function(e){return arguments.length?(G=+e,Z):G},Z.ticks=function(){return arguments.length?(T=arguments,Z):T},Z.majorTicks=function(e){return arguments.length?(U=e,Z):U},Z.plotarea=function(e){return arguments.length?(E=e,Z):E},Z.tickLabelWidth=function(e){return arguments.length?(r=e,Z):r},Z.tickRotation=function(e){return arguments.length?(X=e,Z):X},Z.preCalcTickLen=function(e){return arguments.length?(R=e,Z):R},Z.chartObj=function(e){return arguments.length?(I=e,Z):I},Z.columnIndices=function(e){return arguments.length?(H=e,Z):H},Z.isMultiLineTick=function(e){return arguments.length?(B=e,Z):B},Z},Ae.TickLabelFilter=function(e,t,a,r){t=t.data[0],a.cache.hierarchical||(a.cache.hierarchical={});var n=a.dataObject.hierarchical,i=t.itemIndex,o=a.cache.hierarchical,l=n.finalDepth-t.levelindex,s=n.getCategoriesByDepth(l)[i],c=no.HierarchicalDataAdapter.getAllChildren(s),u=Ae.TickLabelFilter.getQuery(c[0],l);o.lastQuery=u,r&&function(e,t,a){var r,n,i=e.svg.select(".seriesholder"),o=e.staticPaneSVG.select("g.labelholder"),l=e.chartTypes[0],s=o.selectAll('text[level^="'+t+'"],path[level^="'+t+'"]'),c=o.selectAll('text:not([level^="'+t+'"]), path:not([level^="'+t+'"])');if("bar"===l.name)r=i.selectAll('path[level^="'+t+'"]'),n=i.selectAll('path:not([level^="'+t+'"])');else{if("scatter"!==l.name&&"bubble"!==l.name)return;r=i.selectAll('g.scatter[level^="'+t+'"]'),n=i.selectAll('g.scatter:not([level^="'+t+'"])')}!0===a?(r.style("opacity",1),n.style("opacity",.1),s.style("opacity",1),c.style("opacity",.1)):(r.style("opacity",1),n.style("opacity",1),s.style("opacity",1),c.style("opacity",1))}(a,u,o.query!==u),o.query===u?(Ba(o.data)&&Ae.TickLabelFilter.setState(o.data,!1),o.data=o.query=o.active=o.depth=o.itemIndex=o.isLeaf=null):(Ba(o.data)&&Ae.TickLabelFilter.setState(o.data,!1),Ae.TickLabelFilter.setState(c,!0),o.query=u,o.data=c,o.active=!0,o.depth=l,o.itemIndex=i,o.isLeaf=s.leaf)},Ae.TickLabelFilter.setState=function(e,t){e.forEach(function(e){e.active=t})},Ae.TickLabelFilter.updateTickEventHandler=function(e,t){var a=e.cache.hierarchical,r=!t;if(za(a)&&za(a.data)){var n,i=e.dataObject.hierarchical;if(a.data){var o=a.data.filter(function(e){return!e.seriesDisabled});if(t&&(o.length?a.query=Ae.TickLabelFilter.getQuery(o[0],a.depth):a.query="-1"),r){var l=(n=o[0]).level.split("_").slice(0,a.depth+1).map(Number),s=i.getCategoriesByLevelIndices(l),c=no.HierarchicalDataAdapter.getAllChildren(s);a.query=Ae.TickLabelFilter.getQuery(n,a.depth),a.data=c,Ae.TickLabelFilter.setState(c,!0)}}}},Ae.TickLabelFilter.getQuery=function(e,t){return e.level.split("_").slice(0,t+1).map(Number).slice(0,t+1).join("_")+"_"};function wd(){}wd.getValueWithinRange=function(e,t){return zt(Mt(e,t[0]),t[1])},wd.getNeedlePolygon=function(e,t,a){var r=qa(e.width/2,7),n=-mr(e.innerRadius,t.radius,0),i=-mr(e.radius,t.radius,a)+e.padding;switch(i=zt(i,-3*r),e.type){case"clock":return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" A"+r+" "+r+" 0 0 1 "+r+" "+n+" M0 "+(n-r)+" L0 "+i+" M"+-r+" "+(r+i)+" L0 "+i+" L"+r+" "+(r+i)+" L0 "+i;case"sharp":return"M"+r+" "+n+" L0 "+(n+r)+" L"+-r+" "+n+" L0 "+i+" L"+r+" "+n;default:return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" L0 "+i+" L"+r+" "+n}},wd.createLevelsNColors=function(e,t,a,i){var r,o=[],l=[],n=e[0].data[0],s=n[0][t.dataindex]||t.values||[],c=n[0][t.dataindex]||[],u=t.color,d=t.cornerRadius,h=t.padAngle,f=za(d)&&!za(h);if(r=Ba(c[0])?c:t.ranges,s instanceof Array||(s=[s]),void 0===u&&s.length<=1&&(u=["#d1d1d1"]),r)return f&&((r=r.slice(0)).forEach(function(e){e[0]=i[0]}),r.reverse(),(u=u.slice(0)).length=r.length,u.reverse()),{values:r,colors:u};if(0<s.length){var p=s.slice(0);if(!u)var g=ma(a[0],[0,p.length-1],[t.colorGamma[0],t.colorGamma[1]]);var v=i[0],y=v;f?(y<0&&!xr(p,0)&&p.push(0),p.sort(ge),v===p[0]&&(p=p.slice(1,p.length)),p.forEach(function(e,t){var a=wd.getValueWithinRange(e,i);l[t]=u?u[t]:g(t),o[t]=[y,a]}),o.reverse(),l.reverse()):(p.sort(ge),p.forEach(function(e,t){var a=s.indexOf(e),r=wd.getValueWithinRange(e,i),n=wd.getValueWithinRange(za(p[t+1])?p[t+1]:0,i);o[t]=r<0?[r,n]:[v,r],l[t]=u?u[a]:g(t),v=r<0?n:r}))}else n.forEach(function(e,t){o[t]=i,l[t]=(u instanceof Array?u[t]:u)||"#d1d1d1"});return{values:o,colors:l}},Ae.polar=function(){var B,F,W,V,N,Y,G;function t(e){e.each(function(e){var t,a,r,n,i,o,l=qe(this),s=F.systemConf,c=e.axisline,u=e.tickmark,d=e.subtickmark||{},h=e.grid,f=e.ticklabel,p=f.events;null!=p&&(o=0==Ea(p.enabled,!0),t=p.mousemove,a=p.mouseout,r=p.click,n=p.doubleclick,i=p.cursor);var g=e.tickOrient,v=c.show?Ea(c.strokeWidth,1):0,y=Ea(h.strokeWidth,1),m=Ea(f.marginLeft,5),b=Ea(u.size,3),x=Ea(d.size,2),C=+d.count||0,k=Y||(B.ticks?B.ticks():B.domain()),w=function(e,t,a){if(r=[],a&&1<t.length){for(var r,n,i,o=function(e){var t=e[0],a=e[e.length-1];return t<a?[t,a]:[a,t]}(e.domain()),l=-1,s=t.length,c=(t[1]-t[0])/++a;++l<s;)for(n=a;0<--n;)(i=+t[l]-n*c)>=o[0]&&r.push(i);for(--l,n=0;++n<a&&(i=+t[l]+n*c)<o[1];)r.push(i)}return r}(B,k,C),S=B.range(),O=sn(l,"g",[1],".","class","subticksGroup");O.style("stroke",d.color);var A=sn(O,Hr,w),P=sn(sn(l,"g",[1],".","class","ticksGroup"),"g",k,".","class","tick");sn(l,Rr,c.show?[1]:[],".","class","domain").attr("d",function(){return"M"+tt().innerRadius(W-1).outerRadius(W).startAngle(S[0]).endAngle(S[1])(1).split(/L|M/gi)[1]}).styles({stroke:c.color,fill:Qt,"stroke-width":v,"stroke-dasharray":on(c.style,v),"stroke-linecap":ln(c.lineCap,c.style),"pointer-events":Qt}),sn(P,Hr,[1],".","class","tickmark"),sn(P,Hr,[1],".","class","grid"),sn(P,Dr,[1],".","class","ticklabel");var T=P.select(Dr+".ticklabel"),_=P.select(Hr+".tickmark"),E=P.select(Hr+".grid");T.style("cursor",i||Kt).style("pointer-events",o?Qt:$t).attr("index",function(e,t){return t}).text(function(e){return N(e)}),fn(T,[f,s.chart,s.canvas,Wr]),G={data:V.map(function(e){return ga(F.systemConf.metadata.columns[e],{columnindex:e},!0)})};function L(e){U(t,nt(),e)}function M(e){U(a,nt(),e)}function z(e){U(r,nt(),e)}function D(e){U(n,nt(),e)}var I,R,j,H;switch(Mo(T,{mousemove:L,mouseout:M,click:z,dblclick:D},{singletouchmove:L,touchend:M,tap:z,dbltap:D}),g){case tl:I=W-v/2,R=-(b+m),j=-b,H=-x;break;default:I=W+v/2,R=b+m,j=b,H=x}P.attr("transform",function(e){var t=iu(I,B(e));return"translate("+t[0]+","+t[1]+")"}),T.attrs({dy:function(e){var t=ou(B(e));return g==tl?Yt/2<t&&t<3*Yt/2?null:-su(t)+"em":Yt/2<t&&t<3*Yt/2?su(t)+"em":null},"text-anchor":function(e){var t=ou(B(e));return t%Yt==0?"middle":g==tl&&t<Yt||g!=tl&&Yt<t?"end":null},transform:function(e){var t=iu(R,B(e));return"translate("+t[0]+","+t[1]+")"}}),_.attrs({x2:function(e){return iu(j,B(e))[0]},y2:function(e){return iu(j,B(e))[1]}}).styles({stroke:u.color,"stroke-width":u.strokeWidth}),E.attrs({x2:function(e){return iu(-W,B(e))[0]},y2:function(e){return iu(-W,B(e))[1]}}).styles({stroke:h.color,"stroke-width":y,"stroke-dasharray":on(h.style,y),"stroke-linecap":ln(h.lineCap,h.style)}),A.attrs({x2:function(e){return iu(H,B(e))[0]},y2:function(e){return iu(H,B(e))[1]},transform:function(e){var t=iu(I,B(e));return"translate("+t[0]+","+t[1]+")"}})})}return t.scale=function(e){return arguments.length?(B=e,t):B},t.chartObj=function(e){return arguments.length?(F=e,t):F},t.radius=function(e){return arguments.length?(W=e,t):W},t.columnIndices=function(e){return arguments.length?(V=e,t):V},t.tickValues=function(e){return arguments.length?(Y=e,t):Y},t.tickFormat=function(e){return arguments.length?(N=e,t):N},t;function U(e,t,a){null!=e&&(G.data=G.data.map(function(e){return e.value=a,e}),Ta(e,t,G,F))}},Ae.polar.render=function(f,e){e=e||"y";var p=f.systemConf,t=f.renderer[0],a=f.dataObject,r=f.plotarea,n=f.canvasarea,i=f.systemConf.metadata.columns,o=f.chartTypes[0],l=o.value,s=o.name,g=p.chart.plot.plotoptions[s],c="x"==e?p.chart.axes.xaxis:p.chart.axes.yaxis[0],u=+g.outerPadding||0,d=+g.maxRadius||0,h=l===Ne.dial,v=c.show&&Mi(f,e+"axis",zt(n.width,n.height)),y=v&&c.axisline.show?Ea(c.axisline.strokeWidth,1):0,m=Ea(c.ticklabel.marginLeft,5),b=Ea(c.tickmark.size,3),x=c.subtickmark?Ea(c.subtickmark.size,2):0,C=pa.getVal(c.ticklabel.fontSize||p.chart.fontSize||p.canvas.fontSize||Wr.fontSize),k=c.orient||al,w=c.tickOrient,S=r.width-2*u,O=r.height-2*u,A=zt(S,O)/2,P=du(g,A),T=v&&+g.padding||0;f.plotarea_approx={x:0,y:0,innerRadius:P};var _=(ee=it.constructor(f,"x"==e?qo:Zo))[0].scale,E=_.range(),L=i[ge=f.dataset.getColumnIdx(e,0)],M=L.datatype,z=L[M],D=k==tl?w===al?P-T-y/2-Mt(x,b+m+C):P:A,I=Ae.polar().scale(_).chartObj(f).radius(D).columnIndices([ge]).tickFormat(function(e){return Hl(z,e,M,f,"axis")}).tickValues(null),R=sn(f.svg.selectAll("g.chartgroup"),"g",[1],".","class",e+"-axis"),j=sn(R,"g",v?[c]:[],".","class","axisgroup");j.call(I),R.style("visibility","hidden");var H=tt().innerRadius(!h||g.needle.show||f.datalabels.moduleExists&&Vs(g.datalabels,f)?0:P).outerRadius(A).startAngle(E[0]).endAngle(E[1]),B=sn(R,Rr,[1],".","class","dummyArc").attr("d",H(1)),F=sn(R,"g",[1],".","class","datalabel"),W=sn(R,"g",[1],".","class","targetSeries");if(h){if(!t){t=f.renderer[0]=bs(s),f.rendererConf=[],f.rendererConf[0]=new Be.rendererConf,ht.setRendererProp(f,t,f.seriesdata[0],0,0,[])}t.firedList={},pt&&F.call(pt.dial().renderer(t).args([f.seriesdata,0]),f.labelHandler,F),we(R,_,A,P),wd.targetMarker(W,A,P,f);var V=+g.needle.width/2||7;sn(F,"circle",g.needle.show?[1]:[]).attrs({r:V,transform:"translate("+V+","+V+")"})}var N,Y=ba(B.node()),G=ba(R.node()),U=Y.height/A,X=Y.width/A,Z=A+zt((S-G.width)/X,(O-G.height)/U),Q={};if(h){Q=(Se(N={},"axisgroup"),Se(N,"minmaxlabels"),Se(N,"targetSeries"),t.firedList=N),G=ba(R.node());Z=d<(Z=A+zt((S-G.width)/X,(O-G.height)/U))?d:Z,Z=isFinite(Z)&&0<Z?Z:0}P=du(g,Z)-(k==tl?(+g.strokeWidth||0)/2:0),D=(k==tl?w==tl?P:P-(xe(A)-A):Z)-(w==tl?y/2:0)-(k==tl?T:0),I.radius(D),Q.axisgroup||j.call(I),H.outerRadius(Z).innerRadius(!h||g.needle.show||f.datalabels.moduleExists&&Vs(g.datalabels,f)?0:P),B.attr("d",H(1)),h&&(Q.minmaxlabels||we(R,_,Z,P),wd.targetMarker(W,Z,P,f));Y=ba(B.node());var q=lu(G=ba(R.node()),r.width,r.height,Z,0);R.attr("transform","translate("+(r.left+q[0])+","+(r.top+q[1])+")"),R.style("visibility",null);var K=(w==tl&&k==al?xe(Z):Z-(k==tl?0:y/2))-(k==tl?0:T),$=w==tl?(Z-K)*X:0,J=w==tl?(Z-K)*U:0;if(f.plotarea_approx={x:q[0],y:q[1],width:Y.width-y-$,height:Y.height-y-J,radius:K,actualRadius:Z,innerRadius:P},B.remove(),F.remove(),W.remove(),a.isPolarAxisCategory){e="y";var ee,te=p.chart.axes.yaxis[0],ae=(A=f.plotarea_approx.radius,f.plotarea_approx.x),re=f.plotarea_approx.y,ne=(k=te.orient||Qo,Ea(te.tickmark.size,6)),ie=Ea(te.ticklabel[k==Zo?"marginRight":"marginLeft"],3),oe="arc"===te.grid.type,le=(ee=it.constructor(f,Zo))[0].scale,se=te.reversed&&!a.isstacked()?[0,A]:[A,0];le.origRange=se,le.range(se);var ce={left:f.plotarea.left,top:f.plotarea.top,width:A,height:A},ue=ri(f,e,0),de=Ae.ticks(f,te,"y",0,k,ce);(ue.ticks=de).preCalcApproxAxisLength(ce);var he=de.getTickValues(A,A,null,null,A/20,ue.Ticks),fe=f.userdata.metadata,pe=1<fe.axes.y[0].length,ge=f.dataset.getColumnIdx(e,0),ve=(M=fe.columns[ge].datatype,z=pe&&"y"==e?Jn(0,f):fe.columns[ge][M],a.isStackedPercentChart&&"y"==e?Nl:Hl),ye=Ae.get().orient(k).scale(le).tickPadding(ie).tickSize(ne,0).plotarea({width:A,height:A}).systemconf(f.systemConf).chartObj(f).tickRotation(he.rotation).preCalcTickLen(de.preCalcTickLen).tickValues(he.ticks).tickFormat(function(e){var t=ve(z,e,M,f,"axis");qe(this).text(t)}).columnIndices(pe&&"y"==e?fe.axes.y[0]:[ge]),me=f.svg.selectAll("g.y-axis").data(te.show?[te]:[]);me.call(ye,e,0).attr("transform","translate("+(ae+f.plotarea.left)+","+(re+f.plotarea.top-A)+")"),me.exit().remove();var be=me.selectAll(".tick");be.append(Rr),be.select(Rr).attr("transform",function(e){return"translate(0,"+(A-le(e))+")"}).attr("d",function(e){return ke(A-le(e),_)}).styles({fill:Qt,stroke:te.grid.color,"stroke-width":te.grid.strokeWidth}),j.selectAll(Rr+".domain").attr("d",function(){return ke(A,_)}),le.range(se.reverse()),ee[0].eventscale=le}function xe(n){var i=[],o=n+((k==al?y:y/2)+x*(w==tl?-1:1)),l=w==tl?Oe:Ue;return j.selectAll(Dr).each(function(e){var t=ba(this),a=iu(n+((k==al?y:y/2)+b+m)*(w==tl?-1:1),it(e)),r=[Ce(a[0]+t.x,a[1]+t.y),Ce(a[0]+t.x,a[1]+t.y+t.height),Ce(a[0]+t.x+t.width,a[1]+t.y),Ce(a[0]+t.x+t.width,a[1]+t.y+t.height),o];i.push(l(r))}),l(i)}function Ce(e,t){return Rt(It(e,2)+It(t,2))}function ke(i,o){return oe?"M"+tt().innerRadius(i-1).outerRadius(i).startAngle(E[0]).endAngle(E[1])(1).split(/L|M/gi)[1]:"M"+(o.ticks?o.ticks():o.domain()).reduce(function(e,t,a){var r=o(t),n=iu(i,r);return e+"L"+n[0]+" "+n[1]+" "},"").substring(1)+"Z"}function we(e,r,t,a){var n=g.minmaxlabels,i=n.align,o=Ea(n.padding,5),l=n.text,s=r.domain(),c=n.showAs,u=i==tl?a-o:"center"==i?(t+a)/2:t+o,d=n.show?"min"==c?[s[0]]:"max"==c?[s[1]]:s:[],h=sn(e,Dr,d,".","class","minmaxlabels");fn(h,[n,p.chart,p.canvas,Wr]),h.attrs({"text-anchor":function(e){if("center"==i)return"middle";var t=ou(r(e));return t%Yt==0?"middle":i==tl&&t<Yt||i!=tl&&Yt<t?"end":null},dy:function(e){if("center"==i)return"1em";var t=ou(r(e));return i==tl?Yt/2<t&&t<3*Yt/2?null:-su(t)+"em":Yt/2<t&&t<3*Yt/2?su(t)+"em":null},transform:function(e){var t=iu(u,r(e)),a="center"==i?o:0;return"translate("+t[0]+","+(t[1]+a)+")"}}).text(function(e,t){return l&&za(l[t])?kd(""+l[t],d,L,f):Hl(z,e,M,f,"minmaxlabels")})}function Se(e,t){var a=[".targetSeries",".datalabel",".minmaxlabels",".axisgroup"].filter(function(e){return e!=="."+t}).join();R.selectAll(a).style("display",Qt);var r=ba(R.node()),n=A+zt((S-r.width)/X,(O-r.height)/U),i=mr("minmaxlabels"===t?g.minmaxlabels.maxWidth:null,A,mr("50%",A));(n<A-i||A<=0||!isFinite(n))&&(e[t]=!0,R.selectAll("."+t).remove()),R.selectAll(a).style("display",null)}};Ae.polar.render;var Sd=function(e,t){if(e.dataObject.isPolarAxisCategory){var a=e.plotarea_approx.radius;return{r:a,x1:-a,x2:a,y1:-a,y2:a}}if(e.isAxisCategory){function r(e,t){if(!e.bandwidth||!En(i)&&i!==Ne.line)return t;var a=e.bandwidth()/2,r=t[0]<t[1]?1:-1;return[t[0]+a*r,t[1]-a*r]}var n=e.rendererConf[t].params,i=e.chartTypes[t].value,o=e.systemConf.chart.axes,l=o.xaxis.reversed,s=o.yaxis[n.yaxiscolumnorder].reversed,c=n.xscale,u=n.yscale,d=c.range(),h=u.range();return d=r(c,d),h=r(u,h),n.axisrotated?{x1:h[+!s],x2:h[+!!s],y1:d[+!l],y2:d[+!!l]}:{x1:d[+!!l],x2:d[+!l],y1:h[+!!s],y2:h[+!s]}}};function Od(e,t,a,r){var n=t.stopOffset,i=t.stopOpacity,o=t.stopColor,l=t.colorGamma||[1,0],s=t.spreadMethod,c="radial"==r?+t.radius:Mt(Dt((+t.x2||0)-(+t.x1||0)),Dt((+t.y2||0)-(+t.y1||0)));if(n=n||["0%","100%"],o=("function"==typeof o?o(a):o)||n.map(function(e,t){return zn(a,l[t]||0,"brighter",_)}),i=i||[1,1],("repeat"===s||"reflect"===s)&&(Xr.IS_IOS||Xr.SAFARI)){for(var u=[],d=[],h=[],f=0,p=0;f<100;){for(var g=0,v=n.length;g<v;g++){var y=zt(parseFloat(n[g])/100*c+f,100);u.push(y+"%"),h.push(p%2!=0?i[i.length-1-g]:i[g]),d.push(p%2!=0?o[o.length-1-g]:o[g])}f+=c,p+="reflect"===s?1:0}n=u,o=d,i=h}return{offset:n,color:o,opacity:i}}function Ad(){}var Pd={};Ad.create=function(e,t,a,r){if(/threshold/gi.test(t))return Pd[t](e,a,r);var n=Xr.SAFARI,i=Od(Xr.SAFARI=0,a,a.color,t),o=Pd[t](e,a,i);return Xr.SAFARI=n,o},Ad.canvasGradientFill=Pd.canvasGradientFill=function(e,t,a,r,n,i){return za(i.context)||(i.context=document.createElement("canvas").getContext("2d")),e&&e.type?Ad[e.type](e,t,a,r,n,i):null},Ad.linear=Pd.linear=function(e,t,a,r,n,i){var o,l,s,c,u=i.context,d=e.dimension,h=e.spreadMethod,f=+e.x1||0,p=+e.x2||0,g=+e.y1||0,v=+e.y2||0,y=Od(0,e,e.color,"linear"),m="repeat"!==h&&"reflect"!==h||!Xr.IS_IOS&&!Xr.SAFARI?100:Mt(Dt(p-f),Dt(v-g));c=Ba(d)?(l=d[o=0],s=0,d[1]):(o=d.x1||0,l=d.x2||0,s=d.y1||0,d.y2||0);var b=Je().domain([0,100]).range([o,l].sort(ge)),x=Je().domain([0,100]).range([s,c].sort(ge)),C=b(100*f/m),k=(f=b(100*p/m),x(100*g/m)),w=(g=x(100*v/m),u.createLinearGradient(C,k,f,g));return Td(w,y,e.opacity),w},Ad.radial=Pd.radial=function(e,t,a,r,n,i){var o=i.context,l=e.dimension,s=e.spreadMethod,c=Od(0,e,e.color,"radial"),u=Ba(l)?za(l[2])?l[2]:l[0]:l.r,d=Ba(l)?u:l.x2-l.x1,h=Ba(l)?u:l.y2-l.y1,f=d/100*e.x||0,p=h/100*e.y||0,g="repeat"!==s&&"reflect"!==s||!Xr.IS_IOS&&!Xr.SAFARI?u/100*e.radius:u,v=o.createRadialGradient(f,p,0,f,p,g);return Td(v,c,e.opacity),v},Ad.thresholdLinear=Pd.thresholdLinear=function(e,t,a,r,n,i){var o=i.context,l={opacity:[],offset:[],color:[]};a.forEach(function(e){l.opacity.push(1),l.offset.push(e.offset),l.color.push(e.color)});var s=o.createLinearGradient(e.x1,e.y1,e.x2,e.y2);return Td(s,l,e.opacity),s};var Td=function(e,t,a){var r=t.offset.length,n=-1;for(a=a||1;++n<r;){var i=Dt(1-(Ea(t.opacity[n],1)+a)),o=Mn(t.color[n],i),l=parseFloat(t.offset[n])/100;Ma(l,[0,1])&&e.addColorStop(l,o)}};tn.canvas_gradients=Ad;function _d(){}var Ed=$(),Ld=$();function Md(i,r,n){function o(e,t){var a=function(e,t){var a=0,r=0,n=e.naturalWidth,i=e.naturalHeight,o=Ea(t.width,50),l=Ea(t.height,50);if("no-repeat"===t.repeatMode){var s;if(n<i)a=(s=o-o*(n/i))/2,o-=s;else r=(s=l-l*(i/n))/2,l-=s}return{x:a,y:r,width:o,height:l}}(e,t),r=function(e){return i+"-"+l+"-"+~~e.x+"-"+~~e.y+"-"+~~e.width+"-"+~~e.height}(a),n=Ed.get(r);return za(n)||(n=function(e,t,a){var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,0,0,r.width,r.height),a.context.createPattern(r,l)}(e,a,t),Ed.set(r,n)),{pattern:n,dimension:a}}var l=r.repeatMode||"repeat",e=Ld.get(i);if(za(e)){var t=o(e,r),a=t.pattern,s=t.dimension;n(r.context,a,s)}else{var c=new Image;c.onload=function(){Ld.has(i)||Ld.set(i,c);var e=o(c,r),t=e.pattern,a=e.dimension;n(r.context,t,a)},c.src=i}}_d.canvasPatternFill=function(e,t,a){var r,n;return n=document.createElement("canvas").getContext("2d"),r=e.ele?function(e){var t=tn.get(tn.svg_patterns,"svgPatternFill",e,{returnSVGimage:!0,base64:!0});Md(t.url,t)}(e):function(e){var t="zp"+ya(e,"canvasFill"),a=Ed.get(t);if(!za(a)){var r=document.createElement("canvas"),n=e.bgClr||e.bgClr_base,i=e.stroke||e.stroke_base,o=/\{\{([a-z]+)\}\}/,l=e.type.split(","),s=l.length,c=e.size.split(","),u=e.strokeWidth.split(","),d=n.split(","),h=i.split(","),f=(e.fillOpacity||"").split(","),p=((e.strokeOpacity||"").split(","),e.translate?/\[.*?\]/g.test(e.translate)?JSON.parse(e.translate):e.translate.split(","):null);c=e.width?rn(e,c):c,r.width=c[0],r.height=c[0];for(var g=r.getContext("2d"),v=0;v<s;v++){var y=Da(h[v]||h[0])?e.stroke_base:"static"==(h[v]||h[0])?e.customStaticClr:h[v]||h[0],m=Da(d[v]||d[0])?e.bgClr_base:"static"==(d[v]||d[0])?e.customStaticClr:d[v]||d[0],b=(c[v]||c[0])/2,x=[b,b];if(y=o.test(y)?zn(e.stroke_base,1,y.replace(o,"$1"),_):y,m=o.test(m)?zn(e.bgClr_base,1,m.replace(o,"$1"),_):m,p){var C=p[v]||p[0];if(Ba(C))x=[b+parseFloat(C[0]),b+parseFloat(C[1])];else{var k=b+parseFloat(C);x=[k,k]}}if(g.save(),g.translate(x[0],x[1]),g.beginPath(),g.lineWidth=u[v]||u[0],g.fillStyle=Mn(m,f[v]||f[0]),g.strokeStyle=y,"circle"===l[v])g.arc(0,0,c[v]/2,0,2*Yt,!1);else{var w=Ji(l[v])(c[v]||c[0]);rc.drawPath(g,w)}g.fill(),g.stroke(),g.closePath(),g.restore()}Ed.set(t,r),a=r}return a}(e),n.createPattern(r,"repeat")},_d.imageFill=function(e,t){Md(e.name,e,t)},tn.canvas_patterns=_d,gt.canvas=function(){var t;function a(e,O){e.each(function(){if(t){var h=t.properties,f=h.rp.chartObj,p=f.labelHolderContext;if(!za(p))return!1;if(Ms(h.dataLabels,f)){var g=Ls(h.dataLabels,f),v=Rs(g.hook),y=h.dataUpdate,m=h.rotation||0,b=zs(h.dataLabels,f),x=ir(g.radius),C=za(g.strokeWidth)?+g.strokeWidth:1,k=on(g.dashStyle,C),w=ln(g.lineCap,g.dashStyle),S=Je();t.forEach(function(e){e.forEach(function(e,t){if(js(e)){var a=e.xy||[e.X,e.Y],r=a[0],n=a[1],i=void 0!==e.actualDY?e.actualDY:parseFloat(e.DY)||0,o=e.height,l=e.width,s=Es(g.strokeColor,h,f,y,O);"function"==typeof s&&(s=s(y&&y[t],t));var c=Es(g.fillColor,h,f,y,O);if("function"==typeof c&&(c=c(y&&y[t],t)),p.save(),za(m)&&0!==m){var u=0,d=0;u=f.axes.rotated?-1*i*o:(d=("middle"===e.ANCHOR?l/2:"end"===e.ANCHOR?-l:0)+b,-S.domain([-.3,.9]).range([o,0])(i)-b),p.translate(r+u,n+d),p.rotate(rc.getRadianAngle(m))}else r=("middle"===e.ANCHOR?r-l/2:"end"===e.ANCHOR?r-l:r)-b,n=n-S.domain([-.3,1]).range([o,0])(i)-b,p.translate(r,n);p.fillStyle=Mn(c,g.fillOpacity),p.strokeStyle=Mn(s,g.strokeOpacity),p.lineWidth=C,k&&za(p.setLineDash)&&(p.setLineDash(k),p.lineCap=w),p.beginPath(),p.translate(-r,-n),rc.boundBoxWithHook(p,xc(r,n,l,o,x,b,e.hookPosition,v,e.adjustVal)),p.fill(),p.stroke(),p.closePath(),p.restore()}})})}}})}return a.args=function(e){return arguments.length?(t=e,a):t},a};function zd(e,t){var a="normal";return(t&&t["font-style"]||e["font-style"]||a)+" "+a+" "+(t&&t["font-weight"]||e["font-weight"]||a)+" "+(t&&t["font-size"]||e["font-size"])+" "+(t&&t["font-family"]||e["font-family"])}function Dd(e){var t=xn("text","#zc-text-dummy",[1],o("div.__baseZC_Container__ > svg.svgPattern"));t.html("qtyplkjhgfd"),fn(t,e);var a=ba(t).height;return t.remove(),a}ft.canvasUtils=function(){},ft.canvasUtils.align=function(e){switch(e.toLocaleLowerCase()){case"start":return Zo;case"middle":return Xo;case"end":return Qo}},ft.canvasUtils.parseTextShadow=function(e){if(e=e&&e.trim())return e.split(/\s+/).map(function(e){var t=ja(e);return isNaN(t)?e:t})},ft.canvasUtils.addTextShadow=function(e,t){za(t)&&(e.shadowOffsetX=t[0],e.shadowOffsetY=t[1],e.shadowBlur=t[2],e.shadowColor=t[3])},ft.canvasUtils.createText=function(e,t,a,r,n,i,o){var l=rc.rgba(r||i.color,Ea(i&&i["fill-opacity"],1)),s=i.stroke,c=t||"";o=o||[0,0],e.font=a,e.fillStyle=l,0<i["stroke-width"]&&("contrast"===i.stroke&&(s=Ga(l)),e.strokeStyle=s,e.lineWidth=i["stroke-width"],e.strokeText(c,o[0],o[1])),ft.canvasUtils.addTextShadow(e,n),e.fillText(c,o[0],o[1])};var Id=ft.canvasUtils;ft.canvas=function(h,e,f,t){if(e){var a="stacklabel"===(t=t||"label"),p=t===Ol||t===Al,g=e.properties,v=g.rotation,y=g.dataLabels,r=za(f)?h.renderer[f]:null,m=Pn.isQuantileColorScale(h),b=h.chartTypes[0].value==Ne.treemap,x=rc.getFontStyles(h,g.dataLabels,g.color,null,f,a),C=parseFloat(x["font-size"]),k=Id,w=h.labelHolderContext,S=zd(x),O=k.parseTextShadow(x["text-shadow"]);e.forEach(function(e,t){var d=r&&r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[t]:null;e.forEach(function(t,e){w.save();var a,r,n,i,o=t.xy||[t.X,t.Y],l=t.display,s=$t;if(m||g.rp.threshold||h.dataObject.isHierarchy||!(h.isAxisCategory||h.dataObject.isPolarAxisCategory||h.dataObject.isNonAxisMultiSeriesCategory)||g.multiColoring){var c=b&&p?g.dataUpdate[e]:d&&d[e],u=Hn(h,g.multiColoring?e:f,c&&c.data?c.data:c,f);b&&p&&/(top-outset|bottom-outset)/.test(y.position)&&Pe(u).opacity<.1&&(u="white"),s=Fs(h.systemConf,u,y,h)}!0===l&&(a=o[0],r=o[1],n=t.customHTML?0:parseFloat(t.DY||0),i=t.height,n=(t.tspanInfo||1===n?C:i)*n,za(v)&&0!==v?(h.axes.rotated&&(n*=-1),w.translate(a+n,r),w.rotate(rc.getRadianAngle(v))):w.translate(a,r+n),za(t.ANCHOR)&&(w.textAlign=k.align(t.ANCHOR)),t.customHTML?t.customHTML.forEach(function(e){!function(e,t,a,r,n,i,o,l){var s=Id,c=a.xy||[a.X,a.Y],u=r.bb,d=r.node;switch(r.nodeName){case"image":var h=+(m=qe(d)).attr("x")||0,f=+m.attr("y")||0,p=+m.attr("width")||0,g=+m.attr("height")||0,v=m.attr("href")||m.attr("xlink:href"),y=new Image;y.onload=function(){t.drawImage(y,c[0]+h,c[1]+f,p,g)},y.src=v;break;case"rect":h=+(m=qe(d)).attr("x")||0,f=+m.attr("y")||0,p=+m.attr("width")||0,g=+m.attr("height")||0;var m,b=+m.attr("rx")||0;t.fillStyle=m.style("fill"),t.strokeStyle=m.style("stroke"),t.lineWidth=m.style("stroke-width"),t.beginPath(),rc.roundedRect(t,h,f,p,g,e.dataObject.getTransRectValue("radius",$t,$t,$t,$t,b)),t.fill(),t.stroke(),t.closePath();break;case"text":case"tspan":var x,C,k=d.style;k&&(x=zd(n,k),C=k.fill),t.translate(u.x,u.y+.77*u.height),t.textAlign=s.align("start"),s.createText(t,d.textContent,x||i,C||l||n.color,o,n),t.translate(-u.x,-u.y-.77*u.height)}}(h,w,t,e,x,S,O,s)}):t.tspanInfo?t.tspanInfo.forEach(function(e){var t,a,r,n=e.style;n&&(t=zd(x,n),r=n.fill,a=parseFloat(n["font-size"])),k.createText(w,e.text,t||S,r||s||x.color,O,x,[e.dx||0,(a||C)*e.dy])}):k.createText(w,t.text,S,s||x.color,O,x),w.restore())})})}};function Rd(){}Rd.chalk=function(e,t,a,r,n,i,o){var l=o.select("defs").append("filter").attrs({id:t,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return l.append("feTurbulence").attrs({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"turbulence"}),l.append("feOffset").attrs({result:"result2",dx:-2,dy:-2}),l.append("feDisplacementMap").attrs({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R",in:"SourceGraphic"}),t},Rd.dropShadow=function(e,t,a,r,n,i,o){var l=o.select("defs").append("filter").attrs({x:e.x,y:e.y,width:e.width,height:e.height,id:t,filterUnits:e.filterUnits});if(l.append("feGaussianBlur").attrs({in:e.source||"SourceAlpha",stdDeviation:e.blur}),"SourceGraphic"!==e.source){l.append("feOffset").attrs({dx:e.dx,dy:e.dy,result:"offsetblur"});var s=e.color,c=null,u=s&&s.match(mt);u&&5===u.length&&(s=Ln(s),c=u[4]),l.append("feFlood").attrs({"flood-color":s,"flood-opacity":c}),l.append("feComposite").attrs({in2:"offsetblur",operator:"in"});var d=l.append("feMerge");d.append("feMergeNode"),d.append("feMergeNode").attr("in","SourceGraphic")}return t},Rd.colorMatrix=function(e,t,a,r,n,i,o){o.select("defs").append("filter").attr("id",t).append("feColorMatrix").attrs({in:"SourceGraphic",type:e.type,values:e.values});return t},Rd.freeHand=function(e,t,a,r,n,i,o){var l=o,s=(null==e.scale||e.scale,l.select("defs").append("filter").attr("id",t));s.append("feTurbulence").attrs({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),s.append("feDisplacementMap").attrs({xChannelSelector:"R",yChannelSelector:"G",in:"SourceGraphic",in2:"turbulence_3",scale:e.scale});return t},tn.svg_filters=Rd;function jd(){}function Hd(e,t,a,r){for(var n=Od(0,t,a,r),i=0;i<n.offset.length;i++)e.append("stop").attr("offset",n.offset[i]).styles({"stop-color":n.color[i],"stop-opacity":n.opacity[i]})}jd.get=function(e,t,a,r,n,i){var o=e.type;if(o&&o!==Qt){var l=n?n.plot.renderer.mode:"svg",s=e.options[o]||e.options,c=xa(s);switch(c.color=null!=t?t:c.color,c.dimension=null!=a?a:c.dimension,c.defsLocation=n?n.defsLocation:"",c.id=n.id,l){case"canvas":return c.pointOpacity=i||1,Ad.create(n.context,o,c,r);default:return tn.get(jd,o,c,{offset:r,chartObj:n})}}},jd.svgGradientFill=function(e,t,a,r,n,i,o){return e&&e.type?jd[e.type](e,t,a,r,n,i,o):null},jd.radial=function(e,t,a,r,n,i,o){var l=o,s=e.color,c=e.dimension,u=e.spreadMethod,d=Ba(c)?za(c[2])?c[2]:c[0]:c.r,h=+e.x||0,f=+e.y||0,p=+e.radius||0,g=Je().domain([0,100]),v=l.select("defs").append("radialGradient").attrs({id:t,gradientUnits:e.gradientUnits||"userSpaceOnUse",spreadMethod:u});if("objectBoundingBox"===e.gradientUnits)v.attrs({cx:h+"%",cy:f+"%",r:p+"%"});else{var y=Ba(c)?d:c.x2-c.x1,m=Ba(c)?d:c.y2-c.y1,b=g.copy().range([0,y]),x=g.copy().range([0,m]),C=g.copy().range([0,d]);v.attrs({cx:b(h),cy:x(f),r:"repeat"!==u&&"reflect"!==u||!Xr.IS_IOS&&!Xr.SAFARI?C(p):d})}return Hd(v,e,s,"radial"),t},jd.linear=function(e,t,a,r,n,i,o){var l,s,c,u,d=o,h=e.color,f=e.dimension,p=e.spreadMethod,g=+e.x1||0,v=+e.x2||0,y=+e.y1||0,m=+e.y2||0,b="repeat"!==p&&"reflect"!==p||!Xr.IS_IOS&&!Xr.SAFARI?100:Mt(Dt(v-g),Dt(m-y));u=Ba(f)?(s=f[l=0],c=0,f[1]):(l=f.x1||0,s=f.x2||0,c=f.y1||0,f.y2||0),/(pie|dial|bubblepie)/.test(a)&&(l=-s,c=-u);var x=Je().domain([0,100]).range([l,s]),C=Je().domain([0,100]).range([c,u]);g=100*g/b,v=100*v/b,y=100*y/b,m=100*m/b;var k=d.select("defs").append("linearGradient").attrs({id:t,gradientUnits:e.gradientUnits,spreadMethod:p});return"userSpaceOnUse"==e.gradientUnits?k.attrs({x1:x(g),x2:x(v),y1:C(y),y2:C(m)}):k.attrs({x1:g+"%",x2:v+"%",y1:y+"%",y2:m+"%"}),Hd(k,e,h,"linear"),t},jd.thresholdLinear=function(e,t,a,r,n,i,o){return sn(o.select("defs").append("linearGradient").attrs({id:t,gradientUnits:"userSpaceOnUse",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),"stop",a,".","class","stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}),t},tn.svg_gradients=jd;function Bd(){}function Fd(e,t,a,r,n){return{_x:n?t:e,_y:n?e:t,_width:n?r:a,_height:n?a:r}}function Wd(e,t,a,r){this.chart=e,this.barOptions=t,this.scale={x:a,y:r},this.barOptions=t,this.axesRotated=e.axes.rotated,this.cache=$()}function Vd(){return[]}Bd.imageFill=function(e,t,a,r,n,i,o){var l=e.width,s=e.height;return o.select("defs").append("pattern").attrs({patternUnits:"userSpaceOnUse",id:t,width:l,height:s,x:e.x||0,y:e.y||0}).append("image").attrs({"xlink:href":e.name,x:0,y:0,width:l,height:s}),t},Bd.svgPatternFill=function(e,t,a,r,n,i,o,l){var s;if(s=null!=e.ele?function(e,t,a,r,n){var i=n,o=t.bgClr||t.bgClr_base,l=Ta(e,o);t.ele=l.replace(/\{\{clr\}\}/g,o);var s,c=i.select("defs").append("pattern").attrs({patternUnits:r||"userSpaceOnUse",id:a,x:t.x||0,y:t.y||0}).html(t.ele);Xr.FIREFOX?i.append("g").html(t.ele).each(function(){s=ba(this)}).remove():s=ba(c.node().firstChild);var u=s.width,d=s.height;return c.attrs({width:u,height:d}),{node:c,w:u,h:d,id:a}}(e.ele,e,t,l,o):function(e,t,a,r){var n=r,i=e.bgClr||e.bgClr_base,o=e.stroke||e.stroke_base,l=/\{\{([a-z]+)\}\}/,s=(e.type||"").split(","),c=s.length,u=(e.size||"").split(","),d=(e.strokeWidth||"").split(","),h=i.split(","),f=o.split(","),p=(e.fillOpacity||"").split(","),g=(e.strokeOpacity||"").split(","),v=e.translate?/\[.*?\]/g.test(e.translate)?JSON.parse(e.translate):e.translate.split(","):null;u=e.width?rn(e,u):u;for(var y=n.select("defs").append("pattern").attrs({id:t,patternUnits:a||"userSpaceOnUse",width:u[0],height:u[0],x:e.x||0,y:e.y||0}),m=0;m<c;m++){var b=Ji(s[m])(u[m]||u[0]),x=Da(f[m]||f[0])?e.stroke_base:"static"==(f[m]||f[0])?e.customStaticClr:f[m]||f[0],C=Da(h[m]||h[0])?e.bgClr_base:"static"==(h[m]||h[0])?e.customStaticClr:h[m]||h[0],k=(u[m]||u[0])/2,w=[k,k];if(x=l.test(x)?zn(e.stroke_base,1,x.replace(l,"$1"),_):x,C=l.test(C)?zn(e.bgClr_base,1,C.replace(l,"$1"),_):C,v){var S=v[m]||v[0];if(Ba(S))w=[k+parseFloat(S[0]),k+parseFloat(S[1])];else{var O=k+parseFloat(S);w=[O,O]}}y.append("path").attrs({transform:"translate("+w[0]+","+w[1]+")",d:b,stroke:x,fill:C,"stroke-width":d[m]||d[0],"stroke-opacity":g[m]||g[0],"fill-opacity":p[m]||p[0]})}return{node:y,w:u[0],h:u[0],id:t}}(e,t,l,o),r){var c="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+s.w+"' height='"+s.h+"'>"+(new XMLSerializer).serializeToString(s.node.node())+"<path d='"+Ji("square")(zt(s.w,s.h))+"' transform='translate("+s.w/2+","+s.h/2+")' style='fill: url(#"+s.id+")'></path> </svg>";return{url:Xr.FIREFOX||n?"data:image/svg+xml;base64,"+ia(c):"data:image/svg+xml;utf8,"+c,node:s.node,w:s.w,h:s.h,id:s.id}}return s},tn.svg_patterns=Bd,Wd.prototype.getCurrentPoint=function(e,t){for(var a,r=this.getCurrentRectangles(t),n=r.length;n--;)if(a=r[n],So(e.x,e.y,a))return a;return null},Wd.prototype.getCurrentRectangles=function(e){if(e.isDummy)return[];var t=this.chart,a=t.dataset.getX(e);if(this.cache.has(a))return this.cache.get(a);var r,n,i,o,l=this.scale.y,s=this.scale.x,c=t.systemConf.chart.plot.plotoptions.bullet.levelMarker,u=t.systemConf.chart.plot.plotoptions.bullet.targetMarker,d=this.barOptions,h=s(a)+d.levelMarkerPadding,f=s.bandwidth(),p=zt(c.maxBandWidth,f),g=t.dataset.getDataType("y",0),v=[],y=e[c.dataindex]||[],m=this.axesRotated,b=s.domain().indexOf(a),x=null;Ba(y)||(y=[y]);var C=y.slice(0);if(g===On){var k=t.dataset.getColumn("y",0);i=za(k.time)?k.time:null}C.push(0),C=C.map(function(e){return g===On?Vl(e,0,i).getTime():e});var w,S=(C=m?C.sort(ge):C.sort(T)).map(function(e){return l(e)});for(C.splice(C.indexOf(0),1),w=(o=S.length-1)-1;o--;)0<(n=S[o+1]-S[o])&&(r=S[o]),r=S[o],0<n&&((x=Fd(h,r,p,n,m)).currentStage=C[o],x.type="levelMarker",x.data=e,x.rangeIndex=w-o,x.itemIndex=b,x.seriesIndex=e.seriesIndex,x.events=c.events,x.chartType=t.chartTypes[0],x._defaultH=Vd,x._visible=!0,x._key="levelMarker_"+e.seriesIndex+"_"+b+"_"+x.rangeIndex,v.push(x));if(!0===u.enabled){p=qa(u.size,d.levelMarkerWidth-2*qa(u.padding,d.padding/2)),za(u.size)&&(p=10*zt(p,f/10)),n="line"===u.symbol?Mt(qa(u.outerStrokeWidth,u.innerStrokeWidth,0)):p;var O=e[u.dataindex];h=s(t.dataset.getX(e))-0,r=l(O)-0,h+=(f-p)/2,r-=n/2,n<5&&(n=5,r-=2.5);var A=(u.events||{}).triggerOffset||0;(x=Fd(h-=A/2,r-=A/2,p+=A+0,n+=A+0,m)).type="marker",x.data=e,x.currentStage=O,x.itemIndex=b,x.seriesIndex=e.seriesIndex,x.targetIndex=0,x.events=u.events,x.chartType=t.chartTypes[0],x._defaultH=Vd,x._key="targetMarker_"+e.seriesIndex+"_"+b+"_"+O,v.push(x),x._visible=!0}return this.cache.set(a,v),v},Wd.prototype.getTooltipContent=function(e,t){var a=this.chart,r=a.systemConf.chart.plot.plotoptions.bullet,n=wo(a,r.levelMarker),i=wo(a,r.targetMarker),o=Va(r,"levelMarker.events")||{},l=Va(r,"targetMarker.events")||{},s=("marker"===this.type?i:n)||a.dataset.getColumn("y",0),c=e.currentStage,u=s.datatype,d=a.dataset.getMetaInfoObj(a,e.data,t),h=Hl(s[u],c,u,a,"tooltip"),f={value:c,formattedValue:h,actualData:e.data,data:d};return"marker"===e.type?Ta(l.tooltipContent,f,a,"tooltip")||"Target: "+h:Ta(o.tooltipContent,f,a,"tooltip")||"Range: "+h},ue.BulletEvent=Wd,no.prototype.flattenData=function(e){var n=this,b=n.chartObj,i=za(e),x=b.seriesdata,t=e||b.seriesdata,o=this.flattenPoints=this.flattenPoints||$(),l=no.helpers,s=n.globalChartType,c=(n.isCombinationalChart,ws.hasSharedSeries(b)),C=b.systemConf.chart.axes.xaxis.reversed;if(Ka(t,function(a,e){var d=i?a.seriesindex:e,h=b.chartTypes[d].name,f="bubblepie"==h?b.renderer[b.bubblePieRendererIndex]:b.renderer[d],t=(so(b.chartTypes[d].value),function(e,t){return"charttype"==t?e:getSearchMode(e,c||n.noofBarEnabledSeries)}(function(e,t,a){var r=(t.commonRendererProp().params.markerOptions||{}).symbol;return"line"==r||"vertical-line"==r?"segment":a}(0,f,h),"charttype")),p=o.get(t)||{},g=l.getParsedYAxisOrder(a.yaxiscolumnorder),r=l.getChartType(a.type||s,An),v=n.isstacked(r),y=f.getHighlighter(b,d),m=a.data;Ka(m,function(o,e){var l=i?a.subseriesindex:e,t=d+"_"+l,s=p[t]||[],c=i?s[s.length-1].itemIndex+1:0,u=0;Ka(o,function(e,t){var a=c++,r=a;H();C&&(r=o.length-1-r);var n=Nd(b,f,g,v,e,d,l,a,r,u++);if(n.subseriesLength=m.length,s.push(n),y.levelmarker&&!p["lm_"+n._xid]){var i=y.levelmarker(n);p[b.id+"_lm_"+n._xid]=i,p[b.id+"_lm_"+n._xid].disabled=function(){return x[d].disabled||Yd(x[d],h,b)}}}),p[t]=s,p[t].disabled=function(){return x[d].disabled||Yd(x[d],h,b)}}),o.set(t,p)}),b.cache.thresholdCustomPoints)for(var a in b.cache.thresholdCustomPoints){var r=a;o.get(r)?o.set(r,o.concat(b.cache.thresholdCustomPoints[a])):o.set(r,b.cache.thresholdCustomPoints[a])}},no.prototype.getFlattenedSeriesData=function(e){var t=this.chartObj,a=t.chartTypes[e.seriesIndex].name;return t.dataObject.flattenPoints.get(a)[e.seriesIndex+"_"+e.subSeriesIndex]},no.prototype.removeFlattenData=function(e){var t=this.getFlattenedSeriesData(e),a=e.itemIndex;t.splice(a,1);for(var r=a;r<t.length-1;r++)t[r].itemIndex=a++};var Nd=function(e,t,a,r,n,i,o,l,s){return n.seriesIndex=i,n.subSeriesIndex=o,n.itemIndex=l,n.sortedItemIndex=s,n.yaxisOrder=a,n._data=function(e,t,a){return t.highlighter.data(a)}(0,t,n),n._key=e.id+"_"+i+"_"+o+"_"+l,n._xid=e.dataset.getActualX(n),n};function Yd(e,t,a){var r=e.plotoptions,n=a.systemConf.chart.plot.plotoptions[t];return e.disabled||0==Ea(oo(r,n,a,"enabled"),!0)}var Gd=(_createClass(Ud,[{key:"add",value:function(e){this.selectionSet.length?(this.mergedSelectionSet=this.intersection(e,this.selectionSet,3),this.oldSelectionSet=this.difference(this.selectionSet,this.mergedSelectionSet,2),this.newSelectionSet=this.difference(e,this.mergedSelectionSet,1)):e.length&&(this.newSelectionSet=e,this.updateID(this.newSelectionSet,1)),this.selectionSet=e,this.selectedEvent=this.eventManager.eventType}},{key:"remove",value:function(){this.updateID(this.mergedSelectionSet,null),this.mergedSelectionSet=[],this.oldSelectionSet=[].concat(_toConsumableArray(this.selectionSet)),this.selectionSet=[]}},{key:"updateID",value:function(e,t){e.forEach(function(e){e.selected=t})}},{key:"difference",value:function(e,a,t){var r=[];return a.length?e.forEach(function(t){a.forEach(function(e){t._key==e._key&&3!=e.selected&&r.push(t)})}):r=e,this.updateID(r,t),r}},{key:"intersection",value:function(e,a,t){if(this.eventManager.eventType!=this.selectedEvent)return[];var r=[];return e.forEach(function(t){a.forEach(function(e){!t._key||t._key!=e._key||1!=e.selected&&3!=e.selected||r.push(t)})}),this.updateID(r,t),r}}]),Ud);function Ud(e,t){_classCallCheck(this,Ud),this.chart=e,this.eventManager=t,this.nearest=null,this.selectedEvent=null,this.selectionSet=[],this.newSelectionSet=[],this.oldSelectionSet=[],this.mergedSelectionSet=[],this.rejectionSet=[],this.oldSelectionSet=[],this.oldRejectionSet=[]}var Xd=(_createClass(Zd,[{key:"init",value:function(){this.selectionManager=new Gd(this.chart,this)}},{key:"bindTo",value:function(e){this.tracker=e}},{key:"attachListeners",value:function(e,t,a,r,n){Mo(e,t,a,r,n)}},{key:"dataFinder",value:function(e){return e&&(this.dataGenerators=e),this.dataGenerators}},{key:"getData",value:function(e,t){var a=this.dataFinder()[e].call(this,t,e);return this.updateSelectionManager(a),this.selectionManager}},{key:"updateSelectionManager",value:function(e){e.nearby?this.selectionManager.add(e.nearby):e.nearest?this.selectionManager.add([e.nearest]):this.selectionManager.remove(),this.selectionManager.nearest=e.nearest}},{key:"associateBehaviours",value:function(e,r,n){var i,o=this;this.getbehaviour(e,r).forEach(function(e){var t=function(e,t){return za(e)?"function"==typeof e?e.call(t):e:null}(e.allowifcustom,o);if("custom"==e.type){i=!0;var a=e.action;Ta(a.callback,o.targetEvent,a.args,o.chart)}else o.targetEvent.allowDefault||e.allowDefault?i&&t||e.action().call(o,n,r):i&&t?e.action().call(o,n,r):i||t||e.action().call(o,n,r)})}},{key:"getbehaviour",value:function(e,t){var a=[],r=(t.nearest,this.defaultBehaviour[e]),n=this.customBehaviour(t,e);return a=za(n)?(a=a.concat(n)).concat(r):a.concat(r)}},{key:"isDefaultAllowed",value:function(e,t){return!za(e)||e&&!0===t.allowDefault}}]),Zd);function Zd(e,t){_classCallCheck(this,Zd),this.chart=e,this.data=t,this.selectionManager,this.handlers={},this.dataGenerators={},this.defaultBehaviour={},this.customBehaviour={},this.targetEvent=null}var Qd=H(["line","scatter","bubble","bubblepie","threshold","threshold-marker","segment"]),qd=H(["area","arearange","web"]),Kd=H(["bar","bullet","gantt","heatmap","waterfall","boxplot"]),$d=H(["threshold"]),Jd=H(["line","scatter","threshold"]),eh=H(["bubble"]),th=H(["bubblepie"]),ah=H(["bar","bullet","gantt","heatmap","waterfall"]),rh=H(["boxplot"]),nh=H(["segment"]);function ih(e,t){return t&&!$d.has(e)?"bisect":qd.has(e)?"POLY":Qd.has(e)?"QUADTREE":Kd.has(e)?"BISECT":void 0}function oh(e,t,a,r,n){this.size=t,this.radius=a,this.sizeOffset=n,this.tree=c.quadtree().x(function(e){var t=e._data();return t._visible&&t._x}).y(function(e){var t=e._data();return t._visible&&t._y}).size(function(e){return e._data()._size}).extent([[0,0],r]).addAll(e)}function lh(e){this.data=e,this.getPoly=function(e){return e._polydata().points}}function sh(e,t){this.data=e,this.type=t,this.bisector="continous"==t?this.continousBisect():this.discreteBisect()}oh.prototype.find=function(e){return this.size?this.tree.findAll(e[0],e[1],this.radius,this.sizeOffset).points:this.tree.find(e[0],e[1],this.radius)},lh.prototype.find=function(r){var n=this,i=[];return this.data.map(function(e,t){if(e._data()._visible){var a=n.getPoly(e);ne(a,[r.x,r.y])?i.push(e):1==a.length&&e._defined&&i.push(e)}}),i};var ch=sh.prototype;function uh(e,t){return Dt(e.x-t._data()._x)}function dh(e,t,a,r){if(e._data)return e;var n=a.eventHandler.dataAccesor(),i=Ne[n.bestChartType(r)],o=n.radius(r),l=lt.bubble.has(i)||lt.bubblePie.has(i)||"segment"==r,s=a.systemConf.chart.plot.plotoptions[r],c=s&&s.events&&s.events.triggerOffset||10,u=new oh(e,l,o,[a.plotarea.width,a.plotarea.height],c),d=Po();return u.find([t[d[0]],t[d[1]]])}function hh(e,i,t,a){var r,n,o=t.cache.search.bisect?dh(e,i,t,a):e,l=t.dataObject,s=t.plotarea,c=l.isCombinationalChart;if(o){var u=o.map(function(e){var t=e._data(),a=t._size/2,r={x:t._x,y:t._y},n=function(e,t,a,r){return Rt((e-a)*(e-a)+(t-r)*(t-r))}(i.x,i.y,r.x,r.y);if(So(r.x,r.y,{x:0,y:0,width:s.width,height:s.height}))return{radius:a,bubbleDistance:n-a,pointDistance:n,over:n-a<=0,point:e}}).filter(function(e){return za(e)});if(1===u.length)(!c||c&&u[0].over)&&(r=u[0].point);else if(1<u.length)if(1===(n=u.filter(function(e){return e.over})).length)r=n[0].point;else if(1<n.length){r=n.slice(0).sort(function(e,t){return ge(e.radius,t.radius)})[0].point}else{r=u.slice(0).sort(function(e,t){return ge(e.bubbleDistance,t.bubbleDistance)})[0].point}return r}}function fh(e,r){var t=e.map(function(e,t){var a=e._data();return[So(r.x,r.y,{x:a._x,y:a._y,width:a._width,height:a._height})?0:1,a]}).filter(function(e){if(0==e[0])return e});if(1<t.length){var n={marker:0,levelMarker:2};return t.sort(function(e,t){var a=n[e[1].type]||1,r=n[t[1].type]||1;return a==r?-1:ge(a,r)})[0][1]}return t.length?t[0][1]:$t}function ph(e,t){var a,r,n,i,o,l,s=[],c=za(t.counter)?t.counter:t.itemIndex,u=0==c,d=c==e.length-1,h=[0,0],f=t._data(),p=u?h:e[c-1]._data(),g=d?h:e[c+1]._data(),v=!f._defined,y=u||!p._defined,m=d||!g._defined;r=v?h:gh(f),a=u?h:y?r:gh(p),n=d?h:m?r:gh(g),o=v?h:vh(f),i=u?h:y?o:vh(p),l=d?h:m?o:vh(g);var b=u?h:y?r:yh(a,r),x=d?h:m?r:yh(n,r),C=u?h:y?o:yh(i,o),k=d?h:m?o:yh(l,o);y&&m?s.push(r):u||y?s.push(r,x,k,o):d||m?s.push(b,r,o,C):s.push(b,r,x,k,o,C);return{points:s,prevCur:b,curNext:x,curpt:r}}function gh(e){return[e._x,e._y]}function vh(e){return[e._x0,e._y0]}function yh(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function mh(e,t,a){return Rt(function(e,t,a){var r=xh(t,a);if(0===r)return xh(e,t);var n=((e[0]-t[0])*(a[0]-t[0])+(e[1]-t[1])*(a[1]-t[1]))/r;if(n<0)return xh(e,t);if(1<n)return xh(e,a);return xh(e,[t[0]+n*(a[0]-t[0]),t[1]+n*(a[1]-t[1])])}(e,t,a))}function bh(e){return e*e}function xh(e,t){return bh(e[0]-t[0])+bh(e[1]-t[1])}function Ch(e,t){return this.chart=e,this.renderer=t,this}ch.find=function(t,a){var r=this,n=[],i=this.data.map(function(e){return r.bisector.call(r,e,t,a)}),o=this.bisectValue(i,a);return this.data.map(function(t,e){if(i[e])return i[e].map(function(e){t[e]&&t[e]._data()._visible&&function(e){return"discrete"==r.type||o==e._x}(t[e])&&n.push(t[e])})}),n},ch.continousBisect=function(){var o=u(function(e){return e._data()._uid}).left,l=this.discreteBisect;return function(e,t,a){var r=o(e,t,0,e.length-1);if(0<r){var n=[r,r-1],i=[uh(a,e[n[0]]),uh(a,e[n[1]])];r=i[0]<=i[1]?n[0]:n[1]}return l()(e,e[r]._uid)}},ch.discreteBisect=function(){return function(n){return function(e,a){var r=[];return e.map(function(e,t){n(e)==a&&r.push(t)}),r}}(function(e){return e._data()._uid})},ch.bisectValue=function(a,r){var n=void 0,i=void 0,o=void 0;this.type;return this.data.map(function(t,e){if(a[e])return a[e].map(function(e){t[e]&&t[e]._data()._visible&&((i=uh(r,t[e]))<o||null==o)&&(n=t[e]._x,o=i)})}),n};var kh=Ch.prototype;function wh(e,t){this.chart=e,this.renderer=t}function Sh(e,t){var a=this.chart.legendHighlight,r=e.seriesIndex,n=this.chart.chartTypes[r].name,i=(n=so(this.chart.chartTypes[r].value)?"bar":n,a.getLegendHighlightEffect(e.seriesIndex,"selectedSeries","plot")),o=a.getLegendHighlightEffect(e.seriesIndex,"unselectedSeries","plot"),l=this.options(e).color,s={};if(i==Qt)s.fill=l;else{var c={};c.fill=bt.test(i)||xt.test(o)?l:qt,c.stroke=l,t="inherit"==t?l:c.fill,s=a.getEffect(i,n,t,c,r,"plot")}return s}function Oh(e,t){return this.chart=e,this.renderer=t,this}kh._defaultH=function(){return[{shape:"marker",data:kh.data,path:this.path,context:this.renderingContext,translate:this.translateContext}]},kh.data=function(t){var a=this.renderer.commonRendererProp().params,r=this.chart,n=this.renderer;return function(){r.cache.data[t._key]||(r.cache.data[t._key]={});var e=r.cache.data[t._key];return e._x=t._x=e._x||r.dataObject.getXYvalue(a.axisrotated,a.stacked,a.xscale,a.yscale,a.yaxiscolumnorder,t,"x"),e._y=t._y=e._y||r.dataObject.getXYvalue(a.axisrotated,a.stacked,a.xscale,a.yscale,a.yaxiscolumnorder,t,"y"),e._size=t._size=e._size||n.getSymbolSize(t),e._visible=t._visible=Ao(r,t),e._uid=t._uid=r.dataset.getX(t),e._point=t}},kh.commonOptions=function(e){this.chart;var t=this.renderer.commonRendererProp().params,a=t.markerOptions||{},r=t.hoverOptions||{},n=null!=r.size?1:a.size;return{options:r,symbol:r.symbol||a.symbol,_size:n,color:Hn(this.chart,Wn(t.commonPlotOptions,this.chart)?e.sortedItemIndex:e.seriesIndex,e,e.seriesIndex),size:{outer:n,inner:n}}},kh.options=function(e){var t=this.commonOptions(e),a=t.symbol,r=t._size||1,n=$i.has(a)?1:2,i=$i.has(a)?.5:1;return t.size={outer:r*n,inner:r*i},t},kh.renderingContext=function(){return Iu.get("scatter").call(this,this.chart)},kh.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},kh.path=function(e,t){var a=this.options(e),r=(a.options,t.context.call(this)),n=t.translate.call(this),i=sn(r,"g",[1],".","class","highlight"+e.seriesIndex+e.itemIndex+t.type||"_"),o=this.chart.legendHighlight.getLegendHighlightEffect(e.seriesIndex,"selectedSeries","plot"),l=ll.hasPatternPallete(this.chart)&&"strokeEnlarge"!==o,s="end"==t.type?[e._x,e._y0]:[e._x,e._y];if(eo(i,null,l?{symbol:a.symbol}:a.options,{color:l?null:a.color,symbolSize:{inner:a.size.inner,outer:a.size.outer},symbol:a.symbol,transform:s,imageSize:15},this.chart),l){var c=o===Qt?{fill:qt}:this.chart.legendHighlight.getEffect(o,"scatter",bt.test(o)?a.color:qt,{fill:qt,stroke:a.color},e.seriesIndex,"plot");i.styles(c)}return r.style("display",""),r.attr("transform","translate("+n[0]+","+n[1]+")"),i},Ja(wh,Ch),wh.prototype.options=function(e){var t=this.renderer.commonRendererProp().params,a=br(this).commonOptions.call(this,e),r=(a.symbol,a._size||t.gvp("strokeWidth"));return a.size={outer:.9*r,inner:.4*r},a},Ja(Oh,Ch);var Ah=Oh.prototype;function Ph(e,t){this.chart=e,this.renderer=t}function Th(e,t){this.chart=e,this.renderer=t}function _h(e,t,a,r){var n=is.getKey(r,t,e),i=e.subrenderer[a][n];return i?{start:i.data[t].startAngle,end:i.data[t].endAngle}:null}function Eh(e,i,o,t){var a,r=hh(e,i,o,t),l=null;if(r){if("bubblepie"!=(r.type||o.chartTypes[r.seriesIndex].name))return r;if(r._uid,t=is.getKey(r,r.seriesIndex,o),!(a=o.subrenderer[r.subSeriesIndex][t]))return!1;if(a.data.some(function(e){if(e.data.disabled||e.data.dummy)return!1;var t=e.data,a=_h(o,t.seriesIndex,t.subSeriesIndex,t),r=Wt(i.x-t._x,-(i.y-t._y)),n=a&&cu(a.start,a.end,r);return n&&(l=t),n}),l&&(!o.hasColorScale||o.hasColorScale&&jn(o.dataset.getClr(l),o)))return l}return null}Ah._defaultH=function(){var t=this,e=[{shape:"marker",path:br(this).path,data:br(this).data,context:br(this).renderingContext,translate:br(this).translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:br(this).translateContext,styles:function(e){return Sh.call(t,e,"inherit")}}];return this.renderer.commonRendererProp().params.isRangeChart&&e.push({shape:"marker",path:br(this).path,data:br(this).data,context:br(this).renderingContext,translate:br(this).translateContext,type:"end"}),e},Ah.data=function(a){var e=this.renderer.commonRendererProp().params,r=this.chart,t=this.renderer,n=e.axisrotated,i=t.layout[a.subSeriesIndex],o=n?i.x1():i.x(),l=n?i.y():i.y1(),s=n?i.x0():i.x(),c=n?i.y():i.y0(),u=i.defined();return a._polydata=this.poly(a),function(){r.cache.data[a._key]||(r.cache.data[a._key]={});var e=r.cache.data[a._key],t=za(a.counter)?a.counter:a.itemIndex;return e._x=a._x=e._x||o(a,t),e._y=a._y=e._y||l(a,t),e._x0=a._x0=e._x0||s(a,t),e._y0=a._y0=e._y0||c(a,t),e._uid=a._uid=r.dataset.getX(a),e._defined=a._defined=za(e._defined)?e._defined:u(a),e._visible=a._visible=Ao(r,a),e._point=a}},Ah.poly=function(a){var r=this.chart,n=this.renderer;return function(){r.cache.data[a._key]||(r.cache.data[a._key]={});var e=r.cache.data[a._key],t=n.seriesdataAfterUpdate[a.subSeriesIndex];return e._poly=a._poly=e._poly||ph(t,a),a._poly}},Ah.options=function(e){var t=this.renderer.commonRendererProp().params,a=br(this).commonOptions.call(this,e),r=(a.symbol,a._size||t.gvp("strokeWidth")),n=t.gvp("mode"),i=t.hoverOptions.fillOpacity||.2;return a.size={outer:.9*r,inner:.4*r},a.fillopacity=i,a.interpolation=n,a},Ah.renderingContext=function(){return Iu.get("area").call(this,this.chart)},Ah.path=function(e,t){var a,r=this.options(e),n=this.poly(e)(),i=(this.chart.axes.rotated,t.context.call(this)),o=this.renderer.commonRendererProp().params,l=this.renderer.layout[e.subSeriesIndex];if(l.context($t),i.style("display","").attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),"linear"==r.interpolation){var s=z(n.points);(a=sn(i,"polygon",[n],".","class","highlight"+e.seriesIndex)).attr("points",s.toString()).styles({"fill-opacity":r.fillopacity||.2,display:""})}else{var c=n.points,u=Oe(c,function(e){return e[0]}),d=Ue(c,function(e){return e[0]}),h=Oe(c,function(e){return e[1]}),f=Ue(c,function(e){return e[1]}),p=u,g=0,v=d-u,y=this.chart.plotarea.height;o.axisrotated&&(p=0,g=h,v=this.chart.plotarea.width,y=f-h);var m={name:"rect",id:this.chart.id,x:p,y:g,width:v,height:y},b={chartObj:this.chart},x=tn.get(tn.svg_clips,"rect",m,b);(a=sn(i,"path",[1],".","class","highlight"+e.seriesIndex)).datum(this.renderer.seriesdataAfterUpdate[e.subSeriesIndex]).attr("d",l).attr("stroke","").attr("clip-path","url("+this.chart.defsLocation+"#"+x+")").styles({"fill-opacity":r.fillopacity,display:""})}return a},Ja(Ph,Ch),Ph.prototype.options=function(e){var t=br(this).options.call(this,e);return{options:t.options,color:t.color,symbol:t.symbol,size:{outer:.1*(e._size+mr("2.5%",zt(this.chart.plotarea.width,this.chart.plotarea.height))),inner:e._size/2*.1}}},Ja(Th,Ph),Th.prototype.data=function(n){this.renderer.commonRendererProp().params;var i=this.chart,o=br(this).data.call(this,n);return function(){var e=o(),t=i.dataset.getX(n),a=is.getKey($t,$t,$t,[t,n[1]]),r=i.subrenderer[n.subSeriesIndex][a].data.map(function(e){var t=e.data;_h(i,t.seriesIndex,t.subSeriesIndex,t)});return e._angles=n._angles=r,e._visible=n._visible=Ao(i,n),e._uid=n._uid=i.dataset.getX(n),n}},dt.bubblepie=function(){var t,b;function x(e){return e.each(function(e){var t=b.params,s=t.chartObj,a=t.datasetIndex,r=t.commonPlotOptions,c=t.axisrotated,u=t.stacked,d=t.xscale,h=t.yscale,f=t.yaxiscolumnorder,n=t.labelQueue,i=qe(this),o=e[a].plotoptions;if(ht.saveSeriesdataInRenderer(s,a),a===s.bubblePieRendererIndex){var l=hs(r,o,s,yi).duration,p=(b.params.hoverOptions=o&&o.hoverOptions?ga(r.hoveroptions,o.hoveroptions,!0):r.hoveroptions,s.dataObject.bubblepieData),g=s.subrenderer,v=Ea(r.dataindex,3);if(s.renderVisiblePointsOnly){var y=no.helpers.filterPointsInViewport(s,p[0],"bubblepie","xy",a);p=[y]}var m=sn(i,"g",p?[1]:[],".","class","scatterseries");p&&p.forEach(function(e,l){g[l]=g[l]||{};sn(sn(m,"g",[1],".","class","subseries_"+l),"g",is.filterBySum(e,v),".","class","scatter",$t,function(e){e.reference;return is.getKey($t,$t,$t,[e.x,e.y])}).each(function(e,t){var a=e.reference,r=is.getKey($t,$t,$t,[e.x,e.y]),n=s.dataObject.getXYvalue(c,u,d,h,f,a,"x")||0,i=s.dataObject.getXYvalue(c,u,d,h,f,a,"y")||0,o=s.dataObject.getXYvalue(c,u,d,h,f,a,"z",s.zscale);g[l][r]=(g[l][r]||dt.pie()).commonRendererProp(b).plotarea({width:o,height:o,left:n-o/2,top:i-o/2}),g[l][r].chartRendered=!1,qe(this).attr("transform","translate("+(n-o/2)+","+(i-o/2)+")").call(g[l][r])})}),x.getSymbolSize=function(e){return s.dataObject.getXYvalue(c,u,d,h,f,e,"z",s.zscale)},x.renderedTimer=setTimeout(function(){x.chartRendered=!0;var r=s.seriesdata;r.forEach(function(e,t){if(lt.bubblePie.has(s.chartTypes[t].value)){var a=s.renderer[t];n.push({renderer:a,charttype:fi,chartObj:s,args:[e,t]}),n.push({renderer:a,charttype:"pieInnerLabels",chartObj:s,args:[r,t,p]})}})},l)}else x.chartRendered=!0}),x}return x.getHighlighter=function(e,t){return x.highlighter||(x.highlighter=new Ph(e,x)),x.highlighter},x.commonRendererProp=function(e){return arguments.length?(b=e,x):b},x.shiftInfo=function(e){return arguments.length?(t=e,x):t},x};var Lh=$(),Mh=[qd,ah,rh,Jd,eh,th,nh],zh=["POLY_TYPES","BISECT_NORM_TYPES","BISECT_LEVEL_TYPES","QUADTREE_NORM_TYPES","QUADTREE_SIZE_TYPES","QUADTREE_PIE_TYPES","SEGMENT_TYPES"];function Dh(s,c,u,d){var e=s.keys(),h={},f=[];return e.map(function(e){var t=s.get(e),a=t.superKey||e,r=function(e,t,a){var r=[];for(var n in e)e.hasOwnProperty(n)&&Ha(e[n])&&(t?t(e[n])&&r.push(e[n]):r.push(e[n]),a&&(r=r.slice(a[0],a[1])));return r}(t,function(e){return!e.disabled()},d.spliceIndices()),n=ih(a,u),i=function(e,t,a,r,n){var i=n.chart.cache.search,o=void 0,l=void 0;if("QUADTREE"==r){var s=e[0]instanceof Array?z(e):e,c=n.radius(t),u=n.sizeOffset(t),d=n.extent(),h=n.size(t);a=n.toArray(a),l=i[t+"_"+r]||new oh(s,h,c,d,u),o=l.find(a)}else if("POLY"==r){var f=z(e);l=i[t+"_"+r]||new lh(f),o=l.find(a)}else{var p=n.bisectMode(),g=n.median();l=i[t+"_"+r]||new sh(e,p),o=l.find(g,a)}return i[t+"_"+r]=l,o}(r,e,c,n,d);if(i){f=f.concat(i);var o=function(a){var r;return Mh.some(function(e,t){if(e.has(a))return r=Lh.get(zh[t]),!0}),r}(a)(i,c,d.chart,e),l=ih(a,!1);o&&(Ba(o)&&o.length||Ha(o))&&(h[l]?h[l].push(o):h[l]=[o])}}),{nearest:function(e,n){{if(e&&1==e.length)return e[0];var i={QUADTREE:0,BISECT:1,POLY:2};return e.sort(function(e,t){if(e&&(Ba(e)&&e.length||Ha(e))){var a=ih(Ih(e,n)),r=ih(Ih(t,n));return i[a]-i[r]}})[0]}}(function(e,t,a){var r=[];for(var n in e){var i=e[n];if(1<i.length){var o=Lh.get(n+"_TYPES"),l="QUADTREE"==n?"bubble":"bar",s=o(i,t,a.chart,l,!0);r.push(s)}else r.push(i[0])}return r}(h,c,d),d),nearby:f}}function Ih(e,t){var a=e.seriesIndex;return e.type||t.chart.chartTypes[a].name}Lh.set("POLY_TYPES",function(e,o,l){var s,c,u;return l.renderer,l.dataObject,l.dataset,no.helpers.getParsedYAxisOrder,o=[o.x,o.y],e.map(function(e){var t=e.seriesIndex,a=e.subSeriesIndex,r=e.itemIndex,n=(l.chartTypes[t],l.renderer[t].seriesdataAfterUpdate[a]),i=e._polydata();ne(i.points,o)?((c=0==r?mh(o,i.curpt,i.curNext):r==n.length-1?mh(o,i.prevCur,i.curpt):Oe([mh(o,i.prevCur,i.curpt),mh(o,i.curpt,i.curNext)]))<u||null==u)&&(u=c,s=e):1!=n.length&&1!=i.points.length||!e._defined||((c=xh(o,i.curpt))<=u||null==u)&&c<Oo(l,Ne.line)&&(u=c,s=e)}),s}),Lh.set("BISECT_NORM_TYPES",fh),Lh.set("BISECT_LEVEL_TYPES",function(e,t,a){var r=fh(e.map(function(e,t){return a.renderer[e.seriesIndex].highlighter.box(e)}),t);if(!r)return $t;var n=r._point,i=fh(a.renderer[n.seriesIndex].highlighter.levels(n),t);return i._point.subtype=i.type,i._point}),Lh.set("QUADTREE_NORM_TYPES",dh),Lh.set("QUADTREE_SIZE_TYPES",hh),Lh.set("QUADTREE_PIE_TYPES",Eh),Lh.set("QUADTREE_TYPES",Eh),Lh.set("SEGMENT_TYPES",function(e,n,i,o){var l,s,t=i.cache.search.bisect?dh(e,n,i,o):e;if(t)return t.map(function(e){l=i.eventHandler.dataAccesor().radius(o),n=[n.x,n.y];var t=i.renderer[e.seriesIndex].getSymbolBBox(e),a=function(e,t,a){var r=t.axes.rotated?"y":"x",n=t.axes.rotated?"x":"y",i=a.width/2,o={},l={};return o[r]=e["_"+r]-i,o[n]=e["_"+n],l[r]=e["_"+r]+i,l[n]=e["_"+n],[[o.x,o.y],[l.x,l.y]]}(e,i,t),r=mh(n,a[0],a[1]);(r<l||null==l)&&(l=r,s=e)}),s});var Rh=(_createClass(jh,[{key:"highlight",value:function(e){e.seriesIndex,e.itemIndex,e.subSeriesIndex,e.subseriesLength;var t=e.type||"series",a=this.getRenderer(e,t),r=a._defaultH();for(var n in r){var i=r[n],o=i.path.call(a,e,i),l=i.styles?i.styles.call(a,e):null;this.applyStyles(o,l)}}},{key:"getRenderer",value:function(e,t){if("series"==t){var a=this.chart.chartTypes[e.seriesIndex].name,r=this.chart.renderer;return("bubblepie"==a?r[this.chart.bubblePieRendererIndex]:r[e.seriesIndex]).highlighter}if("threshold-marker"==t||"levelMarker"==t||"marker"==t)return e}},{key:"getRenderingContext",value:function(){}},{key:"applyStyles",value:function(e,t){e&&e.styles(t)}}]),jh);function jh(e){_classCallCheck(this,jh),this.chart=e}function Hh(e,t){var a=t.nearest;a&&3==a.selected||(this.chart.eventHandler.isSingleSource()?function(e,t,a){Ru(a);var r=ws.hasSharedSeries(a),n=$(),i=a.eventHandler.plotHighlighter||new Rh(a);a.eventHandler.plotHighlighter=i,(r?e.selectionSet:[e.nearest]).forEach(function(e){"series"==a.eventHandler.getPointType(e)&&(a.eventHandler.tooltipSharedInfo=n.set(e.seriesIndex,za(e.counter)?e.counter:e.sortedItemIndex||e.itemIndex),Ss.updateSharedInfo(a,n,e.seriesIndex)),i.highlight(e)})}(t,0,this.chart):a.renderer.defaultMouseOverFunc(a.data,a.seriesIndex,a.itemIndex))}H(["line","scatter","threshold"]);var Bh=H(["bubble","bubblepie","area","arearange","web","bar","bullet","gantt","heatmap","waterfall","boxplot","levelMarker","marker"]);function Fh(e,t){var a=t.nearest;this.chart.eventHandler.reverseLegendHighlight.highlight(a),this.chart.eventHandler.unselectedHighlight.highlight(a)}function Wh(a,r){this.chart.eventHandler.tapOldInfo;var e=nt()&&nt().touches,t=r.nearest;if(e&&"taphold"!==this.chart.zcEventType){var n=$ZC.getPlotDefaultBehaviour(),i=this.chart.eventHandler.eventManager;t&&3==t.selected?(i.selectionManager.remove(),n.mouseout.map(function(e,t){e.action().call(i,a,r)})):i.associateBehaviours.call(i,"mousemove",r,a)}}function Vh(e,t,a){var r=this.chart.eventHandler.isSingleSource()&&!this.chart.isGeoMap,n=Yh(this.chart),i=!0===Va(this.chart.systemConf,"chart.brush.enabled"),o=this.chart.isAxisCategory&&this.chart.isPolarAxisCategory,l=a||(i&&o?"crosshair":Kt);r?(l=a||ff.getCustomBehaviour.call(this,t,"cursor")||(i?"crosshair":Kt),function(e,t,a){if(!t)return!1;var r=t.seriesIndex,n=t.type||a.chartTypes[r].name;if(Bh.has(n))return!0;var i={x:t._x,y:t._y};return Ei.dist(i,e)<10}(e,t.nearest,this.chart)?n.style("cursor",l):Nh.call(this)):n.style("cursor",l)}function Nh(){Yh(this.chart).style("cursor","default")}function Yh(e){return e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)?e.container.selectAll(".zohocharts_scroll"):e.eventHandler.trackerElement}function Gh(){this.chart.eventHandler.handlers;var e=this.chart.eventHandler.tooltipElement;e.hide(e.element),Nh.call(this)}function Uh(e,t){var a,r=t.nearest,n=this.chart.systemConf.notes&&this.chart.systemConf.notes.addOnDoubleclickEvent;if(As&&n){if(this.chart.eventHandler.isSingleSource()){var i=this.chart.seriesdata,o=r.slice(),l=o.splice(0,o.length),s=[r._x,r._y];1<i.length&&l.push(i[r.seriesIndex].seriesname),a={coordinate:this.chart.dataObject.isPolarAxisCategory?[s[0]+this.chart.plotarea_approx.x,s[1]+this.chart.plotarea_approx.y]:[r._x,r._y],data:l,basedOn:"plot"}}else a=r;As.addNotes(this.chart,a)}}function Xh(e,t){var a=nt()||this.chart.eventHandler.targetEvent,r=null!=a?a.relatedTarget:null,n=null!=a?a.target:null,i=this.chart.eventHandler.tooltipElement,o=this.chart.systemConf.tooltip.hideDelay,l=(this.chart.eventHandler.getSourceNode(),t.nearest),s=this.chart,c=this.chart.eventHandler;if(s.eventHandler.unselectedHighlight.reset(),!this.chart.isAxisCategory||!function(e,t,a){var r=a.element;return t!=$t&&a!==$t&&(e==r.node()||e==r.selectAll("div#tooltipcontent").node()||e==r.selectAll("div#zctooltipafter").node()||e==r.selectAll("div#zctooltipbefore").node()||t==r.node()||t==r.selectAll("div#tooltipcontent").node()||t==r.selectAll("div#zctooltipafter").node()||t==r.selectAll("div#zctooltipbefore").node())}(n,r,i)){if(c.isSingleSource())clearTimeout(c.mouseouttimer),c.mouseouttimer=setTimeout(function(){clearTimeout(c.tooltipElement.timeout),c.tooltipElement.timeout=setTimeout(function(){Ru(s),i.hide()},qa(o,150))},0),Nh.call(this);else{var u=l?l.seriesIndex:0;this.chart.renderer[u]||l.renderer;Gh.call(this)}c.reverseLegendHighlight.reset()}}function Zh(e,t){var a=nt()||this.chart.eventHandler.targetEvent,r=(null!=a&&a.relatedTarget,null!=a&&a.target,this.chart.eventHandler.tooltipElement,this.chart.systemConf.tooltip.hideDelay,this.chart.eventHandler.getSourceNode(),t.nearest);this.chart;if(this.chart.eventHandler.isSingleSource()){var n=t.nearest;if(n&&3==n.selected)return;Ru(this.chart)}else{var i=r?r.seriesIndex:0;(this.chart.renderer[i]||r.renderer).defaultMouseOutFunc(r,i,void 0)}}var Qh={};function qh(){return Qh._defaultPlotBehaviour}function Kh(e){return!(!this.chart.isAxisCategory&&!this.chart.isPolarAxisCategory)}function $h(e){var t=this.chart,a=this.eventManager,r=a.selectionManager;if(!0!==t.eventHandler.mouseOnTooltip&&t.chartRendered){a.eventType="mouseout",a.targetEvent=t.eventHandler.targetEvent=nt()||t.eventHandler.targetEvent;this.isSingleSource();e&&e.constructor===Object||e&&e.constructor===Array||(e=r.oldSelectionSet[0]||r.selectionSet[0]),e=this.toNewObject(e),a.selectionManager.remove(),a.associateBehaviours("mouseout",e)}}function Jh(e){var t=this.chart,a=this.eventManager;if(t.chartRendered){this.clearOldActions(),!1!==t.stopPropogate&&nt().stopPropagation(),a.eventType="mousemove",a.targetEvent=t.eventHandler.targetEvent=nt();var r=this.isSingleSource(),n=this.getSourceNode(),i=this.getRelativeMousePosition(n,r),o=e.constructor===Object||e.constructor===Array||!r;if(e=r?e:e.constructor===Object?e:a.selectionManager.nearest,o&&(e=this.toNewObject(e)),!o)if(!(e=a.getData("mousemove",i)).selectionSet.length)return void t.eventHandler.handlers.mouseout.call(this);a.associateBehaviours("mousemove",e,i)}}Qh._defaultPlotBehaviour={mousemove:[{action:function(){return Zh},allowifcustom:!0,type:"resetHighlight"},{action:function(){return Hh},type:"highlight"},{action:function(){return Vh},type:"cursor"},{action:function(){return Fh},type:"reverseHighlight"},{action:function(){return Ps},allowDefault:!0,type:"tooltip"}],click:[{action:function(){return Gh},type:"hidetooltip"},{action:function(){return Vh},type:"cursor",allowifcustom:Kh},{action:function(){return Wh},type:"highlightOnTaphold"}],doubleclick:[{action:function(){return Gh},type:"hidetooltip"},{action:function(){return Uh},type:"notes"},{action:function(){return Vh},type:"cursor",allowDefault:Kh}],mouseout:[{action:function(){return Zh},type:"resetHighlight",allowDefault:!0},{action:function(){return Xh},type:"resetTooltip",allowDefault:!0}],contextmenu:[]};function ef(e){if(Xr.isTouchDevice&&(!e&&Wr.clickArguments&&Wr.previousChartObj||Wr.previousChartObj&&Wr.previousChartObj!=e)&&pr(Wr.previousChartObj.container.node())){Wr.clickArguments[4]=!0;var t=Wr.previousChartObj.systemConf.tooltip,a=t.hideDelay;t.hideDelay=0,Wr.previousChartObj.eventHandler.tapOldInfo=null,Wr.previousChartObj.eventHandler.handlers.mouseout.call(Wr.previousChartObj.eventHandler),t.hideDelay=a}}var tf=qe(document.documentElement),af=ef;if(Xr.isTouchDevice){function rf(){var e=(new Date).getTime();(!Wr.clickedTime||500<e-Wr.clickedTime)&&ef()}Mo(tf,{},{tap:rf,taphold:rf,dbltap:rf},{preventDefault:!1}),tf.on("touchmove",function(){ef()})}function nf(e){var t=this.chart,a=this.eventManager;if(t.chartRendered){t.seriesdata;var r=nt()&&nt().touches,n=t.zcEventType||"click";r&&"taphold"!==n&&function(e,t){"taphold"!=e&&(af(t),Wr.clickedTime=(new Date).getTime(),Wr.clickArguments=[],Wr.previousChartObj=t)}(n,t),a.eventType=n,a.targetEvent=t.eventHandler.targetEvent=nt();var i=this.isSingleSource(),o=this.getSourceNode(),l=this.getRelativeMousePosition(o,i),s=e.constructor===Object||e.constructor===Array||!i;if(i||(e=this.toNewObject(e)),!s)if(!(e=a.getData("click",l)).nearest)return void t.eventHandler.handlers.mouseout.call(this);a.associateBehaviours("click",e,l)}}function of(e){var t=this.chart,a=this.eventManager;if(t.chartRendered){if(!1!==t.stopPropogate&&nt().stopPropagation(),nt()&&nt().touches)t.eventHandler.handlers.mouseout.call(this);a.eventType="doubleclick",a.targetEvent=t.eventHandler.targetEvent=nt();var r=this.isSingleSource(),n=this.getSourceNode(),i=this.getRelativeMousePosition(n,r),o=e.constructor===Object||e.constructor===Array||!r;if(r||(e=this.toNewObject(e)),!o)if(!(e=a.getData("doubleclick",i)).nearest)return void t.eventHandler.handlers.mouseout.call(this);a.associateBehaviours("doubleclick",e,i)}}function lf(){var t=this;return{mousemove:function(e){return Jh.call(t,e)},mouseout:function(e){return $h.call(t,e)},click:function(e){return nf.call(t,e)},doubleclick:function(e){return of.call(t,e)},contextmenu:function(e){return function(e){var t=this.chart,a=this.eventManager;if(t.chartRendered){t.eventHandler.targetEvent=nt();var r=this.isSingleSource(),n=this.getSourceNode(),i=this.getRelativeMousePosition(n,r);e=a.selectionManager,a.associateBehaviours("contextmenu",e,i)}}.call(t,e)},tap:function(e){return nf.call(t,e)},dbltap:function(e){return of.call(t,e)},singletouchmove:function(e){return Jh.call(t,e)},touchend:function(e){return $h.call(t,e)}}}function sf(e){var t=e.legendarea.element,a=t&&t.selectAll(".legseries").node();this.chartObj=e,this.legendSeries=a,this.legendElements=a?a.children:[],this.itemHighlighted=!1,this.hoveredSeriesIndex=$t,this.previousHoveredSeriesIndex=$t,this.legend_series_height=$t,this.legendScrollable=$t,a&&(this.legend_series_height=a.clientHeight,this.legendScrollable=a.scrollHeight>this.legend_series_height)}sf.prototype.highlight=function(e){var t=this.chartObj,a=this.previousHoveredSeriesIndex,r=(u=t.systemConf.legend).itemHoverStyle;if(r&&r.showOnDataHover&&(!ll.isContinousLegend(t)||r.type&&r.type!==Qt)){var n=t.eventHandler.eventManager.selectionManager,i=t.legend.component.highlightItem;if(!(t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap)||n&&n.nearest&&!za(n.nearest.type)){var o,l,s;s=(l=t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap?(o=e).seriesIndex:(o=e.data.data||e.data,e.seriesIndex),e.itemIndex);var c=this.hoveredSeriesIndex=this.getLegendIndex(o,t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap?l:s);if(ll.isContinousLegend(t)){var u,d=t.dataset.getClr(o),h=(u=t.systemConf.legend).colorBand.ranges,f=t.axes.clr.brushScale;i(h&&h.length?f(h[c])+f.bandwidth()/2:f(d),!0,$t,h&&h.length?c:[d]),this.itemHighlighted=!0}else{var p=this.legendElements;if(p[c]){var g=ll.getLegendData(t);c!==a&&null!==a&&i(p[a],g[a],a,u),i(p[c],g[c],c,u,!0),this.itemHighlighted=!0,!this.legendScrollable||t.systemConf.legend.expandable&&t.systemConf.legend.expandable.show||(this.legendSeries.scrollTop=p[c].offsetTop-this.legend_series_height/2)}}this.previousHoveredSeriesIndex=c}}},sf.prototype.reset=function(){if(this.itemHighlighted){var e=this.legendElements,t=this.chartObj,a=this.hoveredSeriesIndex,r=t.legend.component.highlightItem;if(ll.isContinousLegend(t))r($t,!1);else if(za(e[a])){var n=ll.getLegendData(t),i=t.systemConf.legend;r(e[a],n[a],a,i)}this.hoveredSeriesIndex=null}this.itemHighlighted=!1},sf.prototype.getLegendIndex=function(e,t){var a=this.chartObj,r=a.axes.clr;return r.scaleType?Pn.getItemIndex(a,r.indexScale,e):null!=t?t:void 0};function cf(e){this.chartObj=e,this.elements="svg"===e.plot.renderer.mode?e.container.selectAll("g.seriesholder"):qe(e.context.canvas),this.backupStyles=$t,this.previousPoint=$t}function uf(e,t){return-1<["parent","children"].indexOf(e)?ct:t}function df(e,t,a,r,n){var i;if("threshold-marker"===t.type){var o="x"===t.thresholdType?"x":"y.groups["+t.yColumnIndex+"]";i=Va(n.axes,o+".threshold.line").getMetaInfo(t)}else i=function(e,t){var a,r=t.currentQualitativeRangePoint,n=qa(t.point,t.data)||{},i=qa(t.level,n&&n.level);a=za(i)?hf(i):{seriesIndex:qa(t.seriesIndex,n.seriesIndex),subSeriesIndex:qa(t.subSeriesIndex,t.subSeriesIndex,n.subSeriesIndex),itemIndex:qa(t.itemIndex,n.itemIndex)};Ba(t.subseriesindex)&&t.subseriesindex.some(function(e){if(za(e))return a.subSeriesIndex=e});za(r)&&(a.rangeIndex=r.rangeIndex,a.targetIndex=r.targetIndex);za(a.seriesIndex)&&za(a.itemIndex)&&(za(n)&&Ba(n.data)&&(n=n.data),Ba(n)||(a.subSeriesIndex=qa(a.subSeriesIndex,0),za((n=t).level)&&(a.levelIndices=hf(n.level).levelIndices)),a.data=e.dataset.getMetaInfoObj(e,n,a.seriesIndex));return a.point=n,a}(n,t);return za(r)&&"object"===(void 0===r?"undefined":_typeof(r))&&(i=ga(i,r,!0,!0)),{args:i,callback:e}}function hf(e){return{levelIndices:(e=e.split("_")).map(Number),seriesIndex:+e[0],itemIndex:+e[e.length-1]}}cf.prototype.highlight=function(e){var t=this.chartObj,a=t.dataObject.isHierarchy?uf:$t,r=t.systemConf.legend.highlightEffect.applyUnselectedSeriesToPlot,n=this.previousPoint;if(r&&e&&(!n||Wa(n.data,a)!=Wa(e.data,a)||n.seriesPos!=e.seriesPos||n.itemPos!=e.itemPos||Wa(n.subseriesindex)!=Wa(e.subseriesindex))){var i=this.elements,o=t.legendHighlight.getLegendHighlightEffect(0,"unselectedSeries","plot"),l=t.legendHighlight.getEffect(o,$t,$t,$t,0,"plot");this.getBackup(l),i.styles(l),this.previousPoint=e}},cf.prototype.reset=function(){var e=this.backupStyles;e&&(this.elements.styles(e),this.backupStyles=$t,this.previousPoint=$t)},cf.prototype.getBackup=function(e){var t=this.elements,a=this.backupStyles;if(!a){for(var r in a={},e)e.hasOwnProperty(r)&&(a[r]=t.style(r));this.backupStyles=a}};var ff=(_createClass(pf,[{key:"init",value:function(){this.eventManager=new Xd(this.chart),this.reverseLegendHighlight=new sf(this.chart),this.unselectedHighlight=new cf(this.chart),this.eventManager.bindTo(this.tracker),this.eventManager.init(),this.chart.isGeoMap||(this.addListeners(this.tracker),this.eventManager.dataFinder({mousemove:pf.findData,click:pf.findData,doubleclick:pf.findData}),this.eventManager.defaultBehaviour=qh(),this.eventManager.customBehaviour=pf.getCustomBehaviour,this.CustomPoints=new ue.customPoints(this.chart),this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0))}},{key:"update",value:function(){this.tooltipElement.initialize(),this.bulletEvents=null,this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0)}},{key:"isSingleSource",value:function(){return this.isAxisCategory||this.isPolarAxisCategory||this.isGeoMap}},{key:"clearOldActions",value:function(){var e=this.chart.eventHandler.tooltipElement;null!=e&&null!=e.timeout&&clearTimeout(e.timeout)}},{key:"getSourceNode",value:function(){return this.isSingleSource()?this.chart.eventHandler.trackerElement.node():this.chart.svg.node()}},{key:"getRelativeMousePosition",value:function(e,t){var a=_o(e,nt());if(t){var r=ba(e);a[0]-=r.x,a[1]-=r.y,this.isPolarAxisCategory&&(a[0]-=this.chart.plotarea_approx.x,a[1]-=this.chart.plotarea_approx.y)}return{x:(this.chart.eventHandler.mousePos=a)[0],y:a[1]}}},{key:"toNewObject",value:function(e){var t={nearest:e};return this.eventManager.updateSelectionManager(t),this.eventManager.selectionManager}},{key:"addListeners",value:function(e,t){var a=this.handlers=lf.call(this),r={click:a.click,dblclick:a.doubleclick,contextmenu:a.contextmenu},n={mousemove:a.mousemove,mouseout:a.mouseout},i={tap:a.click,dbltap:a.doubleclick,singletouchmove:a.mousemove,touchend:a.mouseout},o={target:"plot",chartObj:this.chart};"tooltip"==t?this.eventManager.attachListeners(e,n,null,o):(this.eventManager.attachListeners(e,n,null,o,"chart"),this.eventManager.attachListeners(e,r,null,o,"chartmove"),this.eventManager.attachListeners(e,{},i,o))}},{key:"dataAccesor",value:function(i){var o=this.chart,e=0<this.chart.dataObject.noofBarEnabledSeries,l=ws.hasSharedSeries(o);return o.cache.search.bisect=e||l,{chart:o,parseKey:function(e){if(o.cache.thresholdCustomPoints&&-1!==e.indexOf("threshold"))return"threshold"},bestChartType:function(e){return"threshold"==e||"segment"==e?"scatter":e},radius:function(e){if(o.cache.thresholdCustomPoints&&-1!==e.indexOf("threshold"))return o.cache.thresholdCustomPoints[e].triggerOffset;var t=("line"==(e="threshold"==e||"segment"==e?"scatter":e)||"scatter"==e?1==o.dataObject.markerSize[e].size():null)&&parseInt(o.dataObject.markerSize[e].values()[0])||0;return qa(Oo(o,Ne[e]),10)+t/2},sizeOffset:function(e){e="threshold"==e?"scatter":e;var t=o.systemConf.chart.plot.plotoptions[e];return t&&t.events&&t.events.triggerOffset||10},extent:function(){return[o.plotarea.width,o.plotarea.height]},size:function(e){var t="line"==e||"scatter"==e?1<o.dataObject.markerSize[e].size():null;return o.dataObject.isBubbleEnabled||t||"segment"==e},toArray:function(e){var t=Po(this.rotated);return[e[t[0]],e[t[1]]]},bisectMode:function(){var e=o.dataset.getDataType("x");return o.dataObject.noofBarEnabledSeries||e==Sn?"discrete":"continous"},median:function(){var e=o.systemConf.chart.axes.xaxis.reversed,t=o.dataObject.noofBarEnabledSeries&&!o.dataObject.noofAreaEnabledSeries&&l,a=o.axes.x.scale,r=this.chart.dataset.getDataType("x"),n=it.invert(r,i,a,o.axes.rotated,null,e,t);return n=r==Sn?a.domain()[n]:n,n},spliceIndices:function(){return[]}}}},{key:"getPointType",value:function(e){return e.seriesIndex,e.type||"series"}},{key:"eventDisabled",value:function(e){var t=e.plotoptions,a=no.helpers.getChartType(e.type||this.chart.userdata.seriesdata.type,"string"),r=this.chart.systemConf.chart.plot.plotoptions[a];return e.disabled||0==Ea(oo(t,r,this.chart,"enabled"),!0)}}],[{key:"findData",value:function(e){var t=this.chart,a=0<this.chart.dataObject.noofBarEnabledSeries,r=ws.hasSharedSeries(t),n=t.cache.search.bisect=a||r,i=Dh(t.dataObject.flattenPoints,e,n,t.eventHandler.dataAccesor(e));return{nearby:r?i.nearby:null,nearest:i.nearest}}},{key:"getCustomBehaviour",value:function(e,t){var a=this.chart,r=this.targetEvent,n=e.nearest||e.oldSelectionSet[0],i=[],o=void 0,l=void 0;if(n){if("contextmenu"==t)o=a.systemConf.chart.plot.events;else{var s=n.seriesIndex,c=n.type||a.chartTypes[s].name;if("threshold-marker"==c||"levelMarker"==c||"marker"==c)p=n;else{var u=a.seriesdata,d=n.seriesIndex,h=a.chartTypes[d].name,f=u[d].plotoptions,p=a.systemConf.chart.plot.plotoptions[h];a.zcEventType||a.eventHandler.targetEvent}o=oo(f,p,a,t),l={x:n._x,y:n._y}}return o?"cursor"==t?o:(i.push({action:df(o,n,lo(r),l,a),type:"custom"}),i):null}}}]),pf);function pf(e,t){_classCallCheck(this,pf),this.chart=e,this.tracker=t,this.rotated=e.axes.rotated,this.isAxisCategory=e.isAxisCategory,this.isGeoMap=e.isGeoMap,this.isPolarAxisCategory=e.dataObject.isPolarAxisCategory}function gf(e,t,a){if(!(this instanceof gf))return new gf(t);t=qa(t,[]),a&&(t=gf.toCircle(t)),this.chart=e,this.points=gf.addType(t)}function vf(a){var r="",n=0,i={"<tspan":[],"</tspan>":[]};return a.replace(/<tspan|<\/tspan>/g,function(){i[arguments[0]].push(arguments[1])}),i["<tspan"].forEach(function(e,t){n!=e&&(r+="<tspan>"+a.substring(n,e)+"</tspan>"),r+=a.substring(e,n=i["</tspan>"][t]+8)}),n!=a.length&&(r+="<tspan>"+a.substring(n,a.length)+"</tspan>"),r}function yf(e,t){e.selectAll("tspan.zcTspan").attr("x",t)}function mf(e,t,a,r,v,y,m,b){var n=+a[0],i=+a[1],o=t.plotarea,x={left:-r,right:-r,top:0,bottom:0},C=qo;m=m||0,v=v||{left:-n+m,top:-i,right:o.width-n-m,bottom:o.height-i},e.each(function(){var e=this.childNodes,t=0,a=ba(this),r=this.getComputedTextLength();a.x+r>v.right&&(r-=a.x+r-v.right+m),a.x<v.left&&(r-=v.left-a.x+m);for(var n=0;n<e.length;n++){for(var i=e[n],o=i.childNodes,l=i.getComputedTextLength(),s="",c=0;c<o.length;c++){var u=o[c].textContent;s+=u,y[t+c].textLength=u.length}if(1<l-r){var d=y[t].bbox,h={left:d.x+(b?b[0]:0),top:d.y+(b?b[1]:0),width:l,height:d.height};cn(o[0],s,h,v,C,"..",x,null,null,!1);var f=o[0].innerHTML;".."===f&&(f="");c=0;for(var p=0;c<o.length;c++){var g=y[t+c].textLength;o[c].innerHTML=f.substring(p,p+g),p+=g}}t+=o.length-1}})}function bf(e,s){var t=e.selectAll(function(){return this.childNodes}),c=e.attr("text-anchor"),u=+e.attr("x"),d=+e.attr("y"),h=[],f=0;return t.each(function(){var e=qe(this),t=parseFloat(e.attr("dy")||0),a=this.childNodes,r=this.getComputedTextLength(),n="middle"===c?-r/2:"end"==c?-r:0;f+=t;for(var i=0;i<a.length;i++){var o=a[i].getComputedTextLength(),l={dy:f,dx:n+("middle"===c?o/2:0),bbox:{x:u+n,y:d+f*s,width:a[i].getComputedTextLength(),height:s},style:a[i].style,text:a[i].textContent};h.push(l),n+=o}}),h}function xf(e,l){return l=l||[],e.each(function(e,t){var a=qe(this).selectAll("*");if(a.size())a.each(function(){xf(qe(this),l)});else{var r=ba(this),n=this.nodeName;if(n===Ir){if(""===this.textContent)return;var i=Zr(function e(t){if(t.parentNode.nodeName!==Dr)return e(t.parentNode);return t.parentNode}(this)),o=Zr(this);r.x+=o.left-i.left,r.y+=o.top-i.top,r.width=o.width,r.height=o.height}l.push({node:this,nodeName:n,bb:r})}}),l}function Cf(e,t){var a=t.systemConf;return+pa.getVal(_a([e,a.chart.plot.datalabels,a.chart,a.canvas],"fontSize"))}function kf(e,t){var a=t.systemConf;return pa.getVal(_a([e,a.chart,a.canvas,Wr],"fontFamily"))}function wf(l,e,t,s,c,u,d){var a=l.seriesdata[u].yaxiscolumnorder||[0,0],r=l.chartTypes[u],n=no.helpers,h=l.dataObject,i=l.systemConf.metadata.columns,o=l.isGeoMap;e=e||{stacked:!1,commonPlotOptions:l.systemConf.chart.plot.plotoptions[r.name],yaxiscolumnorder:n.getParsedYAxisOrder(a)};var f,p,g,v,y=l.dataset,m=e.yaxiscolumnorder,b=e.stacked,x=e.yscale,C=yo(r.value),k=Ea(e.commonPlotOptions.dataindex,3),w=l.renderer[0]&&l.renderer[0].getProcessedNode,S=l.systemConf.metadata.axes.label,O=S&&S[0],A=s===wl&&za(O),P=A?i[O]?"{{val("+O+")}}":O.toString():t.showAs,T=-1!=[Pl,Tl,_l,Dl,Il,Rl,El].indexOf(P),_=-1!=[Dl,Il,Rl].indexOf(P),E="function"==typeof P||"function"==typeof window[P];if(l.renderVisiblePointsOnly&&!l.isGeoMap&&(x=ri(l,"y",m).baseScale||x),T||E||(v=function(e){var a="";if(Ba(e))e.forEach(function(e,t){a+="<tspan class='zcTspan'"+(t?" dy='1.1em'":"")+">"+vf(e)+"</tspan>"});else{var t=e.indexOf("<tspan");a=-1!=t?"<tspan class='zcTspan'>"+vf(e)+"</tspan>":e}return a}(P)),!A){var L=A?"label":P==Pl?Pl:P==_l&&za(y.zidx)?_l:o?El:Tl;if(f=i[y.getColumnIdx(L,a)].datatype,p=y.getColumn(L,a)[f],g=_?Nl:Hl,C&&!E&&_){var M=i.filter(function(e){return e.dataindex===k})[0];M=za(M)?M:y.getColumnIdx(L,a),f=M.datatype,p=M[f]}}function z(e,t){e=s==Sl?e[1]:e;var a=h.isHierarchy&&w&&w(e);if(T){var r=$t;switch(P){case Dl:case Il:case Rl:var n=c,i=s==Sl?e:b||h.isPercentChart?e.y:C?e[k]:a&&a.children&&a.value||e.value||y.getY(e,m,d);if(b&&!h.isPercentChart&&s==wl)n=ss(l,u,e,P);else if("function"==typeof c)n=c(e,P);else if(!za(n))if(P!==Rl&&x)n=(x.originalDomain||x.domain())[1];else{var o=h.ZC_BAR_getRangeY(m);n=i<0&&i>=o[0]?-o[0]:o[1]}r=i/n*100||0;break;case Pl:r=a&&a.children?ct:y.getActualX(e);break;case _l:za(y.zidx)&&(r=y.getZ(e));break;case El:r=y.getGeo(e);break;default:r=s==Sl?e:h.isHierarchy?a&&a.children&&a.value||e.value||y.getY(e,m):y.getY(e,m,d)}return g(p,r,f,l,s)}return E?Ta(P,e,t,l):y.getCustomizedVal(l,v,u,$t,$t,e,s,$t,"html"!==z.contentType,$t,d)}return z.contentType=T||!E&&!Ba(P)&&-1==P.indexOf("<tspan")?"text":"html",z.multiLine="html"===z.contentType&&!E&&Ba(P)&&1<P.length,z.hasShowAsFunction=E,z}function Sf(h,f,i,e){function t(e,t){return e.dist-t.dist}for(var p=[],a=[],r=[],n=i-e,o=n,l=0;l<i;l++)h[l]||p.push(l);h.forEach(function(e){e.sort(t)}),h.forEach(function(e){e.forEach(function(e,t){0!=t&&(r[t]=r[t]||[],r[t].push(e))})}),r.forEach(function(e){e.sort(t)}),r.forEach(function(e){e.forEach(function(e,t){a.push([e])})}),a.forEach(function(e,t){0<n?n--:e[0].hide=!0}),(a=a.slice(0,o)).sort(function(e,t){return e[0].y1-t[0].y1}),a.forEach(function(e){var r=e[0],t=r.y2-r.y1,a=Mt(Et((r.y1-f)/t),0);if(h[a]){for(var n,i=p[0],o=0,l=0;l<p.length;l++){var s=Dt(f+p[l]*t-r.y1);null==n&&(n=s),s<n&&(n=s,i=p[l],o=l)}if(i<a){p.splice(o,1);var c=i;h.forEach(function(e,t){var a=e[0];i<t&&a.y1<r.y1&&(h[c]=e,c=t)}),h[c]=[r]}else{p.splice(o,1);c=[r];for(var u=a;u<=i;u++)if(h[u]){if(h[u][0].y1>r.y1){var d=h[u];h[u]=c,c=d}}else h[u]=c}}else h[a]=e}),h.forEach(function(e,t){var a=e[0],r=a.y2-a.y1,n=f+t*r-a.y1;a.translate=Dt(n)<r&&t+1<i&&!h[t+1]&&n<0?0:n}),h.forEach(function(e,t){var a=e[0],r=a.y2-a.y1,n=f+t*r-a.y1;a.translate=Dt(n)<r&&t+1<i&&(!h[t+1]||!h[t+1][0].translate)&&n<0?a.translate:n})}function Of(e,r,n,i){return e.forEach(function(e){var t=e.y2-e.y1,a=Mt(0,Et((e.y1-i)/(e.y2-e.y1)));e.dist=e.y1<i?i-e.y1:e.y1-(i+a*t),n[a]||(n[a]=[],r++),n[a].push(e)}),r}function Af(e,t,a,r,n,i,o,l,s){if(!e.hide){null==t&&(t=Et((r-a)/(e.y2-e.y1)));var c=s?null==n?r-e.y2:i[n].y1-e.y2:null==n?e.y1-a:e.y1-i[n].y2;l+=null!=n&&Li(e,i[n])&&c<-5?Dt(c):0,n=o,i.push(e),o++}return{prev:n,count:o,totalslot:t,need:l}}na.setComponent("ZC_ChartEvents",ff),gf.prototype.addPoints=function(e,t){if(e){for(var a in e)t&&(e[a]=gf.toCircle(e[a])),Array.prototype.push.apply(this.points,gf.addType(rr(e[a])));return this}},gf.prototype.removePoints=function(e,t){return this.points.splice(e,t||1)},gf.prototype.hoverPoint=function(e,t,a,r,n,i){if(n=!1!==n,r=!1!==r){var o=this.chart.eventHandler.getSourceNode();a=this.chart.eventHandler.getRelativeMousePosition(o,!0);!function(e,t,a,r,n,i){var o,l=e.eventHandler.oldInfo,s=e.systemConf.tooltip,c=e.systemConf.tooltip.sharedSeriesInfo,u=e.staticPaneSVG.selectAll("g.eventgroup"),d=!0===s.enabled||!0===i,h=e.eventHandler.tooltipElement;l&&!1===l.isNoInfo&&e.eventHandler.mouseOut();clearTimeout(h.timeout),u.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",Qt);var f=r._data(),p=f._x,g=f._y;za(a)||(a={x:p,y:g});za(t)&&(t=lo(t));if(!za(t)){var v=e.svg.node().getBoundingClientRect();t={clientX:p+e.plotarea.left+v.x,clientY:g+e.plotarea.top+v.y}}n&&"circle"===r._type&&(o=function(e,t,a,r,n,i){var o=r.selectAll("#zcscatterhighlight").style("display",null).attr("transform","translate("+n.left+","+n.top+")"),l=Va(e.marker,"hoveroptions")||{},s={color:e.color,symbolSize:{inner:e._mSize/2,outer:e._mSize},transform:[t,a]};return eo(o,null,l,s,i),o}(r,p,g,u,e.plotarea,e));if(d){var y=ko(t,a,p,g,e,null,e.axes.rotated,c,null,!1,!1),m=[r.text,r.formattedValue].join(": "),b=r.marker,x=qa(r.events,{}).tooltipContent;if(za(x)){var C=Ta(x,t,{data:[r.columnInfo],itemIndex:r.itemIndex,point:r.point,pointFormatted:r.formattedValue},e);za(C)&&(m=C)}y.helpers.backgroundColor=qa(s.backgroundColor,b.fillColor,r.color),y.helpers.borderColor=qa(s.borderColor,b.strokeColor,r.color),h.show(e,y,m,!1,y.helpers)}}(this.chart,t||nt(),a,e,n,i)}},gf.toCircle=function(e){return e.forEach(function(e){if(!e._converted&&!za(e.r)){var t=e._data();e.cx=t._x+e.width/2,e.cy=t._y+e.height/2,e.r=Mt(e.width,e.height)/2,e._converted=!0}}),e},gf.addType=function(e){return e.forEach(function(e){var t=e._data();za(e.r)?e._type="circle":za(t._x)&&za(t._y)&&za(e.width)&&za(e.height)?e._type="rect":e._type="poly"}),e},ue.customPoints=gf,pt.bar=function(){var y,m,Ye,Ge,b=no.helpers;function t(e,v){e.each(function(){var q,r=m[0],K=m[1],e=m[2]||wl,$=m[3],t=m[4],J=y.commonRendererProp().params,ee=za(t)?J.chartObj.systemConf.metadata.columns[t].dataindex:null,a=r.plotoptions,te=J.chartObj,n=te.systemConf,i=J.commonPlotOptions,ae=J.dataset,re=J.stacked,ne=J.yscale,ie=J.yaxiscolumnorder,oe=J.labelArray,le=e===Sl,se=te.chartTypes[K].name==_i,ce=se&&za($),ue="canvas"===te.plot.renderer.mode,o=te.behaviouralEvents.eventManager.behaviours,de=J.axisrotated,he=!0;(o.PLOT_ZOOM||o.CHART_SCROLL&&!de)&&(he=!1),q=Hs(i,le?$t:a,te,K),le&&(q=q.stackLabels);var l=le?Ns(q,te):Vs(q,te);if(!r.disabled&&l){var s=Io(te),fe=q.textOverlap,pe=Ju(te,K,e),ge=q.showZeros,c=Wn(i,te),ve=s.left,ye=s.top,me=s.right,be=s.bottom,u=te.svg.node().getBoundingClientRect(),xe=u.left+te.plotarea.left,Ce=u.top+te.plotarea.top,d=.75*(de?te.plotarea.width:te.plotarea.height),ke=wf(te,J,q,e,$t,K,$),we=ke.contentType||"text",Se="html"===we&&ke.multiLine,Oe=pe===$o,Ae=b.isCatNull(ae,"x"),Pe=b.isCatNull(ae,"y",ie),Te=n.chart.axes.yaxis[ie||0].reversed,_e=te.barscale2.bandwidth()||0,Ee=Cf(q,te),h=te.dataset.getDataType("y",ie);if(!Oe||te.dataObject.rangeCorrections.datalabels["y"+ie]){var Le=0,Me=0,ze=0,De=0,Ie=0;if(Ms(q,te)){var f=Ls(q,te),p=Rs(f.hook);Le=zs(q,te),Me=Ds(q,te),ze=re||pe===nl?0:p.height,De=p.width,Ie=f.radius}var Re="clip"===fe,je=n.chart.plot.datalabels.handleOverlapping&&fe!==Qt,He=Mt(0,Ea(q.padding,2))+Le+ze+(Oe&&Me?Me/2-1:0),Be=Oe&&function(){{if(h===Sn){var e=ne.domain();return ne(e[e.length-1])+ne.bandwidth()/2}var t=te.dataObject.rangeCorrections.datalabels,a=[0],r=de?Te?1:-1:Te?-1:1;for(var n in t)-1<n.indexOf("y")&&a.push(t[n]);return ne(ne.domain()[1])+Ue(a)*r}}();He=d<He?d:He,Ye=!(Ye=q.textDirection)||re&&!le?de?Jo:el:Ye,Ge=de?Ye==el?90:0:Ye==el?0:270;function Fe(){return te.dataObject.getTransRectValue.apply(te.dataObject,Pa(arguments))}var We=y.commonOption,Ve=sn(te.staticPaneSVG.select(".labelholder"),Dr,[1],".","class","temp_label"),Ne=v.update,g=v.add;r.data.forEach(function(e,Z){var t=y.seriesdataAfterUpdate&&!le?y.seriesdataAfterUpdate[Z]:r.data[Z];if(le){var a=n.chart.scroll;a&&a.enabled&&(t=function(e,a){return e.filter(function(e){var t=e[0];return-1<a.indexOf(t)})}(t,J.xscale.domain())),Oe&&ne.domain()[0]<0&&(t=function(e){var a=H();return e.filter(function(e){var t=e[0];return!a.has(t)&&(a.add(t),!0)})}(t))}var Q=[];Bs(Ve,q,te,J.color,!1,K),Ve.styles({fill:qt}),t.forEach(function(t,e){var a,r,n,i,o,l,s,c=$t,u=Te?-1:1,d=le?t[1]<0:ae.getY(t,ie)<0;Ve[we](function(){if(le){var e=t[1];t[0];a=ge||0!=e?ke(t):$t}else a=Ae(ae.getX(t))||Pe(ae.getY(t,ie))||!ge&&0==ae.getY(t,ie)?$t:ke(t);return a}),Se&&yf(Ve,0),c=ba(Ve.node());var h=0,f=0;if(le){var p=We.bandwidth1(t[0])+We.bandwidth2(We.stackGroupIndex),g=ne(t[2]||t[1]);r=de?g:p,n=de?p:g,de?Ye==el?(r+=(d?-He:He)*u,i=Te?d?"-0.3em":"1em":d?"1em":"-0.3em"):(n+=_e/2,i="0.3em",Oe?(r=Be+He*u+0*u,o=Te?"end":$t):(r+=(d?-He:He)*u,o=Te?d?$t:"end":d?"end":$t,Se&&(r+=c.width/2*(d?-1:1)*u))):(r+=_e/2,n+=(d?He:-He)*u,Ye==Jo?(i="0.3em",o=Te?d?$t:"end":d?"end":$t):(o="middle",i=Oe?(n=Be-He*u,Te?"1em":"-0.3em"):Te?d?"-0.3em":"1em":d?"1em":"-0.3em"))}else{var v=c,y=(p=za(ee)&&de?J.yscale(t[ee][$]||t[ee]):Fe("x",t,Z,e,We,null,$)||0,g=za(ee)&&!de?J.yscale(t[ee][$]||t[ee]):Fe("y",t,Z,e,We,null,$)||0,Fe("width",t,Z,e,We)||0),m=Fe("height",t,Z,e,We)||0,b=Re;r=p,n=g;var x=ce&&za(ee)?t[ee][0]>t[ee][1]:null,C=!!x,k=(Te&&de?!C:C)?1-$:$,w=Te?x?$:1-$:x?1-$:$;u=se&&ce?Te&&!de?-1:1:u;if(de)re?(n+=m/2,i="0.3em",pe==nl?(r+=y/2*u,o="middle"):pe==Ko?(r+=(d?He:y-He)*u,o=Te?d?"end":$t:d?$t:"end",Se&&!Oe&&(r+=v.width/2*(d?1:-1)*u)):(r+=(d?y-He:He)*u,o=Te?d?$t:"end":d?"end":$t,Se&&!Oe&&(r+=v.width/2*(d?-1:1)*u))):Ye==Jo?(n+=m/2+(f=Is(c.height,Le,Ie,De))/2,i="0.3em",b=b&&pe!=Ko&&v.width>y,l=Te?d?Zo:Qo:d?Qo:Zo,Oe?(o=Te?"end":$t,r=Be+He*u+0*u,l=Te?Qo:Zo):b?pe==qo?r+=Te?d?-y+He:-y:d?0:He:pe==nl&&(r+=Te?-y+Le:Le):(o=Te?d?$t:"end":d?"end":$t,pe==nl?(r+=(v.width>y?d?y:0:y/2)*u,o=v.width>y?o:"middle"):pe==Ko?se?l=ce?(r+=(0==k?-He:He)*u,o=0==k?"end":$t,0==w?Qo:Zo):(o="middle",$t):r+=(d?-He:y+He)*u:r+=(d?y-He:He)*u,!Se||pe===nl&&v.width<=y||(r+=(d?-c.width/2:c.width/2)*u))):(h=Is(c.width,Le,Ie,De),i=Te?d?"-0.3em":"1em":d?"1em":"-0.3em",b=b&&v.width>m,l=Te?d?qo:Ko:d?Ko:qo,pe==nl?(v.height>y?Se?(r+=(Te?d?y:0:d?0:y)*u,r+=Te?v.height/2*(d?1:-1):0):r+=(Te?d?0:y:d?y:0)*u:r+=y/2*u,i=v.height>y?i:"0.3em"):r+=pe==Ko?(d?-He:y+He)*u:(d?y-He:He)*u,b?(r+=h/2,n+=Le):(n+=m/2,o="middle",pe==nl&&(i="0.3em")));else if(re)r+=y/2,o="middle",i=pe==nl?(n+=m/2*u,"0.3em"):pe==Ko?(n+=(d?m-He:He)*u,Te?d?"1em":"-0.3em":d?"-0.3em":"1em"):(n+=(d?He:m-He)*u,Te?d?"-0.3em":"1em":d?"1em":"-0.3em");else if(Ye==Jo){f=Is(c.height,Le,Ie,De);var S=!Te&&d||Te&&!d?v.width:0;b=b&&pe!=Ko&&v.width+He>m,i="0.3em",l=Te?d?Zo:Qo:d?Qo:Zo,b?(r+=y/2,n+=pe==nl?Te?Le:m-Le:Te?d?-He:0:m+(d?0:-He)):(r+=y/2,pe==nl?(v.width>m?n+=Se?(d?c.width/2:m-c.width/2)*u:(d?0:m)*u+S:n+=m/2*u,o=v.width>m?$t:"middle"):(n+=pe==Ko?(d?m+He:-He)*u+S:(d?He:m-He)*u+S,Se&&(n-=c.width/2)))}else h=Is(c.width,Le,Ie,De),b=b&&v.width+2*Le>y,i=Te?d||0==k?"-0.3em":"1em":d||0==k?"1em":"-0.3em",l=Te?d?qo:Ko:d?Ko:qo,Oe?(n=Be-He*u,l=Te?Ko:qo,i=Te?"1em":"-0.3em"):pe==nl?(n+=(v.height<m?m/2:d?0:m)*u,i=v.height<m?"0.3em":i):pe==Ko?(n+=(d&&!ce?m+He:0==k?He:-He)*u,l=se?ce?0==w?Ko:qo:$t:l):n+=(d?He:m-He)*u,b?r+=Le:(r+=y/2,o="middle")}if(Se){i=parseFloat(i);var O=1.1*(q.showAs.length-1);-.3===i?(s=i,i-=O):.3===i&&(s=i,i-=O/2),i+="em",b||Oe||(o="middle")}if(Ve.attrs({x:r,y:n,dy:i,"text-anchor":o,transform:"rotate("+Ge+" "+r+" "+n+")"}),Oe&&!1!==V){var A=mr(za(q.maxWidth)?q.maxWidth:"30%",te.plotarea.width);if("html"===we){yf(Ve,r);var P={left:(_=ba(Ve.node())).x,top:_.y,right:_.x+A,bottom:_.y+_.height},T=(_.width,bf(Ve,Ee));mf(Ve,te,[0,0],0,P,T),a=Ve.html()}else{var _;P={left:(_=ba(Ve.node())).x,top:_.y,right:_.x+A,bottom:_.y+_.height};Ys(Ve,te,[0,0],0,P),a=Ve.text()}}var E=0,L=0,M=0,z=0;if(l=pe===nl?$t:l,de?z=(Ye===el?h:f)/2:M=(Ye===el?h:f)/2,!Re){Se&&yf(Ve,r);var D=Le+Me/2,I=(v=Ve.node().getBoundingClientRect()).left-xe-D-M-0,R=I+v.width+2*D+2*M,j=v.top-Ce-D-z-0,H=j+v.height+2*D+2*z;if(he){var B=r+(I<ve?ve-I:me<R?-(R-me):0);B==r||Oe&&de||(E=B-r,r=B);var F=n+(j<ye?ye-j:be<H?-(H-be):0);F==n||Oe&&!de||(L=F-n,n=F)}}var W=jn(ae.getClr(t),te),V=le||W;if(je)if(re&&!le){Ve.attrs({x:r,y:n}),Se&&yf(Ve,r),c=ba(Ve.node());p=Fe("x",t,Z,e,We)||0,g=Fe("y",t,Z,e,We)||0,m=Fe("height",t,Z,e,We)||0,y=Fe("width",t,Z,e,We)||0;Te&&(de?p-=y:g-=m),Ws({x1:c.x-Le,y1:c.y-Le,x2:c.x+c.width+Le,y2:c.y+c.height+Le},{x1:p,y1:g,x2:p+y,y2:g+m})||(V=!1)}else if(!Re||le){Se&&yf(Ve,r);var N=(v=Ve.node().getBoundingClientRect()).left-xe,Y=v.top-Ce,G={id:"lbl"+K+"_"+Z+"_"+e+"_"+$,translateFunction:Ne,isStackedLabels:le,x1:N-Le+E-M,y1:Y-Le+L-z,x2:N+v.width+Le+E+(Ge?ze+2*Me:0)+M,y2:Y+v.height+Le+L+(Ge?0:ze+2*Me)+z,overlap:Oe&&"hidden"!==fe&&fe!==Qt?"hidden":fe};oe.push(G)}else{if(Ye!=el){var U=Fe(de?"width":"height",t,Z,e,We)||0;y=pe==Ko?c.width:U-(pe==qo?He+Le:2*Le)}else y=_e-2*Le;c.width=zt(y,c.width)}var X={X:r,Y:n,DY:i,ANCHOR:o,text:a,display:V,height:c.height+f,width:c.width+h,hookPosition:l,adjustVal:Ye===el?de?L:E:$t};void 0!==s&&(X.actualDY=s),ue&&"html"===we&&(X.tspanInfo=bf(Ve,Ee)),Q.push(X)}),Q.dataUpdate=t,g(Q,K,Z,$,le?Sl:$t).properties={type:oi,dataLabels:q,rotation:Ge,color:J.color,dataUpdate:t,showlabel:l,multiColoring:c,textDirection:Ye,rangeChart:ce,yrangePos:$,rp:J,contentType:we,isMultiLine:Se}})}}})}return t.renderer=function(e){return arguments.length?(y=e,t):y},t.args=function(e){return arguments.length?(m=e,t):m},t},gt.svg=function(){var k,w,S;function t(e,x,C){e.each(function(){k&&(w=k.properties,S=w.rp.chartObj);var e=k&&Ms(w.dataLabels,S),t=sn(qe(this),"g",[1],".","class",(C===Al?"parentboundboxseries_":C===Ol?"innerboundboxseries_":"boundboxseries_")+x);w&&w.rangeChart&&(t=sn(t,"g",[1],".","class","rangePos_"+w.yrangePos));var a=sn(t,"g",e?k:[]);if(e){var r=S.dataObject.isPolarAxisCategory?"translate("+S.plotarea_approx.x+","+S.plotarea_approx.y+")":S.isAxisCategory?null:w.translation;t.attr("transform",r);var h=Ls(w.dataLabels,S),f=Rs(h.hook),n=w.dataUpdate,i=w.rotation||0,p=zs(w.dataLabels,S),g=ir(h.radius),o=Es(h.strokeColor,w,S,n,x),l=Es(h.fillColor,w,S,n,x),v=za(h.strokeWidth)?+h.strokeWidth:1,s=on(h.dashStyle,v),c=ln(h.lineCap,h.dashStyle),y=Je(),u=S.plotarea,d=w.trans||[0,0],m=-d[0]+u.left,b=u.width-d[0]-u.left;a.attr("class",function(e,t){return"subseries_"+t}).each(function(d,e){var t=d.dataUpdate||n;sn(qe(this),"path",t).attrs({d:function(e,t){var a=d[t],r=a.xy||[a.X,a.Y],n=r[0]-p,i=r[1]-p,o=a.width,l=a.height,s=void 0!==a.actualDY?a.actualDY:parseFloat(a.DY)||0,c=a.ANCHOR,u=a.hookPosition;return n="middle"===c?n-o/2:"end"===c?n-o:n,i-=y.domain([-.3,.9]).range([l,0])(s),S.isAxisCategory||S.dataObject.isPolarAxisCategory||"hierarchy"===w.type||(n<m&&(o-=m-n+v/2+p,n=m+v/2),b<n+o+v/2+p&&(o-=n+o-b+v/2+2*p),n+=(h.strokeWidth||1)*(u===Qo?.5:u===Zo?-.5:0)),xc(n,i,o,l,g,p,u,f,a.adjustVal)},transform:function(e,t){var a=d[t],r=a.xy||[a.X,a.Y];return"rotate("+i+" "+r[0]+" "+r[1]+")"},id:function(e,t){return"boundbox"+d[t].ID},level:function(e){if(e.level)return e.level}}).styles({display:function(e,t){return js(d[t])?null:Qt},fill:l,"fill-opacity":h.fillOpacity,stroke:o,"stroke-opacity":h.strokeOpacity,"stroke-width":h.strokeWidth,"stroke-dasharray":s,"stroke-linecap":c,opacity:function(e){if(za(S.dataObject.hierarchical)&&za(S.cache.hierarchical)&&S.cache.hierarchical.active)return!0===e.active?1:.1},transition:"opacity ease .2s"})})}})}return t.args=function(e){return arguments.length?(k=e,t):k},t},ft.connector=function(n,e,i){var t=sn(Gs(n),"g",e&&"circular"!==e.properties.showlabel?[1]:[],".","class","link_"+i);if(e){var o=e.properties,l=o.dataUpdate,s=o.isSunburst,c=o.connectorPath,u=o.dataLabels.line,d=l.length;u&&(t.attr("transform",o.translation).styles({stroke:u.strokeColor,"stroke-width":u.strokeWidth,fill:Qt}),e.forEach(function(a,r){sn(sn(t,"g",[1],".","class","subseries_"+r),"path",l).styles({display:function(e,t){return!1===a[t].display?Qt:$t},stroke:function(e,t){return s||u.strokeColor?$t:Hn(n,o.reverseColor?d-1-t:t,e&&e.data?e.data:e,i)}}).attrs({d:c,id:function(e,t){return"link"+i+"_"+r+"_"+t}})}))}},pt.bullet=function(t,e,a){var b=t.label||{},x=this,C=this.dataset,r=this.plotarea,n=this.systemConf,k=e.commonOption,i=e.commonRendererProp().params,w=i.axisrotated,S=i.yscale,O=i.xscale.bandwidth(),o=n.chart.axes.yaxis[0].orient||(this.axes.rotated?qo:Zo),A=t.dataindex,l=!0===t.enabled&&!0===b.enabled&&za(A),s=sn(this.staticPaneSVG.selectAll("g.qualitativeGroup"),"g",l?[1]:[],".","class","targetLabel");if(s.attr("transform","translate("+r.left+","+r.top+")"),l){var P=b.hAlign,T=b.vAlign,_=Ea(b.padding,2),E="fixed"===b.position,L=10*Ea(t.size,(k.levelMarkerWidth-2*Ea(t.padding,k.padding/2))/10),M=("line"===t.symbol?Ea(t.outerStrokeWidth,1):L)/2;T=w?(P=P||Xo,T||(o===qo?Ko:qo)):(P=P||(o===Zo?Qo:Zo),T||Xo);var c=this.userdata.metadata.columns,u=c.filter(function(e){return e.dataindex===t.dataindex}),d=u.length?u[0]:c[C.getColumnIdx("y",0)],z=d.datatype,D=d[z],h={left:0,right:0,top:0,bottom:0};w?h.top=h.bottom=r.adjust:h.left=h.right=r.adjust,E||!0!==n.chart.axes.yaxis[0].show||(h[o]=0);var f=x.container.node().getBoundingClientRect(),I=f.left+x.plotarea.left,R=f.top+x.plotarea.top,p=Io(x),j=p.left-h.left,H=p.top-h.top,B=p.right+h.left+h.right,F=p.bottom+h.top+h.bottom;fn(s,[b,n.chart,n.canvas,Wr]);sn(s,"text",a,null,null,null,null,function(e){return C.getX(e)}).each(function(e){var t=e[A];if(za(t)){var a,r,n,i,o=C.getX(e),l=za(b.text)?C.getCustomizedVal(x,b.text,0,null,null,e,"targetLabel"):Hl(D,t,z,x,"targetLabel"),s=t<0,c=s?-1:1,u=k.bandwidth1(o)+O/2,d=S(t);w?(a=d,r=u,T===qo?(r+=L/2,P===Xo&&(n="1em",r=u+(E?O:L)/2)):T===Xo?n="0.3em":T===Ko&&(r-=L/2,P===Xo?(n="-0.3em",r=u-(E?O:L)/2):n="1em"),P===Xo?(i="middle",r-=T===Xo?0:T===Ko?_*c:-_*c):i=P===Qo?(a+=(_+M)*c,s?"end":null):(a-=(_+M)*c,s?null:"end")):(a=u,r=d,P===Qo?a+=(E?O:L)/2:P===Xo?i="middle":P===Zo&&(a-=(E?O:L)/2,i="end"),n=T===Xo?(a+=P===Xo?0:P===Qo?_:-_,"0.3em"):T===Ko?(r-=(_+M)*c,"-0.3em"):(r+=(_+M)*c,"1em")),qe(this).attrs({transform:"translate("+a+","+r+")","text-anchor":i,dy:n}).text(l);var h=this.getBoundingClientRect(),f=h.left-I,p=f+h.width,g=h.top-R,v=g+h.height,y=a+(f<j?j-f:B<p?-(p-B):0),m=r+(g<H?H-g:F<v?-(v-F):0);y!=a&&(a=y),m!=r&&(r=m),qe(this).attr("transform","translate("+a+","+r+")")}})}},ft.DATALABELS_getPreCalculatedSize=function(s,e,c){if(c.dataObject.hasLevelMarker||!e)return 0;var u,d=[],h=c.systemConf,t=c.dataObject,f=c.axes.rotated,p=t.isstacked(),g=t.noofBarEnabledSeries,v=.75*(f?c.plotarea.width:c.plotarea.height),y=h.chart.plot.datalabels.handleOverlapping,m="y"===s,b=new Pf(c),a=b.createElement(),x=c.datalabels.renderer?c.datalabels.renderer:c.datalabels.renderer=[];if(c.seriesdata.forEach(function(e,t){if(!e.disabled){var a=e.plotoptions,r=Hs(h.chart.plot.plotoptions[c.chartTypes[t].name],a),n=Vs(r,c);if(x[t]=x[t]||{},x[t].show=n,x[t].config=r,x[t].labeltype=function(e){var t=e.showAs;if(jl.has(t))return t;var r=$();return t.toString().replace(yt,function(){var e=arguments[1]||arguments[2]||arguments[3]||arguments[4]||arguments[5],t=arguments[0].match(/[a-z]+/gi)[0];if(r.has(t)){var a=r.get(t);a.push(e),r.set(t,a)}else r.set(t,[e])}),r}(r),n){b.setFont(r,t);var i=m&&g&&!p&&Ju(c,t)===$o,o=wf(c,null,r,wl,null,t),l=m?Mt(0,zt(Ea(r.padding,i&&so(c.chartTypes[t].value)?2:0),v)):0;i&&Ms(r,c)&&(l=l+2*zs(r,c)+Ds(r,c)),i&&(f||"html"===o.contentType)?function(e,t,a,r,n,i,o){var l,s=e.dataObject,c=e.seriesdata[o],u=no.helpers.getParsedYAxisOrder(c.yaxiscolumnorder),d=e.dataset.getDataType("y",u),h=s.getDomain(s.getCategories("x"),!0),f=d==Sn?s.getCategories("y",u):null,p=wf(e,null,t,wl,null,o),g=mr(za(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);c.data.forEach(function(e,t){s.updateSeriesdatabyCategories(wa(e),h,f,u).forEach(function(e){a.updateText(p,e),l=a.getMeasure(r?"w":"h"),r&&(l=zt(l,g)),i.push(l+n)})})}(c,r,b,f,l,d,t):(u=b.getMeasure("h"),u+=l+(!y||f||"y"!=s||i?0:u),d.push(u))}}}),m&&g&&p&&!t.isStackedPercentChart){var r=c.dataObject.getEncode("stack"),n=ls(c.dataObject.getEncode("stack",Object.keys(r)[0])),i=h.chart.plot.plotoptions[c.chartTypes[n].name].datalabels.stackLabels||{},o=!!i&&i.show,l=Mt(0,zt(Ea(i.padding,2),v));(c.datalabels.isStackedLabels=o)&&(b.setFont(i,n),Ju(c,n,Sl)===$o&&(f||function(a,r){var e=a.dataObject.getEncode("stack");return Object.keys(e).some(function(e){var t=ls(a.dataObject.getEncode("stack",e));return"html"===wf(a,null,r,Sl,null,t).contentType})}(c,i))?function(n,i,o,l,s,c){var u,e=n.dataObject.getEncode("stack"),d=mr(za(i.maxWidth)?i.maxWidth:"30%",n.plotarea.width);Ka(e,function(e){var t=ls(e),a=e.layout.getAllExtents(),r=wf(n,null,i,Sl,null,t);a.forEach(function(e){o.updateText(r,e),u=o.getMeasure(l?"w":"h"),l&&(u=zt(u,d)),c.push(u+s)})})}(c,i,b,f,l,d):(u=b.getMeasure("h")+l,d.push(u)))}return a.remove(),0<d.length?Mt.apply(null,d):0};var Pf=function(e){this.chartObj=e};Pf.prototype.createElement=function(){return this.element=sn(this.chartObj.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText").text("qtyplkjhgfd").style("fill",Qt)},Pf.prototype.setFont=function(e,t){Bs(this.element,e,this.chartObj,Qt,!1,t)},Pf.prototype.getMeasure=function(e){var t=ba(this.element.node());return"w"===e?t.width:t.height},Pf.prototype.updateText=function(e,t){var a=e.contentType||"text",r="html"===a&&e.multiLine,n=this.element;n[a](e(t)),r&&yf(n,0)},ft.initialize=function(o){var n=o.plot.renderer.mode,i=ft[n],l=ft.connector,s=Gs(o),e=Ne,c={};c[wl]=[],c[Sl]=[],c[Ol]=[],c[Al]=[];var u,d={rangeChart:[e.arearange,e.boxplot],connector:[e.pie,e.sunburst,e.funnel,e.pyramid]};d[Ol]=lt.innerLabels,d[Al]=lt.parentLabels;var f={add:function(e,t,a,r,n){var i=c[n=n||wl];return i=i[t]=i[t]||[],n===wl&&-1<d.rangeChart.indexOf(o.chartTypes[t].value)&&za(r)&&(u=!0,i=i[r=r||0]=i[r]||[]),i[a]=i[a]||[],i[a].push.apply(i[a],e),i[a].dataUpdate=e.dataUpdate,i},update:function(e,t,a,r,n,i,o){o=o||wl;var l=e.match(/\d+/g),s=l[0],c=l[1],u=l[2],d=l[3],h=f.getQueue(s,d,o)[c][u];h.X+=t,h.Y+=a,h.display=h.display&&!r,void 0!==n&&(h.DY=n),i&&(h.hookPosition=i)},getQueue:function(e,t,a){var r=c[a=a||wl];return r=r[e],a===wl&&-1<d.rangeChart.indexOf(o.chartTypes[e].value)&&za(t)&&r&&(r=r[t||0]),r},draw:function(){if(o.isAxisCategory){var e=o.dataObject.getEncode("stack"),t=o.dataObject.getStackGroup();(t=t?t.map(function(e,t){return t}):Object.keys(e)).forEach(function(e,t){var a=o.dataObject.getEncode("stack",e);if(c[Sl].length&&a){var r=ls(a);i(o,c[Sl][r],t,"stacklabel")}else"svg"===n&&sn(s,"g",[],".","class","stacklabel_"+t)}),t.length||"svg"!==n||sn(s,"g",[],"#","id",Sl)}o.seriesdata.forEach(function(e,t){var a=c[wl][t],r=o.chartTypes[t].value;-1<d.rangeChart.indexOf(r)&&u?(i(o,a&&a[0],t),i(o,a&&a[1],t)):i(o,a,t),-1<d[Ol].indexOf(r)&&(-1<d.connector.indexOf(r)&&l(o,a,t),i(o,c[Ol][t],t,Ol)),-1<d[Al].indexOf(r)&&i(o,c[Al][t],t,Al)})}};return f},pt.drawLabelsFromQueue=function(g,S,v){if(v.labelHandler=null,"image"!==v.plot.renderer.mode){var O=v.dataObject;if(v.isAxisCategory){Ka(o=O.getEncode("stack")||[],function(e,t){t=+t;var a=ls(e);if((O.noofBarEnabledSeries||O.isCombinationalChart)&&null!=a){var r=o[t].layout.getAllExtents();if(v.renderVisiblePointsOnly){var n=v.axes.x.scale.domain();r=r.filter(function(e){return xr(n,e[0])})}var i={renderer:v.renderer[a],chartObj:v,args:[{data:[r]},a,Sl,t],charttype:oi};pt.drawLabel(i)}})}g.forEach(function(e,t){pt.drawLabel(e)});var e=Io(v),A=S.length,P={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};if((O.isCombinationalChart||O.isContinousChart||O.isPolarAxisCategory||v.isGeoMap?function(){var e=O.isContinousChart,t={top:["hidden","topPlus","right","bottom","left"],bottom:["hidden","right","left"]};S=e?S.sort(function(e,t){return ge(e.x1,t.x1)}):S;for(var a=1;a<A;a++){var r,n,i,o=0,l=!1,s=0,c=qa(S[a].factor,1),u=(S[a].pointRadius||0)*c,d=S[a].x1,h=S[a].y1,f=S[a].x2,p=S[a].y2,g=S[a].x2-S[a].x1,v=S[a].y2-S[a].y1,y=t[qa(S[a].orient,"top")],m=S.slice(0,a);m=e?m.reverse():m;do{switch(y[s]){case"hidden":n="hidden"===(r=S[a]).overlap||O.isBubbleEnabled;break;case"topPlus":r.y1=h-v/2,r.y2=p-v/2,i=qo;break;case"right":r.x1=(d+f)/2+u,r.x2=(d+f)/2+u+g,r.y1=p+1,r.y2=p+v+1,i=Zo;break;case"bottom":r.x1=d,r.x2=f,r.y1=p+2*(1+u),r.y2=p+2*(1+u)+v,i=Ko;break;case"left":r.x1=(d+f)/2-u-g,r.x2=(d+f)/2-u,r.y1=p+1,r.y2=p+v+1,i=Qo}for(var b=a-1;0<=b;b--)if(l=Li(m[b],r)){o++;break}}while(++s<5&&l);if(0!=o){var x=!!O.isPolarAxisCategory||Ws(r,P),C=S[a].translateFunction,k=S[a].id,w=S[a].isStackedLabels;if(!x||5==o||n)C(k,null,null,!0,ct,ct,w?Sl:wl),S[a].x1=S[a].y1=S[a].x2=S[a].y2=0;else C(k,r.x1-d,r.y1-h,null,void 0,i,w?Sl:wl)}}}:O.noofBarEnabledSeries?function(){var a=v.axes.rotated;S.sort(function(e,t){return a?T(e.y1,t.y1):ge(e.x1,t.x1)});for(var e=0;e<A;e++){for(var t=!1,r=0,n=0,i=S[e].x1,o=S[e].y1,l=S[e],s=S.slice(0,e).sort(function(e,t){return a?T(e.x1,t.x1):ge(e.y1,t.y1)}),c="hidden"===l.overlap,u=e-1;0<=u&&r<2;u--){var d=Li(s[u],l);d&&(a?(n=s[u].x2-l.x1,l.x2+=n,l.x1+=n):(n=s[u].y1-l.y2,l.y2+=n,l.y1+=n),r++),t=t||d}if(t){var h=Ws(l,P),f=S[e].translateFunction,p=S[e].id,g=S[e].isStackedLabels;if(!h||1<r||c)f(p,null,null,!0,ct,ct,g?Sl:wl),S[e].x1=S[e].y1=S[e].x2=S[e].y2=0;else f(p,l.x1-i,l.y1-o,ct,ct,ct,g?Sl:wl)}}}:function(){if(A){var a,r,n,i=[],o=[],l=S.TOP,s=S.BOTTOM,c=0,u=0,e=[],t=[],d=0,h=0,f=0,p=0;S.forEach(function(e){if(e.isLeft){var t=Af(e,n,l,s,a,o,u,p,!0);n=t.totalslot,a=t.prev,u=t.count,p=t.need}else{t=Af(e,n,l,s,r,i,c,f);n=t.totalslot,r=t.prev,c=t.count,f=t.need}}),f||p?("funnel"===S.actualType&&i.reverse(),d=Of(i,d,e,l),o.reverse(),h=Of(o,h,t,l),Sf(e,l,n,d),Sf(t,l,n,h),S.forEach(function(e){v.labelHandler.update(e.id,e.DX,e.translate||0,e.hide,void 0,e.overlappingHookPosition)}),g.forEach(function(e){var t=e.args[1],a=v.labelHandler.getQueue(t);a&&a.properties&&a.properties.onOverlap&&a.properties.onOverlap()})):(g.forEach(function(e,t){var a=e.args[1],r=v.labelHandler.getQueue(a);r&&r.properties&&r.properties.onNonOverlap&&r.properties.onNonOverlap()}),S.forEach(function(e){v.labelHandler.update(e.id,0,0,null,e.actualDY)}))}})(),v.staticPaneSVG.select(".temp_label").remove(),v.labelHandler){var l=v.staticPaneSVG.selectAll("g.labelholder"),s=v.plot.renderer.mode;g.forEach(function(e){var t=e.args[1],a=O.isAxisCategory?e.args[3]:null,r=/(pieInnerLabels|funnelInnerLabels)/.test(e.charttype),n="pieInnerLabels"===e.charttype&&po(v.chartTypes[t].value)&&e.args[e.args.length-1]?Al:r?Ol:wl,i=v.labelHandler.getQueue(t,a,n),o=(i&&Ms(i.properties.dataLabels,v),gt[s]().args(i));l.call(o,t,n)}),v.labelHandler.draw()}}var o},pt.drawLabel=function(e){var t=e.chartObj,a=e.renderer,r=e.charttype,n=e.args,i=t.staticPaneSVG.selectAll("g.labelholder"),o=t.labelHandler;t.labelHandler||((o=t.labelHandler=ft.initialize(t)).chartType=r);var l=pt[r]();l.renderer(a).args(n),i.call(l,o)},ft.svg=function(c,e,i,t){var r="stacklabel"===(t=t||"label"),o=t===Ol||t===Al,n=c.chartTypes[0].value==Ne.packedbubble,u=c.chartTypes[0].value==Ne.treemap,l=sn(Gs(c),"g",e?[1]:[],".","class",t+"_"+i);if(e){var d=e.properties,s=d.dataUpdate,h=d.dataLabels,a=d.rp,f=d.rotation,p=d.rangeChart,g=d.yrangePos,v=d.reverseColor,y=d.contentType||"text",m=d.isMultiLine,b=c.dataObject.isPolarAxisCategory,x=c.isAxisCategory,C="clip"===h.textOverlap,k=Cf(h,c),w=x||b?$t:s.length,S="scatter"===d.type,O=Pn.isQuantileColorScale(c),A=$t;if((O||a.threshold||c.dataObject.isHierarchy||!(x||c.isGeoMap||b||c.dataObject.isNonAxisMultiSeriesCategory)||d.multiColoring)&&(A=function(e,t){var a=v?w-1-t:(x||b||c.dataObject.isNonAxisMultiSeriesCategory)&&!d.multiColoring?i:t,r=Hn(c,a,e&&e.data?e.data:e,i),n=d.isSunburst&&d.parentInnerLabel&&e.children?d.parentInnerLabel:h;return u&&o&&/(top-outset|bottom-outset)/.test(n.position)&&Pe(r).opacity<.1&&(r="white"),Fs(c.systemConf,r,n,c,o,i)}),C)sn((Xr.SAFARI?c.svg:c.getPatternSvg()).selectAll("defs"),"g",[1],".","class","textClipPaths");p&&(l=sn(l,"g",[1],".","class","rangePos_"+g)),r&&l.attr("id",Sl),l.attrs({"text-anchor":S?"middle":null,transform:d.translation});var P=Bs(l,h,c,a.color,o,i,r).fill;b&&l.attr("transform","translate("+c.plotarea_approx.x+","+c.plotarea_approx.y+")"),e.forEach(function(e,t){var a,r=e.dataUpdate||s,n=sn(l,"g",[1],".","class","subseries_"+t),i=za(h.strokeColor);if(i&&!function(e){return e in document.documentElement.style}("paintOrder")){var o=sn(sn(n,"g",[1],".","class","outlineGroup"),"text",r,".","class","outline");a=sn(n,d.GLT&&d.GLT.hasShowAsFunction?"g":"text",r,".","class","label"),T(o,e,i,i),T(a,e)}else T(a=sn(n,d.GLT&&d.GLT.hasShowAsFunction?"g":"text",r),e,i)})}function T(e,l,t,a){if(e[y](function(e,t){return l[t].text}),m&&e.each(function(e,t){yf(qe(this),l[t].X)}),e.styles({display:function(e,t){return!1===l[t].display?Qt:null},fill:A,"pointer-events":Qt,opacity:function(e){if(za(c.dataObject.hierarchical)&&za(c.cache.hierarchical)&&c.cache.hierarchical.active)return!0===e.active?1:.1},transition:"opacity ease .2s"}).attrs({x:function(e,t){return l[t].X},y:function(e,t){return l[t].Y},dy:function(e,t){return l[t].DY},"text-anchor":function(e,t){return l[t].ANCHOR},id:function(e,t){return l[t].ID},transform:function(e,t){var a=l[t].xy||[l[t].X,l[t].Y],r="";return l[t].xy&&(r="translate("+a+")"),za(f)&&(r+="rotate("+f+" "+a+")"),r||$t},"clip-path":C?function(e,t){var a=ba(this),r={name:"textClip",id:c.id,x:a.x,y:a.y,width:l[t].width,height:a.height},n={chartObj:c},i=tn.get(tn.svg_clips,"rect",r,n);return"url("+c.defsLocation+"#"+i+")"}:null,level:function(e){if(e.level)return e.level}}),t&&"contrast"===h.strokeColor&&e.attr("stroke",function(e){return Ga(A?A(e):P)}),a&&e.attr("stroke-width",h.strokeWidth),c.dataObject.isWaterfallEnabled&&void 0!==h.fontColor&&h.fontColor==$t&&e.style("fill",function(e,t){var a=Pn.getWaterfallColor(e,d.rp.categoryColorConfig);if(a)return a}),!(x||u||b||c.dataObject.hasLevelMarker||n||r||o||c.isGeoMap))if("html"===y){var s=Ms(h,c)?zs(h,c)+Ds(h,c):0;e.each(function(e,t){if(!1!==l[t].display){var a=qe(this),r=bf(a,k);if(mf(a,c,d.trans,d.txtHgt,null,r,l[t].isLeft?s:0),"middle"===l[t].ANCHOR){var n=(l[t].width-ba(this).width)/2,i=l[t].isLeft?1:-1,o=l[t].X+n*i;a.attr("x",o),yf(a,o)}}})}else Ys(e,c,d.trans,d.txtHgt)}},pt.dial=function(){var k,w;function t(e,x,C){e.each(function(){var e=w[0],s=w[1],t=k.commonRendererProp().params,c=t.chartObj,u=t.commonPlotOptions,a=t.color,r=e.plotoptions,d=c.plotarea_approx,n=c.axes.y.groups[0].scale.domain(),h=Hs(u,r,c,s),i=Vs(h,c),f=wf(c,t,h,wl,n[1]-n[0],0),p=f.contentType||"text",g="html"===p&&f.multiLine;if(i){var v=Ms(h,c)?zs(h,c)+Ds(h,c):0,y=sn(c.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Bs(y,h,c,a[0]),y.style("fill",qt);var o=[c.userdata.seriesdata.chartdata[0].data[0][0]],m=[];if(o.forEach(function(e,t){var a=g?"0.9em":"-.3em",r=f(e);y[p](r).attrs({x:i,dy:a,"text-anchor":"middle"});var n=ba(y.node()),i=za(h.x)?Ta(h.x,e,c,n):d.x,o=za(h.y)?Ta(h.y,e,c,n):d.y+(u.needle.show?n.height+(+h.padding||0)+(+u.needle.width/2||7)+v:n.height/2);g&&(za(h.y)||(o-=n.height),yf(y,i),n=ba(y.node()));var l={X:i,Y:o,DY:a,ANCHOR:"middle",text:r,display:!0,ID:"lbl"+s+"_0_"+t,width:n.width,height:n.height};m.push(l)}),C){var l=m[0],b=sn(C,"text",i?o:[]);Bs(b,h,c,a[0]),b[p](l.text).attrs({"text-anchor":l.ANCHOR,dy:l.DY,transform:"translate("+l.X+","+l.Y+")"}),g&&yf(y,l.X)}else{(0,x.add)(m,s,0).properties={type:xi,dataLabels:h,dataUpdate:o,showlabel:i,rp:t,contentType:p,isMultiLine:g}}}})}return t.renderer=function(e){return arguments.length?(k=e,t):k},t.args=function(e){return arguments.length?(w=e,t):w},t},pt.funnel=function(){var Z,Q;function t(e,X){e.each(function(){var i,a,e=Q[0],y=Q[1],m=Q[2],t=Q[3],b=Q[4],r=Q[5],n=Q[6],o=Q[7],x=n.width,l=n.height,s=Z.commonRendererProp().params,c=s.chartObj,u=c.systemConf,d=s.commonPlotOptions,h=s.dataset,f=s.yaxiscolumnorder,C=s.labelArray,p=c.chartTypes[0].name,k=c.svg.selectAll("g."+p+"group").attr("transform"),w=p===ki,g=(e=e[y]).plotoptions,S=0,O=0,A=0,P=0;if(Ms(a=Hs(d,g,c,y),c)){var v=Ls(a,c),T=Rs(v.hook);S=zs(a,c),O=S+Ds(a,c)+T.height,A=T.width,P=v.radius}var _=n.datalabelPadding||+a.padding||0,E=a.type,L=!0===u.chart.plot.datalabels.handleOverlapping,M=Cf(a,c),z=wf(c,s,a,wl,r,y),D=z.contentType||"text",I="html"===D,R=I&&z.multiLine,j=Vs(a,c),H=!0===a.relativeX;if(j){j=j?E:"hidden";var B=m.length,F=$n(c.svg.selectAll("g."+p+"group")).translate,W=0,V=sn(c.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Bs(V,a,c,s.color),V.attr("transform",k).style("fill",qt);var N=X.add;e.data.forEach(function(e,g){var t=o,v=[];t.forEach(function(e,t){var a,r=!Y(t),n=G(W),i=0,o=U(e,W)+(n?-O:O),l=w&&n?e.leftY:Mt(e.y,M-b-e.y),s=R?"middle":n?"end":null,c=R?"0.9em":"0.3em",u=e.data=m[B-1-t],d=z(u);V[D](d).attrs({x:o,y:l,"text-anchor":s,dy:c}),r&&R&&(yf(V,o),l-=(a=ba(V.node())).height/2,o+=a.width/2*(n?-1:1),yf(V,o),V.attr("y",l));if(L){if(r){i=Is((a=ba(V.node())).height,S,P,A);var h=n?-(0+_+O):x+_+O;R&&(h+=a.width/2*(n?-1:1));var f={id:"lbl"+y+"_"+g+"_"+t,x1:a.x-O,x2:a.x+a.width+O,y1:a.y-5-O-i/2,isLeft:n,y2:a.y+a.height+5+O+i/2,DX:h-o};C.push(f)}}else i=Is((a=ba(V.node())).height,S,P,A);var p={X:o,Y:l,ANCHOR:s,DY:c,text:d,display:r,ID:"lbl"+y+"_"+g+"_"+t,width:r?a.width:0,height:r?a.height+i:0,hookPosition:n?Qo:Zo};I&&(p.isLeft=n),v.push(p),W+=r?1:0}),W=-1;var n=N(v,y,g);n.properties={type:bi,dataLabels:a,dataUpdate:t,showlabel:j,rp:s,translation:k,trans:F,txtHgt:M,connectorPath:function(e,t){W+=Y(t)?0:1;var a=n[0][t].Y+(R?n[0][t].height/2:0),r=w&&G(W)?e.leftY:e.y;return"M"+function(e,t){return G(t)?e.leftx+_:e.rightx-_}(e,W)+" "+r+" L"+U(e,W,0)+" "+r+" L"+U(e,W)+" "+a},reverseColor:!0,onOverlap:function(){i="overlap"},contentType:D,isMultiLine:R},C.TOP=-F[1],C.BOTTOM=l+F[1],C.actualType=Ci})}function Y(e){var t=m[B-1-e],a=jn(h.getClr(t),c);return t.disabled||!h.getY(t,f)||!a}function G(e){switch(j){case"singleside":return!1;case"doubleside":return e%2==0;case"strokeddoubleside":return t/2<=e}}function U(e,t,a){var r=G(t);return H&&"overlap"!=i?r?e.leftx-O:e.rightx+O:(a=za(a)?a:_,r?0-a:x+a)}})}return t.renderer=function(e){return arguments.length?(Z=e,t):Z},t.args=function(e){return arguments.length?(Q=e,t):Q},t},pt.funnelInnerLabels=function(){var E,L;function t(e,d){e.each(function(){var e=L[0],h=L[1],f=L[2],p=L[4],t=L[5],g=L[6],a=L[7],v=g.width,r=E.commonRendererProp().params,y=r.chartObj,n=r.commonPlotOptions,m=r.dataset,b=r.yaxiscolumnorder,i=y.chartTypes[0].name,o=y.svg.selectAll("g."+i+"group").attr("transform"),x=i===ki,l=Hs(n,(e=e[h]).plotoptions,y,h),s=l.innerLabel,C=g.datalabelPadding||+l.padding||0,c=$n(y.svg.selectAll("g."+i+"group").node()).translate,k=f.length,w=!0===s.show,S=Cf(s,y),O=wf(y,r,s,Ol,t,h),A=O.contentType||"text",P="html"===A&&O.multiLine,u=Ms(l,y)?zs(l,y)+Ds(l,y):0;if(w=w&&zi(y,wl),S+=2*u,!e.disabled&&w){var T=sn(y.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Bs(T,s,y,r.color),T.attr("transform",o).style("fill",qt);var _=d.add;e.data.forEach(function(e,u){var t=a,d=[];t.forEach(function(e,t){var a=!function(e){var t=f[k-1-e],a=jn(m.getClr(t),y);return t.disabled||!m.getY(t,b)||!a}(t),r=x?e.midX:v/2,n=x?e.leftY:e.y,i=P?"0.9em":"0.5em",o=O(f[k-1-t]),l=null;if(T[A](o).attrs({x:r,y:n,dy:i,"text-anchor":"middle"}),a&&P&&(yf(T,r),n-=(l=ba(T.node())).height/2,S=l.height),a)if(l=l||ba(T.node()),x)a=!(S>2*(e.y0-e.leftY));else{var s=g.canOverlap?(e.rightx-e.leftx-2*C)/v*p:p;a=!(S<e.y-(e.y0-e.y)+s&&S>e.y0+s-(e.y-(e.y0-e.y)+s))}var c={X:r,Y:n,DY:i,ANCHOR:"middle",text:o,display:a,ID:"innerlbl"+h+"_"+u+"_"+t,width:a?l.width:0,height:a?l.height:0};d.push(c)}),_(d,h,u,$t,Ol).properties={type:bi,dataLabels:s,dataUpdate:t,showlabel:w,rp:r,translation:o,trans:c,reverseColor:!0,contentType:A,isMultiLine:P}})}})}return t.renderer=function(e){return arguments.length?(E=e,t):E},t.args=function(e){return arguments.length?(L=e,t):L},t};var Tf={};function _f(e,t,a,r){return _extends({mark:e,selector:t,data:2<arguments.length&&void 0!==a?a:[1],children:[]},r)}Tf.getTileBound=function(e,t){var a=e.axes.x.scale,r=e.axes.y.groups[0].scale,n=t.x0||0,i=t.x1||0,o=t.y0||0,l=t.y1||0;return{x:a(n),y:r(o),width:a(i)-a(n),height:r(l)-r(o)}},Tf.getLevel=function(e){return e.level||e.data&&e.data.level},Tf.getSeriesIndex=function(e){var t=Tf.getLevel(e);if(t)return+t.split("_")[0]},Tf.getItemIndex=function(e){var t=Tf.getLevel(e);if(t){var a=t.split("_");return+a[a.length-1]}},Tf.getParentColor=function(e,t){var a=e.params,r=a.color,n=a.commonPlotOptions.parent.fillColor,i=qt;if(t.depth){var o=r[Tf.getSeriesIndex(t)%r.length];i="{{clr-tint}}"===n?zn(o,.5,"brighter",_):"{{clr-shade}}"===n?zn(o,.5,"darker",_):"{{clr}}"===n?o:n||function(e,t){var a=Pe(e);return a.opacity=Aa(t)?1:t,a.toString()}(o,1e-4)}return i},Tf.isDisabled=function(e,t){var a=Tf.getSeriesIndex(t);return za(a)&&e.seriesdata[a].disabled},pt.hierarchy=function(){var C,k;function t(e,x){e.each(function(){var S,e=k[0],t=k[1],a=(k[2],k[3]),r=k[4],n=k[5],O=k[6]||[0,0],i=k[7],o=e.plotoptions,l=C.commonRendererProp().params,A=l.chartObj,s=A.systemConf,c=l.commonPlotOptions,P=l.dataset,u=l.yaxiscolumnorder,d=(l.labelArray,l.xscale),h=l.yscale,f=Vs(S=Hs(c,o,A,t),A),T=A.chartTypes[0].name;if(i){var p=ga(c.parent.datalabels,S);f=Ia(p.show),S=p}if(!e.disabled&&f){Io(A);var _=0;if(Ms(S,A)){var g=Ls(S,A),v=Rs(g.hook);_=zs(S,A),Ds(S,A),v.height,v.width,g.radius}var E=S.textOverlap,L=S.hAlign||Xo,M=S.vAlign||Xo,z=Ea(S.padding,.5),D=!0===s.chart.plot.datalabels.handleOverlapping&&E!==Qt,I=wf(A,l,S,wl,r,t,a),R=I.contentType||"text",j="html"===R&&I.multiLine,H=I.hasShowAsFunction,y=Wn(c,A),B=Cf(S,A),F=Je().domain([-.3,.9]),W="canvas"===A.plot.renderer.mode,V=function(){var e,t;e=M===Xo?.3:M===qo?-.3:1;if(j){var a=1.1*(S.showAs.length-1);-.3===e?t=(e-=a)+a:.3===e&&(t=(e-=a/2)+a/2)}return[e,t]}(),N=Bs(null,S,A,l.color,!1,t);E=H&&"ellipsis"===E?"hidden":E;var Y=sn(A.staticPaneSVG.select(".labelholder"),H?"g":"text",[1],".","class","temp_label"),m=(x.update,x.add),b=n,G=[];Bs(Y,S,A,l.color,!1,t),Y.styles({fill:qt}),b.forEach(function(e,t){var a,r=function(e){var t=U(e),a=t.x,r=t.y,n=t.width,i=t.height;return a=function(e,t){e+=L===Xo?t/2:L===Qo?t-z-_:z+_;return e}(a,n)+O[0],r=function(e,t){e+=M===Xo?t/2:M===qo?t-z-_:z+_;return e}(r,i)+O[1],{x:a,y:r,w:n,h:i}}(e),n=r.x,i=r.y,o=null,l=null,s=!Pn.isQuantileColorScale(A)||jn(P.getClr(e.data||e),A),c=V[0]+"em",u=V[1],d=L===Xo?"middle":L===Qo?"end":null;if(Y[R](function(){return o=I(e.data||e,r)}).attrs({dy:c,transform:"translate("+[n,i]+")","text-anchor":d,display:s}),"lbl"+e.level,"html"===R){if(j&&yf(Y,0),L!==Xo){Y.attr("text-anchor",il);var h=(a=ba(Y)).width+a.x;Y.attr("text-anchor",rl),n+=((a=ba(Y)).x-h)*(L===Qo?1:-1),Y.attr("transform","translate("+[n,i]+")").attr("text-anchor",d)}a=ba(Y)}else a=function(e,t,a){var r=e.width,n=e.height,i="middle"===t?r/2:"end"===t?r:0,o=F.range([n,0])(parseFloat(a));return e.x=-i,e.y=-o,e}(a=qr(o,B,kf(S,A),null,null,N["font-style"],N["font-weight"]),d,c);var f=a.width+0,p=a.height;a.x;if(D){var g={x1:a.x+n-_,y1:a.y+i-_,x2:a.x+n+a.width+_,y2:a.y+i+a.height+_},v=function(e,t){var a=e.height-2*z,r=e.width-2*z,n=e.x+O[0]+z,i=e.y+O[1]+z,o={x1:n,y1:i,x2:n+r,y2:i+a};if(T===Ai){var l=r/2,s=zt(t.height/2,l),c=Rt(It(l,2)-It(s,2)),u=l-c;o.x1+=u,o.x2-=u,o.y1+=u,o.y2-=u}return o}(U(e),a);if(!Ws(g,v)){var y;if("ellipsis"===E){var m=r.h,b=r.w;if(p+2*_<m){var x={left:v.x1+_,top:v.y1+_,right:v.x2-_,bottom:v.y2-_};"html"===R?(l=bf(Y,B),mf(Y,A,O,0,x,l,$t,[n,i])):Ys(Y,A,O,0,x,[n,i]);var C=Y.text();if(C&&".."!==C&&(o=Y[R](),y=!0,f=b-2*_,j)){var k=ba(Y);p=k.height,f=k.width+0,i+=(a.height-k.height)/2}}}y?"html"===R&&(l=bf(Y,B)):s=!1}}var w={X:0,DY:c,xy:[n,i],actualDY:u,ANCHOR:d,text:o,display:s,height:p,width:f,hookPosition:null,adjustVal:0};W&&"html"===R&&(H?w.customHTML=xf(Y):w.tspanInfo=l||bf(Y,B)),G.push(w)}),G.dataUpdate=b,m(G,t,0,a,i?Al:$t).properties={type:"hierarchy",dataLabels:S,color:l.color,dataUpdate:b,showlabel:f,multiColoring:y,rp:l,contentType:R,isMultiLine:j,GLT:I}}function U(e){switch(T){case Ai:return function(e){var t=2*e.r,a=2*e.r;return{x:(e.x||0)-t/2,y:(e.y||0)-a/2,width:t,height:a}}(e);case Pi:var t=Tf.getTileBound(A,e);return t=function(e){if(i&&("bottom-outset"===S.position||"top-outset"===S.position)){var t=nr(c.padding)["bottom-outset"===S.position?"bottom":"top"];"bottom-outset"===S.position&&(e.y=e.y+e.height-t),e.height=t}return e}(t);case Si:return xo(A,e,d,h,u)}}})}return t.renderer=function(e){return arguments.length?(C=e,t):C},t.args=function(e){return arguments.length?(k=e,t):k},t},pt.pie=function(){var j,H,B,F,W,y;function t(e,v){e.each(function(){var e=H[0],a=H[2],b=H[3],t=H[4],x=H[5],r="translate("+H[8][0]+","+H[8][1]+")",n=H[9]||{},i=j.commonRendererProp().params;W=i.chartObj,y=W.dataset;var o=W.systemConf,l=i.commonPlotOptions,C=i.labelArray,k=i.datasetIndex||H[1]||0,s=(j.plotarea?j.plotarea():W.plotarea).height;F=po(W.chartTypes[k].value),e=e[k],B=H[6];var w,S,O,A,P=!0===o.chart.plot.datalabels.handleOverlapping,c=e.plotoptions,u=Hs(l,c,W,k);if(A=Vs(u,W),!e.disabled&&A){var d=u.type,h=u.line,T=wf(W,i,u,wl,t,k),_=T.contentType||"text",E="html"===_,L=E&&T.multiLine,M=0,z=0,D=0,I=0;if(Ms(u,W)){var f=Ls(u,W),p=Rs(f.hook);M=zs(u,W),z=M+Ds(u,W)+p.height,D=p.width,I=f.radius}A=A?d:"hidden",w=(n.padding||+(u.padding||0))+z,O=Cf(u,W),S=+(pa.getValueOfPlotOptions(c,l)("outerPadding")||0),j.autoLabelDone=!1,j.showlabel=A,j.lineStrokeWidth=Ea(h.strokeWidth,1);var R=sn(W.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");R.attr("transform",r);var g=v.add;(F?e:e.data).forEach(function(e,y){var t=j.seriesdataAfterUpdate?j.seriesdataAfterUpdate[y]:F?e:a,m=[];Bs(R,u,W,i.color),R.style("fill",qt),t.forEach(function(e,t){var a,r=null,n=!V(e),i=0,o=N(e),l=o<0||Yt<o,s="doubleside"==A?o<0||Yt<o?-(b+w):b+w:x.centroid(e)[0],c=x.centroid(e)[1]+Mt(0,O-S-10-(b+x.centroid(e)[1])),u=L?"middle":l?"end":"start",d=L?"0.9em":"circular"==A&&Yt/2<o&&o<3*Yt/2?su(o)+"em":"0.3em",h=d,f=e.data;if(a=(F?0==e.depth:V(e))?null:T(f),R[_](a).attrs({x:s,y:c,dy:d,"text-anchor":u}),n&&L){yf(R,s);r=ba(R.node());if("circular"==A)c+=Je().range([-1,0]).domain(o<Yt?[0,Yt]:[2*Yt,Yt])(o)*r.height,s+=(0<o&&o<Yt?.5:Yt<o&&o<2*Yt?-.5:0)*r.width;else c-=.5*r.height,s-=r.width/2*(l?1:-1);R.attr("y",c),yf(R,s)}if(P){j.showlabel="auto";if(L||(d="0.3em",R.attr("dy",d)),n){i=Is((r=ba(R.node())).height,M,I,D);var p=l?-(b+w+10):b+w+10;L&&(p+=r.width/2*(l?-1:1));var g={id:"lbl"+k+"_"+y+"_"+t,x1:r.x-z,x2:r.x+r.width+z,y1:r.y-5-z-i/2,y2:r.y+r.height+5+z+i/2,isLeft:l,actualDY:h,DX:p-s,overlappingHookPosition:l?Qo:Zo};C.push(g)}}else i=Is((r=ba(R.node())).height,M,I,D);var v={X:s,Y:c,DY:d,ANCHOR:u,text:a,display:n,ID:"lbl"+k+"_"+y+"_"+t,width:n?r.width:0,height:n?r.height+i:0,hookPosition:"circular"===A?null:l?Qo:Zo};E&&(v.isLeft=l),m.push(v)});var d=g(m,k,y);d.properties={type:bi,dataLabels:u,dataUpdate:t,showlabel:j.showlabel,rp:i,translation:r,trans:H[8],txtHgt:O,isSunburst:F,connectorPath:function(e){var t=N(e);return"M "+B.centroid(e)[0]+" "+B.centroid(e)[1]+" L"+x.centroid(e)[0]+" "+x.centroid(e)[1]+" L"+x.centroid(e)[0]+" "+x.centroid(e)[1]+" L"+(t<0||Yt<t?-(b+w-z):b+w-z)+" "+x.centroid(e)[1]},onNonOverlap:function(){d.properties.showlabel=j.showlabel=A,j.autoLabelDone=!0},onOverlap:function(){d.properties.connectorPath=function(e,t){var a=N(e),r=Mt(0,O-S-10-(b+x.centroid(e)[1])),n=x.centroid(e)[1]+r,i=a<0||Yt<a?-1:1,o=d[0][t].Y+(L?d[0][t].height/2:0),l=o-n?(b+w-z+10)*i:x.centroid(e)[0],s=x.centroid(e)[1],c=(b+w-z+10)*i,u=o;return"M "+B.centroid(e)[0]+" "+B.centroid(e)[1]+" Q "+l+" "+s+" "+c+" "+u}},contentType:_,isMultiLine:L},C.TOP=-H[8][1],C.BOTTOM=s-H[8][1]})}})}function V(e){return!jn(y.getClr(F?e:e.data),W)||F&&null==e.parent||0==e.value}function N(e){return((F?B.startAngle()(e):e.startAngle)+(F?B.endAngle()(e):e.endAngle))/2}return t.renderer=function(e){return arguments.length?(j=e,t):j},t.args=function(e){return arguments.length?(H=e,t):H},t},pt.pieInnerLabels=function(){var u,d,ie,h;function t(e,c){e.each(function(){var e=d[0],a=d[2],t=d[4],r=d[8]?"translate("+d[8][0]+","+d[8][1]+")":null,W=d[7],n=d[9],V=u.commonRendererProp().params;h=V.dataset,ie=V.chartObj;var i=V.commonPlotOptions,N=d[1]||0,Y=po(ie.chartTypes[N].value),G=d[6],U=V.yaxiscolumnorder;n=Y?n:$t,e=e[N];var X=lt.bubblePie.has(ie.chartTypes[N].value),Z=Hs(i,e.plotoptions,ie,N).innerLabel,o=!0===Z.show&&zi(ie,wl);if(n){var l=ga(Z.parentLabel,Z);o=!1!==(za(l.show)?l.show:Z.show),Z=l}var Q=wf(ie,V,Z,Ol,t,N),q=Q.contentType||"text",K="html"===q&&Q.multiLine,$=Z.textOverlap||"adjust",J=Ms(Z,ie)?zs(Z,ie)+Ds(Z,ie):0;if(!e.disabled&&o){var ee=sn(ie.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Bs(ee,Z,ie,V.color),ee.attr("transform",r).style("fill",qt);var s=c.add;(Y?e:e.data).forEach(function(e,B){var t=X?u.seriesdataAfterUpdate?u.seriesdataAfterUpdate[B]:e:a,F=[];t.forEach(function(e,t){var a,r,n=null,i=!re(e),o=K?"0.9em":"0.35em",l=0,s=0;if(X){var c=V.stacked,u=V.axisrotated,d=V.xscale,h=V.yscale,f=is.getKey(e,N,ie),p=ie.subrenderer[B][f];e=p.data[N],W=p.arc,l=ie.dataObject.getXYvalue(u,c,d,h,U,e.data,"x",null),s=ie.dataObject.getXYvalue(u,c,d,h,U,e.data,"y",null);var g=iu(ie.dataObject.getXYvalue(u,c,d,h,U,e.data,"z",ie.zscale)/4,ne(e));Q=wf(ie,V,Z,Ol,p.total,N),a=l+g[0],r=s+g[1]}else a=W.centroid(e)[0],r=W.centroid(e)[1];var v=e.data,y=(Y?0==e.depth:re(e))?null:Q(v);if(ee[q](y).attrs({x:a,y:r,dy:o,"text-anchor":"middle"}),i&&K&&(yf(ee,a),r-=(n=ba(ee.node())).height/2),$!=Qt){n=n||ba(ee.node());var m=W.centroid(e),b=n.width/2+J,x=n.height/2+J,C={x:m[0]-b,y:m[1]-x},k={x:m[0]+b,y:m[1]-x},w={x:m[0]-b,y:m[1]+x},S={x:m[0]+b,y:m[1]+x},O=te(C,e)&&te(k,e)&&te(w,e)&&te(S,e);if(!O){if("adjust"===$){var A=Y?G.startAngle()(e):e.startAngle,P=Y?G.endAngle()(e):e.endAngle,T=ne(e),_=n.height+2*J,E=[ae(C),ae(k),ae(w),ae(S)],L=[C,k,w,S],M=oe(E),z=L[E.indexOf(M[0])],D=L[E.indexOf(M[1])],I=Rt((z.x-D.x)*(z.x-D.x)+(z.y-D.y)*(z.y-D.y)),R=Dt(I/2/Ft((P-A)/2))+_,j=[Ht(T)*R,-jt(T)*R];C={x:j[0]-b,y:j[1]-x},k={x:j[0]+b,y:j[1]-x},w={x:j[0]-b,y:j[1]+x},S={x:j[0]+b,y:j[1]+x};O=te(C,e)&&te(k,e)&&te(w,e)&&te(S,e)}O?(a=j[0]+l,r=j[1]+s):i=!1}}else n=ba(ee.node());var H={X:a,Y:r,DY:o,ANCHOR:"middle",text:y,display:i,ID:"innerlbl"+N+"_"+B+"_"+t,width:n.width,height:n.height};F.push(H)}),s(F,N,B,$t,n?Al:Ol).properties={type:bi,dataLabels:Z,dataUpdate:t,showlabel:o,rp:V,translation:r,trans:d[8],isSunburst:Y,contentType:q,isMultiLine:K}})}function te(e,t){var a=W.innerRadius()(t),r=W.outerRadius()(t),n=W.startAngle()(t),i=W.endAngle()(t),o=e.x*e.x+e.y*e.y,l=ae(e);return a*a<=o&&o<=r*r&&cu(n,i,l)}function ae(e){return Wt(e.x,-e.y)}function re(e){return!jn(h.getClr(Y?e:e.data||e),ie)||Y&&null==e.parent||0==e.value}function ne(e){return((Y?G.startAngle()(e):e.startAngle)+(Y?G.endAngle()(e):e.endAngle))/2}})}return t.renderer=function(e){return arguments.length?(u=e,t):u},t.args=function(e){return arguments.length?(d=e,t):d},t},pt.scatter=function(){var g,v,y=no.helpers;function t(e,p){e.each(function(){var Q,a=v[0],q=v[1],K=v[2]||0,$=v[3],J=[0,0],e=a.plotoptions,ee=g.commonRendererProp().params,te=ee.chartObj,t=te.systemConf,r=ee.commonPlotOptions,ae=ee.dataset,re=ee.stacked,ne=ee.axisrotated,ie=ee.yaxiscolumnorder,oe=ee.xscale,le=ee.yscale,se=ee.labelArray,n=te.chartTypes[q].value,ce=te.chartTypes[q].name==di,ue="canvas"===te.plot.renderer.mode,i=co(n),de=lt.bubble.has(n),o=i&&!de,he=lt.bubblePie.has(n),fe=te.dataObject.isPolarAxisCategory,pe=Ne.geoheatmap===n,ge=o&&$i.has(r.marker.symbol),l=Vs(Q=Hs(r,e,te,q),te),ve=qa(Q.orient,"top");if(!a.disabled&&l){var s=Io(te),ye=0,me=0,be=0,xe=0,Ce=0,c=function(e,t){var a=t.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),r={left:0,top:0,right:0,bottom:0};if(Ms(e,t))for(var n in r)r[n]=a["border-"+n]?a["border-"+n].size/2+1:1;return r}(Q,te);if(Ms(Q,te)){var u=Ls(Q,te),d=Rs(u.hook);ye=zs(Q,te),me=Ds(Q,te),be=d.height,xe=d.width,Ce=u.radius}var ke=de?0:Mt(0,+(Q.padding||0))+ye+be,we=Q.textOverlap,Se=!0===t.chart.plot.datalabels.handleOverlapping,h=!!i&&Wn(r,te),Oe=s.left,Ae=s.top,Pe=s.right,Te=s.bottom,_e=Oe+c.left,Ee=Ae+c.top,Le=Pe-c.right,Me=wf(te,ee,Q,wl,null,q,$),ze=Me.contentType||"text",De="html"===ze&&Me.multiLine,Ie=y.isCatNull(ae,"x"),Re=y.isCatNull(ae,"y",ie),je=Cf(Q,te),He=Bs(null,Q,te,ee.color,!1,q),Be=sn(te.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),Fe=p.update,f=p.add,We="bottom"===ve&&o,Ve=We?-1:1;a.data.forEach(function(e,X){var t=g.seriesdataAfterUpdate?g.seriesdataAfterUpdate[X]:a.data[X],Z=[];Bs(Be,Q,te,ee.color,!1,q),Be.styles({fill:qt}),t.forEach(function(e,t){var a,r,n,i=te.dataObject.getXYvalue(ne,re,oe,le,ie,e,"x",null,$),o=te.dataObject.getXYvalue(ne,re,oe,le,ie,e,"y",null,$),l=de||he?te.dataObject.getXYvalue(ne,re,oe,le,ie,e,"z",te.zscale):null,s=jn(ae.getClr(e),te),c=null,u=null,d=null,h=null,f=s&&!e.disabled,p=De?"0.9em":de||pe||We?"0.3em":"-0.3em",g="middle",v=de?null:qo,y=0,m=0;if(he){var b=is.getKey(e,q,te),x=te.subrenderer[X][b],C=x.data[q];r=(C.startAngle+C.endAngle)/2;var k=iu(l/2+ke,r);p=De?"0.9em":Yt/2<r&&r<3*Yt/2?su(r)+"em":"0",g=r<0||Yt<r?"end":"start",Me=wf(te,ee,Q,wl,x.total,q,$)}if(Be[ze](function(){return d=e.isDummy||Ie(ae.getX(e))||Re(ae.getY(e,ie,$))?null:Me(e)}).styles({display:function(){if(fe)return null;return i<Oe||Pe<i||o<Ae||Te<o?(f=!1,Qt):null}}).attrs({transform:null,dy:p,x:function(){return(c=he?i+k[0]:i)||0},y:function(){return D=ge?We?2:K:(de?0:K)/2,D*=Ve,(u=he?o+k[1]:o+(D+ke*Ve)*(ce&&!$?1:-1))||0},"text-anchor":g}),a="lbl"+q+"_"+X+"_"+t+"_"+$,De){if(yf(Be,c),n=ba(Be.node()),he){var w=Je().range([-1,0]).domain(r<Yt?[0,Yt]:[2*Yt,Yt]);u+=w(r)*n.height,yf(Be,c)}else We||(u-=de||pe?n.height/2:n.height);Be.attr("y",u),n=ba(Be.node())}else"html"===ze?n=ba(Be.node()):((n=qr(d,je,kf(Q,te),null,null,He["font-style"],He["font-weight"])).x=c-("middle"===g?n.width/2:"end"===g?n.width:0),n.y=u-n.height,We&&(u+=n.height/2));var S=0;if(!fe){S=Is(n.width,ye,Ce,xe);var O=ye+me/2+S/2,A=Be,P=n.x-O,T=P+n.width+0+2*O,_=c+(P<_e?_e-P:Le<T?-(T-Le):0);(y=_-c)&&(c=_,A.attr("x",_),De&&yf(Be,_));var E=u+(n.y<Ee?n.height+K+ke:0);(m=E-u)&&(te.dataObject.isPercentChart&&!ne?(u=E,A.attr("y",E)):f=!1),De&&(y||m)?n=ba(Be.node()):(Xr.IE&&(n=xa(n)),n.x+=y,n.y+=m)}S=fe?Is(n.width,ye,Ce,xe):S;var L=n.width+S,M=n.height,z=n.x+S/2;if(Se){var D=(de?l:K)/2;if(de){var I=i,R=o,j=Rt(It(I-z,2)+It(R-n.y,2))+ye,H=Rt(It(I-(z+n.width),2)+It(R-(n.y+n.height),2))+ye;if(D<j||D<H){var B;if("ellipsis"===we){var F=zt(n.height/2,D),W=Rt(It(D,2)-It(F,2)),V={left:I-W+ye,top:R-W+ye,right:I+W-ye,bottom:R+W-ye};"html"===ze?(h=bf(Be,je),mf(Be,te,J,0,V,h)):Ys(Be,te,J,0,V);var N=Be.text();if(N&&".."!==N&&(d=Be[ze](),B=!0,L=2*W-2*ye,De)){var Y=ba(Be.node());M=Y.height,L=Y.width+S,u+=(n.height-Y.height)/2}}B||(f=!1,Be.style("display",Qt))}}if(te.isGeoMap&&f||!te.isGeoMap){var G={id:a,x1:z-ye,y1:n.y-ye,x2:z+L+ye,y2:n.y+n.height+ye+be,pointRadius:D+ke-be,translateFunction:Fe,overlap:we,hookHeight:be,orient:ve,factor:Ve};se.push(G)}}var U={X:c,Y:u,DY:p,ANCHOR:g,text:d,display:f,height:M,width:L,hookPosition:v,adjustVal:y};ue&&"html"===ze&&(U.tspanInfo=h||bf(Be,je)),Z.push(U)}),Z.dataUpdate=t,f(Z,q,X,$).properties={type:fi,dataLabels:Q,color:ee.color,dataUpdate:t,showlabel:l,multiColoring:h,rp:ee,rangeChart:ce,yrangePos:$,contentType:ze,isMultiLine:De}})}})}return t.renderer=function(e){return arguments.length?(g=e,t):g},t.args=function(e){return arguments.length?(v=e,t):v},t};var Ef={top:"0.91em",center:"0.3em",bottom:"-0.3em"};function Lf(e,t,a,r){var n=1<arguments.length&&void 0!==t?t:[],i=a,o=r,l=e.config,s=e.globalFont,c=void 0===s?{}:s,u=l.text,d=l.hAlign,h=void 0===d?"left":d,f=l.vAlign,p=void 0===f?"top":f,g=fn($t,[l,c,Wr]);return{text:Ca(u),x:n[0],y:n[1],dy:Ef[p],anchor:ol[h],styles:g,trim:i&&o&&function(e){return function(e,t,a){var r=e.node(),n=ba(r),i={left:0,top:0,width:n.width,height:n.height};cn(r,r.textContent,i,t,qo,"..",a),".."===r.textContent&&e.text("")}(e,i,o)}}}function Mf(e){_classCallCheck(this,Mf);var t=e.data,a=e.selector,r=e.parser,n=r.x,i=r.y,o=r.text,l=r.dy,s=r.anchor,c=r.styles,u=r.trim,d=_f(Dr,a,t,{properties:{text:o,styles:c,attrs:{x:n,y:i,dy:l,"text-anchor":s}},onEnd:u});return this.encode=d}var zf=(_createClass(Df,[{key:"create",value:function(){var e=this.spec,t=e.data||[1],a=e.config,r=_f("g",".zc-legend-title");if(!a.show)return this.encode=r;var n,i,o=this.parse(),l=o.titleParser,s=o.backgroundParser;return n=new Mf({data:t,parser:l}),r.children.push(n),i=_f(Rr,$t,t,{properties:{attrs:{d:function(){return s.poly(n.element)}},styles:{opacity:0}}}),r.children.push(i),this.encode=r}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=nr(qa(t.margin,3));return{titleParser:Lf(e,[a.left,a.top],function(e,t){var a=e.x,r=void 0===a?0:a,n=e.y,i=void 0===n?0:n;return{left:r+t.left,top:i+t.top,right:r+e.maxWidth+t.left-t.right,bottom:i+e.maxHeight+t.top-t.bottom}}(e.bound,a),e.margin||a),backgroundParser:{poly:function(e){var t=function(e,t){return e.width||e.height?{x:e.x-t.left,y:e.y-t.top,w:e.width+t.left+t.right,h:e.height+t.top+t.bottom,r:ir(0)}:void 0}(ba(e),a);return t&&dn(t.x,t.y,t.w,t.h,t.r)}}}}}]),Df);function Df(e){_classCallCheck(this,Df),this.spec=e}var If=(_createClass(Rf,[{key:"create",value:function(){var e=this.spec.data||[1],t=this.parse(),a=t.backgroundParser,r=t.borderParser,n=t.poly,i=_f(Rr,".zc-legend-background",e,{order:":first-child",properties:{attrs:{d:n},styles:_extends({},a,r)},onStart:function(e){return e.style("display",Qt)},onEnd:function(e){return e.style("display",$t)}});return this.encode=i}},{key:"parse",value:function(){var t=this.spec,e=t.config,a=function(e){var t=e.color,a=void 0===t?qt:t,r=e.alpha;return{fillColor:a,fillOpacity:r}}(e.background),r=function(e){var t=e.show,a=e.color,r=e.size,n=e.alpha,i=e.style,o=e.lineCap,l=e.radius;return t?{strokeColor:a,strokeWidth:r,strokeOpacity:n,dashStyle:i,lineCap:o,radius:l}:{strokeWidth:0,radius:0}}(e.border),n=nr(t.margin||e.padding);return{backgroundParser:a,borderParser:r,poly:function(){var e=function(e,t,a){return{x:e.x-t.left,y:e.y-t.top,w:e.width+t.left+t.right,h:e.height+t.top+t.bottom,r:ir(a)}}(t.bound(),n,r.radius);return dn(e.x,e.y,e.w,e.h,e.r)}}}}]),Rf);function Rf(e){_classCallCheck(this,Rf),this.spec=e}var jf=1e-12;function Hf(a,e,r){e.style("fill",function(e,t){return function(e,t,a,r,n){var i=a?[0,e.length-1]:[e.length-1,0];r&&i.reverse();var o=e[i[t]];return n(o)}(r,t,a.isHorizontal,a.reversed,a.scaleObj)})}function Bf(t,e){var a=t.range,r=t.ranges,n=r&&r.length;e=function(e,t){t[1]>t[0]?(e[1]=zt(e[1],t[1]),e[0]=Mt(e[0],t[0])):(e[1]=Mt(e[1],t[1]),e[0]=zt(e[0],t[0]));return e}(e,a);return n?function(r,e){var t=e.scale_domain,a=e.datatype,n=e.isHorizontal,i=e.reversed,o=e.scale,l=e.ranges,s=wa(o.domain().map(o)).sort(ge),c=o.domain(),u=o.bandwidth(),d=void 0,h=void 0;s.some(function(e,t){if(r[0]>=e&&r[0]<=e+u){var a=r[0]-e;d=a<=.5&&0<=a?Mt(t-1,0):t}if(r[1]>=e&&r[1]<=e+u){a=e+u-r[1];h=a<=.5&&0<=a?zt(t+1,s.length-1):t}return za(d)&&za(h)}),d=Mt(0,Ea(d,0)),h=Mt(0,Ea(h,c.length-1));var f=c;a!==Sn&&1===l[0].length&&(f=function(e,t){for(var a=e[2],r=e[e.length-1-2],n=[],i=0;i<t.length;i++)n.push([a,t[i][0]]),a=t[i][0];return n.push(a,r),n}(t,f));if(!n&&!i||n&&i){var p=d;d=s.length-1-h,h=s.length-1-p}f=f.slice(d,h+1,0),r=a===Sn?f:Wf(r=oe(z(f)),t);return r}(e,t):e.map(function(e){return t.scale.invert(e)}).sort(ge)}function Ff(a,e){var t,r=e.scale,n=e.ranges,i=e.scale_domain,o=e.datatype,l=r.bandwidth()/2;if(o===Sn)t=[r(a[0])+l,r(a[a.length-1])+l];else{var s,c,u=r.domain();a=Wf(a,i),u.forEach(function(e,t){a[0]>=e[0]&&(s=1===n[0].length?t+1:t),!za(c)&&a[1]<=e[0]&&(c=1===n[0].length?t:t-1)}),s=Mt(0,Ea(s,0)),c=Mt(0,Ea(c,u.length-1)),t=[r(u[s])+l,r(u[c])+l]}return t[0]===t[1]&&(t[0]-=jf,t[1]+=jf),t}function Wf(e,t){return function(e,t){return e.indexOf(t)===e.lastIndexOf(t)}(t,e[1])||(e[1]-=jf),e}function Vf(e,t,a,r){var n=[0,0],i=a.getSelection().slice(0),o="x"===e.type;if(e.scale.bandwidth){var l=e.scale.bandwidth();i[0]-=i[0]%l,i[1]+=l-i[1]%l}else if(e.singleDomainContinuous){var s=o?0:1;i[0]=n[s],i[1]=e.dimension[s]}nc.CLIP_TRACK(a,i,r,"colorband"),function(e,t,a,r,n){var i=xn("path",".zcbrushhighlighttracker",[1],e,":nth-child(2)"),o=a[0]+1,l=a[1]-1,s=n?"M"+o+" "+t[1]+"L"+l+" "+t[1]+"L"+l+" "+r[1]+"L"+o+" "+r[1]+"Z":"M"+t[0]+" "+o+"L"+t[0]+" "+l+"L"+r[0]+" "+l+"L"+r[0]+" "+o+"Z";i.attr("d",s).styles({opacity:0,"stroke-width":0})}(t,n,i,e.dimension,o)}var Nf={brush:function(r,n){var i=[],o=n.helperOptions,l=o.config,s=n.brushInstance;return function(){Vf(o,s.parent_group,s,r);var e=Mr(r.legend.component.highlightItem),t=s.getSelection(),a=Bf(o,t);Hf(o,n.slider,a),e&&!o.singleDomainContinuous&&(l.filter.range=a,r.legend.component.highlightItem($t,!1,!0),Wa(a)!==Wa(i)&&r.addRemoveSeries(),n.tooltipComponent.show(),i=a)}},end:function(i,o){var l=o.helperOptions,s=o.brushInstance,c=[];return function(e,t){i.cache.search={},o.tooltipComponent&&o.tooltipComponent.hide();var a=s.getSelection(),r=function(e,t){var a=void 0,r=e.ranges,n=r&&r.length,i=e.scale;return n?a=Ff(Bf(e,t),e):e.singleDomainContinuous&&(a=e.singleDomainContinuous.map(function(e){return i(e)})),a}(l,a),n=Wa(a)===Wa(c);Ba(r)&&!n&&(r.sort(ge),c=r,s.setSelection(r,t?250:0))}},start:function(){return function(e){var t=e.sourceEvent;t&&t.preventDefault&&t.preventDefault()}}};function Yf(e,t,a){var r=cl(e);return[ll.getColorBandDimension(e,t,a),"horizontal"===r.layout,e.colorBand.ranges&&e.colorBand.ranges.length]}function Gf(e,t){var a,r,n=e.chartObj,i=e.helperOptions.spec.config,o=function(e,t){var a=e.colorBand.ranges,r=a&&a.length,n=e.filter.range,i=t.axes.clr.scale.domain();{if(r){var o=t.dataset.getDataType("clr"),l=n||(o===Sn?i:a);return n?function(e,t){var a,r,n=[e[0],e[1]+1e-12],i=1===t[0].length;return t.forEach(function(e,t){e[0]<=n[0]&&(a=t),e[1===e.length?0:1]<=n[1]&&(r=t)}),Aa(a)?a=0:i&&a++,Aa(r)&&(r=t.length-1),[t[a],t[r]]}(n,a):[l[0],l[l.length-1]]}return n||i}}(i,n),l=function(e){var t=e.helperOptions.orient;return t===Ko||t===qo}(e),s=ll.isReversedColorAxis(i),c=n.dataset.getColumn("clr"),u=c.datatype,d=c[u];if(n.dataset.getDataType("clr")===An){var h=i.colorBand;if(!(h.ranges&&h.ranges.length)){var f=n.axes.clr.scale.domain();r=[f[0],f[f.length-1]];var p=Dt(r[1]-r[0]);if(p){var g=Math.floor(Math.log(p)/Math.LN10)-2;a=Math.abs(Math.min(g,0))}}}var v=l?t:+!t;s&&(v=!v);var y=o[v?o.length-1:0];return za(a)&&-1===r.indexOf(y)&&(y=Ba(y)?y.map(function(e){return+e.toFixed(a)}):+y.toFixed(a)),Hl(d,y,u,n,"legend",ct,"-")}function Uf(e,t){this.chartObj=e,this.initialize(t)}function Xf(e,a){a.empty()||Ka(e,function(e,t){"styles"===t&&(e=function(e){var a={};return Ka(e,function(e,t){return a[Zf[t]||t]=e}),a}(e),Cn(a)&&(e=function(e){return e["stroke-width"]=qa(e["stroke-width"],1),e["stroke-linecap"]=ln(e["stroke-linecap"],e["stroke-dasharray"]),e["stroke-dasharray"]=on(e["stroke-dasharray"],e["stroke-width"]),e}(e))),a[t](e)})}Uf.prototype.initialize=function(e){var t,a,r,n,i,o=this.chartObj,l=e.position,s=e.spec,c=s.config,u=s.bound,d=ll.getColorBandDimension(c,u,o),h=d[0],f=d[1],p=c,g=p.colorBand,v=ll.getOrient(p),y=cl(p),m=o.dataset.getDataType("clr"),b=g.ranges,x=b&&b.length,C=c.filter.range,k=o.axes.clr.scale,w=k.domain(),S=ll.isReversedColorAxis(c),O="horizontal"===y.layout,A=O?[0,h]:[f,0],P=[[0,0],d];if(S&&A.reverse(),x)a=(t=Q().domain(m===Sn?w:Tn(c,o)).range(A).padding(0)).bandwidth()/2;else{var T=[w[0],w[w.length-1]];T[0]===T[1]&&(i=[-1,1],T=[-Ut,Ut]),t=Je().domain(T).range(A).clamp(!0)}if(r=t.domain(),o.axes.clr.brushScale=t,x){if(C)n=Ff(C,{scale_domain:w,datatype:m,ranges:b,scale:t});else n=[t(r[r.length-1])+a-1e-12,t(r[0])+a+1e-12];n.sort(ge)}else n=(n=C||i||t.domain()).map(function(e){return t(e)}).sort(ge);if(this.context=xn("g",".brush",c.filter.enabled?[1]:[],e.element||o.svg).attr("transform","translate("+l.join(" ")+")"),!this.context.empty()){this.helperOptions={isHorizontal:O,range:A,orient:v,singleDomainContinuous:i,dimension:d,initialExtent:n,scale_domain:w,datatype:m,reversed:S,scaleObj:k,config:c,bound:u,spec:s,ranges:b,type:O?"x":"y",element:e.element,scale:t,brushOptions:p.filter};var _=this.addBrush(P);this.addEvent(),_.setSelection(n),this.enableTooltip(v)}},Uf.prototype.enableTooltip=function(e){var t=this,a=t.chartObj,r=t.brushInstance,n=t.helperOptions.brushOptions.slider.tooltip,i={show:function(){a.legend.component.highlightItem($t,!1,!0)}};t.tooltipComponent=new wc(n,r,e,function(e){return Gf(t,e)},a,i)},Uf.prototype.addBrush=function(e){var t=this.chartObj,a=this.helperOptions,r=a.config,n=a.bound,i=a.brushOptions.slider,o=i[i.type],l=qa(i.shadow,o.shadow),s=Yf(r,n,t),c=cc(a.type,i.type,e,s[2],o),u=new vc({type:a.type,behaviour:"resizeToMouse",extent:e,styles:{track:a.brushOptions.track,selection:{opacity:0}}}),d=this.brushInstance=new mc(u);if(d.bindTo(this.context),this.slider=d.addCustomHandle(c),l){var h=qa(c[0]._effectElementIndex,0)+1;this.slider.select("path:nth-child("+h+")").attr("filter",wn(qa(i.shadow,o.shadow),t))}return d},Uf.prototype.addEvent=function(){var a=this,r=a.chartObj,n=a.brushInstance;a.hooksIds=H(),Ka(Nf,function(e,t){a.hooksIds.add(n.addHook(t,e(r,a)))})};var Zf={fillColor:"fill",fillOpacity:"fill-opacity",strokeColor:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",lineCap:"stroke-linecap",dashStyle:"stroke-dasharray"};function Qf(e,t){var a=e.mark,r=e.selector,n=e.data,i=e.order,o=e.properties,l=e.children,s=xn(a,r,n,t,i);e.depends&&(s=t.select(a+(r||""))),e.onStart&&e.onStart(s),Xf(o,s),e.element=s,l&&l.length?l.forEach(function(e){return Qf(e,s)}):s.selectAll("*").remove(),e.onEnd&&e.onEnd(s)}function qf(e,t,a,r,n){var i={config:t.title,bound:a,globalFont:n,margin:nr(5)};Qf(new zf(i).create(),e)}function Kf(e,t,a,r,n,i){var o=e.minmaxlabels.align,l=[];return l[0]=t===Zo?o===Qo?a.width:Mt(a.width,o===Zo?n.width:n.width/2):t===Qo?o===Qo?i[0]:o===Zo?i[0]+n.width:i[0]+n.width/2:o===Ko||o===qo?i[0]:i[0]-n.x,l[1]=r.height,t===Zo||t===Qo?l[1]-=zt(0,n.y):t===qo&&o===Ko&&(l[1]+=n.height),l[1]+=t===Ko?a.height:i[1],l=function(e,t,a){var r=(t.show?Ea(t.strokeWidth,1):0)-.5;a===Zo?e[0]-=r:a===Qo?e[0]+=r:a===qo?e[1]+=r:e[1]-=r;return e}(l,e.axisline,t)}function $f(e,t,a,r,n,i,o){var l=ba(a.node()),s=ll.getOrient(r),c=function(e,t){var a=t.selectAll("g.zchart-minmaxlabels,line.majorTicks");a.style("display",Qt);var r=xa(ba(t.node()));return a.style("display",null),r}(0,e),u=ba(e.selectAll("g.zchart-minmaxlabels").node()),d=function(e,t,a,r,n){var i=e.align,o=[];return o[0]=t===Zo?i===Qo?a.width:Mt(a.width,i===Zo?n.width:n.width/2):t===Qo?i===Qo?0:i===Zo?n.width:n.width/2:i===Ko||i===qo?0:-n.x,o[1]=r.height,t===Zo||t===Qo?o[1]-=zt(0,n.y):t===qo&&i===Ko&&(o[1]+=n.height),t===Ko&&(o[1]+=a.height),o}(n.minmaxlabels,s,c,l,u),h=Kf(n,s,c,l,u,i);return function(e,t,a,r){e===Ko?a[1]+=t:e===qo?r[1]+=t:e===Zo?a[0]+=t:r[0]+=t}(s,o,d,h),t.attr("transform","translate("+d[0]+","+d[1]+")"),e.attr("transform","translate("+h[0]+","+h[1]+")"),{axisGroupPosition:h,bandGroupPosition:d}}Te.continuous=function(){},Te.continuous.get=function(g){var v,t,a,y,e=f("legendClick","legendDblclick","legendMouseover","legendMouseout"),m=g.config,b=g.bound;function r(e){return e.each(function(e){var t=m,a=t.colorBand,r=function(e){var t={label:{},grid:{color:qt},ticklabel:{fontColor:e.fontColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,tooltip:e.tooltip},minmaxlabels:{padding:2,align:"center",fontSize:e.fontSize},tickmark:{color:"#B0B0B0",size:3},axisline:{show:!1}},a=e.colorAxis||{};return a=ga(t,a,!0)}(t),n=Ea(a.strokeWidth,1)/2,i=!1===r.show,o=qe(this);Ur("filter",t,v.globalProp,Te.continuous.ZC_brushComponent_getDefaultOptions(m,b,v),!0),o.attr("transform",$t);var l=sn(o,"g",[1],".","class","zcheader"),s=sn(o,"path",[1],".","class","colorband"),c=sn(o,"g",i?[]:[1],".","class","legend-axis");o.selectAll(".brush,.highlight,.zc-legend-background").style("display",Qt),qf(l,t,b,o,g.globalFont),Te.colorBand(s,g,v),Te.colorAxis(c,g,v,r);var u=i?[0,0]:$n(c).translate,d=$f(c,s,l,m,r,u,n),h=p();i||(Te.colorAxis.handleOverlapNOverlap(c,d.axisGroupPosition,h,v,g,r,o),d=$f(c,s,l,m,r,u,n),qf(l,t,b,o,g.globalFont),h=p()),o.selectAll(".brush,.highlight").style("display",$t);var f={position:d.bandGroupPosition,element:o,spec:g};v.legend.brush=new Uf(v,f);function p(){return vl(y,v,null,o,m)}Te.continuous.events(v,{position:d.bandGroupPosition,spec:g,element:o}),h=p(),function(e,t){var a={bound:function(){return ba(e)},config:t,margin:t.colorBand.padding};Qf(new If(a).create(),e)}(o,m)}),r}return r.dispatch=e,r.chartarea=function(e){return arguments.length?(y=e,r):y},r.systemconf=function(e){return arguments.length?(t=e,r):t},r.chartObj=function(e){return arguments.length?(v=e,r):v},r.color=function(e){return arguments.length?(a=e,r):a},r},Te.continuous.slider=function(e,t,a){var r=sn(t,"g",[1],".","class","slider"),n=a.config,i=a.bound,o=n,l=o.itemHoverStyle||{},s=ll.getColorBandDimension(n,i,e),c="horizontal"===cl(o).layout,u=l.type,d=c?"x":"y",h={container:r,config:ga(ic.apply(null,Yf(n,i,e))[u],l[u],!0),type:u,chartObj:e,isHorizontal:c,bound:s};if(r.selectAll("*").remove(),u){var f=lc(u,h.config,d,s);mc.ADD_HANDLE(f,r)}return{container:r}},Te.continuous.tooltip=function(l,e,t){var a=t,r=a.itemHoverStyle||{},s=ll.getOrient(a),n={enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)",fontSize:l.globalProp.fontL1Size.l5,orient:s},c={chartObj:l,config:ga(n,r.tooltip,!0),container:e},i=function(){var e,t,a=l.legend.highlight.slider.container.selectAll("path").node(),r=a?$n(a).translate:[0,0],n=ba(a),i=c.config,o=i.padding+i.margin;switch(s){case qo:e=0,t=n.y-o;break;case Qo:e=n.y-o,t=0;break;case Zo:e=n.y+n.height+o,t=0;break;case Ko:e=0,t=n.y+n.height+o}return[e+r[0],t+r[1]]}(),o=new Cc(c);return o.container.attr("transform","translate("+i[0]+","+i[1]+")"),o},Te.continuous.ZC_brushComponent_getDefaultOptions=function(e,t,a){var r={fillColor:qt},n={type:"lever",shadow:"0 0 2px rgba(0,0,0,0.2)",tooltip:{enabled:"continuous"===_n(e,a),padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)",fontSize:a.globalProp.fontL1Size.l5}};return{track:r,slider:ga(ic.apply(null,Yf(e,t,a)),n,!0)}},Te.continuous.events=function(g,e){g.legend.highlight={};var t,n,i,s=e.position,a=e.spec,r=a.config,c=e.element,o=g.legend.component,v=r,l=v.itemHoverStyle||{},u=c.selectAll(v.filter.enabled?".selection":".colorband"),d=c.selectAll(".zcbrushhighlighttracker"),y="horizontal"===cl(v).layout,h=sn(c,"g",[1],".","class","highlight").style("display",$t),f=g.legend.highlight.slider=Te.continuous.slider(g,h,a),p=g.legend.highlight.tooltip=Te.continuous.tooltip(g,h,r),m=(f.container,v.events);if(h.style("display",Qt).style("opacity",0),m&&(t=0==Ea(m.enabled,!0)),!t&&l.type&&l.type!==Qt){var b={chartObj:g},x={mousemove:function(){var e=_o((v.filter.enabled?d:u).node(),nt()),t=y?e[0]:e[1];n=function(e){var t=v.colorBand.ranges,a=v.itemHoverStyle||{},r=g.axes.clr.brushScale;{if(t&&t.length){var n=v.colorAxis&&v.colorAxis.reversed,i=r.bandwidth(),o=ja(e/i);return o=y&&n||!y&&!n?t.length-1-o:o}var l=g.axes.clr.scale.domain();if(l[0]===l[1])return l;var s=Ea(a.triggerOffset,10),c=r.invert(e-s/2),u=r.invert(e+s/2),d=Dt(u-c),h=Et(+(Bt(d)/Vt).toFixed(2)),f=It(10,h),p=Et(r.invert(e)/f)*f;return[p=+p.toFixed(12),p+f-1e-12]}}(t),nt().stopImmediatePropagation(),g.legend.brush.tooltipComponent&&g.legend.brush.tooltipComponent.hide(!0);o.highlightItem(t,!0),o.highlightSeries(n,!0)},mouseout:function(e,t,a){o.highlightItem($t,!1),o.highlightSeries(i,!1)}},C=$t;Mo(u,x,C,b,"highlight"),Mo(d,x,C,b,"highlight")}o.highlightItem=function(e,t,a,r){u.style("cursor",t?Kt:$t),t?(function(e){var t,a=v.colorBand.ranges,r=v.colorAxis&&v.colorAxis.reversed,n=g.axes.clr.brushScale;if(a&&a.length){var i=n.bandwidth(),o=ja(e/i);o=y&&r||!y&&!r?a.length-1-o:o,e=n(a[o])+i/2,t=g.seriesColor[o%g.seriesColor.length]}else t=g.axes.clr.scale(n.invert(e));var l=y?[e,0]:[0,e];l[0]+=s[0],l[1]+=s[1],ys(h),c.selectAll(".highlight").style("fill",t),h.style("display",$t).style("opacity",1).attr("transform","translate("+l+")")}(e),function(e){var t=v.colorBand.ranges,a=g.dataset.getColumn("clr"),r=a.datatype,n=a[r],i=t&&t.length?t[e]:e[0];p.show(Hl(n,i,r,g,"legend",ct,"-"))}(za(r)?r:n)):function(e){e?h.style("opacity",0):h.transition().style("opacity",0)}(a)},o.highlightSeries=function(a,e){g.highlightContext=$t;var r=g.legendHighlight;if(e){if(za(i)&&Wa(i)!==Wa(a)){var t=i;i=$t,o.highlightSeries(t,!1)}g.seriesdata.forEach(function(e,t){r.highlightSelectedSeries(v,t,a),r.highlightUnselectedSeries(v,t,a)}),i=a}else g.seriesdata.forEach(function(e,t){r.reset(v,t,a,g.seriesdata.length-1===t)})}};Te.continuous.events;Te.colorBand=function(e,t,a){var r,n,i,o,l=t.config,s=t.bound,c=l,u=c.colorBand,d=ll.getColorBandDimension(l,s,a),h=d[0],f=d[1],p="horizontal"===cl(c).layout,g=u.ranges&&u.ranges.length,v=ll.isReversedColorAxis(l),y=ir(u.borderRadius);v?(r=p?100:0,o=p?0:100):(n=p?100:0,i=p?0:100);var m,b,x,C=a.axes.clr.scale;if(g){b=C.range().filter(function(e){return e!==$t});for(var k=[],w=[],S=0;S<g;S++)k.push(S,S+1),w.push(b[S],b[S]);m=k,b=w,x=M().domain(m).range([0,100])}else m=C.domain(),b=C.range(),m[0]===m[1]&&(b=[b[0],b[0]]),x=Je().domain([m[0],m[m.length-1]]).range([0,100]);var O=an({type:"linear",options:{linear:{x1:r,y1:i,x2:n,y2:o,stopColor:b,stopOffset:m.map(function(e){return x(e)+"%"})}}},[0,h]),A={chartObj:a},P=tn.get(tn.svg_gradients,"svgGradientFill",O,A);e.attr("d",dn(0,0,h,f,y)).styles({stroke:u.strokeColor,"stroke-opacity":u.strokeOpacity,"stroke-width":u.strokeWidth,"fill-opacity":u.fillOpacity,fill:"url("+a.defsLocation+"#"+P+")","pointer-events":"visible"})};function Jf(e,r,t,n,i,a){var o=n.systemConf,l=t.minmaxlabels,s=a,c=s.colorBand,u=cl(s),d=s.filter.enabled?function(e,t,a,r){var n=e.type,i=e[n],o="horizontal"===r.layout;return"triangleUp"===n||"triangleDown"===n?[0,0]:"lever"===n||"vernier"===n?[i.width,i.height]:"pentagon"===n?[i.size+2*i.bandWidth,t[o?1:0]+1.5*i.bandWidth+2]:[i.size,i.size]}(s.filter.slider,r,0,u):[0,0],h=Ea(l.padding,2),f=l.align,p=l.text,g=c.ranges&&c.ranges.length,v=ll.isReversedColorAxis(a),y=[],m=n.dataset.getColumn("clr"),b=m.datatype,x=m[b];if(l.show)if(g){var C=Tn(a,n);y=[C[0][0],C[C.length-1][C[C.length-1].length-1]]}else{var k=n.axes.clr.scale.domain();y=[k[0],k[k.length-1]]}v&&y.reverse();var w=sn(sn(e,"g",[1],".","class","zchart-minmaxlabels"),"text",y);w.each(function(e,t){var a=function(e,t,a,r,n,i){var o,l,s,c;e===qo?o=a===Ko?(s="-0.3em",c=0===i?null:"end",l=-t[1]-r-Mt(0,(n[1]-t[1])/2),0===i?0:t[0]):a===qo?(s="1em",c=0===i?null:"end",l=r+Mt(0,(n[1]-t[1])/2),0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=-t[1]/2,0===i?-r-n[0]/2:t[0]+r+n[0]/2):e===Ko?o=a===Ko?(s="-0.3em",c=0===i?null:"end",l=-r-Mt(0,(n[1]-t[1])/2),0===i?0:t[0]):a===qo?(s="1em",c=0===i?null:"end",l=t[1]+r+Mt(0,(n[1]-t[1])/2),0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=t[1]/2,0===i?-r-n[0]/2:t[0]+r+n[0]/2):l=e===Qo?a===Zo?(s=0!==i?"0.71em":"0em",c="end",o=-t[0]-r-Mt(0,(n[1]-t[0])/2),0!==i?0:t[1]):a===Qo?(s=0!==i?"0.71em":"0em",c=null,o=r+Mt(0,(n[1]-t[0])/2),0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=-t[0]/2,0!==i?-r-n[0]/2:t[1]+r+n[0]/2):a===Zo?(s=0!==i?"0.71em":"0em",c="end",o=-r-Mt(0,(n[1]-t[0])/2),0!==i?0:t[1]):a===Qo?(s=0!==i?"0.71em":"0em",c=null,o=t[0]+r+Mt(0,(n[1]-t[0])/2),0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=t[0]/2,0!==i?-r-n[0]/2:t[1]+r+n[0]/2);return{x:o,y:l,dy:s,anchor:c}}(i,r,f,h,d,t);qe(this).attrs({x:a.x,y:a.y,"text-anchor":a.anchor,dy:a.dy}).text(p?p[t]:Hl(x,e,b,n,"minmaxlabels"))}),fn(w,[l,o.chart,o.canvas,Wr])}function ep(e,t,a,r){r=r||[0,0];var n=ba(e),i={x1:n.x+t[0]+a[0]+r[0],y1:n.y+t[1]+a[1]+r[1],width:n.width,height:n.height};return i.x2=i.x1+n.width,i.y2=i.y1+n.height,i}function tp(e,t,a){var r=e,n=ll.getOrient(r),i=cl(r),o=i.hAlign,l=i.floating,s=a.width,c=a.height,u=a.left,d=a.top,h=s-r.marginLeft-r.marginRight,f=c-r.marginTop-r.marginBottom,p=u+r.marginLeft,g=d+r.marginTop,v=t.maxWidth,y=t.maxHeight;t={};return l?(t.x1=zt(r.x,s-v),t.y1=zt(r.y,c-y),t.x2=zt(t.x1+v,s),t.y2=zt(t.y1+y,c)):(n===qo?(t.y1=g+f-y,t.x1=o===Zo?p:o===Qo?p+h-v:p+(h-v)/2):n===Ko?(t.y1=g,t.x1=o===Zo?p:o===Qo?p+h-v:p+(h-v)/2):n===Qo?(t.y1=g,t.x1=p+h-v):(t.y1=g,t.x1=p),t.x2=t.x1+v,t.y2=t.y1+y),t}Te.colorAxis=function(e,t,n,a){var r,i=t.config,o=t.bound,l=i,s=l.colorBand,c=a.minmaxlabels,u=a.axisline,d=u.show?Ea(u.strokeWidth,1):0,h=ll.getColorBandDimension(i,o,n),f=h[0],p=h[1],g=s.type,v=ll.getOrient(l),y=cl(l),m=n.dataset.getColumn("clr"),b=m.datatype,x=m[b],C=n.axes.clr.component,k=n.axes.clr.scale.domain(),w=c.show&&c.excludeIntervals?[]:k,S=ll.isReversedColorAxis(i),O="horizontal"===y.layout,A=O?[0,f]:[p,0],P=c.show&&c.excludeIntervals&&v===Ko?[0,0]:v===qo||v===Ko?[0,p]:[f,0],T=s.ranges&&s.ranges.length,_=s.labels;if(n.axes.clr.ticks=Ae.ticks(n,a,"clr",0,v,n.chartarea),S&&A.reverse(),T){k=Tn(i,n);var E=n.dataset.getDataType("clr")===Sn;r="continuous"!==g||E?Q().domain(k).range(A).padding(0):(k=z(k),s.minRange!==k[0]&&k.splice(0,0,s.minRange),M().domain(k).range(A))}else{if(w[0]===w[1]){var L=Dt(A[0]-A[1]);A=[L/2,L/2]}r=Je().domain([k[0],k[k.length-1]]).range(A)}r.origRange=A,w=c.show&&c.excludeIntervals?[]:k,C.orient(v).scale(r).tickSize(Ea(a.tickmark.size,6),0).majorTicks(function(e,t,a,r){var n,i,o,l;n=i=o=l=0,e==qo?(i=-r,l=-a-r):e==Ko?l=a+(i=r):e==Zo?(n=t+r,o=r):e==Qo&&(n=-t-r,o=-r);return{x1:n,y1:i,x2:o,y2:l}}(v,f,p,d)).systemconf(n.systemConf).chartObj(n).tickValues(w).columnIndices([n.dataset.getColumnIdx("clr")]).tickFormat(function(e,t){if(_&&_.length){var a=ll.getLabelIndex(e,s,n);if(za(a))return this.__formattedValue=_[a],qe(this).text(_[a])}var r=Hl(x,e,b,n,"legend",null,"-");this.__formattedValue=r,qe(this).text(r)}),e.datum(a).attr("transform","translate("+P[0]+","+P[1]+")").call(C,"clr"),e.selectAll("g.tick").style("display",null),e.selectAll("line.minorTicks").attr(O?"x2":"y2",null),e.selectAll("text.ticklabel").style("pointer-events","visible"),function(e,t,a,r,n){var i=e.selectAll("path.domain");if(t.show){var o=Ea(t.strokeWidth,1),l=0,s=0;a===Zo?l=o/2:a===Qo?l=-o/2:s=a===qo?-o/2:o/2,i.attr("transform","translate("+l+","+s+")").attr("d",r?"M0,0 L"+n[0]+",0":"M0,0 L0,"+n[1]).styles({"stroke-dasharray":on(t.style,o),"stroke-linecap":ln(t.lineCap,t.style)})}else i.remove()}(e,u,v,O,h),e.call(Jf,h,a,n,v,i)},Te.colorAxis.handleOverlapNOverlap=function(e,t,a,r,n,i,o){var l=e.selectAll("g.zchart-minmaxlabels").selectAll("text"),s=e.selectAll("g.tick").selectAll("text");!function(e,t,a,r,n,i,o){var l=ba(o.node()),s=[],c=[],u=0;e.each(function(){c.push(ba(this).width)}),c=Ue(c),e.each(function(){var e=$n(this.parentNode).translate;s.push(ep(this,t,a,e)),function(e,t,a,r,n,i,o,l){var s=o.config,c=o.bound,u=ll.getOrient(s),d=u===Qo||u===Zo?1:.5,h=(c=tp(s,c,t.chartarea,t.canvasarea),s.title.show?ba(l.selectAll(".zc-legend-title > text").node()).width:0),f=(c.x2-c.x1-(i.width-Mt(n,h)))*d,p=c.y2-c.y1,g={left:a[0],top:a[1],right:a[0]+f,bottom:a[1]+p};if(r.x2-r.x1>f){var v={left:a[0],top:a[1],width:r.width,height:r.height};return cn(e,e.textContent,v,g,qo,"..",{left:5,right:5,top:5,bottom:5}),".."===e.textContent&&(qe(e).text(""),qe(e.parentNode).style("opacity",0)),!0}}(this,n,e,s[u],c,l,i,o)&&(s[u]=ep(this,t,a,e)),function(e,t,a,r){for(var n,i=r-1;0<=i&&!n;i--)n=Li(a[i],a[r]);if(t.length&&(Li(a[r],t[0])||Li(a[r],t[1]))||n)return qe(e.parentNode).style("display",Qt),!0}(this,r,s,u)&&(s[u]={x1:0,y1:0,x2:0,y2:0}),u++})}(s,t,a,function(e,i,o,t,a){var r=a.config,n=a.bound,l=cl(r),s=[],c={left:(n=tp(r,n,t.chartarea,t.canvasarea)).x1,top:n.y1,right:n.x2,bottom:n.y2},u={left:5,right:5,top:5,bottom:5};if(e.each(function(e,t){var a=ep(this,i,o),r={left:a.x1,top:a.y1,width:a.width,height:a.height};cn(this,this.textContent,r,c,qo,"..",u),".."===this.textContent&&qe(this).text(""),s[t]=ep(this,i,o)}),"horizontal"===l.layout&&s.length&&Li(s[0],s[1])){var d=s[1].x2-s[0].x1;e.each(function(e,t){var a=ep(this,i,o),r={left:a.x1,top:a.y1,width:a.width,height:a.height},n=xa(c);0===t?n.right=a.x1+d/2:n.left=a.x2-d/2,cn(this,this.textContent,r,n,qo,"..",u),".."===this.textContent&&qe(this).text(""),s[t]=ep(this,i,o)})}return s}(l,t,a,r,n),r,n,o),!0===i.ticklabel.tooltip&&s.each(function(e){pn(qe(this),this.__formattedValue)})};var ap=function(e){var t=e.encode,a=e.view;na.setComponent(np(t,a),e)},rp=function(e,t){return na.getComponent(np(e,t))};function np(e,t){return"legend-"+e+"-"+t}var ip=(_createClass(op,[{key:"create",value:function(){this.encode=function(e,t){var a=ll.isContinousLegend(e);return(e.legend.component=a?Te.continuous.get(t):Te.discrete.get(t)).chartarea(e.chartarea).systemconf(e.systemConf).color(e.seriesColor).chartObj(e)}(this.spec.chartObj,this.spec)}},{key:"draw",value:function(e){this.parent=e,this.encode(e.datum(this.spec.config))}},{key:"resize",value:function(e,t){if(e||t){var a=this.spec.bound,r=pl(e,t,a),n=r.w,i=r.h;a.maxWidth=n,a.maxHeight=i,this.create(),this.draw(this.parent)}}}]),op);function op(e){_classCallCheck(this,op),this.spec=e}var lp=(_inherits(sp,ip),sp);function sp(){return _classCallCheck(this,sp),_possibleConstructorReturn(this,(sp.__proto__||Object.getPrototypeOf(sp)).apply(this,arguments))}lp.encode="clr",lp.view="band",lp.domMode="svg",na.setComponent("colorLegendBand",lp),ap(lp);var cp=ll.hexToRGB;function up(t){return function(e){switch(t){case oi:case si:case li:case ci:return"M"+.5*-e+" "+.5*e+" L"+.5*-e+" "+.2*-e+" L"+.25*-e+" "+.2*-e+" L"+.25*-e+" "+.5*e+"Z  M"+.125*-e+" "+.5*e+" L"+.125*-e+" "+.5*-e+" L"+.125*e+" "+.5*-e+" L"+.125*e+" "+.5*e+"Z  M"+.25*e+" "+.5*e+" L"+.25*e+" "+.1*e+" L"+.5*e+" "+.1*e+" L"+.5*e+" "+.5*e+"Z";case ui:case di:return"M"+.5*-e+" "+.5*e+" L"+.5*-e+" "+.28*e+" L"+.24*-e+" "+.08*e+" L"+.13*-e+" "+.19*e+" L"+.07*e+" "+.14*-e+" L"+.23*e+" "+.012*e+" L"+.5*e+" "+.5*-e+" L"+.5*e+" "+.5*e+"Z";case bi:case yi:case Oi:case mi:return"M"+.045*e+" "+.045*-e+" L"+.5*e+" "+.045*-e+" A "+.455*e+" "+.455*e+" 0 0 0 "+.045*e+" "+.5*-e+"Z M"+.045*-e+" "+.045*e+" L"+.045*-e+" "+.41*-e+" A "+.455*e+" "+.455*e+" 1 1 0 "+.41*e+" "+.045*e+"Z";case Ci:return"M"+.5*-e+" "+.5*-e+" L "+.5*e+" "+.5*-e+" L "+.15*e+" "+.2*e+" L "+.15*e+" "+.5*e+" L "+.15*-e+" "+.5*e+" L "+.15*-e+" "+.2*e+"Z";case ki:return"M0 "+.5*-e+" L"+.23*e+" "+.06*-e+" L"+.23*-e+" "+.06*-e+"Z M"+.5*-e+" "+.5*e+" L"+.5*e+" "+.5*e+" L"+.27*e+" 0 L"+.27*-e+" 0Z";case wi:return Ji("line")(e);case Pi:return Ji("square")(e);case fi:case pi:case gi:case vi:case Ai:case hi:default:return Ji(t)(e)}}}function dp(e,t,a,r,n,i,o){return"<path d='"+up(e.symbol)(i)+"' transform='translate("+t/2+","+a/2+")' style='"+("stroke:"+cp(e[n?n+"StrokeColor":"strokeColor"]||r)+";stroke-width:"+Ea(e[n?n+"StrokeWidth":"strokeWidth"],1)+";stroke-opacity:"+Ea(e[n?n+"StrokeOpacity":"strokeOpacity"],1)+";fill:"+(o||cp(e[n?n+"FillColor":"fillColor"]||r))+";fill-opacity:"+Ea(e[n?n+"FillOpacity":"fillOpacity"],1)+";")+"'></path>"}function hp(e,t,a,r,n,i,o){var l,s=e&&e.gradients?ga(t.gradients||{},e.gradients,!0):t.gradients||{},c="",u=i.getPatternSvg();if("linear"===s.type||"radial"===s.type){var d=an(s,[a,r],n,1),h={offset:o,chartObj:i},f=tn.get(tn.svg_gradients,"svgGradientFill",d,h),p=(new XMLSerializer).serializeToString(u.select("#"+f).node());c="<defs>"+(p=p.replace(/"/g,"'"))+"</defs>",l="url("+(Xr.IE?"#":"%23")+f+")"}return{defs:c,fill:l}}function fp(t,e){Ba(e)||(e=[e]);return z(e.map(function(e){return pp(t,e)}))}function pp(e,t){var a=[];return e&&Ba(e)&&e.every(Ba)?e.forEach(function(e){return function(e,t,a){var r=pp(e,t);a.push.apply(a,_toConsumableArray(r))}(e,t,a)}):function(e,t,a){var r=e[t];Ba(r)?a.push.apply(a,_toConsumableArray(r)):a.push(r)}.call(null,e,t,a),a}Te.getHTML4ChartTypeSymbol=function(e,t,a,r,n){var i=Pn.isQuantileColorScale(r),o=(r.isAxisCategory||r.dataObject.isPolarAxisCategory||r.dataObject.isHierarchy||r.isGeoMap)&&!i?n:0,l=r.chartTypes[o].name,s=r.systemConf.chart.plot.plotoptions[l],c=i?$t:r.seriesdata[o].plotoptions,u=up(l)(e);switch(l){case hi:case wi:var d=.15*t,h=c&&c.marker?ga(s.marker,c.marker,!0):s.marker,f=function(e,t,a){var r,n=_a([e,t],"dashStyle"),i=on(n,.75*a);if(i&&i.length){var o=ln(_a([e,t],"lineCap"),n);r="stroke-dasharray:"+i+";stroke-linecap:"+o+";"}return r}(c,s,d),p="",g="stroke:"+a+";stroke-width:"+d+";";if(f)g+=f;else if(0!=h.enabled){var v=l===wi?.5:.65,y=l===wi?.25:.45;p=dp(h,e,t,a,"outer",zt(e,t)*v),p+=dp(h,e,t,a,"inner",zt(e,t)*y)}return"<path d='"+u+"' transform='translate("+e/2+","+t/2+")' style='"+g+"'></path>"+p;case fi:case gi:case vi:case pi:if((h=c&&c.marker?ga(s.marker,c.marker,!0):s.marker).imageUrl)return h.imageUrl;var m=zt(e,t)-Ea(h.outerStrokeWidth,1),b=.5*zt(e,t)-Ea(h.innerStrokeWidth,1),x=hp(c,s,m,m,h.outerFillColor||a,r,l),C=hp(c,s,b,b,h.innerFillColor||a,r,l);return x.defs+dp(h,e,t,a,"outer",m,x.fill)+C.defs+dp(h,e,t,a,"inner",b,C.fill);case Ai:return(O=hp(c,s,k=zt(e,t)-Ea(s.strokeWidth,1),k,a,r,l)).defs+dp(s,e,t,a,null,k,O.fill);case Si:var k;if(s.symbol&&Ji(s.symbol))return(O=hp(c,s,k=zt(e,t)-Ea(s.strokeWidth,1),k,a,r,l)).defs+dp(s,e,t,a,null,k,O.fill);var w=e-(d=Ea(s.strokeWidth,1)),S=t-d;return(O=hp(c,s,w,S,a,r,l)).defs+function(e,t,a,r,n,i){var o=e.borderRadius;o=o&&zt(zt(t,a)/4,o);var l=dn(-t/2,-a/2,t,a,n.dataObject.getTransRectValue("radius",null,null,null,null,o)),s="stroke:"+cp(e.strokeColor||r)+";stroke-width:"+Ea(e.strokeWidth,1)+";stroke-opacity:"+Ea(e.strokeOpacity,1)+";fill:"+(i||cp(e.fillColor||r))+";fill-opacity:"+Ea(e.fillOpacity,1)+";";return"<path d='"+l+"' transform='translate("+t/2+","+a/2+")' style='"+s+"'></path>"}(s,w,S,a,r,O.fill);default:var O=hp(c,s,e,t,a,r,l),A=qa(c&&c.fillOpacity,s.fillOpacity,1);g="fill:"+(O.fill||a)+";fill-opacity:"+A+";";return O.defs+"<path d='"+u+"' transform='translate("+e/2+","+t/2+")' style='"+g+"'></path>"}};var gp=no.helpers.isCatNull,vp=(_createClass(yp,[{key:"init",value:function(){this.scale=$t,this.id=this.encode+"-"+this.key,this.d3_scale={};var e=this.getConfig(),t=this.getDataSchema();this.schema={data:t,domain:{key:t.meta.dataindex,min:e.minRange,max:e.maxRange,ranges:e.ranges,stops:e.stops,base:e.base}}}},{key:"create",value:function(){var e=this.getScaleType()();for(var t in this.d3_scale.domain=this.parseDomain(),this.d3_scale.range=this.parseRange(),this.d3_scale)e[t]&&e[t](this.d3_scale[t]);return this.scale=e}},{key:"getScale",value:function(){return this.scale||this.create(),this.scale}},{key:"getScaleType",value:function(){return function(e,t){var a=t.ranges;switch(e){case An:return a?Pn.quantileScale:Je;case Sn:return K;case On:return a?Pn.quantileScale:q}}(mp(this.schema.data.meta),this.schema.domain)}},{key:"getConfig",value:function(){return this.config}},{key:"parseDomain",value:function(){var e=this.schema.data,t=Ta(e.source),a=mp(e.meta),r=this.schema.domain;a===On&&(r=function(e,t){function a(e){return Vl(e,0,n).getTime()}var r=mp(t),n=t[r]||{},i=n.inputformat;if(!i||/timestamp/i.test(i))return e;var o=e.min,l=e.max,s=e.stops,c=e.ranges;return c=c&&c.map(function(e){return e.map(a)}),s=s&&s.map(a),za(o)&&(o=a(o)),za(l)&&(l=a(l)),_extends({},e,{ranges:c,stops:s,min:o,max:l})}(r,e.meta));var n=r.min,i=r.max,o=r.stops,l=r.ranges,s=r.base;if(l)return z(l);switch(e.condition&&(t=t.filter(e.condition)),a){case Sn:return function(e,t){return Sr(fp(e,t))}(t,this.schema.domain.key);case On:case An:var c=function(e,t){var a=fp(e,t);return oe(a)}(t,this.schema.domain.key);if(za(s)&&(c=oe([].concat(_toConsumableArray(c),[s]))),za(n)&&(c[0]=n),za(i)&&(c[c.length-1]=i),o){var u=wa(o);u.sort(ge);var d=u.filter(function(e){var t=!0;return za(n)&&(t=t&&n<=e),za(i)&&(t=t&&e<=i),t});return(c[0]<d[0]||!d.length)&&d.splice(0,0,c[0]),c[1]>d[d.length-1]&&d.splice(d.length,0,c[1]),d}return c}}},{key:"parseRange",value:function(){}},{key:"getDataSchema",value:function(){var e=this.encode,t=this.key,a=this.chartObj,r=a.dataObject,n=a.dataset,i=gp(n,"x"),o=gp(n,"y"),l=n.getColumn(e,t),s=r.getEncode(e,t);return{source:s?z(s.seriesData.map(function(e){return z(e.data)})):[],condition:function(e){return!!function(e){return e.isGeoMap||e.mapObj}(a)||!(i(n.getActualX(e,t))||o(n.getY(e,t)))},meta:xa(l)}}}]),yp);function yp(e,t,a,r){_classCallCheck(this,yp),this.encode=e,this.key=t||0,this.config=a,this.chartObj=r,this.init()}function mp(e){return e.datatype||Sn}var bp=(_inherits(xp,vp),_createClass(xp,[{key:"getDataSchema",value:function(){var e=this.encode,t=this.key,a=this.chartObj;return a.dataObject,{source:["a","b","c"],meta:a.dataset.getColumn(e,t)}}},{key:"parseRange",value:function(){return[1,2,3]}},{key:"parseDomain",value:function(){return["a","b","c"]}}]),xp);function xp(){return _classCallCheck(this,xp),_possibleConstructorReturn(this,(xp.__proto__||Object.getPrototypeOf(xp)).apply(this,arguments))}na.setComponent("colorScale",bp);var Cp="width",kp="height",wp=(_createClass(Sp,[{key:"create",value:function(){var t=this,r=this,n=this.units;if(this.elementBound={},this.HEIGHT=function(e){return t.elementBound[e].height},this.WIDTH=function(e){return t.elementBound[e].width},n.length){this.findBound(n),this.prepare();var e=this.items;n=this.units,e.forEach(function(e,t){var a=e.unit;!a.enabled||cl(Lp(a)).floating||r.canFit(e)||(r.redraw(e,t),r.findBound(n[t]))}),this.position(n)}}},{key:"findBound",value:function(e){var s=this.elementBound;(e=rr(e)).forEach(function(e){var t=e.element.node(),a=Lp(e),r=a.marginLeft,n=a.marginTop,i=a.marginRight,o=a.marginBottom,l=Cn(t)?ba(t):t.getBoundingClientRect();s[e.id]={width:l.width+r+i,height:l.height+n+o}})}},{key:"prepare",value:function(){var e=this.HEIGHT,t=this.WIDTH,a=this.units=this.getUnitOrder();this.items=a.map(function(e){return{id:e.id,unit:e}}),function(a,r,t,n,i){function o(e){!function(s,e,c,u,t,d){function a(l){return function(t){var a=l===kp?u:c,e=a(t),r=s.map(function(e){return e.id}).filter(function(e){return e!==t}),n=E(r,function(e){return a(e)}),i=d[l],o=i/(r.length+1);return e<=o?e:n<o?i-n:o}}var r=function(e){return c(e)},n=function(e){return u(e)};t===Zo||t===Qo?n=a(kp):r=a(Cp),e.forEach(function(e,t){var a=Lp(s[t]);e.width=a.width||r,e.height=a.height||n})}(s.map(function(t){return cr(a,function(e){return e.id===t})}),s.map(function(t){return cr(r,function(e){return e.id===t})}),t,n,e,i),s=[]}var l=void 0,s=[];a.forEach(function(e){var t=e.enabled,a=e.id,r=Lp(e);if(t){var n=Ap(r);n&&(l&&l!==n&&o(l),s.push(a),l=n)}}),l&&o(l)}(a,this.items,t,e,this.area)}},{key:"canFit",value:function(e){var t=this.callbackArgs,a=this.HEIGHT,r=this.WIDTH,n=e.id,i=e.width.apply(e,[n].concat(_toConsumableArray(t))),o=e.height.apply(e,[n].concat(_toConsumableArray(t))),l=[];return r(n)>i&&(l[0]=i),a(n)>o&&(l[1]=o),!(e.update=l).length}},{key:"redraw",value:function(e,t){var a=this.units,r=Lp(a[t]),n=r.marginLeft,i=r.marginTop,o=r.marginRight,l=r.marginBottom,s=e.update,c=void 0,u=void 0;s[0]&&(c=s[0]-n-o),s[1]&&(u=s[1]-i-l),a[t].component.resize(c,u)}},{key:"position",value:function(e){function s(u){var d=xa(a),h=function(e,t,a){if(e!==Qo&&e!==qo)return{};var r=Tp(e),n=Pp(e,t),i=e===Qo?Zo:Ko;return Op(i,a[r]-n,a),_defineProperty({},e===Qo?"hAlign":"vAlign",i)}(u,v,d),f=void 0;g.forEach(function(e,t){var a=Lp(e),r=e.element,n=cl(a),i=n.hAlign,o=n.vAlign,l=_extends({},a,h);i!==Xo&&o!==Xo||(f=f||function(e,t,a){var r=void 0,n=void 0,i=void 0;i=e===Zo||e===Qo?(r="vAlign",n=Ko,kp):(r="hAlign",n=Zo,Cp);var o=E(t,function(e){return e[i]});return a[n]+=(a[i]-o)/2,a[i]-=o,_defineProperty({},r,n)}(u,v.slice(t,v.length),d),u===Zo||u===Qo?o=l.vAlign=f.vAlign:i=l.hAlign=f.hAlign);var s=p(r,l,d),c=u===Zo||u===Qo?kp:Cp;Op(u===Zo||u===Qo?o:i,v[t][c],d),Sp.positionElement(r,s[0],s[1])});var e=Pp(u,v);Op(u,e,a),t.updateArea(u,e),g=[],v=[]}var t=this,c=this.elementBound,u=this.area,p=this.getPosition,a=xa(u),g=[],v=[],d=void 0;e.forEach(function(e){var t=e.enabled,a=e.id,r=e.element,n=Lp(e);if(t){var i=Ap(n);if(i){d&&d!==i&&s(d);var o=c[a];g.push(e),v.push(o),d=i}else{var l=p(r,n,u);Sp.positionElement(r,l[0],l[1])}}}),d&&s(d)}},{key:"updateArea",value:function(e,t){Op(e,t,this.areaToBeUpdated)}},{key:"getUnitOrder",value:function(){var e=this.units,t=this.elementBound,a=this.order,r=this.callbackArgs;return(a?Ba(a)?a:Ta.apply(void 0,[a,e,t].concat(_toConsumableArray(r))):function(i,o){var a=[],l=[],s=[],c={left:[],right:[],top:[],bottom:[]},u={left:0,right:0,top:0,bottom:0};return i.forEach(function(e){var t=e.enabled,a=e.id,r=Lp(e);if(t){var n=Ap(r);if(n){var i=o[a][n===Zo||n===Qo?kp:Cp];c[n].push(a),u[n]+=i}else s.push(a)}else l.push(a)}),function(e){if(Object.entries)return Object.entries(e);for(var t=Object.keys(e),a=t.length,r=new Array(a);a--;)r[a]=[t[a],e[t[a]]];return r}(u).sort(function(e,t){return T(e[1],t[1])}).forEach(function(e){var n=e[0],t=c[n].sort(function(e,t){var a=Ep(i,n,e),r=Ep(i,n,t);return T(a,r)});a.push.apply(a,_toConsumableArray(t))}),a.push.apply(a,s),a.push.apply(a,l),a}(e,t)).map(function(t){return cr(e,function(e){return e.id===t})})}}]),Sp);function Sp(e,t){_classCallCheck(this,Sp);var a=t.area,r=t.order,n=t.getPosition,i=t.callbackArgs,o=void 0===i?[]:i;o=rr(o),this.units=e.slice(0),this.area=a,this.getPosition=n,this.order=r,this.callbackArgs=o,this.areaToBeUpdated=[a]}function Op(t,a,e){var r=Tp(t);(e=rr(e)).forEach(function(e){e[t]+=a,e[r]-=a})}function Ap(e){var t=cl(e),a=t.vAlign,r=t.hAlign,n=t.floating,i=t.layout;if(!n)if(i===el){if(a===Ko||a===qo)return a;if(a===Xo)return r}else{if(r===Zo||r===Qo)return r;if(r===Xo)return a}}function Pp(e,t){var a=Tp(e);return Ue(t.map(function(e){return e[a]}))}function Tp(e){return e===Zo||e===Qo?Cp:kp}wp.positionElement=function(e,t,a){Cn(e)?e.attr("transform","translate("+t+","+a+")"):e.styles({left:t+"px",top:a+"px"})};var _p={top:2,bottom:1,left:2,right:1,center:0};function Ep(e,t,a){var r=cl(Lp(cr(e,function(e){return e.id===a}))),n=r.hAlign,i=r.vAlign;return _p[t===Zo||t===Qo?i:n]}function Lp(e){return e.config||e.meta.config}function Mp(c){function r(e,t,a){var r=2<arguments.length&&void 0!==a?a:[1],n=e===Fr?"g":Br,i=c.container.selectAll(n+".legendarea").filter(function(e,t,a){return t===a.length-1});return i.style("display",$t),xn(n,".zc-legend-"+t,r,i)}function u(e,t){r(e===Fr?"html":Fr,t,[]);var a=r(e,t);return-1<t.indexOf("z")&&fn(a,[c.systemConf.canvas,Wr],e!==Fr),a}var d=c.systemConf.legend,e=!c.dataObject.hasZaxis||go(c.chartTypes[0].value)?[]:["z"],h=[],t=c.userdata.metadata.axes;!function(e){if(Pn.isQuantileColorScale(e)){var t=e.userdata,a=e.systemConf.legend;e.dataset.getDataType("clr")===Sn&&(t.legend=t.legend||{},t.legend.colorBand=t.legend.colorBand||{},t.legend.colorBand.ranges||(a.colorBand.ranges=t.legend.colorBand.ranges=Pn.getCategories(e)));var r=a.colorBand.ranges;r&&r.length&&(t.legend.colorBand.ranges=a.colorBand.ranges=Tn(a,e,!0));var n=it.getScale(e,e.dataObject,null,null,null,e.dataset,"clr"),i=n.domain(),o=n.copy();o.range(Pn.getProcessedColorRange(rt(i.length),i,a,e));var l=e.axes.clr||{};l.scaleType="quantile",l.scale=n,l.indexScale=o,l.component=l.component||Ae.get(),e.axes.clr=l}else e.axes.clr={}}(c);var a=d,n={id:"clr-0",config:a,renderTo:u,encode:"clr",globalFont:c.systemConf.canvas,bound:fl(a,c.chartarea),enabled:dl(a,c),view:ll.isContinousLegend(c)?"band":"list",effect:Ip(a,c),chartObj:c};return h.push(n),e.forEach(function(s){t[s]&&t[s].forEach(function(e,t){var a=s+"-"+t,r=cr(c.scales,function(e){return e.id===a}),n=r.getConfig(),i=Dp(s,r),o=rp(s,i).domMode,l={id:a,scaleComponent:r,config:n,renderTo:u,view:i,encode:s,globalFont:c.systemConf.canvas,bound:fl(n,c.chartarea),format:function(e,t,a){var r=e.datatype,n=e[r],i=a===Fr;return function(e){return Hl(n,e,r,t,"legend",i,"-")}}(r.schema.data.meta,c,o),enabled:dl(n,c,s),effect:Ip(n,c)};d.singleLayout||h.push(l)})}),c.legend.isSingleLayout=d.singleLayout||h.length<=1,h[0].bound.adjust=!c.legend.isSingleLayout,h}function zp(e){var t=e.encode,a=e.id,r=e.enabled,n=rp(t,e.view);if(n!==ta){var i=new n(e),o=e.renderTo(n.domMode,a);return o.style("display",r?$t:Qt),r&&(i.create(),i.draw(o),o.style("filter",e.effect)),{enabled:r,element:o,component:i,meta:e,id:a}}}function Dp(e,t){var a=t.getConfig(),r=t.schema.data.meta.datatype;if(a.type)return a.type;switch(e){case"z":case"size":return a.ranges||r===Sn?"list":"nested";case"color":case"clr":return a.ranges||r===Sn?"discrete":"continuous"}}function Ip(e,t){var a=!1!==e.useChartEffect&&t.filterEffectsID;return a?"url("+t.defsLocation+"#"+a+")":null}function Rp(e,t){if(!t)return{};var a=t.element,r={element:a,show:t.enabled};if(t.enabled){var n=vl(e.chartarea,e,null,a);r.x=n[0],r.y=n[1],r.width=n[2],r.height=n[3]}return r}Te.render=function(e){var t=e.systemConf.legend;Lo(e,t.events,0,"init");var a=Mp(e).map(zp).filter(function(e){return!!e}),r=cr(a,function(e){return"clr-0"===e.id});e.legendarea=Rp(e,r),Te.align(a,e,e.chartarea,e.plotarea),function(e,t){e&&!e.enabled&&"list"===e.meta.view&&(t.legend.component=Te.discrete.get(e.meta),Te.events(t,t.legendarea.element.selectAll("li.series"),{allSelected:!0,isFirstClickAfterDeselection:!1}))}(r,e),e.legends=a,Lo(e,t.events,0,e.updating?"onreload":"onload")},Te.align=function(e,r,t,a){var n=r.systemConf.legend;if(r.legend.isSingleLayout)!function(e){var t=e.legendarea,a=t.x,r=t.y,n=t.element;t.show&&(wp.positionElement(n,a,r),hl(e))}(r);else{var i={area:t,order:n.order,getPosition:function(e,t,a){return vl(a,r,null,e,t)},callbackArgs:r},o=new wp(e,i);(e.layout=o).areaToBeUpdated.push(a),o.create()}};var jp=ll.getClr,Hp=ll.isDisabled,Bp=ll.hexToRGB;function Fp(e){return e&&!("<"===e[0]||0===e.indexOf('url("data'))}function Wp(e,t,a,r,n,i,o){var l=i.fillOpacity,s=i.strokeOpacity,c=i.strokeWidth,u=o?e:10,d=e/(u+2*Ea(c,1)),h=Ji(n||"square")(u),f=ll.hexToRGB;return"<path d='"+h+"' transform='translate("+e/2+","+t/2+") scale("+d+")' style='stroke: "+f(a)+"; fill: "+f(r)+"; fill-opacity: "+l+"; stroke-width: "+Ea(c,1)+"px; stroke-opacity: "+s+";'></path>"}function Vp(e,t,a){var r="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+t+"' height='"+a+"'>";return r+=e,r+=" </svg>",'url("data:image/svg+xml;'+(Xr.IE?"base64":"utf8")+","+(Xr.IE?ia(r):r)+'")'}function Np(e,t,a,r,n,i){var o=~~(1.195*r-r),l=0;switch(e){case"top":l=o;break;case"bottom":l=t-a-o;break;default:"center"===e&&"wrap"!==i?l=(Mt(t,a)-a)/2:za(n)||"wrap"===i?l=(Mt(r,a)-a)/2:a<t&&(l=(t-a)/2)}return l}var Yp={show:!(Te.setColorBoxBackground=function(e,h,t){function f(e,t,a){var r=jp(T(e),qa(a,Bn(h,t)),m);return Xr.IE&&S&&T(e)&&(r=function(e){var t=Pe(e),a=ja((t.r+t.g+t.b)/3);return"rgba("+a+","+a+","+a+","+t.opacity+")"}(r)),r}function p(e,t){return f(e,t,y.strokeColor)}function a(e){return T(e)?n.text||"":y.text}var g,v,r=h.systemConf.legend,y=r.colorBox,m=r.itemDisabledStyle,n=m.colorBox||{},b=r.imagePallete?gl.imagePallete.get(r.imagePallete):null,x=h.imagePallete&&za(b)&&0<b.length,C=h.patternPallete,k=C&&C.length,w=!h.patternPallete&&(za(r.shapes)||"square"!==y.shape),S=n.grayScale,i=+pa.getVal(r.fontSize||h.systemConf.canvas.fontSize),o=ll.getFilterBoxSize(y,i),O=o[0],A=o[1],l=y.borderRadius,P=[],T=function(e){return Hp(e,t.allSelected,t.isFirstClickAfterDeselection)},s={opacity:function(e){return T(e)?n.fillOpacity:null},filter:function(e){return T(e)&&S&&!Xr.IE?"grayscale(1)":null},"border-radius":!w&&za(l)?l+Zt:null,color:function(e){return T(e)?n.fontColor:y.fontColor||"white"},border:function(e,t){return x||w?null:y.strokeWidth+Zt+"solid "+p(e,t)},background:function(e,t){var a=T(e),r=null;if(v=f(e,t,y.fillColor),x)if(a&&m.color)g=m.color;else{g='url("'+b[t%b.length]+'")';var n=h.patternImageSizes&&h.patternImageSizes;r=n[t]?n[t%n.length][0]+Zt+" "+n[t%n.length][1]+Zt:null}else if(w)g=function(e,t,a,r,n,i){a=Bp(a),r=Bp(r);var o=n.systemConf.legend,l=o.colorBox,s=o.shapes,c=(s?s[i%s.length]:null)||l.shape,u=c||!Te.getHTML4ChartTypeSymbol||Pn.isQuantileColorScale(n)&&n.dataObject.isCombinationalChart?Wp(e,t,a,r,c,l):Te.getHTML4ChartTypeSymbol(e,t,r,n,i);if(Fp(u))return'url("'+u+'")';return Vp(u,e,t)}(O,A,p(e,t),v,h,t);else if(k){var i=C[t%k],o=$r[i]?Jr(i):en(i);o.bgClr_base=v,o.stroke_base=v,o.width=O,o.customStaticClr=h.userdata.legend.customPatternColor,o.x=o.y=0;var l="zp"+ya(o,"legelegendndFill"),s=tn.svg_patterns.svgPatternFill(o,l,null,!0,!0,h,h.getPatternSvg(),"objectBoundingBox"),c=s.width,u=s.height;g='url("'+s.url+'")',r=(2*c<O?c:O/2)+Zt+" "+(2*u<A?u:A/2)+Zt}else g=v;if(Fp(g)&&(r=r||O+Zt+" "+A+Zt,a&&S&&Xr.IE)){var d=r.split("px").map(function(e){return+e});g=function(e,i,o){var l=document.createElement("canvas"),s=l.getContext("2d");l.width=i,l.height=o;var c=new Image;c.src=e.substring(5,e.length-2),c.width=i,c.height=o,c.onload=function(){s.drawImage(c,0,0,i,o);for(var e=s.getImageData(0,0,l.width,l.height),t=0;t<e.height;t++)for(var a=0;a<e.width;a++){var r=4*t*e.width+4*a,n=(e.data[r]+e.data[1+r]+e.data[2+r])/3;e.data[r]=n,e.data[1+r]=n,e.data[2+r]=n}return s.putImageData(e,0,0,0,0,e.width,e.height),"url("+l.toDataURL()+")"}}(g,d[0],d[1])}return P[t]=r,g},"background-size":function(e,t){return P[t]}};if(!e)return{styles:s,html:a};e.styles(s).html(a)}),strokeColor:"#262626",strokeWidth:1,fillColor:qt,fontColor:"#262626",fillOpacity:1,strokeOpacity:1,disabledOpacity:.3,tooltip:{enabled:!0,color:"red",content:"Select atleast one legend"},events:{click:null}},Gp=ll.getLegendData,Up=ll.isDisabled,Xp=ll.isAllEnabled,Zp=ll.getClr,Qp=ll.toggleChartEvents,qp=ll.updateData;Te.selectAllBox=function(e,s,c){Yp.events.click=s.legend.component.toggleSelectAll=function(){if(function(){d=d||Gp(s);c.allSelected&&(d.forEach(function(e,t){e.disabled=!c.allSelected,qp(e,t,s)}),s.addRemoveSeries(d,0,[0,0],!0))}(),function(){var e,t,a=s.legendarea.element,r=a.selectAll("div.legendfilterbox"),n=a.selectAll("span.legendlabel, span.legendlabel * ");Te.setColorBoxBackground(r,s,c),t=c.allSelected?(e=p,null):(e=Zp(!0,p,f),JSON.parse(f.strikeout)?"line-through":null);n.styles({color:e,"text-decoration":t}),c.allSelected&&h.showAs&&a.selectAll("span.legendlabel").html(function(e,t){return yl(e,t,h,s)})}(),Qp(s,c.allSelected),ll.fadeChart(c.allSelected,s,x),b.enabled){var e=s.eventHandler.tooltipElement;u=u||e.element.selectAll("div#tooltipcontent").style("color");var t=s.systemConf.tooltip,a=Ra(za(t.borderWidth)?t.borderWidth:1);if(c.allSelected){E(e=s.eventHandler.tooltipElement,null,a,u),e.hide(e.element)}else{var r=_o(m,nt());r={x:r[0],y:r[1]};var n=lo(nt()),i=ko(n,r,0,0,s,{},!1,!1,!1,!0,!1),o=r.x-n.clientX,l=r.y-n.clientY;i.dLeft=o,i.dTop=l,i.helpers.color=b.color,i.helpers.backgroundColor=b.backgroundColor,i.helpers.borderColor=b.borderColor,i.helpers.renderTo="legendTitle",E(e,"center",null,b.fontColor||u),e.show(s,i,b.content,!1,i.helpers),setTimeout(function(){var e=s.eventHandler.tooltipElement;E(e,null,a,u),e.hide(e.element)},4e3)}}};var u,d=Gp(s),h=s.systemConf.legend,t=h.colorBox,a=ga(Yp,h.selectAllBox,!0),f=h.itemDisabledStyle,r=f.colorBox||{},n=[h,s.systemConf.canvas,Wr],i=+pa.getVal(h.fontSize||s.systemConf.canvas.fontSize),p=_a(n,"fontColor"),o=(h.imagePallete&&gl.imagePallete.get(h.imagePallete),ga(t,a,!0)),l=ll.getFilterBoxSize(o,i),g=l[0],v=l[1],y=Math.min(g,v)-(h.imagePallete||!za(h.shapes)||"square"===t.shape?0:+t.strokeWidth),m=s.container.node(),b=a.tooltip,x=a.disabledOpacity;c.allSelected=za(a.selected)?a.selected:c.allSelected;var C=sn(e,"div",[1],".","class","selectAll"),k=qa(a.shape,t.shape),w="square"!==k,S={display:a.show?"inline-block":Qt,width:y+"px",height:y+"px",float:"left",background:a.fillColor,position:"absolute","box-sizing":"border-box","text-align":"center","line-height":y+"px","font-family":t.fontFamily,"font-size":(t.fontSize||i-2)+"px",color:function(e){return a.fontColor||(Up(e,c.allSelected,c.isFirstClickAfterDeselection)?r.fontColor:t.fontColor)}};if(w){var O=Wp(y,y,a.strokeColor,a.fillColor,k,a);S.background=Vp(O,y,y),S.border="none"}else S.border=a.strokeWidth+"px solid "+a.strokeColor;C.styles(S).html(function(){return Xp(d,c.allSelected)?qa(a.text,t.text)||"&#10003;":r.text||""}),e.style("cursor",a.show?Kt:null);var A={click:_},P={tap:_};if(a.show?Mo(e,A,P):(zo(e,null,A),zo(e,null,P)),s.eventHandler){var T=s.eventHandler.tooltipElement;T.hide(T.element)}return{element:C,options:a,size:y};function _(){c.allSelected&&!Xp(d,c.allSelected)||(c.allSelected=!c.allSelected),c.isFirstClickAfterDeselection=!1,C.html(c.allSelected?qa(a.text,t.text)||"&#10003;":r.text||""),Ta(a.events[s.zcEventType||"click"],nt(),c.allSelected,s)}function E(e,t,a,r){e.element.attr("align",t).styles({"border-width":a}),e.element.selectAll("div#tooltipcontent").style("color",r)}};function Kp(i,r,o,l,e,n,t,s,c,u,d,h,a,f,p,g){var v=i.systemConf,y=v.legend,m=[y,v.canvas,Wr],b=y.expandable||{},x=!0===b.show,C=y.title.keepAligned&&s,k=!!i.renderer.length;return{create:function(e){if(x){l.style("overflow","hidden");var t=sn(r,"div",[1],".","class","expandable").styles({color:b.fontColor,"font-size":pa.getVal(b.fontSize)+"px","font-family":b.fontFamily||_a(m,"fontFamily"),"text-align":b.textAlign,cursor:Kt,display:"block",padding:y.itemMargin+"px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","max-width":n+"px","margin-left":C?c+Zt:0}),a=i.legend.expanded;return a?k&&a&&t.html(function(){return Ta(b.ontoggle,this,a,i)||"Show less.."}):t.html(Ta(b.text,e,i)||e+" more..."),function(n,e){e.on("click",function(){if(!i.legend.allRendered&&0<n){i.legend.allRendered=!0;var e=u(o);if(d(e),i.legend.isSingleLayout?h(f):Te.align(chartObj.legends,chartObj,p,g),!s&&f.node().offsetWidth>i.legendarea.width){var t=cr(chartObj.legends,function(e){return"clr-0"===e.id});chartObj.legendarea=Rp(chartObj,t),function(){i.legend.isSingleLayout?(i.updatePlotArea(),hl(i)):(i.chartarea=p,i.plotarea=g);i.isAxisCategory?Ae.render(i,i.chartWidth,i.chartHeight,!0):i.dataObject.isPolarAxisCategory&&Ae.polar.render(i,"x");i.drawThreshold(!0),i.drawPlotareaClippath(),i.updatePlotareaProp(),i.plot.renderer.draw(!0),(i.isAxisCategory||i.dataObject.isPolarAxisCategory)&&i.positionEventTrackerElement()}()}}var a=i.legend.expanded=!i.legend.expanded,r=Ta(b.ontoggle,this,a,i);za(r)&&(r=""+r),a?(this.innerHTML=r||"Show less..",l.style("overflow-y","auto")):(l.node().scrollTop=0,this.innerHTML=r||Ta(b.text,n,i)||n+" more...",l.style("overflow-y","hidden"))})}(e,t),t}r.select(".expandable").empty()||(r.selectAll(".expandable").remove(),l.style("overflow-y","hidden"),l.style("overflow-x","hidden"))},remove:function(){r.select(".expandable").empty()||(r.selectAll(".expandable").remove(),l.style("overflow-y","hidden"),l.style("overflow-x","hidden"))}}}Te.discrete=function(){},Te.discrete.get=function(e){var ge,t,ve,ye,a=f("legendClick","legendDblclick","legendMouseover","legendMouseout"),me=20,be=e.bound,xe=ll.getLegendData,Ce=ll.getLegendDataLength,ke=ll.isHiddenItem,we=ll.getClr,Se=ll.isDisabled;function Oe(e){return e.each(function(o){var l,e=xe(ye),r=Ce(ye,e),s=o.colorBox,c=o.itemDisabledStyle,u=[o,ve.canvas,Wr],t=null!=o.x&&""!==o.x&&null!=o.y&&""!==o.y,d=+pa.getVal(o.fontSize||ve.canvas.fontSize),h=_a(u,"fontColor"),f=(ye.dataset.getColumnIdx(ye.isAxisCategory||ye.isGeoMap||ye.isNonAxisMultiSeriesCategory||Pn.isQuantileColorScale(ye)?"clr":"x"),o.showAs),p=s.position||"left",n=!0===(o.expandable||{}).show,a=(ye.renderer.length,ll.getFilterBoxSize(s,d)),g=a[0],v=a[1],i=cl(o),y=ye.legend.states=ye.legend.states||{allSelected:!0,isFirstClickAfterDeselection:!1},m=za(s.size)?Mt(d,v)+"px":(Xr.OSX||Xr.LINUX)&&Xr.FIREFOX?"1.2":"normal",b="horizontal"===i.layout,x=xa(ye.plotarea),C={fontColor:function(e){return we(Se(e,y.allSelected,y.isFirstClickAfterDeselection),h,c)},textDecoration:function(e){return Se(e,y.allSelected,y.isFirstClickAfterDeselection)&&c.strikeout?"line-through":null}};l="wrap"===o.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"};var k=qe(this);Oe.update=function(){k.transition().call(Oe)};k.styles({display:"block",position:"absolute",left:null,top:null});var w=sn(k,"div",[o],".","class","legendgroup"),S=o.shadow;if(!0===S.show){var O=S.x+"px "+S.y+"px "+S.blur+"px "+S.color;O=S.inset?O+" inset":O,k.style("box-shadow",O)}else k.style("box-shadow",null);var A=Pe(o.background.color.toString());k.style("background-color","rgba("+A.r+","+A.g+","+A.b+","+o.background.alpha+")");var P=o.border;!0===P.show?k.styles({border:+P.size+"px "+P.style+" "+P.color,"border-radius":P.radius+"px"}):k.style("border",null);var T=o.title,_=T.keepAligned&&b,E=za(T.margin)?T.margin:3,L={display:_?"inline-block":null,"vertical-align":"top"},M=xn("ul",".zcheader",!0===T.show?[T]:[],w,":first-child").styles(L),z=sn(M,"li",[1],".","class","zcheader");M.styles({"white-space":"normal",overflow:"hidden",width:"","list-style-type":Qt,margin:0,padding:0}),z.styles({padding:Ra(E),"white-space":"nowrap",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","vertical-align":"middle"});var D=Te.selectAllBox(z,ye,y),I=D.element,R=D.options,j=D.size,H=R.disabledOpacity;ll.fadeChart(y.allSelected,ye,H);var B=sn(z,"span",[1],".","class","legendtitle");B.text(Ca(T.text)).style("padding-"+p,R.show?o.textPadding+"px":null).style("margin-"+p,R.show?j+"px":null),fn(B,[T,ve.canvas,Wr],!0),I.style("margin",function(){return Math.max(0,(B.node().offsetHeight-I.node().offsetHeight)/2)+"px"+" 0px 0px 0px"}),z.style("line-height",function(){var e=R.show?I.node().offsetHeight:0;return Math.max(B.node().offsetHeight,e)+"px"});var F=sn(w,"ul",[o],".","class","legseries");F.styles({"white-space":"normal","overflow-y":"hidden",width:"","list-style-type":Qt,margin:0,padding:0,"-webkit-overflow-scrolling":"touch","font-size":"0px"}).styles(L);function W(e){var t=sn(F,"li",e,".","class","series");sn(t,"div",[1],".","class","legendfilterbox"),sn(t,"span",[1],".","class","legendlabel"),t.styles({color:function(e){return we(Se(e,y.allSelected,y.isFirstClickAfterDeselection),h,c)},position:"relative","white-space":"nowrap",padding:+o.itemMargin+"px",overflow:"hidden","text-align":"left","line-height":m,"font-size":d+"px",width:re?o.itemWidth+"px":null,height:null==o.itemHeight||""==o.itemHeight?null:o.itemHeight+"px","font-family":_a(u,"fontFamily"),"font-weight":_a(u,"fontWeight"),display:function(e){return ke(e)?Qt:b?"inline-block":"block"}}).styles(l).style("vertical-align","top"),Te.events(ye,t,y,H);var a=t.select("span.legendlabel");za(f)&&(a.styles({display:qa(o.showAsDisplay,"inline-block"),overflow:"hidden"}),za(Oe.legendLabelMaxWidth)&&ae&&a.style("width",Oe.legendLabelMaxWidth+Zt)),a.style("padding-"+p,o.textPadding+"px").style("margin-"+p,g+"px").html(function(e,t){return N.getLegendItemText(e,t)}).attr("title",function(){return o.tooltip?this.textContent:null}),fn(a,[C,o,ve.canvas,Wr],!0),za(f)&&t.each(function(e){Se(e,y.allSelected,y.isFirstClickAfterDeselection)&&fn(qe(this).selectAll(".legendlabel, .legendlabel *"),[{fontColor:C.fontColor(e),textDecoration:C.textDecoration(e)},o,ve.canvas,Wr],!0)});var r=t.select("span.legendlabel").node().offsetHeight,n=t.select("div.legendfilterbox"),i=Np(s.vAlign,r,v,d,s.size,o.textOverflow);return n.styles({width:g+Zt,height:v+Zt,float:p,"margin-top":i+Zt,"border-color":qt,"background-repeat":"repeat","line-height":v-s.strokeWidth+Zt,"text-align":"center","font-family":s.fontFamily,"font-size":(s.fontSize||d)+Zt,position:"absolute",display:"inline-block","box-sizing":"border-box"}),Te.setColorBoxBackground(n,ye,y),t}function V(e){return zt(mr(T.maxWidth||(_?"50%":"100%"),e),e)}var N=function(o,e,f,p,t,a,l,s){var c=o.systemConf,g=c.legend,u=t[0],i=g.showAs,d=o.dataset.getColumnIdx(o.isAxisCategory||o.isGeoMap||o.isNonAxisMultiSeriesCategory||Pn.isQuantileColorScale(o)?"clr":"x"),v="horizontal"===a.layout,y="number"==typeof g.itemWidth,h={getLegendItemText:function(e,t){if(Pn.isQuantileColorScale(o)){var a=g.colorBand.labels;if(a&&a.length)return ka(a[t])}var r=o.isAxisCategory||o.isNonAxisMultiSeriesCategory||o.isGeoMap?t:0,n=yl(e,t,g,o);return i?n:o.dataset.getDataPointValue(o,e,d,r,null,"legend")},getItemDimension:function(e){var t=m([e]),a=t.ul,r=t.li,n=t.span,i={label:{width:n.node().offsetWidth,height:n.node().offsetHeight},item:{width:r.node().offsetWidth,height:r.node().offsetHeight}};return a.remove(),i},getMaxItemWidth:function(){var e=m([f[0]]),a=e.span,r=e.li,n=null,i=void 0;return y?g.itemWidth:("auto"===g.itemWidth&&f.forEach(function(e,t){e.hideInLegend||(a.html(function(){return h.getLegendItemText(e,t)}),i=yr(r).width,n<i&&(n=i))}),e.li.remove(),n)},getRowsCount:function(e,t){return.9<t/e-(Et(t/e)||1)?_t(t/e)||1:Et(t/e)||1},getVisibleItemRenderCount:function(e,t,a,r){var n=0;if(v){var i=!1;if(y){var o=g.itemWidth+2*+g.itemMargin;n=Et(a/o)*t}else{for(var l=!1,s=void 0,c=null,u=-1;!i;){n++;var d=f.slice(0,n),h=(s=m(d,a,r)).li.last().node().offsetTop;c!==h&&(c=h,u++),l=t-1<u,i=p===n||l}l&&(n-=1),s.ul.remove()}}else n=t;return n}},m=function(e,t,a){var r=xn("ul",".tempUl",[1],o.d3container).styles({"max-width":za(t)?t+"px":null,"max-height":za(a)?a+"px":null,position:"absolute",top:0,left:0,padding:0}),n=xn("li",".tempItem",e,r).styles({display:v?"inline-block":"block","line-height":l,"white-space":"nowrap",padding:g.itemMargin+"px",width:y?g.itemWidth+"px":null,height:za(g.itemHeight)?g.itemHeight+"px":null,"padding-left":u+g.itemMargin+"px"}),i=xn("span",".tempLabel",function(e){return[e]},n).style("padding-left",g.textPadding+"px").style("display",c.legend.showAs?"block":null);return c.legend.showAs&&i.styles({display:qa(c.legend.showAsDisplay,"inline-block"),overflow:"hidden"}),n.select("span.tempLabel").html(function(e,t){return h.getLegendItemText(e,t)}),fn(n,[s,g,c.canvas,Wr],!0),{ul:r,li:n,span:i}};return h}(ye,0,e,r,a,i,m,C),Y=mr(o.maxHeight||(b?Vo:Wo),ge.height),G=mr(o.maxWidth||(b?Yo:No),ge.width);be.adjust&&(G=zt(be.maxWidth||G,G),Y-=yr(M).height,Y=zt(be.maxHeight?be.maxHeight-yr(M).height:Y,Y));var U,X,Z,Q,q=V(G),K=N.getItemDimension(e[0]),$=K.label.height,J=K.item.height,ee=null,te=null,ae="auto"===o.itemWidth,re="number"==typeof o.itemWidth,ne=qa(o.itemHeight&&+o.itemHeight,Mt($,v)+2*+o.itemMargin),ie=G;if(n&&b&&(Y=Et(Y/J)*J)<J&&(Y=J),ye.legend.hasScroll=Y<r*ne,w.style("max-width",G+"px"),M.style("max-width",q+"px"),X=yr(M).width,b){var oe=+o.marginLeft+ +o.marginRight+(o.border.show?2*o.border.size:0),le=ye.canvasarea.width-oe;le<G&&(G=le),q=V(G),_&&(G-=X),w.style("max-width",G+"px"),M.style("max-width",q+"px")}if(n&&(U=N.getRowsCount(J,Y),Y=zt(U*J,Y)),F.styles({"max-width":G+Zt,"max-height":Y+Zt}),Oe.itemMaxWidth=null,Oe.legendLabelMaxWidth=null,f&&ae){var se=N.getMaxItemWidth(e);if(Q=zt(se,G),Oe.itemMaxWidth=Q,Oe.legendLabelMaxWidth=Q-g-2*o.itemMargin,Xr.WINDOWS&&b){F.style("max-width",G+2+"px")}}te=N.getVisibleItemRenderCount(w,U,G,Y,J);var ce=Kp(ye,w,e,F,0,G,0,b,X,W,fe,Ae,0,k,ge,x),ue=Mt(0,r-te);ee=n&&0<ue&&!ye.legend.allRendered?W(e.slice(0,te)):W(e),n&&0<ue?ce.create(ue):(n&&0===ue||!n)&&ce.remove();var de=ye.legend.expanded,he=1;function fe(e){if(b){F.styles({width:null,height:null}),e.style("max-width",G+"px"),w.style("max-width",G+"px"),F.styles({display:"inline","border-top":"1px solid"});var t=yr(F).width;F.styles({display:L.display,"border-top":null}),w.style("max-width",ie+"px"),he=_t(F.node().offsetHeight/ne)||1,F.style("height",he*ne+2+"px"),Z=Tr(F)||n&&te<r?me:0,F.style("width",t+Z+2+"px")}else{F.style("width",null);var a=yr(F.style("display","inline-block")).width;F.style("display",L.display),F.style("width",a+Z+2+"px"),F.style("height",null)}}Z=Tr(F)||n&&te<r?me:0,fe(ee),Ae(k,t,G,Y);var pe=!0===(n&&de||!n);Xr.IE&&pe&&(pe=F.node().scrollHeight-he>F.node().offsetHeight),F.style("overflow-x","hidden"),F.style("overflow-y",pe?"auto":"hidden")}),Oe}function Ae(e){var t=arguments[3],a=0,r=0;if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]){var n=ve.legend,i=ye.legendarea.element.node().getBoundingClientRect();a=zt(ye.canvasarea.width-i.width,n.x),r=zt(ye.canvasarea.height-zt(i.height,t),n.y)}else{var o=vl(ge,ye);a=o[0],r=o[1]}e.styles({left:a+"px",top:r+"px"})}return Oe.dispatch=a,Oe.chartarea=function(e){return arguments.length?(ge=xa(e),Oe):ge},Oe.systemconf=function(e){return arguments.length?(ve=e,Oe):ve},Oe.chartObj=function(e){return arguments.length?(ye=e,Oe):ye},Oe.color=function(e){return arguments.length?(t=e,Oe):t},Oe};var $p=ll.getLegendData,Jp=ll.getLegendDataLength,eg=ll.isHiddenItem,tg=ll.isDisabled,ag=ll.isAllEnabled,rg=ll.getClr,ng=ll.updateData;Te.events=function(c,t,u,n){var o,l,s,i,a,r,d,h,f,p,g,e,v,y=c.legend.component,m=c.systemConf.legend,b=m.itemDisabledStyle,x=m.colorBox,C=[m,c.systemConf.canvas,Wr],k=[m.itemHoverStyle,m,c.systemConf.canvas,Wr],w=_a(C,"fontColor"),S=c.systemConf.legend.events;if(null!=S&&(v=0==Ea(S.enabled,!0),a=S.click,r=S.doubleclick,d=S.mouseover,h=S.mouseout,e=S.cursor,f=S.tap,p=S.taphold,g=S.tapholdend),!v){var O;t.style("cursor",e||Kt);function A(e,t){(Wr.clickedTime=null)==d?z(this,e,t):Ta(c.zcEventType?p:d,nt(),e,t,c)}function P(e,t){null==h?D(this,e,t):Ta(c.zcEventType?g:h,nt(),e,t,c)}function T(e,t){(nt()&&nt().touches&&ef(),null==a)?function(e,t,a){y.toggleItemNUpdateChart(e,t,a,m)}(this,e,t):Ta(c.zcEventType?f:a,nt(),e,t,c)}function _(e,t){null==r||Ta(r,nt(),e,t,c)}var E={chartObj:c},L=Xr.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},M=(_defineProperty(O={},L.move,A),_defineProperty(O,L.out,P),_defineProperty(O,"click",T),_defineProperty(O,"dblclick",_),O);Mo(t,M,{taphold:A,tapholdend:P,tap:T,dbltap:_},E)}function z(e,t,a){y.highlightSeries(e,t,a,m,c,!0),y.highlightItem(e,t,a,m,!0)}function D(e,t,a){y.highlightSeries(e,t,a,m,c),y.highlightItem(e,t,a,m)}function I(e){return qe(t.nodes()[e])}function R(){s||(s=$p(c),i=Jp(c,s))}function j(){return c.legendarea.element}y.filterSeriesNUpdate=function(e,t,a){var r=rr(t);R(),function(e){var t=s.filter(function(e,t){return u.allSelected||u.isFirstClickAfterDeselection||(e.disabled=!u.allSelected,ng(e,t,c),ll.toggleChartEvents(c,!0),ll.fadeChart(!0,c,n),c.eventHandler.tooltipElement.hide()),!eg(e)&&e.disabled}),a=e.filter(function(e){var t=s[e];return!eg(t)});return t.length==i-a.length&&a.every(function(e){return!s[e].disabled})}(r)||(r.forEach(function(e){var t=s[e];t.disabled=!t.disabled,a.dataObject.hierarchical&&!Pn.isQuantileColorScale(a)&&(a.systemConf.seriesdata.chartdata[e].disabled=t.disabled),ng(t,e,a)}),function(e){{if(c.ismultiy){var r=H();return e.filter(function(e){var t=s[e],a=no.helpers.getParsedYAxisOrder(t.yaxiscolumnorder);return!r.has(a)&&(r.add(a),!0)})}return rr(e[0])}}(r).forEach(function(e){var t=s[e];a.addRemoveSeries(t,e,t.yaxiscolumnorder,!u.allSelected&&!u.isFirstClickAfterDeselection)}),u.allSelected||u.isFirstClickAfterDeselection||(u.isFirstClickAfterDeselection=!0))},y.toggleItemNUpdateChart=function(e,t,a,r){var n=rr(a);if(o=o||j().selectAll("div.legendfilterbox"),r.filter.enabled){c.legendHighlight.resetSelection(),y.filterSeriesNUpdate(t,n,c);var i=n.filter(function(e){return s[e].disabled});if(y.highlightItem(e,t,i,r,!1,!0),y.updateLabel(n),Te.setColorBoxBackground(o,c,u),nt()&&!nt().touches)"canvas"===c.plot.renderer.mode&&y.highlightSeries(e,t,n,r,c),(s[n[0]].disabled?D:z)(e,t,n)}!function(){u.allSelected||(u.allSelected=!u.allSelected);(l=l||j().selectAll("div.selectAll")).empty()||(R(),l.html(ag(s,u.allSelected)?x.text||"&#10003;":(b.colorBox||{}).text||""))}()},y.highlightItem=function(e,t,a,r,n,i){var o=rr(a);R(),o.forEach(function(e){var t=s[e];!function(e,t,a,r,n,i){if(i||!tg(t,u.allSelected,u.isFirstClickAfterDeselection)){if(!function(e){return!za(e)||0===Object.keys(e).length&&e.constructor===Object}(r.itemHoverStyle)){var o=qe(e),l=o.selectAll(".legendlabel"),s=(n?r.itemHoverStyle:r).backgroundColor;o.style("background-color",s),!n&&za(r.showAs)&&l.html(yl(t,a,r,c)),fn(o.selectAll(n?".legendlabel, .legendlabel *":".legendlabel"),n?k:C,!0)}}}(I(e).node(),t,e,r,n,i)})},y.highlightSeries=function(e,t,a,r,n,i){var o=n.legendHighlight;if(n.highlightContext=null,y.handlePreviousHighlight.apply(y,arguments),Pn.isQuantileColorScale(n)){var l=a;i?t.disabled||n.seriesdata.forEach(function(e,t){o.highlightSelectedSeries(r,t,l),o.highlightUnselectedSeries(r,t,l)}):n.seriesdata.forEach(function(e,t){o.reset(r,t,l,n.seriesdata.length-1===t)})}else i?t.disabled||(o.highlightSelectedSeries(r,a),o.highlightUnselectedSeries(r,a)):o.reset(r,a)},y.updateLabel=function(e){rr(e).forEach(function(e){return function(e){var t=s[e],a=I(e),r=rg(t.disabled,w,b),n=t.disabled&&b.strikeout?"line-through":null;a.selectAll(".legendlabel, .legendlabel *").styles({color:r,"text-decoration":n}),!t.disabled&&m.showAs&&a.selectAll(".legendlabel").html(yl(t,e,m,c))}(e)})},y.handlePreviousHighlight=function(){var e=c.legendHighlight,t=e.prevData,a=arguments[5];a&&t&&(t[5]=!1,e.prevData=$t,y.highlightSeries.apply(y,t)),e.prevData=a?arguments:$t}};var ig=(_inherits(og,ip),og);function og(){return _classCallCheck(this,og),_possibleConstructorReturn(this,(og.__proto__||Object.getPrototypeOf(og)).apply(this,arguments))}ig.encode="clr",ig.view="list",ig.domMode="html",na.setComponent("colorLegendList",ig),ap(ig),Gr.sizeLegend=function(e){return{enabled:!0,hAlign:Qo,vAlign:Ko,layout:Jo,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4},background:{color:qt,alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:qt},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},list:{marker:{shape:"circle",hAlign:Xo,vAlign:Xo,fillColor:"transparent",strokeColor:"#808080"},label:{fontSize:e.fontL1Size.l5,padding:5,keepAligned:!0}},nested:{marker:{shape:"circle",hAlign:Xo,vAlign:qo,fillColor:qt,strokeColor:"#C0C2C4"},axis:{show:!0,tickOrient:tl,ticklabel:{fontSize:e.fontL1Size.l8},tickmark:{show:!1,color:"#AAACAF",size:10}}}}};var lg=(_createClass(sg,[{key:"draw",value:function(e){var t=this.encode;t&&(Qf(t,e),this.element=e)}}]),sg);function sg(e){_classCallCheck(this,sg),this.spec=e}var cg=(_inherits(ug,lg),_createClass(ug,[{key:"resize",value:function(e,t){var a=this.spec.bound;a.maxWidth=e,a.maxHeight=t,this.create(),this.draw(this.element)}},{key:"viewScaleComponent",value:function(){var e=this.spec,t=e.config,a=e.scaleComponent,r=a.getScale(),n=r.range(),i=r.domain(),o=n[n.length-1],l=a.schema.domain,s=a.schema.data.meta,c=s.datatype,u=s[c]||{},d=l.ranges,h=l.stops,f=dg(t,r,e.view),p=function(e,t,a){var r=dg(e,t,a);if(!r){var n=t.range(),i=t.domain(),o=i[0]===i[i.length-1]?1:3;r=Mt(o,_t((n[n.length-1]-n[0])/20))}return 1<r?r+.1:r}(t,r,e.view),g=void 0,v=void 0,y=void 0;return c===On&&function(e,t){var a=e.subfunction,r=qu(e,"legend");if(!za(a)||"AUTO"===a||r){var n=as(t[1]-t[0]);e.subfunction=n.subFunction}r&&((e.legendformat||e.format).specifier=null)}(u,i),y=d||c===Sn?(g=d||i,K().domain(g).range(n)):(g=h?i:function(e,t,a,r){var n=e.domain(),i=void 0;return t===On?(hg(i=nd(i=(i=e.ticks(a)).length<a?e.ticks(2*a):i,a),n),i):("integer"===r?i=function(e,t){var a=e.length,r=t[t.length-1];return 1<a&&t[t.length-1]-e[a-1]<(e[a-1]-e[a-2])/2?e[a-1]=r:e.push(r),e}(i=gd(n,Mt(a-1,1)),n):hg(i=fd(n,a),n),i.sort(T).map(function(e){return+e.toFixed(12)}))}(r,c,p,u.subfunction),r),f&&(v=nd(g,f)),{ticks:g,labels:v||g,scale:y,bound:{width:o,height:o}}}},{key:"updateScale",value:function(e,t){var a=this.spec.scaleComponent,r=a.d3_scale;r.range=a.parseRange({maxWidth:e,maxHeight:t}),a.scale.range(r.range)}}]),ug);function ug(){return _classCallCheck(this,ug),_possibleConstructorReturn(this,(ug.__proto__||Object.getPrototypeOf(ug)).apply(this,arguments))}function dg(e,t,a){var r="nested"===a?e.nested.axis.tickCount:e.list.tickCount;if(r)return Ta(r,t,e)}function hg(e,t){e[0]=t[0],e[e.length-1]=t[t.length-1]}var fg=(_inherits(pg,lg),_createClass(pg,[{key:"create",value:function(){var a=this.spec,e=a.data,t=a.config,r=a.align,n=a.class,i=void 0===n?"":n,o=this.spec.label.fontSize,l=t.list,s=l.marker,c=l.label,u=ll.getFilterBoxSize(s,o),d=a.bound||{width:u[0],height:u[1]},h=function(t,e,a){return t?function(e){return[t(e),t(e)]}:function(){return ll.getFilterBoxSize(e,a)}}(a.scale,s,o),f=function(e,t,a,r,n,i,o){var l=e.hAlign,s=(e.vAlign,t.keepAligned),c=void 0===s||s,u=t.padding,d=void 0===u?0:u,h=t.showAs,f=o.globalFont,p=void 0===f?{}:f,g=i.layout===el,v={},y={},m={};if(bg(e)||(d=0),c){var b=$t,x=$t,C=void 0;if(g)b=function(e){return(Mt(n,r.height)-a(e)[1])/2+"px"},x=function(){return d+"px"},C=r.height+"px";else{b=function(e){return(l===Qo?r.height-a(e)[0]:l===Xo?(r.height-a(e)[0])/2:0)+"px"},x=function(e){return(l===Qo?0:l===Xo?(r.height-a(e)[0])/2:r.height-a(e)[0])+d+"px"};var k=$t;C=function(e){return k=k||Dd([t,p,Wr]),Mt(k,a(e)[1])+"px"}}v={float:Zo,display:"inline-block",margin:function(e){return g?b(e)+" 0 0 0":"0 0 0 "+b(e)}},y={display:h?"inline-block":$t,margin:function(e){return"0 0 0 "+x(e)}},m={"line-height":C}}else(v=g?(y={margin:d+"px 0 0 0"},{margin:function(e){return function(e){return r.height/2-a(e)[1]/2+"px"}(e)+" auto 0 auto"}}):(y={margin:d+"px 0 0 0"},m={"text-align":l},{margin:"right"===l?"0 0 0 auto":l===Xo?"0 auto 0 auto":$t})).float=$t,v.display=$t,y.display=$t,m["line-height"]=$t;return{box:v,label:y,li:m}}(s,c,h,d,o,r,a),p=!1!==t.show,g=function(e){var t,a=e.layout===el;return{styles:(_defineProperty(t={width:"",margin:0,padding:0,"white-space":a?"nowrap":$t},a?"overflow-x":"overflow-y","hidden"),_defineProperty(t,"list-style-type",Qt),_defineProperty(t,"-webkit-overflow-scrolling","touch"),_defineProperty(t,"vertical-align",Ko),_defineProperty(t,"font-size","0px"),t)}}(r),v=_f("ul","."+i+"legseries",[1]);if(v.properties=g,!p)return this.encode=v;var y=function(e,t,a){var r=e.list.label,n=void 0;return n="wrap"===r.overflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":Ko}:{"text-overflow":"ellipsis","vertical-align":nl},{styles:_extends({"white-space":"nowrap",position:"relative",overflow:"hidden","text-align":Zo,padding:Ra(qa(e.itemMargin,3)),height:za(e.itemHeight)?e.itemHeight+"px":$t},n,{"vertical-align":Ko,display:function(e){return ll.isHiddenItem(e)?Qt:t.layout===el?"inline-block":"block"}},a,{"font-size":"0px"},fn($t,[r],!0))}}(t,a.align,f.li),m=_f("li","."+i+"series",e);m.properties=y,v.children.push(m);var b=_extends({},a,{data:[1],size:h,show:bg(s)}),x=new gg(b,f.box).create();m.children.push(x);var C=_extends({},a,{data:[1],size:h}),k=new yg(C,f.label).create();return k.onEnd=function(e){if(a.align.layout!==el){var t=e.node().offsetHeight;x.element.style("margin-top",function(e){return function(e){return Np(Xo,t,h(e)[1],o,a.scale?h(e)[1]:s.size,c.overflow)}(e)+"px"})}},m.children.push(k),this.encode=v}}]),pg);function pg(){return _classCallCheck(this,pg),_possibleConstructorReturn(this,(pg.__proto__||Object.getPrototypeOf(pg)).apply(this,arguments))}var gg=(_createClass(vg,[{key:"create",value:function(){var e=this.spec,t=e.show,a=e.data,r=void 0===a?[]:a,n=e.class,i=void 0===n?"":n,o=this.parse(),l=_f(Br,"."+i+"legendfilterbox",t?r:[],{depends:!0});return l.properties=o,this.encode=l}},{key:"parse",value:function(){var e=this.place,t=this.spec,a=t.size,r=t.config.list.marker;return{styles:_extends({width:function(e){return a(e)[0]+"px"},height:function(e){return a(e)[1]+"px"},"background-repeat":"repeat","box-sizing":"border-box","text-align":Xo},e,fn($t,[r],!0),function(r,n){var e=r.fillColor,i=void 0===e?qt:e,t=r.strokeColor,o=void 0===t?qt:t,a=r.strokeWidth,l=r.borderRadius,s=r.shape,c=void 0===s?"square":s,u=void 0,d=void 0;return l="square"!==c?(d=function(e){var t=n(e)[0],a=n(e)[1];return Vp(Wp(t,a,o,i,c,r,!0),t,a)},u=Qt,$t):(d=i,u=function(e,t){return qa(a,1)+"px solid "+Ta(o,e,t)},za(l)?l+"px":$t),_defineProperty({background:d,border:u},"border-radius",l)}(r,a))}}}]),vg);function vg(e,t){_classCallCheck(this,vg),this.spec=e,this.place=t}var yg=(_createClass(mg,[{key:"create",value:function(){var e=this.spec,t=e.data,a=void 0===t?[]:t,r=e.class,n=void 0===r?"":r,i=this.parse(),o=_f("span","."+n+"legendlabel",a,{depends:!0});return o.properties=i,this.encode=o}},{key:"parse",value:function(){var e=this.place,t=this.spec,a=t.globalFont,r=void 0===a?{}:a,n=t.config,i=void 0===n?{}:n,o=t.format,l=void 0===o?function(e){return e}:o,s=i.list.label;return{html:l,attrs:{title:function(){return s.tooltip?this.textContent:$t}},styles:_extends({},fn($t,[s,r,Wr],!0),e)}}}]),mg);function mg(e,t){_classCallCheck(this,mg),this.spec=e,this.place=t}function bg(e){return!1!==e.show}na.setComponent("listView",fg);var xg=(_createClass(Cg,[{key:"create",value:function(){var e=this.parse(),t=e.backgroundParser,a=e.borderParser,r=e.shadowParser,n={properties:{styles:_extends({},t,a,r)}};return this.encode=n}},{key:"parse",value:function(){var e=this.spec.config;return{backgroundParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.color,a=void 0===t?qt:t,r=e.alpha,n=Pe(a.toString());return{"background-color":"rgba("+n.r+","+n.g+","+n.b+","+r+")"}}(e.background),borderParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.show,a=e.size,r=e.style,n=e.color,i=e.radius;return t?{border:+a+"px "+r+" "+n,"border-radius":i+"px"}:{border:$t}}(e.border),shadowParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.show,a=e.x,r=e.y,n=e.blur,i=e.color,o=e.inset;return t?{"box-shadow":a+"px "+r+"px "+n+"px "+i+(o?" inset":"")}:{"box-shadow":$t}}(e.shadow)}}}]),Cg);function Cg(e){_classCallCheck(this,Cg),this.spec=e}var kg=(_createClass(wg,[{key:"create",value:function(){var e=this.parse(),t=new fg(e).create();return this.encode=t}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=e.globalFont,r=t.title||{},n=ga(t.list,t.selectAllBox,!0),i=_extends({},r,{keepAligned:!0,padding:t.textPadding});return{config:{show:r.show,itemMargin:r.margin,list:{marker:_extends({},n,{show:!1}),label:i}},data:[r.text],align:{layout:Jo},format:function(e){return Ca(e)},globalFont:a,label:{fontSize:+pa.getVal(r.fontSize||a.fontSize)},class:"zc-header-"}}}]),wg);function wg(e){_classCallCheck(this,wg),this.spec=e}function Sg(){return{}}var Og=(_inherits(Ag,lg),_createClass(Ag,[{key:"create",value:function(){var t=this.spec,a=t.config,r=cl(a),e=this.parse(),n=e.titleParser,i=e.backgroundParser,o=e.viewParser,l=_f("div",".legendgroup",[1]),s=new xg(i).create();l.properties=s.properties;var c=new kg(n).create();l.children.push(c);var u=new fg(o).create();l.children.push(u);var d=a.title&&a.title.keepAligned&&r.layout===el?"inline-block":$t;return c.properties.styles.display=d,u.properties.styles.display=d,l.onEnd=function(e){return function(e,t,a,r,n){var i=e.selectAll("ul.zc-legend-legseries"),o=e.selectAll("li.zc-legend-series"),l=e.selectAll("ul.zc-header-legseries"),s=t.layout,c=n.border&&n.border.show?n.border.size:0,u=r.maxWidth,d=r.maxHeight;if(u-=2*c,d=zt((d-=2*c)-yr(l).height,d),e.style("max-width",u+"px"),i.styles({"max-width":u+"px","max-height":d+"px"}),s===el){i.styles({width:$t,height:$t}),i.style("border","1px solid");var h=yr(i);i.style("border",$t),i.style("width",h.width+2+"px");var f=Tr(i,"width")?20:0;i.style("height",h.height+f+2+"px");var p=i.node().scrollHeight-2>i.node().offsetHeight;i.style("overflow-x","auto"),i.style("overflow-y",p?"auto":"hidden")}else if(t.layout===el){i.styles({width:$t,height:$t}),o.style("max-width",u+"px"),e.style("max-width",u+"px"),i.styles({display:"inline","border-top":"1px solid"});var g=yr(i).width;i.styles({display:a,"border-top":$t}),e.style("max-width",u+"px"),i.style("height",function(e,t){var a=0,r=0,n=0;return e.each(function(){var e=yr(this);r+e.width>t&&(a+=n,r=n=0),r+=e.width,n=Mt(n,e.height)}),a+=n}(o,u)+2+"px");var v=Tr(i)?20:0;i.style("width",g+v+2+"px"),i.style("overflow","auto")}else{var y=Tr(i)?20:0;i.style("width",$t);var m=yr(i.style("display","inline-block")).width;i.style("display",a),i.style("width",m+y+2+"px"),i.style("height",$t),i.style("overflow","auto")}}(e,r,d,t.bound,a)},this.encode=l}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=e.globalFont,r=e.format,n=e.data,i=this.viewScaleComponent(),o=i.scale,l=i.bound,s=cl(t);return{titleParser:{align:s,config:t,globalFont:a},backgroundParser:{config:t},viewParser:{bound:l,config:t,format:r,globalFont:a,data:t.reversed?n.slice(0).reverse():n,scale:o,align:s,label:{fontSize:+pa.getVal(_a([t.list.label,a,Wr],"fontSize"))},class:"zc-legend-"}}}}]),Ag);function Ag(e,t){_classCallCheck(this,Ag);var a=_possibleConstructorReturn(this,(Ag.__proto__||Object.getPrototypeOf(Ag)).call(this,e));return a.viewScaleComponent=t||Sg,a}na.setComponent("listLegend",Og);var Pg=(_inherits(Tg,cg),_createClass(Tg,[{key:"create",value:function(){this.spec.data=this.viewScaleComponent().ticks;var e=new Og(this.spec,this.viewScaleComponent);this.encode=e.create()}},{key:"draw",value:function(e){e.styles({display:"block",position:"absolute",left:$t,top:$t}),_get(Tg.prototype.__proto__||Object.getPrototypeOf(Tg.prototype),"draw",this).call(this,e)}},{key:"resize",value:function(e,t){if(e||t){var a=pl(e,t,this.spec.bound),r=a.w,n=a.h;this.updateScale(r,n),_get(Tg.prototype.__proto__||Object.getPrototypeOf(Tg.prototype),"resize",this).call(this,r,n)}}}]),Tg);function Tg(){return _classCallCheck(this,Tg),_possibleConstructorReturn(this,(Tg.__proto__||Object.getPrototypeOf(Tg)).apply(this,arguments))}Pg.adjustFactor=function(e,t,a){var r=[0,0];return cl(e).layout===el?r[1]+=22:r[0]+=22,r},Pg.encode="z",Pg.view="list",Pg.domMode="html",na.setComponent("sizeLegendList",Pg),ap(Pg);var _g=(_inherits(Eg,lg),_createClass(Eg,[{key:"create",value:function(){var e=this.spec.data||[],t=this.parse(),a=t.poly,r=t.position,n=t.styles,i=_f("g",".zc-nested-view",[1]),o=_f(Rr,null,e,{properties:{attrs:{d:a,transform:r},styles:n}});return i.children.push(o),this.encode=i}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=e.bound,r=e.scale,n=void 0===r?function(e){return e}:r,i=Ji(t.shape),o=function(e,t,a){var r=e.width;switch(a){case Zo:return function(e){return t(e)/2};case Qo:return function(e){return r-t(e)/2};default:return function(){return r/2}}}(a,n,t.hAlign),l=function(e,t,a){var r=e.height;switch(a){case Ko:return function(e){return t(e)/2};case qo:return function(e){return r-t(e)/2};default:return function(){return r/2}}}(a,n,t.vAlign);return{poly:function(e){return i(n(e))},position:function(e){return"translate("+o(e)+","+l(e)+")"},styles:t}}}]),Eg);function Eg(){return _classCallCheck(this,Eg),_possibleConstructorReturn(this,(Eg.__proto__||Object.getPrototypeOf(Eg)).apply(this,arguments))}function Lg(e,t,a,r,n){if(!e.empty()){function i(e,t){qe(e).style("display","none"),qe(s[t]).style("display","none"),o[t]={x1:0,y1:0,x2:0,y2:0}}var o=void 0,l=e.nodes(),s=t.nodes(),c=function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{left:0,right:0,bottom:0,top:0},n=e.x,i=void 0===n?0:n,o=e.y,l=void 0===o?0:o,s=e.maxWidth,c=e.maxHeight,u=l+r.top,d=u+c-r.bottom,h=i+r.left,f=h+s-r.right;switch(a){case"end":var p=s-t.width;h-=p,f-=p;break;case"middle":var g=(s-t.width)/2;h-=g,f-=g}return{top:u,right:f,bottom:d,left:h}}(a,r,n.attrs["text-anchor"]);l.splice(1,0,l.splice(l.length-1,1)[0]),s.splice(1,0,s.splice(s.length-1,1)[0]),o=function(e){return e.map(function(e){return function(e){var t=ba(e),a=$n(e).translate,r={x1:t.x+a[0],y1:t.y+a[1],width:t.width,height:t.height};return r.x2=r.x1+r.width,r.y2=r.y1+r.height,r}(e)})}(l),function(e,i,o){var l={left:0,right:0,bottom:0,top:0};e.forEach(function(e,t){var a=ba(e),r=$n(e).translate,n={left:a.x+r[0],top:a.y+r[1],width:a.width,height:a.height};cn(e,e.textContent,n,i,qo,"..",l),".."===e.textContent&&qe(e).text(""),e.textContent||o(e,t)})}(l,c,i),function(e,n,i){e.forEach(function(e,t){for(var a=t-1,r=!1;0<=a&&!r;a--)(r=Li(n[a],n[t]))&&i(e,t)})}(l,o,i)}}na.setComponent("nestedView",_g);var Mg="center-center",zg=(_createClass(Dg,[{key:"create",value:function(){var e=this.spec,t=e.data,a=e.config,r=_f("g",".zc-nested-axis");if(!a.show)return this.encode=r;var n=this.parse(),i=n.tickMarkParser,o=n.tickLabelParser,l=n.tickLabelEnd,s=_f("g",".zc-nested-axis-tickmark"),c=_f(Rr,null,i?t:[],{properties:i});s.children.push(c);var u=_f("g",".zc-nested-axis-ticklabel"),d=_f(Dr,null,o?t:[],{properties:o});return d.onEnd=function(){return l(d.element,c.element)},u.children.push(d),r.children.push(s,u),this.encode=r}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=e.bound,r=e.scale,n=e.align,i=e.format,o=e.shape,l=void 0===o?"square":o,s=e.availableBound,c=t.ticklabel,u=t.tickmark,d=t.show,h=Hg(t),f=d&&h&&function(e,t,a,r,n){var i=jg(r),o=i.hAlign,l=i.vAlign,s=e.strokeWidth,c=e.dashStyle,u=e.lineCap,d=e.size,h=void 0===d?3:d,f={fillColor:"none",strokeColor:e.color,strokeWidth:s,dashStyle:c,lineCap:u,display:null},p=function(o,l,s,c,u,d){return function(e){var t=Rg(o,l,s,c,u,d),a=t.startX,r=t.startY,n=t.endX,i=t.endY;return"M"+a(e)+" "+r(e)+"L"+n(e)+" "+i(e)}}(t,a,o,l,h,n);return{styles:f,attrs:{d:function(e){return p(e)}}}}(u,a,r,n,l),p=d&&function(e,t,a,r,n,i,o,l){var s=jg(r),c=s.hAlign,u=s.vAlign,d=void 0,h=void 0,f=void 0,p=void 0,g=null,v=qa(e.margin,2),y=u===Xo;if(l){var m=function(){var e=Pa(arguments).slice(0),r={top:0,right:0,bottom:0,left:0};return e.map(function(e){var t=nr(e);for(var a in r)r[a]+=t[a]}),Or(r).join(" ")}(qa(i.size,3),v),b=Rg(t,a,c,u,m,o),x=b.endX,C=b.endY;f=function(e){return"translate("+x(e)+","+C(e)+")"},p=y?"1em":"0.3em",g=y?nl:null}else{var k=Ig(t,a,c,u,v,o);d=k[0],h=k[1],f=function(e){return"translate("+d(e)+","+h(e)+")"},p=function(e){switch(e){case Ko:return"1em";case qo:case Mg:return"-0.3em";default:return"0.3em"}}(u),g=function(e){switch(e){case Zo:return null;case Qo:return il;default:return nl}}(c)}return{text:n,attrs:{transform:f,dy:p,"text-anchor":g},styles:_extends({},fn(null,[e]),{display:null})}}(c,a,r,n,i,u,l,h);return{tickMarkParser:f,tickLabelParser:p,tickLabelEnd:function(e,t){return Lg(e,t,s,a,p)}}}}]),Dg);function Dg(e){_classCallCheck(this,Dg),this.spec=e}function Ig(e,t,a,r,n,i,o){var l=function(e,t,a,r){var n=nr(3<arguments.length&&void 0!==r?r:0),i=e.width;switch(a){case Zo:return function(e){return t(e)+n.left};case Qo:return function(e){return i-t(e)-n.right};default:return function(){return i/2}}}(e,t,a,n),s=function(e,t,a,r){var n=nr(3<arguments.length&&void 0!==r?r:0),i=e.height;switch(a){case Ko:return function(e){return t(e)+n.top};case qo:return function(e){return i-t(e)-n.bottom};case Mg:return function(e){return(i-t(e))/2-n.bottom};default:return function(){return i/2}}}(e,t,r,n),c=l,u=s;return"square"===i?o&&(r===Xo?u=function(e){return s(e)+t(e)/2}:a===Xo?c=function(e){return l(e)+t(e)/2}:a===Qo&&(c=function(e){return l(e)+t(e)})):r!==Xo&&(a===Zo?c=function(e){return l(e)-t(e)/2}:a===Qo&&(c=function(e){return l(e)+t(e)/2})),[c,u]}function Rg(e,t,a,r,n,i){n=nr(n);var o=Ig(e,t,a,r,0,i,!0),l=o[0],s=o[1],c=function(){return e.width+n.left},u=function(){return e.height+n.top};return r===Xo?c=l:u=s,{startX:l,startY:s,endX:c,endY:u}}function jg(e){var t=e.hAlign,a=e.vAlign;return a===Xo&&t===Xo&&(a=Mg),{vAlign:a,hAlign:t}}function Hg(e){return e.tickOrient===al}var Bg=(_inherits(Fg,cg),_createClass(Fg,[{key:"create",value:function(){var e=this.parse(),t=e.titleParser,a=e.backgroundParser,r=e.viewParser,n=e.axisParser,i=e.axisEnd,o=void 0;o=_f("g");var l=new zf(t).create();o.children.push(l);var s=new _g(r).create();s.properties={attrs:{transform:function(){return"translate(0,"+ba(l.element).height+")"}}},o.children.push(s);var c=new zg(n).create();c.onEnd=function(){return i(c,s,l)},o.children.push(c);var u=new If(_extends({},a,{bound:function(){return ba(o.element)}})).create();o.children.push(u),this.encode=o}},{key:"parse",value:function(){var e=this.spec,t=e.config,a=e.bound,r=e.format,n=this.viewScaleComponent(),i=n.scale,o=n.bound,l=n.ticks,s=n.labels,c=t.nested,u=c.marker,d=c.axis,h=qa(c.padding,3),f=nr(h);return{titleParser:{data:[1],config:t.title,bound:a},viewParser:{bound:o,data:l,scale:i,config:u},axisParser:{bound:o,data:s||l,scale:i,config:d,align:{hAlign:u.hAlign,vAlign:u.vAlign},format:r,shape:u.shape,availableBound:{maxWidth:a.maxWidth-f.left-f.right,maxHeight:a.maxHeight-f.top-f.bottom}},backgroundParser:{data:[1],config:t,margin:h},axisEnd:function(e,t,a){var r=ba(e.element),n=ba(a.element),i=Mt(-r.y,0)+n.height+h;e.element.attr("transform","translate(0,"+i+")"),t.element.attr("transform","translate(0,"+i+")")}}}},{key:"resize",value:function(e,t){if(e||t){var a=pl(e,t,this.spec.bound),r=a.w,n=a.h,i=this.encode.children,o=ba(i[3].element),l=ba(i[1].element);r-=e?Mt(o.width-l.width,0):0,n-=t?Mt(o.height-l.height,0):0,this.updateScale(r,n),_get(Fg.prototype.__proto__||Object.getPrototypeOf(Fg.prototype),"resize",this).call(this,e,t)}}},{key:"draw",value:function(e){this.element=e,Qf(this.encode,e);var t=this.spec,a=t.config,r=t.bound,n=a.maxWidth,i=a.maxHeight,o=r.maxWidth,l=r.maxHeight,s=ba(e),c=s.width,u=s.height;(n||i)&&(1<c-o||1<u-l)&&(o-=n&&o<c?c-o:0,l-=i&&l<u?u-l:0,this.updateScale(o,l),this.create(),Qf(this.encode,e))}}]),Fg);function Fg(){return _classCallCheck(this,Fg),_possibleConstructorReturn(this,(Fg.__proto__||Object.getPrototypeOf(Fg)).apply(this,arguments))}function Wg(e,t){var a=t.selection,r=this.getData(e,t.type,a);this.chart.cache.scroll.selection;this.associateBehaviours(e,t.type,r,t.selection,t)}function Vg(e,t,a){var r=e.instance,n=this.chart.overview||this.chart,i=n.dataset.getDataType("x",0),o=n.axes.rotated,l=Nn(function(e,t){if(e=e.slice(0),t[0]>t[1]){var a=_slicedToArray(t,2),r=a[0],n=a[1];t=[n,r]}t=t.slice(0).sort(ge);var i=zt(e[0]-t[0],0),o=Mt(e[1]-t[1],0);return e[0]-=o,e[1]-=i,e}(a,e.instance.brushScale.range()),r.brushScale,"x",i,o,n.axes.x.reversed);za(r.visiblePointCount)&&l.length>r.visiblePointCount&&(l.length=r.visiblePointCount);function s(e){return l[0]instanceof Date?new Date(e):e}var c=this.chart.systemConf.chart.axes.xaxis,u=c.minRange,d=c.maxRange;(za(d)||za(u))&&(this.chart.scrollView=l.slice(0));var h=l[1]>l[0]?{max:1,min:0}:{max:0,min:0};return za(d)&&(l[h.max]=s(d)),za(u)&&(l[h.min]=s(u)),{x:{domain:l,index:0,dataType:i}}}Bg.adjustFactor=function(e,t,a,r){var n=[0,0],i=e.maxWidth,o=e.maxHeight,l=e.nested.axis;return l.show&&(o||(n[1]+=Dd([l.ticklabel,r,Wr])),i||(n[0]+=t*(Hg(l)?.3:.2))),n},Bg.encode="z",Bg.view="nested",Bg.domMode="svg",na.setComponent("sizeLegendNested",Bg),ap(Bg),Gr.scroll=function(){return{enabled:!0,categoryThickness:null,visibleCategories:null,height:10,thumb:{fillColor:"#b3b6b7",fillOpacity:.3,strokeColor:"black",strokeOpacity:.3,cursor:Kt},resizer:{enabled:!1,type:"lever",tooltip:{backgroundColor:"#b3b6b7",borderColor:"rgb(51, 51, 51)",fontSize:14}},tracker:{fillColor:"#ECF0F1",cursor:Kt}}};var Ng={LISTENER:{start:Wg,brush:Wg,end:Wg},DATA_FINDER:{start:Vg,brush:Vg,end:Vg},BEHAVIOUR:{start:Ec,brush:Ec,end:function(e,t,a){e.instance.tooltip&&e.instance.tooltip.hide()}},LISTENER_TYPES:H(["start","brush","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory}};na.setComponent("_chartScrollHandlers",Ng),Ae.threshold=function(h,e){var f={},t=h.systemConf,a=t.chart.axes.xaxis,r=Oa(h.userdata,"chart.axes.xaxis")?h.userdata.chart.axes.xaxis:{};null!=r.threshold&&null!=r.threshold.line&&l(h.axes.x,a.threshold.line,0,e,"x","line",r.threshold.line),null!=r.threshold&&null!=r.threshold.range&&l(h.axes.x,a.threshold.range,0,e,"x","range",r.threshold.range);for(var n=t.chart.axes.yaxis,i=Oa(h.userdata,"chart.axes.yaxis")?h.userdata.chart.axes.yaxis:{},o=0;o<h.axes.y.count;o++)null!=i&&null!=i[o]&&null!=i[o].threshold&&null!=i[o].threshold.line&&l(h.axes.y.groups[o],n[o].threshold.line,o,e,"y","line",i[o].threshold.line),null!=i&&null!=i[o]&&null!=i[o].threshold&&null!=i[o].threshold.range&&l(h.axes.y.groups[o],n[o].threshold.range,o,e,"y","range",i[o].threshold.range);function l(e,t,a,r,n,i,o){var l=(o&&o.underlay?h.svg:h.staticPaneSVG).selectAll("g.threshold"),s=h.svg.selectAll("g."+n+"-axis-"+a),c=null==s||s.empty()||""!=s.style("visibility")&&"visible"!=s.style("visibility")?"hidden":"visible",u=sn(l,"g",o.show&&"visible"==c?[t]:[],".","class","threshold"+i+"-"+n+"-axis-"+a);if(null!=e&&t.show){var d=r&&null!=e.threshold&&null!=e.threshold[i]?e.threshold[i]:function(e,t,a,r){return e?(e.threshold||(e.threshold={}),e.threshold[r]=t.show?"line"==r?Ae.threshold.line():Ae.threshold.range():null,e.threshold[r]):null}(e,t,0,i);d=function(e,t,a,r,n,i){var o;return f.axisObj=function(e){return arguments.length?(t=e,f):t},f.thresholdIndex=function(e){return arguments.length?(a=e,f):a},f.type=function(e){return arguments.length?(r=e,f):r},f.values=function(e){return arguments.length?(o=e,f):o},f.chartObj=function(e){return arguments.length?(h=e,f):h},f.thresholdIndex(a).type(r).values(i.values).chartObj(h),"line"==n&&f.axisObj(t),e.parentObj(f),e}(d,e,a,n,i,o),u.call(d)}}},Ae.threshold.textAlign=function(e,t,a,r,n,i){var o;return n=n||0,"left"==e?o=r?"x"==t?n:a.height-n:"left"==i||"bottom"==i?"x"==t?a.height-n:n:"x"==t?n:a.width-n:"center"==e?o=r?"left"===i||"bottom"===i?"x"==t?(a.width+n)/2:(a.height-n)/2:"x"==t?(a.width-n)/2:(a.height+n)/2:"left"==i||"bottom"==i?"x"==t?(a.height-n)/2:(a.width+n)/2:"x"==t?(a.height+n)/2:(a.width-n)/2:"right"==e&&(o=r?"x"==t?a.width:0:"left"==i||"bottom"==i?"x"==t?0:a.width:"x"==t?a.height:0),o},Ae.threshold.overlay=function(R,e,t,u){var j=R.axes.rotated;if("discrete"==e){var d=u.values.slice(0),h=u.overlayRange,f=u.defaultColor,a="x"==t?R.axes.x.scale:R.axes.y.groups[0].scale,p=a.domain(),g=a.bandwidth;g&&(d=d.map(function(e,t){return p.indexOf(e)}));var v=z([d]);return"below"==h||"equalandbelow"==h?d.sort(ge):"equal"!==h&&d.sort(T),function(e,t,a,r){var n=e.color,i=g?p.indexOf(a):a;if(null==u.values||0==u.length)return r;for(var o=0;o<d.length;o++){var l,s=d[o];switch(h){case"equal":l=i===s;break;case"equalandbelow":l=i<=s;break;case"equalandabove":l=s<=i;break;case"below":l=i<s;break;default:l=s<i}if(l){var c=v.indexOf(s);return null==n||null==n[c]?f?r:"black":n[c]}}return r}}if("continous"==e)return function(e,t,a,r){var n="x"==r?R.axes.x.scale:R.axes.y.groups[0].scale,i=a,o=t.values;if(null==o||0==o.length)return e;var l=o.slice(),s=t.color,c=t.overlayRange,u=t.defaultColor;c=c&&c.replace("equaland","");var d,h=R.dataset.getDataType(r,a);if("time"==h){var f=R.dataset.getColumn(r,a);d=null!=f.time?f.time:null}l=l.map(function(e,t){return"time"==h?Vl(e,0,d).getTime():e}),"x"==r&&!j||"y"==r&&j?l.sort(function(e,t){return e<t?-1:t<e?1:0}):l.sort(function(e,t){return t<e?-1:e<t?1:0});var p=n.domain().length,g="x"==r&&!j||"y"==r&&j?n(n.domain()[p-1])-n(n.domain()[0]):n(n.domain()[0])-n(n.domain()[p-1]),v=[];v.push(0);for(var y=0;y<l.length;y++){var m=(n(l[y])+(null!=n.bandwidth?n.bandwidth()/2:0))/g*100;m<100&&(v.push(m),v.push(m))}v.push(100);var b=[];("y"==r&&"below"==c&&!j||"x"==r&&"above"==c&&!j||"y"==r&&"above"==c&&j||"x"==r&&"below"==c&&j)&&b.push(e);for(y=0;y<l.length;y++){a=o.indexOf(l[y]);b.push(null==s||null==s[a]?u?e:"black":s[a])}("y"==r&&"above"==c&&!j||"x"==r&&"below"==c&&!j||"y"==r&&"below"==c&&j||"x"==r&&"above"==c&&j)&&b.push(e);var x=[];for(y=0;y<v.length;y++){var C={};C.offset=v[y]+"%",C.color=y%2==0?b[y/2]:b[(y-1)/2],x.push(C)}var k={type:"thresholdLinear",options:{}},w=k.options,S=j?R.axes.y.groups[0].scale:R.axes.x.scale,O=j?R.axes.x.scale:R.axes.y.groups[0].scale,A="x"==r&&!j||"y"==r&&j;w.x1=A?S(S.domain()[0]):0,w.x2=A?S(S.domain()[p-1]):0,w.y1=A?0:O(O.domain()[p-1]),w.y2=A?0:O(O.domain()[0]),w.values=l,w.color=b,w.seriesclr=e,w.overlayRange=c;var P=(A?S:O).domain();w.scale=P[0]+"_"+P[1];var T=R.plot.renderer.mode,_=R.chartTypes[i].name,E=R.systemConf.chart.plot.plotoptions[_],L="line"===_?E.strokeOpacity:E.fillOpacity,M=[w.x1,w.x2,w.y1,w.y2],z=an(k,M,b,L),D={chartObj:R,offset:x,dimension:M,color:b},I="svg"==T?tn.get(tn.svg_gradients,"svgGradientFill",z,D):tn.get(tn.canvas_gradients,"canvasGradientFill",z,D);return"svg"==T?"url("+R.defsLocation+"#"+I+")":I}};Ae.threshold.overlay;Ae.threshold.line=function(){var U,X,Z,Q,q,K,$,J,ee;function te(e){e.each(function(s){var c=qe(this);te.update=function(){c.transition().call(te)},Q=$.chartObj(),U=$.thresholdIndex(),K=$.type(),J=$.axisObj(),ee=$.values(),X=Q.plotarea;var u=J.scale,r=u.range();(r=r.slice(0,r.length)).sort(function(e,t){return e-t});var d=null!=u.bandwidth?u.bandwidth()/2:0,a=s.label;a=ru(a,Oa(Q.userdata,"chart.axes."+K+"axis"+("x"===K?"":"."+U)+".threshold.line.label",!0));var h=s.marker||{},e=qa(h.enabled,!0);q=Q.axes.rotated,Z=Q.systemConf;var n=[],f=[],p=[],i={x:2,y:2},t=Z.chart.axes.xaxis.axisline,o=Z.chart.axes.yaxis[U].axisline;za(t)&&t.show&&(i.x+=+t.strokeWidth-1),za(o)&&o.show&&(i.y+=+o.strokeWidth-1);var l,g=0,v=[],y=[],m=[],b=[],x=[],C=[],k=[],w=[],S=Q.dataset.getDataType(K,U),O=!1!==Va(s.events,"enabled"),A=Q.dataset.getColumn(K,U),P=Q.dataset.getColumnIdx(K,U);S==On&&(l=Va(A,On)||null),ee.map(function(e,t){var a=null!=e&&""!=e?S==On?Vl(e,0,l).getTime():e:null;null!=e&&""!==e&&u(a)+d>=r[0]&&u(a)+d<=r[r.length-1]&&(n[g]=a,f[g]=kd(Va(s,"label.text["+t+"]")||"",ee,A,Q),p[g]=(Ba(s.color)?s.color[t]:s.color)||"black",v[g]=za(s.label)&&(Ba(s.label.hAlign)?s.label.hAlign[t]:s.label.hAlign)||"center",m[g]=(Ba(s.strokeWidth)?s.strokeWidth[t]:s.strokeWidth)||1,y[g]=Ba(s.dashStyle)?s.dashStyle[t]:s.dashStyle,b[g]=za(s.marker)&&s.marker.enabled?(Ba(s.marker.strokeWidth)?s.marker.strokeWidth[t]:s.marker.strokeWidth)||2:null,C[g]=s.marker&&s.marker.enabled?(Ba(s.marker.size)?s.marker.size[t]:s.marker.size)||1:null,g++)});var T=Q.container.node().getBoundingClientRect(),_={left:T.left+X.left,top:T.top+X.top,width:X.width,height:X.height,right:T.left+X.left+X.width,bottom:T.top+X.top+X.height},E=_.left,L=_.top,M=J.component.orient(),z={top:0,left:0,right:0,bottom:0},D="threshold"+K+U,I=Q.cache.thresholdCustomPoints=qa(Q.cache.thresholdCustomPoints,{}),R=I[D]=qa(I[D],[]),j=qa(function(e,t){return qa(Va(e,"events.triggerOffset"),Oo(t,t.chartTypes[0].value))}(s,Q),10);R.superKey="threshold",R.triggerOffset=j,c.attr("transform","translate("+X.left+","+X.top+")");var H=sn(c,"g",[s],".","class","thresline-"+U),B=Q.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),F=B.border||B["border-"+M],W=B.border||B["border-"+ei(M)],V=F&&F.clr!==qt?F.size:0,N=W&&W.clr!==qt?W.size:0,Y=V+N,G=sn(H,"path",null!=h&&e?n:[],".","class","marker");G.attr("d",function(e,t){return Ji(Ba(h.symbol)?h.symbol[t]:h.symbol)(10*C[t])}).style("stroke-width",function(e,t){return b[t]||2}).style("stroke",function(e,t){return(Ba(h.strokeColor)?h.strokeColor[t]:h.strokeColor)||p[t]}).attr("fill",function(e,t){var a=Ba(h.fillColor)?h.fillColor[t]:h.fillColor;return a||(null===a?p[t]:"white")}),G.attr("transform",function(e,t){var a=b[t]/2,r=ba(this);x[t]=r.width+V;var n,i,o="bottom"==M||"top"==M?u(e)+d:"left"==M?a+V+r.width/2:X.width-(a+V+r.width/2),l="bottom"==M?X.height-r.width/2-V-a:"top"==M?a+r.height/2+V:u(e)+d;if(O){R.push({_data:(n=Q,i=t,function(){var e=n.cache.thresholdCustomPoints[D][i];return{_x:e&&e._x,_y:e&&e._y,_size:e&&e._size,_visible:!0}}),_x:o,_y:l,_key:"threshold_"+Q.id+"_"+K+"_"+U+"_"+t,width:x[t],height:x[t],color:p[t],text:f[t],type:"threshold-marker",triggerOffset:j,_size:10*(C[t]||b[t])+b[t]/2,_mSize:C[t],marker:h,point:ee[t],formattedValue:Hl(A[A.datatype],ee[t],A.datatype,Q,"threshold",!1),thresholdType:K,columnIndex:P,columnInfo:A,yColumnIndex:U,itemIndex:t,events:s.events||{},disabled:function(){return c.__data__!=$t},_defaultH:function(){return[{shape:"marker",path:function(){return Q.eventHandler.CustomPoints.hoverPoint(this)},context:function(){return Iu.get("scatter").call(this,Q)}}]}})}return"translate("+o+","+l+")"}),sn(H,"line",n).attr("x1",function(e,t){return"bottom"==M||"top"==M?u(e)+d:"left"==M?(x[t]||0)+b[t]:N}).attr("y1",function(e,t){return"bottom"==M?V:"top"==M?(x[t]||0)+b[t]:u(e)+d}).attr("x2",function(e,t){return"bottom"==M||"top"==M?u(e)+d:"left"==M?X.width-N:X.width-b[t]-(x[t]||0)}).attr("y2",function(e,t){return"bottom"==M?X.height-b[t]-(x[t]||0):"top"==M?X.height-N:u(e)+d}).attr("stroke",function(e,t){return"    "+p[t]}).attr("stroke-width",function(e,t){return m[t]+"px"}).attr("shaperendering","crispedges").attr("stroke-dasharray",function(e,t){return on(y[t],m[t])}),sn(H,"text",null!=a?n:[]).text(function(e,t){return Ca(f[t])}).attr("x",function(e,t){var a=10*C[t]+i[K]+(b[t]||2);return"x"==K&&!q||"y"==K&&q?-Ae.threshold.textAlign(v[t]||"right",K,X,q,a,M):Ae.threshold.textAlign(v[t]||"right",K,X,q,a,M)}).attr("y",function(e,t){return u(e)+d-5}).attr("transform","x"==K&&!q||"y"==K&&q?"rotate(-90)":"rotate(0)").styles({"font-family":function(e,t){return w[t]=(Ba(a.fontFamily)?a.fontFamily[t]:a.fontFamily)||Z.chart.fontFamily||Z.canvas.fontFamily||Wr.fontFamily,w[t]},"font-size":function(e,t){return k[t]=pa.getVal((Mr(a.fontSize)||Ba(a.fontSize)?a.fontSize[t]:a.fontSize)||Z.chart.fontSize||Z.canvas.fontSize),k[t]+"px"},fill:function(e,t){return(Ba(a.fontColor)?a.fontColor[t]:a.fontColor)||Z.chart.fontColor||Z.canvas.fontColor||Wr.fontColor},"font-weight":function(e,t){return(Ba(a.fontWeight)?a.fontWeight[t]:a.fontWeight)||Z.chart.fontWeight||Z.canvas.fontWeight||Wr.fontWeight},"font-style":function(e,t){return(Ba(a.fontStyle)?a.fontStyle[t]:a.fontStyle)||Z.chart.fontStyle||Z.canvas.fontStyle||Wr.fontStyle},"text-Anchor":function(e,t){return"left"==M||"bottom"==M?"center"==v[t]?"middle":"right"==v[t]?"end":"start":"center"==v[t]?"middle":"right"==v[t]?"start":"end"}}).each(function(e,t){var a,r=Ca(f[t]),n=10*C[t],i=pa.fontUtils.getTextWidth(r,k[t],w[t])+n,o="top"===M||"bottom"===M?X.height:X.width;o<i&&(a=zt(i-o,n)+Y,_.left=E+a,_.top=L+a,cn(this,this.textContent,this.getBoundingClientRect(),_,au(M),"..",z))})})}return te.parentObj=function(e){return arguments.length?($=e,te):$},te.getMetaInfo=function(e){return{itemIndex:e.itemIndex,point:e.point,data:ga(Q.systemConf.metadata.columns[e.columnIndex],{columnindex:e.columnIndex})}},te};Ae.threshold.line;Ae.threshold.range=function(){var G,U,X,Z;function t(e){e.each(function(r){var e=qe(this);U=Z.chartObj(),G=Z.thresholdIndex(),X=Z.type();var a=U.systemConf,n=r.label;n=ru(n,Oa(U.userdata,"chart.axes."+X+"axis"+("x"===X?"":"."+G)+".threshold.range.label",!0));var i=[],o=[],l=[],s=[],c=[],u=[],d=[],h=[],f=[],p=[],g=[],v=[],t=U.container.node().getBoundingClientRect(),y=U.plotarea,m={left:t.left+y.left,top:t.top+y.top,width:y.width,height:y.height,right:t.left+y.left+y.width,bottom:t.top+y.top+y.height},b=U.axes[X].orient,x=Z.axisObj().component.orient(),C={top:0,left:0,right:0,bottom:0},k=sn(e,"g",r.show?[r]:[],".","class","thresholdrangegroup-"+X),w=U.axes.rotated;if(r.show){var S,O=U.dataset.getDataType(X,G),A=U.dataset.getColumn(X,G);O==On&&(S=null!=A.time?A.time:null);var P=[],T=[],_={x:2,y:2},E=a.chart.axes.xaxis.axisline,L=a.chart.axes.yaxis[G].axisline;za(E)&&E.show&&(_.x+=+E.strokeWidth-1),za(L)&&L.show&&(_.y+=+L.strokeWidth-1);var M=w?U.axes.y.groups[G].scale:U.axes.x.scale,z=w?U.axes.x.scale:U.axes.y.groups[G].scale,D=U.dataObject.noofBarEnabledSeries,I=null!=M.bandwidth&&D?M.bandwidth():0,R=null!=z.bandwidth&&D?z.bandwidth():0,j=null==M.bandwidth||D?0:M.bandwidth()/2,H=null==z.bandwidth||D?0:z.bandwidth()/2,B=0,F=("x"==X&&!w||"y"==X&&w?M:z).domain(),W=F.length-1;r.values.map(function(e,t){T=null!=e&&""!=e?e.map(function(e){return O==On?Vl(e,0,S).getTime():e}):null;var a=O==Sn?-1!==F.indexOf(T[0])&&-1!==F.indexOf(T[1]):!(T[0]>F[W]||T[1]<F[0]);T&&a&&(O!==Sn&&(T[0]=Mt(T[0],F[0]),T[1]=zt(T[1],F[W])),P[B]=T,i[B]=(Ba(r.fillColor)?r.fillColor[t]:r.fillColor)||"grey",o[B]=Ea(Ba(r.fillOpacity)?r.fillOpacity[t]:r.fillOpacity,"0.2"),l[B]=(Ba(r.strokeColor)?r.strokeColor[t]:r.strokeColor)||"black",s[B]=Ba(r.dashStyle)?r.dashStyle[t]:r.dashStyle,c[B]=Ba(r.lineCap)?r.lineCap[t]:r.lineCap,u[B]=(Ba(r.label.hAlign)?r.label.hAlign[t]:r.label.hAlign)||"center",d[B]=kd(Va(r,"label.text["+t+"]")||"",r.values,A,U),h[B]=Ba(n.fontColor)?n.fontColor[t]:n.fontColor,v[B]=Ba(n.fontStyle)?n.fontStyle[t]:n.fontStyle,p[B]=Ba(n.fontFamily)?n.fontFamily[t]:n.fontFamily,g[B]=Ba(n.fontWeight)?n.fontWeight[t]:n.fontWeight,f[B]=n.fontSize instanceof Function||Ba(n.fontSize)?n.fontSize[t]:n.fontSize,B++)});var V=sn(k,"g",P,".","class","rangebox-"+G);V.append("rect"),V.append("text");var N=V.select("rect"),Y=V.select("text");N.attrs({x:function(e){return"x"==X&&!w||"y"==X&&w?M(e[0])+j+U.plotarea.left:U.plotarea.left+_[X]},y:function(e){return"x"==X&&!w||"y"==X&&w?U.plotarea.top:z(e[1])+H+U.plotarea.top},width:function(e){return"x"==X&&!w||"y"==X&&w?M(e[1])-M(e[0])+I:U.plotarea.width-_[X]},height:function(e){return"x"==X&&!w||"y"==X&&w?U.plotarea.height-_[X]:z(e[0])-z(e[1])+R}}).styles({fill:function(e,t){return i[t]},"fill-opacity":function(e,t){return o[t]},stroke:function(e,t){return l[t]},"stroke-dasharray":function(e,t){return on(s[t])},"stroke-linecap":function(e,t){return ln(c[t],s[t])}}),Y.attrs({transform:function(e,t){var a=ba(N.nodes()[t]),r=Ae.threshold.textAlign(u[t],X,U.plotarea,w,_[X],b);return"x"==X&&!w||"y"==X&&w?"translate("+(a.x+a.width/2)+","+(r+U.plotarea.top)+") rotate(-90)":"translate("+(r+U.plotarea.left)+","+(a.y+a.height/2)+")"},dy:"0.3em"}).styles({"font-family":function(e,t){return p[t]||a.chart.fontFamily||a.canvas.fontFamily||Wr.fontFamily},"font-size":function(e,t){return pa.getVal(f[t]||a.chart.fontSize||a.canvas.fontSize)+"px"},fill:function(e,t){return h[t]||a.chart.fontColor||a.canvas.fontColor||Wr.fontColor},"font-weight":function(e,t){return g[t]||a.chart.fontWeight||a.canvas.fontWeight||Wr.fontWeight},"font-style":function(e,t){return v[t]||a.chart.fontStyle||a.canvas.fontStyle||Wr.fontStyle},"text-Anchor":function(e,t){return"center"==u[t]?"middle":"right"==u[t]?"end":"start"}}).text(function(e,t){return Ca(d[t])}).each(function(){cn(this,this.textContent,this.getBoundingClientRect(),m,au(x),"..",C)})}})}return t.parentObj=function(e){return arguments.length?(Z=e,t):Z},t};Ae.threshold.range;var Yg={};function Gg(e,t){var a=this.chart,r=e.instance.getTransform(),n=a.systemConf.chart.zoom.type;return function(l,e,s){var c={},u={x:1,y:s.axes.y.groups.length};return Ka(e,function(e,t){if(!0===e)for(var a=0;a<u[t];a++){var r=ri(s,t,a);if(!r.disabled){var n=Pc(r,Yn(t,s.axes.rotated),l),i=n.domain,o=n.range;(c[t]=c[t]||[]).push({domain:i,range:o,index:r.index}),r.domain=i,r.range=o}}}),c}(r,e.types=e.types||{x:Cr(n,"x"),y:Cr(n,"y")},a)}function Ug(e,t){var a=this.getData(e,t.type,t.transform);this.associateBehaviours(e,t.type,a,t.transform,t)}Yg.relative=function(a,e,t,r,n,i,o,l,s,c){e.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":s+Zt,"max-height":c+Zt});var u=e.node(),d=u.offsetWidth,h=u.offsetHeight,f=t.canvasarea,p=t.chartarea,g=n+r+(a.distance||0),v=a.dTop||0,y=a.dLeft||0,m=t.systemConf.tooltip,b=(m.relative||{}).orient,x=(m.borderTop,p.width-p.left+p.right),C=p.height,k=ws.getSize(m,[x,C],[d,h],[s,c]),w=k.w,S=k.h,O={left:50,top:100,rotation:0},A={left:Dt(zt(y,0))+(t.scrolledX||0),top:Dt(zt(v,0))+(t.scrolledY||0),right:f.width-2-Mt(y,0)+Dt(zt(y,0)),bottom:f.height-Mt(v,0)+Dt(zt(v,0))},P={x:a.left-w/2,y:a.top-S-g,maxw:s+Zt,maxh:c+Zt};if(i&&!t.scrolledX&&!t.scrolledY){var T=a.top-S-g,_=a.left+w+g,E=a.left-w-g,L=a.top+S+g;(b=b||(A.top<T?Ko:_<A.right?Qo:A.left<E?Zo:L<A.bottom?qo:null))==Ko?(M(Ko),O.rotation=0,O.top=100):b==Qo?(P.x=a.left+g,M(Qo),O.rotation=90,O.left=0):b==Zo?(P.x=a.left-g-w,M(Zo),O.rotation=-90,O.left=100):b==qo&&(M(qo),P.y=a.top+g,O.rotation=180,O.top=0)}return P.hookPosition=O,P;function M(e){var t;/(top|bottom)/.test(e)?a.left-w/2<A.left?(t=z(e==Ko?"blx":"tlx"),P.x=A.left,O.left=Mt(t,a.left-A.left)/w*100):a.left+w/2>A.right?(t=z(e==Ko?"brx":"trx"),P.x=A.right-w,O.left=100*(1-Mt(t,A.right-a.left)/w)):O.left=50:a.top-S/2<A.top?(t=z(e==Zo?"trY":"tly"),P.y=A.top,O.top=Mt(t,a.top-A.top)/S*100):a.top+S/2>A.bottom?(t=z(e==Zo?"bry":"bly"),P.y=A.bottom-S,O.top=100*(1-Mt(t,A.bottom-a.top)/S)):(P.y=a.top-S/2,O.top=50)}function z(e){return r+l[e]+Rt(It(o,2)+It(o,2))}},Yg.fixed=function(e,t,a){t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":null,"max-height":null}),t.style("border-width",0);var r,n=t.node(),i=n.offsetWidth,o=n.offsetHeight,l=a.canvasarea,s=e.dTop||0,c=e.dLeft||0,u=a.systemConf.tooltip,d=(u.fixed||{}).orient,h=u.borderTop||0,f=qa(u.borderWidth,1),p=nr(f),g=p.top,v=p.right,y=p.bottom,m=p.left,b=l.width-m-v,x=l.height-g-y,C=ws.getSize(u,[b,x],[i,o]),k=C.w,w=C.h,S=0,O=0,A=window.innerWidth,P=window.innerHeight,T={x:Dt(zt(c,0)),y:Dt(zt(s,0))},_=Dt(zt(c,0)),E=Dt(zt(s,0)),L=k,M=w,z=T.y-w,D=T.x+l.width+k,I=T.x-k,R=T.y+l.height+w,j=s<=0||0<s&&l.height-s>w;return d||(O<z?d=Ko:D<A&&j?d=Qo:S<I&&j?d=Zo:R<P&&(d=qo)),d===Ko?(T.y=E-w-g-y,L=b-(0<c?c:0),r="40%"):d===Qo?(T.x=_+l.width,M=x-(0<s?s:0)):d===Zo?(T.x=_-k-v-m,M=x-(0<s?s:0)):r=(L=(T.y=d===qo?E+l.height-(0<s?s:0):E,b-(0<c?c:0)),"40%"),C=ws.getSize(u,[b,x],[L,M]),T.w=C.w+Zt,T.h=C.h-h+Zt,T.maxw=b-(0<c?c:0)+Zt,T.maxh=zt(x-(0<s?s:0),Aa(u.height)&&Aa(u.maxHeight)&&za(r)?mr(r,x):1/0)+Zt,t.style("border-width",Ra(f)),T},Yg.block=function(e,t,a){var r=a.chartarea,n=a.plotarea,i=a.systemConf.tooltip,o=i.block||{},l=i.borderTop||0,s=nr(qa(i.borderWidth,1)),c=s.top,u=s.right,d=s.left,h=o.vAlign||Ko,f=o.hAlign,p=e.dTop||0,g=e.dLeft||0,v=r.width-d-u,y=r.height,m=ws.getSize(i,[v,y],["100%",a.tooltip.preCalculatedHeight]),b=m.w,x=zt(m.h,mr(Os.MAXHEIGHT_BLOCK,y)),C={x:Dt(zt(g,0))-Mt(g,0)+r.left,y:Dt(zt(p,0))-Mt(p,0),w:b+Zt,h:x-l+Zt,align:f};return f===Qo?C.x+=v-b:f===Xo&&(C.x+=(v-b)/2),C.y+=h===qo?n.top+n.height+(n.bottom-x)-c-u:r.top,C},ue.tooltip=function(R,e,j){var t={element:R},d=j.systemConf,H=j.dataset,a=d.metadata,r=a.axes,h=a.columns,B=r.tooltip||rt(h.length),F=d.tooltip,n=null,W=F.position||"relative",i=za(F.hook)?F.hook:"relative"===W,V={left:50,top:100,rotation:0};if(F.theme&&""!==F.theme){var o=Oa(window.$ZC,"tooltip.getTheme")&&$ZC.tooltip.getTheme(F.theme,j);null!==o&&(F=j.systemConf.tooltip=ga(F,o.borderStyle,!0,!0),j.tooltip.content=[o.body],n=o.maxWidth)}var N,Y,G,U,X=Ea(F.hookHeight,6),Z=Ea(F.outerPadding,20),l=za(F.borderWidth)?F.borderWidth:1,s=za(F.borderRadius)?F.borderRadius:5,c=za(F.borderStyle)?F.borderStyle:"solid",u=za(F.padding)?""+F.padding:"5",Q=Ea(F.withinChart,!0),q=Ea(F.hookBorderWidth,/ /g.test(l)?1:+l),K=ir(s),$=mr(F.maxWidth||n||"40%",j.chartarea.width),J=mr(F.maxHeight||"100%",j.chartarea.height),f=Mt(.05*j.chartarea.width,2*X),ee=F.headerContent,te=F.footerContent,ae=F.crosshair;function re(e,t,a,r,n){var i=e.staticPaneSVG.selectAll("line."+n+"-crosshair"),o="x"==n&&!e.axes.rotated||"y"==n&&e.axes.rotated;i.attrs({x1:o?t:e.plotarea.left,y1:o?e.plotarea.top:a,x2:o?t:e.plotarea.left+e.plotarea.width,y2:o?e.plotarea.height+e.plotarea.top:a}).styles({"shape-rendering":"crispEdges",stroke:r.color,"stroke-width":r.strokeWidth,"stroke-dasharray":on(r.dashStyle,r.strokeWidth),"pointer-events":Qt})}function ne(t,a,r,e,n,i){if(Oa(window.$ZC,"tooltip.getTheme")&&za(d.tooltip.theme)&&""!==d.tooltip.theme&&za(j.tooltip.content))return H.getCustomizedVal(j,j.tooltip.content,t,a,r,n,"tooltip",e);var o=oe(j.chartTypes[t].name),l=H.getDataPoint(j,null,t,a,r,n),s=Hn(j,o?r:t,l,t),c=Ta(i||B,null,l,j).filter(function(e){return!(h[e]&&Aa(H.getDataPoint(j,e,t,a,r,n)))}),u=Ss.getContentTemplate(j,$t,c);return H.getCustomizedVal(j,u,t,a,r,n,"tooltip",s)}function ie(r,n){return function(e,t){var a=x(parseInt(r),parseInt(n));return function(e){return a(e)+"px"}}}function oe(e){var t=/(bar|scatter|bubble$|bullet|gantt|wordcloud|waterfall|boxplot)/.test(e)&&Wn(d.chart.plot.plotoptions[e],j),a=/(^pie|funnel|pyramid)/.test(e);return t||a}return t.initialize=function(){var e=Cf(F,j),t=+e+.35*+e,a=null!=j.userdata.canvas?j.userdata.canvas.fontColor:null,r=Ra(s),n=null;!1!==F.useChartEffect&&j.filterEffectsID&&(n="url(#"+j.filterEffectsID+")"),R.styles({width:"auto","box-shadow":F.shadow,opacity:F.opacity,"z-index":F.zindex,"border-radius":r,"border-width":Ra(l),"border-style":c,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","pointer-events":F.pointerEvents,filter:n}),sn(R,"div",F.borderTop?[F.borderTop]:[],".","class","borderTop").styles({height:F.borderTop+"px","border-radius":r,"border-bottom-left-radius":"1px","border-bottom-right-radius":"1px"}),(U=sn(R,"div",[1],"#","id","tooltipcontent")).styles({"box-sizing":"relative"===W?null:"border-box","max-width":"relative"===W?$+"px":null,"min-width":"relative"===W?f+"px":null,"line-height":(F.lineHeight||t)+"px","word-wrap":"break-word","white-space":"normal","overflow-y":"auto",padding:Ra(u)}),fn(U,[{fontColor:null==F.fontColor&&null==a?"white":F.fontColor||a},F,j.systemConf.canvas,Wr],!0),(N=sn(R,"div",i?[1]:[],"#","id","zctooltipbefore")).styles({"margin-left":-(X+2*q)+"px",border:X+2*q+"px solid transparent"}),(Y=sn(R,"div",i?[1]:[],"#","id","zctooltipafter")).styles({"margin-left":-X+"px",border:X+"px solid transparent"}),(G=R.selectAll("div#zctooltipbefore,div#zctooltipafter")).styles({"border-color":qt,"border-top-color":"white",position:"absolute",top:"100%",left:"50%",width:0,height:0,content:" "})},t.show=function(l,e,t,a,r){za(r)||(r={});var n,i=r.color,o=r.svgFillFunc,s=r.seriesindex,c=r.subseriespos,u=r.subseriesLength,d=r.itempos,h=r.backgroundColor||F.backgroundColor,f=r.borderColor||F.borderColor,p=r.tooltipSharedInfo,g=r.tooltipShared,v=null!=s&&l.chartTypes[s].name||r.chartType&&r.chartType.name,y=r.renderTo||"plot";((a=null==t&&!0===a)||r.inheritColors)&&(n=oe(v));var m=i;if(a||r.inheritColors){var b=n?d:s,x=H.getDataPoint(l,null,s,c,d,r.d);m=Hn(l,b,x,s)}else Ba(m)&&(m=m[s%m.length]);m=g?"black":m,f=null!=f?f:m,h=null!=h&&""!=h?h:m,R.styles({visibility:"visible","background-color":h,"border-color":f});var C,k,w="",S="",O="",A=U.node();a&&null!=ee&&(S=Ta(ee,nt(),C=I(),l)),a?F.content?w+=Ta(F.content,nt(),C=C||I(),l):w+=g?function(c,u,d,h,f,p,g,l){function v(e,t,a,r,n,i){if(j.ismultiy||null==s){var o=ka(j.seriesdata[t].seriesname)||i.replace(/val/gi,"col");e=e.replace("{{val(null)}}",o)}return H.getCustomizedVal(j,e,t,a,r,$t,"tooltip",n,$t,l&&1<l?l:$t)}var s=H.getColumnIdx("clr"),e=j.seriesdata[c].yaxiscolumnorder||[0,0],y=j.dataObject.pieWithAxis&&!j.dataObject.isCombinationalChart?ws.getPieColumnIndex(j):H.getColumnIdx("y",e),m=f.keys(),b=f.y_val_pattern,t=Ta(B||B,null,h),x=Ss.getRawSharedContent(j,f,t),C=0,k=[];return x.forEach(function(a,e){var t=(Ba(a)?a:[a]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+y+")}}")||-1!=e.indexOf("{{per("+y+")}}"))});if(Ba(a)||t){C%=j.seriesdata.length;var r=m[C];if(t&&C++,Aa(r))return void k.push(e);var n=ja(r),i=ja(f.get(r)),o=b,l=p;if(Ba(l)){var s=H.getDataPoint(j,null,n,u,i,h);l=Hn(j,g?i:n,s,n)}Ba(a)?a.forEach(function(e,t){a[t]=v(a[t],n,u,i,l,o)}):x[e]=v(x[e],n,u,i,l,o)}else{r=m[0];i=za(r)?(n=ja(r),ja(f.get(r))):(n=c,d),x[e]=H.getCustomizedVal(j,a,n,u,i,h,"tooltip",p,$t)}}),x=x.filter(function(e,t){return-1==k.indexOf(t)}),Ss.getContentTemplate(j,x)}(s,c,d,r.d,p,i,n,u):ne(s,c,d,m,r.d):w+=t,a&&null!=te&&(O=Ta(te,nt(),C=C||I(),l)),U.html(w),ar(S)||((k=document.createElement("div")).innerHTML=S,S=k),ar(O)||((k=document.createElement("div")).innerHTML=O,O=k),A.insertBefore(S,A.firstChild),A.appendChild(O);var P,T=R.node();T.offsetWidth,T.offsetHeight;if("plot"==y&&ae.type!=Qt&&l.isAxisCategory&&function(e,t,a,r){e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible");var n=r.type;"x"!=n&&"xy"!=n||re(e,t,a,r,"x");"y"!=n&&"xy"!=n||re(e,t,a,r,"y")}(l,e.actLeft||e.left,e.actTop||e.top,ae),R.interrupt().transition(),R.transition().delay(0),"relative"===W){var _=parseFloat(T.style.left),E=parseFloat(T.style.top);P=Yg.relative(e,R,l,X,Dt(Z),Q,q,K,$,J),V=P.hookPosition,_&&!isNaN(_)&&E&&!isNaN(E)||R.styles({left:P.x+"px",top:P.y+"px"}),_=!_||isNaN(_)?P.x:(2*_+P.x)/3,E=!E||isNaN(E)?P.y:(E+P.y)/2,R.transition().duration(100).ease(Ke).styleTween("left",ie(_,P.x)).styleTween("top",ie(E,P.y))}else"fixed"===W?(P=Yg.fixed(e,R,l),R.styles({left:P.x+"px",top:P.y+"px"})):(P=Yg.block(e,R,l),R.styles({left:P.x+"px",top:P.y+"px"}).attr("align",P.align));if(U.styles({width:P.w,height:P.h,"max-width":P.maxw,"max-height":P.maxh}),F.borderTop){var L=o?o(n?d:s,null,null,m,null,null,{width:zt(+P.w,+P.maxw)},!0):f,M="object"===(void 0===L?"undefined":_typeof(L))?"url("+function(e,t){var a="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+e.w+"' height='"+e.h+"'>"+(new XMLSerializer).serializeToString(e.node.node())+"<path d='M-5,-5 L5,-5 L5,5 L-5,5 Z' transform='translate("+e.w/2+","+e.h/2+")' style='fill: url(#"+e.id+")'></path> </svg>";return{url:Xr.FIREFOX||t?"data:image/svg+xml;base64,"+ia(a):"data:image/svg+xml;utf8,"+a,width:e.w,height:e.h}}(L,!0).url+")":L;R.selectAll("div.borderTop").styles({background:M})}if(g)G.style("display",Qt);else{var z="rotate("+V.rotation+"deg)",D="50% 0%";G.styles({display:"",left:V.left+"%",top:V.top+"%",transform:z,"-webkit-transform":z,"-ms-transform":z,"transform-origin":D,"-webkit-transform-origin":D,"-ms-transform-origin":D}),N.style("border-top-color",f),Y.styles({"border-top-color":h,opacity:1})}function I(){if(g)return p.keys().map(function(e){var t=ja(e),a=ja(p.get(e)),r=H.getColumnIdx("clr"),n=l.seriesdata[t].yaxiscolumnorder||[0,0],i=l.ismultiy||null==r?H.getColumnIdx("y",n):r,o=H.getDataPoint(l,i,t,c,a);return{actData:o,metaInfo:H.getMetaInfoObj(l,o,t)}});var e=H.getDataPoint(l,null,s,c,d,r.d);return{actData:e,metaInfo:l.dataset.getMetaInfoObj(l,e,s),seriesIndex:s,subseriesIndex:c,itemIndex:d}}},t.hide=function(e){(e=null==e?this.element:e).style("visibility","hidden"),j.systemConf.tooltip.crosshair.type!=Qt&&j.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},t.destroy=function(){this.element.remove()},t.getTooltipContent=function(){return ne.apply(null,arguments)},t};var Xg={LISTENER:{start:Ug,zoom:Ug,end:Ug},DATA_FINDER:{start:Gg,zoom:Gg,end:Gg},BEHAVIOUR:{start:ju,zoom:[ju,function(e,t){var a=this.chart;a.zooming=!0;var r=t.point;a.disableAnimation=!0,r.x&&r.x[0].domain&&(a.viewPortExtent=r.x&&r.x[0].domain),Un.FILTER_CHART(r,a)},Oc],end:Nu},LISTENER_TYPES:H(["start","zoom","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory},UPDATE:function(e){var t=this.chart,a=e.instance.getTransform(),r=e.types||{},n=void 0,i=void 0;if(r.x&&(n=t.axes.x),r.y&&(i=t.axes.y.groups[0]),t.axes.rotated){var o=[i,n];n=o[0],i=o[1]}var l=td(a.k,n,i);e.instance.zoomToIdentity(l,0,!1)}};na.setComponent("_chartZoomHandlers",Xg),Gr.zoom=function(e){return{enabled:!1,type:"xy",minZoom:1,wheelZoom:!0,pan:!0,transitionDuration:1e3}};var Zg=25;function Qg(e,t){this.associateBehaviours(e,t.type,{},t.transform,t)}na.setComponent("_getPlotZoomArguments",function(e){var t=e.systemConf.chart.zoom,a=e.plotarea,r=[[0,0],[a.width,a.height]],n=na.getComponent("ZoomD3Options"),i=e.isGeoMap?"xy":t.type,o=t.maxZoom||function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"xy";if("xy"===a)return Zg;var r=ri(e,a,0).scale,n=e.axes.rotated?"height":"width";if("x"===a||"y"===a&&r.bandwidth)return Mt(1,e.plotarea[n]/Sc(e,a,t));return Zg}(e,t.minimumVisiblePoints||3,i);return new n({type:i,scaleExtent:[t.minZoom,o],translateExtent:r,extent:r,wheelZoom:!1!==t.wheelZoom,pan:!1!==t.pan,transitionDuration:t.transitionDuration,element:e.eventHandler.trackerGroup,metaKey:t.metaKey,filter:function(){if(Xr.isTouchDevice){var e=nt();return 1<e.touches.length||1<e.changedTouches.length}return!0}})});var qg={getGeoBBox:function(e,t){return this.geoBoundToRect(t.bounds(e))},geoBoundToRect:function(e){return{x:e[0][0],y:e[0][1],width:Math.abs(e[1][0]-e[0][0]),height:Math.abs(e[1][1]-e[0][1])}},getFeatureGradientBBox:function(e,t,a){return this.getGeoBBox(e,a)},toLatLong:function(e,t,a){var r=[t,a];return e.geo.utils.projection.invert(r)},toXY:function(e,t,a){if("geoOrthographic"===(e.systemConf.map.projection||{}).name){var r=e.geo.utils.projection.rotate(),n=[-r[0],-r[1]];if(ie([t,a],n)>Math.PI/2)return[null,null]}return e.geo.utils.projection([t,a])||[null,null]},clearContext:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)},applyTransform:function(e,t){t.canvas?(t.translate(e.x,e.y),t.scale(e.k,e.k)):t.attr("transform",e)},round:function(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}},Kg={START:function(e,t){return{cartesian:ee.cartesian(t),quaternion:ee(e)}},DRAG:function(e,t){var a=ee.cartesian(t),r=ee.multiply(e.quaternion,ee.delta(e.cartesian,a));return ee.rotation(r)}};function $g(e){var t=e.baseProjection=e.baseProjection=e.getProjection(e.geo.renderedLayer);return{scale:t.scale(),translate:t.translate()}}var Jg={LISTENER:{start:Qg,zoom:Qg,end:Qg},DATA_FINDER:{},BEHAVIOUR:{start:function(e,t,a){var r=this.chart;if(r.geo.isGlobeMap){var n=To(r.eventHandler.trackerElement.node()),i=qg.toLatLong(r,n[0],n[1]);e._baseRotate=r.geo.utils.projection.rotate(),e._basePosition=Kg.START(e._baseRotate,i)}},zoom:function(e,t,a){var r=this.chart;r.geo.isGlobeMap?function(e,t,a){var r=e.geo.utils,n=$g(e);r.projection.scale(n.scale*t.k),r.projection.rotate(a._baseRotate);var i=To(e.eventHandler.trackerElement.node()),o=qg.toLatLong(e,i[0],i[1]),l=Kg.DRAG(a._basePosition,o);r.projection.rotate(l)}(r,a,e):function(e,t){var a=$g(e),r=e.geo.utils;r.projection.translate([t.x+a.translate[0]*t.k,t.y+a.translate[1]*t.k]),r.projection.scale(a.scale*t.k)}(r,a),function(e){e.eventHandler.mapEvents.handleMouseOut(),e.eventHandler.tooltipElement.hide(),e.addRemoveSeries()}(r)},end:function(e,t,a){var r=this.chart.eventHandler.mapEvents;r.outLine=r.getOutLine()}},LISTENER_TYPES:H(["start","zoom","end"]),SUPPORTED:function(e){return e.isGeoMap}};na.setComponent("_mapZoomHandlers",Jg);var ev={},tv=(Be.canvasRenderer=function(u,d){var e={},h=u.systemConf,f=no.helpers;return e.draw=function(e){var t=u.scroll&&!u.scroll.initialized&&u.scroll.visible;if(u.container.select(".highlight-canvas").style("visibility","hidden"),u.canvasScrollGroup?(u.context=rv(u,"zc-canvas",null,u.canvasScrollGroup),u.labelHolderContext=rv(u,"zc-labelholder-canvas",null,u.canvasScrollGroup),u.canvasScrollGroup.selectAll("canvas").styles({left:0,top:0})):(u.context=rv(u,"zc-canvas",".static"),u.labelHolderContext=rv(u,"zc-labelholder-canvas",window.PointerEvent?u.container.selectAll("div.legendarea").node():null)),t)return!1;d.barDatasetIndex=0,u.systemConf.legend.enabled&&u.svg.select(".seriesholder").selectAll("*:not(.zmarea)").remove(),u.dataObject.isPolarAxisCategory&&(u.context.translate(u.plotarea_approx.x,u.plotarea_approx.y),u.labelHolderContext.translate(u.plotarea_approx.x,u.plotarea_approx.y)),u.dataset.getDataType("x")==Sn&&u.isAxisCategory&&it.barBandwidth(u);var n=null;u.chartRendered=!1;var i=u.dataObject.isCombinationalChart,o=u.plotarea,l=i?ht.arrangeSeriesRenderingOrder(u):u.seriesdata;if(u.seriesdata.forEach(function(e,t){var a=l[t],r=i?a.seriesidx:t;!u.isAxisCategory&&!u.dataObject.isPolarAxisCategory&&0<r||(n=f.getChartType(a.type||u.userdata.seriesdata.type,"string"),null==u.renderer[r]&&(u.renderer[r]=tv(n),u.rendererConf[r]=new Be.rendererConf),u.renderer[r].chartRendered=!1,0==t&&(Lo(u,h.chart.plot.events,0,"init"),u.hideLoading(u.container)),ht.setRendererProp(u,u.renderer[r],a,r,t,d),0<o.width&&0<o.height&&av(u,a,u.renderer[r]))}),ht.renderCompletedEvents(u,e,d),!e){var a=hs(u.systemConf.chart.plot.plotoptions[n],u.seriesdata[0].plotoptions,u,n),r=za(a.duration)?a.duration:400;if(!za(a.enabled)||0===r)return;var s=u.seriesdata.length;u.context.canvas.style.opacity=0;var c=setInterval(function(){var e=!0;if(u.renderer.length===s)for(var t=0;t<u.renderer.length;t++)if(!u.renderer[t].chartRendered){e=!1;break}e&&(clearInterval(c),qe(u.context.canvas).transition().duration(r).style("opacity",1))},1e3/60)}},e}).createCanvasRenderer=function(e){switch(e){case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":case"geobubble":case"geoscatter":e="scatter"}return new ev[e]},av=Be.canvasRenderer.drawCanvas=function(e,t,a,r,n,i){function o(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}r=za(r)?r:e.context,o(e.wrap,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),o(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top}),a(r,t,n,i)},rv=Be.canvasRenderer.updateCanvasContext=function(e,t,a,r){var n=e.svg.node().parentNode.querySelector("canvas."+t),i=Ro(e,"width"),o=Ro(e,"height"),l=e.staticPaneSVG.node(),s=e.svg.node().parentNode;(r=r||s).isD3Selection&&(r=r.node()),n||((n=document.createElement("canvas")).className=t,n.setAttribute("actual-width",i),n.setAttribute("actual-height",o),n.style.position="absolute",n.style.pointerEvents=Qt,"string"==typeof a&&(a=e.container.node().querySelector(a)),r.insertBefore(n,a||(s===r?l:null))),n.width=i,n.height=o,n.style.left=_t(e.plotarea.left)+"px",n.style.top=_t(e.plotarea.top)+"px",n.style.visibility="visible";var c=n.getContext("2d"),u=Xr.prefix.lowercase+"ImageSmoothingEnabled";return c.clearRect(0,0,i,o),c[u]=!1,c.imageSmoothingEnabled=!1,sr(c)};function nv(r,n,i,o,a){var e,l=r.chartObj,s=r.xscale,c=(r.yscale,r.stacked),u=r.datasetIndex,t=r.axisrotated,d=r.commonPlotOptions,h=r.hasNegValue,f=r.yaxiscolumnorder,p=r.dataset,g=l.systemConf,v=l.dataObject,y=g.chart.axes.yaxis[f].reversed,m=l.seriesdata[u].plotoptions,b=pa.getValueOfPlotOptions(m,d)("mode");if(v.isPolarAxisCategory){function x(e){var t;return t=c?0==e.y0?zt(r.yscale.range()[0],r.yscale(h),e.y0):r.yscale(e.y0):r.yscale(r.yscale.domain()[C])+(null!=r.yscale.bandwidth?r.yscale.bandwidth()/2:0),Mt(t,r.yscale.range()[C])}var C=y&&!c?r.yscale.domain().length-1:0,k=(S=no.helpers).isCatNull(p,"x"),w=S.isCatNull(p,"y",f);(e=D().angle(function(e,t){return s(p.getX(e))}).outerRadius(function(e,t){if(e.isDummy)return x.apply(null,arguments);var a=c?r.yscale(e.y0+e.y):r.yscale(p.getY(e,f))+(null!=r.yscale.bandwidth?r.yscale.bandwidth()/2:0);return Mt(a,r.yscale.range()[C])}).innerRadius(x).curve($e(b)))._defined=function(e,t){return!w(p.getY(e,f))&&!k(p.getX(e))}}else{var S,O=l.chartTypes[u].name===di,A=O?1:null;k=(S=no.helpers).isCatNull(p,"x"),w=S.isCatNull(p,"y",f);e=L().defined(function(e,t){return c?!k(p.getX(e)):!w(p.getY(e,f))&&!k(p.getX(e))}).curve($e(b,r.axisrotated,d.tension)),t?e.x0(function(e,t){return c?0==u&&0==a&&0==t?Mt(r.yscale.range()[0],r.yscale(h)):r.yscale(e.y0):O?v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"x",null,0):null!=r.yscale.bandwidth?r.yscale.origRange[0]+r.yscale.bandwidth():Mt(r.yscale.range()[0],r.yscale(h))}).x1(function(e,t){var a=v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"x",null,A);return isNaN(a)&&null!=i&&(a=v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,o[o.length-1],"x",null,A)+n),a}).y(function(e,t){return v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"y",null,A)}):e.x(function(e,t){var a=l.dataObject.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"x",null,A);null!=i&&(a+=Math.abs(l.dataObject.getXYvalue(r.axisrotated,r.stacked,l.renderer[u].oldXscale,r.yscale,r.yaxiscolumnorder,o[0],"x",null,A)-l.dataObject.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,o[0],"x",null,A)));return a}).y0(function(e,t){return c?0==u&&0==a&&0==t?zt(r.yscale.range()[0],r.yscale(h)):r.yscale(e.y0):O?v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"y",null,0):null!=r.yscale.bandwidth?r.yscale.origRange[0]+r.yscale.bandwidth():zt(r.yscale.range()[0],r.yscale(h))}).y1(function(e,t){r.yscale;return v.getXYvalue(r.axisrotated,r.stacked,r.xscale,r.yscale,r.yaxiscolumnorder,e,"y",null,A)})}return e}function iv(e,t){this.chart=e,this.renderer=t}Ja(iv,Ch);var ov=iv.prototype;function lv(e,t){this.chart=e,this.renderer=t}ov._defaultH=function(){var t=this;return[{shape:"marker",path:br(this).path,data:br(this).data,context:br(this).renderingContext,translate:this.translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:function(e){return Sh.call(t,e,"inherit")}}]},ov.data=function(t){var a=this.renderer.commonRendererProp().params,r=this.chart,e=this.renderer.layout[t.subSeriesIndex],n=e.innerRadius(),i=e._defined;return t._polydata=this.poly(t),function(){r.cache.data[t._key]||(r.cache.data[t._key]={});var e=r.cache.data[t._key];return e._x=t._x=e._x||r.dataObject.getXYvalue(a.axisrotated,a.stacked,a.xscale,a.yscale,a.yaxiscolumnorder,t,"x"),e._y=t._y=e._y||r.dataObject.getXYvalue(a.axisrotated,a.stacked,a.xscale,a.yscale,a.yaxiscolumnorder,t,"y"),e._y0=t._y0=e._y0||n(t,t.itemIndex),e._uid=t._uid=r.dataset.getX(t),e._defined=t._defined=za(e._defined)?e._defined:i(t),e._visible=t._visible=Ao(r,t),e._point=t}},ov.poly=function(n){var i=this.chart,o=this.renderer;return function(){i.cache.data[n._key]||(i.cache.data[n._key]={});var e=i.cache.data[n._key];if(!e._poly){var t=o.seriesdataAfterUpdate[n.subSeriesIndex],a=ph(t,n),r=function(e){var t=[];return e.filter(function(e){e._data();e._defined&&t.push([e._x,e._y])}),t}(t);a.points=r,e._poly=n._poly=a}return n._poly}},ov.renderingContext=function(){return Iu.get("area").call(this,this.chart)},ov.translateContext=function(){return[this.chart.plotarea.left+this.chart.plotarea_approx.x,this.chart.plotarea.top+this.chart.plotarea_approx.y]},ov.options=function(e){var t=this.renderer.commonRendererProp().params,a=br(this).commonOptions.call(this,e),r=(a.symbol,a._size||t.gvp("strokeWidth")),n=t.gvp("mode"),i=t.hoverOptions.fillOpacity||.2;return a.size={outer:.7*r,inner:.35*r},a.fillopacity=i,a.interpolation=n,a},ov.path=function(e,t){var a,r=this.options(e),n=t.context.call(this),i=t.translate.call(this),o=(this.renderer.commonRendererProp().params,this.renderer.layout[e.subSeriesIndex]);return o.context($t),n.style("display","").attr("transform","translate("+i[0]+","+i[1]+")"),(a=sn(n,"path",[1],".","class","highlight"+e.seriesIndex)).datum(this.renderer.seriesdataAfterUpdate[e.subSeriesIndex]).attr("d",o).attr("stroke","").styles({"fill-opacity":r.fillopacity,display:""}),a},ev.area=function(){var _,E,L,M=ev.line();function z(o,l,s,c){var u=_.params,d=u.chartObj,h=u.xscale,f=u.yscale,p=u.stacked,g=u.datasetIndex,v=u.axisrotated,e=u.commonPlotOptions,y=u.color,t=u.labelQueue,m=u.yaxiscolumnorder,a=(l=d.seriesdata[g]).plotoptions,r=_.params.gvp=pa.getValueOfPlotOptions(a,e),b=r("fillOpacity"),n=r("strokeWidth"),i=r("strokeColor"),x=_.params.markerOptions=a&&a.marker?ga(e.marker,a.marker,!0):e.marker,C=(_.params.hoverOptions=a&&a.hoveroptions?ga(e.hoveroptions,a.hoveroptions,!0):e.hoveroptions,x.enabled),k=za(n)&&""!=n&&0!=ja(n)||za(i)&&""!=i||C,w=d.dataset.getDataType("x"),S=d.dataset.getDataType("y",m),O=w==Sn?h.domain():null,A=S==Sn?f.domain():null,P="arearange"==d.chartTypes[g].name,T=Sd(d,g);z.fillColorFunc=Dn(d,g,T),i=Rn(d,g);return za(s)&&(s,za(c)&&(C=!0,b=1e-8)),z.layout=[],z.seriesdataAfterUpdate=[],l.data.forEach(function(a,e){var t;t=w==Sn||S==Sn?d.dataObject.updateSeriesdatabyCategories(wa(a),O,A,m):a,!d.renderVisiblePointsOnly&&null==E||(t=no.helpers.filterPointsInViewport(d,t,"area","x",g)),z.seriesdataAfterUpdate[e]=t,L=null!=E?null==L||0==L?d.dataObject.getXYvalue(v,p,h,f,m,t[t.length-1],"x")-d.dataObject.getXYvalue(v,p,h,f,m,t[t.length-2],"x"):L:0;var r=nv(u,L,E,t,e);if(z.layout[e]=r,!l.disabled){function n(e,t){e.beginPath(),e.fillStyle=t,r.context(e)(a),e.fill(),e.restore()}if(d.imagePallete)tn.canvas_patterns.imageFill({context:o,name:d.imagePallete[g]},n);else{var i=za(s)&&Aa(c)?s:z.fillColorFunc(g,null,null,y,b,T,null,!1,e);n(o,i)}}}),l.disabled||!k&&!C||l.disabled||(M.chartRendered=!1,M.commonRendererProp(_).shiftInfo(E),M(o,l,s,c)),!za(pt)||k||C||(P?(t.push({renderer:z,charttype:"scatter",chartObj:d,args:[l,g,0,1]}),t.push({renderer:z,charttype:"scatter",chartObj:d,args:[l,g,0,0]})):t.push({renderer:z,charttype:"scatter",chartObj:d,args:[l,g,0,null]})),z.chartRendered=!0,z}return z.getHighlighter=function(e,t){return z.highlighter||(z.highlighter=e.dataObject.isPolarAxisCategory?new iv(e,z):new Oh(e,z)),z.highlighter},z.commonRendererProp=function(e){return arguments.length?(_=e,z):_},z.shiftInfo=function(e){return arguments.length?(E=e,z):E},z},Gr.area=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},Gr.arearange=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},Gr.web=function(){return{fillOpacity:.5,strokeWidth:2,mode:"linearClosed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white"},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}}},dt.area=function(){var x,D,I,R,j,H,B,F,W,V,N,Y,G,U,X=0,Z=!1,Q=!1,q=!1,K=dt.line(),$=[];function J(e){return e.each(function(e){var C=x.params;N=C.chartObj,D=C.xscale,I=C.yscale,Z=C.stacked,X=C.datasetIndex,Q=C.axisrotated,F=C.commonPlotOptions,H=C.color,B=C.labelQueue,V=C.hasNegValue,j=C.yaxiscolumnorder,R=C.dataset,W=N.systemConf;var t=C.renderingOrderIndex,k=N.defsLocation,w=N.dataObject.isPolarAxisCategory,S=e[X],a={data:S,index:t},r=S.plotoptions,n=S.data,i=N.chartTypes[X].name,o=x.params.gvp=pa.getValueOfPlotOptions(r,F),O=o("fillOpacity"),l=o("strokeWidth"),s=o("strokeColor"),c=Pn.isQuantileColorScale(N),u=x.params.markerOptions=r&&r.marker?ga(F.marker,r.marker,!0):F.marker,d=(x.params.hoverOptions=r&&r.hoveroptions?ga(F.hoveroptions,r.hoveroptions,!0):F.hoveroptions,c||u.enabled),h=null!=l&&""!=l&&0!=ja(l)||null!=s&&""!=s||d,f=hs(F,r,N,i),A=f.enabled,P=f.easingType,T=f.type;Y=f.duration,T=T==Yi?Ni:T;var p=N.dataset.getDataType("x"),g=N.dataset.getDataType("y",j),v=p==Sn?D.domain():null,y=g==Sn?I.domain():null,_=p!=Sn||za(N.dataObject.hierarchical)?N.dataObject.getCategories("x"):v,E=W.chart.axes.yaxis[j].reversed;p!=Sn&&0==_.length&&A&&T==Zi&&(_=N.dataObject.findXCategories());var L=C.isRangeChart="arearange"==i,M=L?1:null;J.seriesdataAfterUpdate=[],J.layout=[],n.forEach(function(e,t){var a;a=p==Sn||g==Sn?N.dataObject.updateSeriesdatabyCategories(wa(e),v,y,j):e,!N.renderVisiblePointsOnly&&null==G||(a=no.helpers.filterPointsInViewport(N,a,i,"x",X)),J.seriesdataAfterUpdate[t]=a,N.systemConf.chart.axes.xaxis.reversed&&(a=a.slice(0).reverse()),U=null!=G?null==U||0==U?N.dataObject.getXYvalue(Q,Z,D,I,j,a[a.length-1],"x")-N.dataObject.getXYvalue(Q,Z,D,I,j,a[a.length-2],"x"):U:0,$[t]=nv(C,U,G,a,t),J.layout[t]=$[t]});var z,m=qe(this);if(J.update=function(){m.transition().call(J)},z=w?((z=m.selectAll("g.areaseries_"+X).data([a])).enter().insert("g",":first-child").merge(z).attr("class","areaseries_"+X),m.selectAll("g.areaseries_"+X)):sn(m,"g",[a],".","class","areaseries_"+X),h||d){if(K.commonRendererProp(x).shiftInfo(G),K.chartRendered=!1,L){K.yrangePos(1);var b=dt.line().commonRendererProp(x).shiftInfo(G).yrangePos(0);b.chartRendered=!1,m.call(b)}m.call(K)}else m.selectAll("g.lineseries_"+X+",g.scatterseries_"+X).remove();n.forEach(function(e,a){var t,r=J.seriesdataAfterUpdate[a],n=r;if(A){if(T==Zi)n=r.map(function(e,t){return Object.create(r[0])});else{var i=T==Ui?R.xidx:R.yidx(j),o=T==Ui?D:I,l=w&&E&&!Z?o.domain().length-1:0;n=r.map(function(e,t){var a=Object.create(e);if(Z&&T!=Ui)a.y0=w&&T===Xi?zt(0,o.domain()[0]):0,a.y=w||null==V||null==o(V)?o.domain()[0]:Mt(V,o.domain()[0]);else if(L&&T==Ni){var r=new Array(2),n=N.dataset.getY(e,j,0);r[0]=n,r[1]=null==a[i]?null:null!=V&&null!=o(V)?Mt(V,n):n,a[i]=r}else a[i]=null==a[i]?null:w||null==V||null==o(V)?o.domain()[l]:Mt(V,o.domain()[0]);return a})}t=wa(n)}var s=S.disabled,c=sn(z,"g",function(e){return s?[]:[e]},".","class","subseries_"+a).selectAll("path.area").data(function(e){return s?[]:[e]}),u=c.enter().append("path").datum(n,function(e){return R.getX(e)}).attr("class","area").style("opacity",O).style("fill",H).attr("d",$[a]);A&&(T==Qi||T==Zi?fs(n,t,r,_,T,P,Y,C,function(e){return{d:$[a](e)}},u):null!=u.node()&&T==Xi?u.transition().duration(0).delay(Y).attr("d",function(e){return $[a](e)}):u.transition().duration(Y).ease(P).attrTween("d",function(){var t=at($[a](n),$[a](r));return function(e){return t(e)}}));var d=Sd(N,X),h=J.fillColorFunc=Dn(N,X,d);if(null!=G&&q){var f=D(r[0][0])+(null!=D.bandwidth?D.bandwidth()/2:0),p=N.dataObject.getXYvalue(Q,Z,D,I,j,r[r.length-1],"x")-N.dataObject.getXYvalue(Q,Z,D,I,j,r[0],"x"),g={name:"rect",id:N.id,x:f,y:0,width:p,height:N.plotarea.height},v={chartObj:N},y=tn.get(tn.svg_clips,"rect",g,v);z.attr("clip-path","url("+k+"#"+y+")")}var m=r,b=u.merge(c).datum(r,function(e){return R.getX(e)}).styles({opacity:O,fill:h(X,null,null,H,$t,$t,$t,$t,a)});if(null!=G){var x=null!=G?Math.abs(N.dataObject.getXYvalue(Q,Z,J.oldXscale,I,j,r[0],"x",null,M)-N.dataObject.getXYvalue(Q,Z,D,I,j,r[0],"x",null,M)):null;c.datum(m).attr("d",$[a]).attr("transform",null).transition().duration(Y).ease(P).attr("transform",function(){return null==x?null:"translate(-"+x+",0)"})}else null!=u.node()&&T==Xi?b.datum(m).style("fill-opacity",0).transition().duration(0).delay(Y).attr("d",$[a]).style("fill-opacity",null):b.datum(m).style("fill-opacity",null).transition().delay(T!=Qi&&T!=Zi||null==u.node()?0:Y).duration(Y).ease(P).attr("d",$[a]);c.exit().remove()}),J.getSymbolSize=K.getSymbolSize,h||d||(L?(B.push({renderer:J,charttype:"scatter",chartObj:N,args:[S,X,0,1]}),B.push({renderer:J,charttype:"scatter",chartObj:N,args:[S,X,0,0]})):B.push({renderer:J,charttype:"scatter",chartObj:N,args:[S,X,0]}))}),J.renderedTimer=setTimeout(function(){q=J.chartRendered=!0},Y),J.oldXscale=D,J}return J.getHighlighter=function(e,t){return J.highlighter||(J.highlighter=e.dataObject.isPolarAxisCategory?new iv(e,J):new Oh(e,J)),J.highlighter},J.commonRendererProp=function(e){return arguments.length?(x=e,J):x},J.shiftInfo=function(e){return arguments.length?(G=e,J):G},J};var sv=lv.prototype;function cv(e,t){this.chart=e,this.renderer=t,$a(cv.prototype,lv.prototype)}function uv(e,t){this.chart=e,this.renderer=t}sv._defaultH=function(){return[{shape:"rect",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:Sh}]},sv.data=function(o){var l=this.chart,s=this.renderer,c=s.commonRendererProp().params;return function(){l.cache.data[o._key]||(l.cache.data[o._key]={});var e,t=l.cache.data[o._key];if(!za(t._x)){var a=l.dataObject.getTransRectValue("x",o,o.subSeriesIndex,0,s.commonOption),r=l.dataObject.getTransRectValue("y",o,o.subSeriesIndex,0,s.commonOption),n=l.dataObject.getTransRectValue("width",o,o.subSeriesIndex,0,s.commonOption),i=l.dataObject.getTransRectValue("height",o,o.subSeriesIndex,0,s.commonOption);e=un(a,r,n,i,0,c.yaxisreversed,c.axisrotated),t._x=o._x=t._x||e.x1,t._y=o._y=t._y||e.y1,t._width=o._width=t._width||n,t._height=o._height=t._height||i,t._widthT=o._widthT=t._widthT||e.x2,t._heightT=o._heightT=t._heightT||e.y2,t._uid=o._uid=l.dataset.getX(o),t._point=o}return t._visible=o._visible=Ao(l,o),o}},sv.options=function(e){var t=this.chart,a=this.renderer,r=a.commonRendererProp().params,n=r.gvp("border")||{},i=n.show?n.radius:0,o=Hn(this.chart,Wn(r.commonPlotOptions,this.chart)?e.sortedItemIndex:e.seriesIndex,e,e.seriesIndex);return{radius:t.dataObject.getTransRectValue("radius",null,null,null,a.commonOption,i),color:o}},sv.renderingContext=function(){return Iu.get("bar").call(this,this.chart)},sv.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},sv.path=function(e,t){var a=this.chart.systemConf.chart.axes.yaxis[e.yaxisOrder||0].reversed,r=dn(e._x,e._y,e._widthT,e._heightT,this.options(e).radius,a,this.chart.axes.rotated,!0),n=t.context.call(this),i=sn(n,"path",[1],".","class","highlight"+e.seriesIndex+e.subSeriesIndex);return n.style("display",""),i.style("display","").attr("d",r).attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),i},cv.prototype.levelmarker=function(r){var n=this.chart,e=this.renderer;if(!n.eventHandler.bulletEvents){var t=this.renderer.commonRendererProp().params;n.eventHandler.bulletEvents=new ue.BulletEvent(n,e.commonOption,t.xscale,t.yscale)}var a=n.eventHandler.bulletEvents.getCurrentRectangles(r);return a.map(function(t,a){t._uid=n.dataset.getActualX(r),t._data=function(){var e=n.eventHandler.bulletEvents.getCurrentRectangles(r)[a];return e._uid=t._uid,e}}),a.disabled=function(){return n.seriesdata[r.seriesIndex].disabled},a},Ja(uv,lv);var dv=uv.prototype;function hv(e,t){this.chart=e,this.renderer=t}dv._defaultH=function(){var t=this;return[{shape:"rect",path:br(this).path,data:br(this).data,context:br(this).renderingContext,translate:br(this).translateContext,styles:Sh},{shape:"rect",path:this.levelMarker,context:this.renderingContext,translate:br(this).translateContext,styles:function(e){return t.getStylesForLevelMarker.call(t,e)}},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:br(this).translateContext,type:"start"},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:br(this).translateContext,type:"end"}]},dv.levelMarker=function(e,t){this.chart;var a=this.renderer.commonRendererProp().params.levelMarker||{},r=this.renderer.getBarLevelMarkerProp(e,e.subSeriesIndex,e.itemIndex,this.renderer,this.renderer.commonOption),n=dn(r.x,r.y,r.width,r.height,this.chart.dataObject.getTransRectValue("radius",null,null,null,0),$t,this.chart.axes.rotated),i=t.context.call(this),o=sn(i,"path",a.enabled?[1]:[],".","id","levelMarkerpath");return i.style("display",""),o.style("display","").attr("d",n).attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),o},dv.markerPosition=function(e,t){this.renderer;var a=void 0,r=void 0;switch(function(e,t){return t?"start"==e?"left":"right":"start"==e?"top":"bottom"}(t.type,this.chart.axes.rotated)){case"left":a=e._x,r=e._y+e._height/2;break;case"right":a=e._x+e._width,r=e._y+e._height/2;break;case"top":a=e._x+e._width/2,r=e._y;break;case"bottom":a=e._x+e._width/2,r=e._y+e._height}return{x:a,y:r}},dv.markerPath=function(e,t){var a=this.markerOptions(e,t.type),r=a.options,n=this.markerPosition(e,t);if(a.enabled){var i=t.context.call(this),o=t.translate.call(this),l=sn(i,"g",[1],".","class","yrangePos"+t.type);return eo(l,null,r,{color:a.color,symbolSize:{inner:a.size.inner,outer:a.size.outer},transform:[n.x,n.y],imageSize:15},this.chart),i.attr("transform","translate("+o[0]+","+o[1]+")"),l}},dv.markerOptions=function(e,t){this.chart;var a=this.renderer.commonRendererProp().params,r=a.commonPlotOptions.hoveroptions[t],n=(n=this.chart.seriesdata[e.seriesIndex].plotoptions)&&n.hoveroptions?n.hoveroptions[t]:{},i=ga(r,n,!0),o=a.commonPlotOptions.marker[t],l=n&&n.marker?n.marker[t]:{},s=ga(o,l,!0);i=ga(s,i,!0);return{enabled:a.commonPlotOptions.marker&&a.commonPlotOptions.marker.enabled,options:i,symbol:i.symbol,_size:i.size,color:this.options(e).color,size:{outer:2*i.size,inner:1*i.size}}},dv.markerContext=function(){return Iu.get("scatter").call(this,this.chart)},dv.getStylesForLevelMarker=function(e){var t=this.renderer.commonRendererProp().params.levelMarker||{},a=this.options(e);return{fill:t.color||a.color}},Ja(hv,lv);var fv=hv.prototype;function pv(e,t,a,r,n,i){var o=e.dataObject.getTransRectValue("x",r,0,0,t),l=e.dataObject.getTransRectValue("y",r,0,0,t),s=e.dataObject.getTransRectValue("width",r,0,0,t),c=e.dataObject.getTransRectValue("height",r,0,0,t),u=un(o,l,s,c,0,a.yaxisreversed,a.axisrotated);return{_data:function(){return{_x:u.x1,_y:u.y1,_width:s,_height:c,_widthT:u.x2,_heightT:u.y2,_point:n,type:i,_uid:r._uid}}}}function gv(e,t,a){var r=[],n=a.xidx,i=a.yidx(e.yaxisOrder),o=a.getX(e);return r[n]=o,r[i]=t,r.index=e.index,r}function vv(e,t){return{enabled:e.enabled,dataindex:e.dataindex,columnindex:e.columnindex,size:e.size,symbol:e.symbol||"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:e.color,outerStrokeOpacity:e.opacity,outerStrokeWidth:e.strokeWidth,outerStrokeColor:e.color,animation:t}}function yv(e,n,i,o){e.attrTween("d",function(t,e){var a=at(o[0],o[1]),r=at(i[0],i[1]);return function(e){return n.outerRadius(a(e)),n.innerRadius(r(e)),n(t)}})}function mv(e,t){e.selected=t.selected}function bv(e){e.selected=null}fv.box=function(e){var t=this.chart,a=this.renderer,r=this.renderer.commonRendererProp().params,n=this.chart.dataset,i=(n.getX(e),r.whiskers),o=e[i.dataindex][0],l=e[i.dataindex][1],s=(t.dataObject.getTransRectValue,a.commonOption);t.cache.data[e._key]||(t.cache.data[e._key]={});var c=t.cache.data[e._key];return c._box=e._box=c._box||(i.enabled?pv(t,s,r,gv(e,[o,l],n),e):pv(t,s,r,e,e)),e._box},fv.levels=function(e,t){var a=this.chart,r=this.renderer,n=this.renderer.commonRendererProp().params,i=n.targetMarker,o=n.whiskers,l=this.chart.dataset,s=(l.getX(e),l.getY(e,e.yaxisOrder)),c=e[i.dataindex],u=e[o.dataindex][0],d=e[o.dataindex][1],h=n.yscale(c),f=5*o.strokeWidth,p=n.axisrotated?-1:1,g=(a.dataObject.getTransRectValue,r.commonOption),v=gv,y=n.yscale.invert;a.cache.data[e._key]||(a.cache.data[e._key]={});var m=a.cache.data[e._key];if(!m._levels){var b,x,C=void 0,k=void 0,w=void 0,S=[];b=pv(a,g,n,v(e,[s[0],y(h+f*p)],l),e,"high"),x=pv(a,g,n,v(e,[y(h-f*p),s[1]],l),e,"low"),S.push(b,x),(o.enabled||t)&&(C=pv(a,g,n,v(e,[u,s[0]],l),e,"whisker0"),k=pv(a,g,n,v(e,[s[1],d],l),e,"whisker1"),S.push(C,k)),(i.enabled||t)&&(w=pv(a,g,n,v(e,[y(h+f*p),y(h-f*p)],l),e,"median"),S.push(w)),m._levels=e._levels=S}return e._levels},ev.bar=function(){var Q,q,K,$,t,a;function J(d,e,h,a){var f=Q.params,p=f.chartObj,t=f.xscale,g=f.stacked,v=f.datasetIndex,y=f.axisrotated,r=f.commonPlotOptions,n=(f.color,f.labelQueue),i=(f.hasNegValue,f.yaxiscolumnorder),m=f.dataset,o=p.systemConf,l=(p.plotarea,p.dataObject),s=no.helpers;if(q&&K){$=f.yscale;var c=p.dataset.getDataType("y",i),b=t.domain(),x=c==Sn?$.domain():null,C=(za(l.hierarchical)&&l.getCategories("x"),p.chartTypes[v].name,null),k=f.yaxisreversed=p.systemConf.chart.axes.yaxis[i||0].reversed,u=(f.xaxisreversed=p.systemConf.chart.axes.xaxis.reversed,e.plotoptions),w=f.gvp=pa.getValueOfPlotOptions(u,r),S=p.chartTypes[v].value===Ne.bullet,O=w("targetMarker")||{},A=u&&u.levelMarker?ga(r.levelMarker,u.levelMarker,!0):r.levelMarker,P=u&&u.border?ga(r.border,u.border,!0):r.border,T=Wn(r,p),_=Pn.isQuantileColorScale(p),E=(J.fillColorFunc=Dn(p,v,C),Rn(p,v),w("fillOpacity")),L=J.getParamValue=function(){return p.dataObject.getTransRectValue.apply(p.dataObject,Pa(arguments))},M=Pu(p.rendererConf[v],v),z=M.levelMarkerWidth;A.overlayRange="below";var D=A.color,I={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},R=0,j=null,H=null,B=0;za(P)&&Ia(P.show)&&(R=za(P.size)?P.size:1,j=P.color,H=P.style,B=P.radius,I=L("radius",null,null,null,M,B));var F,W=on(H,null==R?2:R),V=o.legend,N=function(e){for(var t in e)if(e.hasOwnProperty(t))return!!e[t];return!1}(I),Y=(V.patternPallete,V.patternPallete,qa(O.size,z-2*qa(O.padding,M.padding/2))),G=S?t.bandwidth():z,U=O.size;if(O.size=Y=za(U)?S?zt(Y,G/10):Y:Y/10,g&&A.enabled&&!za(h)){var X=os(l.getStackGroup(),v),Z=p.dataObject.getEncode("stack",X);F=Z&&Z.seriesIndices[0]===v}return e.disabled||(J.seriesdataAfterUpdate=[],e.data.forEach(function(e,u){var t=p.dataObject.updateSeriesdatabyCategories(wa(e),b,x,i,!0);p.systemConf.chart.axes.xaxis.reversed&&(t=t.slice(0).reverse()),_&&za(a)&&(t=ll.filterSelectionByColor(t,!0,a,p)),p.renderVisiblePointsOnly&&(t=s.filterPointsInViewport(p,t,"bar","x",v,u)),J.seriesdataAfterUpdate[u]=t,g&&A.enabled&&!za(h)&&b.length!=t.length&&Be.render.bulletHelpers.addDummyDataForLevelmarker(t,b,m,i),t.forEach(function(e,t){var a=Hn(p,T?t:v,e,v);if(A.enabled&&!za(h)&&(g&&F&&0===u||!g)){var r=Be.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(e,A,p,M,f,u,v),n=y?r.y:r.x,i=y?r.x:r.y,o=r.width,l=r.height;d.save(),d.beginPath(),d.fillStyle=Be.render.bulletHelpers.getBulletLevelMarkerGradient(e,A,p,a,D)||Mn((Ba(A.color)?A.color[0]:A.color)||a,A.fillOpacity),rc.roundedRect(d,n,i,o,l,I,k,y),d.fill(),d.closePath(),d.restore()}n=L("x",e,u,t,M),i=L("y",e,u,t,M),o=L("width",e,u,t,M),l=L("height",e,u,t,M),k&&(y?n-=o:i-=l),C=[o,l];function s(e,t){e.save(),e.translate(n,i),e.strokeStyle=Mn(a,E),e.fillStyle=t,N?(e.beginPath(),rc.roundedRect(e,0,0,o,l,I)):(e.beginPath(),e.rect(0,0,o,l)),e.fill(),function(e,t,a,r){0<t&&(e.lineWidth=t,Ba(r)&&r.length&&za(e.setLineDash)&&e.setLineDash(r),e.strokeStyle=a,e.stroke())}(e,R,j||a,W),e.closePath(),e.restore()}if(p.imagePallete)tn.canvas_patterns.imageFill({x:n,y:i,context:d,name:p.imagePallete[T?t:v]},s);else{var c=za(h)?h:J.fillColorFunc(T?t:v,e,null,null,E,C,{x:n,y:i,width:o,height:l,context:d},!1);s(d,c)}S&&!0===O.enabled&&!e.isDummy&&(n=q(m.getX(e))+G/2,i=$(e[O.dataindex]),function(e,t,a,r,n,i){var o=5*a,l=qa(t.outerStrokeWidth,1),s=qa(t.innerStrokeWidth,1),c=t.outerStrokeColor,u=t.innerStrokeColor,d=t.outerFillColor,h=t.innerFillColor;za(t.outerFillOpacity)&&d&&(d=Mn(d,t.outerFillOpacity));za(t.outerStrokeOpacity)&&c&&(c=Mn(c,t.outerStrokeOpacity));za(t.innerFillOpacity)&&h&&(h=Mn(h,t.innerFillOpacity));za(t.innerStrokeOpacity)&&u&&(u=Mn(u,t.innerStrokeOpacity));za(t.dashStyle)&&(t.outerDashStyle=t.innerDashStyle=t.dashStyle);var f=ev.scatter.getCache(t.symbol,o,c,l,d,u,s,h,t),p=f.adjustPosition,g=f.canvas,v=f.width,y=o+l/2+p;e.save(),i?(e.translate(n,r),e.rotate(90*Gt)):e.translate(r,n);e.drawImage(g,-y,-y,v,v),e.restore()}(d,O,Y,n,i,y))})})),O.size=U,n.push({renderer:J,charttype:"bar",chartObj:p,args:[e,v]}),J.chartRendered=!0,J}J.chartRendered=!0}return J.getHighlighter=function(e,t){if(J.highlighter)return J.highlighter;var a=e.chartTypes[t].name,r="gantt"==a,n="boxplot"==a;return J.highlighter="bullet"==a?new cv(e,J):r?new uv(e,J):n?new hv(e,J):new lv(e,J)},J.commonRendererProp=function(e){return arguments.length?(Q=e,J):Q},J.bandwidth1=function(e){return arguments.length?(q=e,J):q},J.bandwidth2=function(e){return arguments.length?(K=e,J):K},J.barDatasetIndex=function(e){return arguments.length?(t=e,J):t},J.shiftInfo=function(e){return arguments.length?(a=e,J):a},J},Gr.bar=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:["#d8d8d8"],fillOpacity:.9},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},dt.bar=function(){var S,Ee,Le,Me,ze,De,Ie,Re=!1,je=no.helpers;function He(e){return e.each(function(e){var M=qe(this);He.update=function(){M.transition().call(He)};var z=S.params,D=z.chartObj,I=z.xscale,R=z.stacked,j=z.datasetIndex,t=z.renderingOrderIndex,H=z.axisrotated,B=z.commonPlotOptions,F=z.color,n=z.labelQueue,W=z.hasNegValue,V=z.yaxiscolumnorder,N=z.dataset,a=D.systemConf,Y=(D.plotarea,D.dataObject),G=(z.threshold,z.colorOverlay,z.yaxisreversed=a.chart.axes.yaxis[z.yaxiscolumnorder||0].reversed),U=z.xaxisreversed=D.systemConf.chart.axes.xaxis.reversed;Me=z.yscale;var X=e[j],r={data:X,index:t},Z=D.defsLocation,Q=X.plotoptions,i=X.data,o=D.chartTypes[j].name,q=z.gvp=pa.getValueOfPlotOptions(Q,B),l=Sd(D,j),K=D.patternPallete&&D.patternPallete.length,$=D.dataObject.noofBarEnabledSeries,J="bullet"==o,ee="gantt"==o,te="waterfall"==o,ae="boxplot"==o,re=lt.rangePlot.has(D.chartTypes[j].value),s=D.dataset.getDataType("y",V),ne=I.domain(),ie=s==Sn?Me.domain():null,oe=(za(Y.hierarchical)&&Y.getCategories("x"),sn(M,"g",[r],".","class","barseries_"+j));if(Ee&&Le){var le,se=z.levelMarker=Q&&Q.levelMarker?ga(B.levelMarker,Q.levelMarker,!0):B.levelMarker,c=Q&&Q.border?ga(B.border,Q.border,!0):B.border,ce=Wn(B,D),u=hs(B,Q,D,"bar"),d=u.enabled,ue=u.easingType,de=u.type,he=d?100:0;Ie=Re?d?300:0:u.duration;var fe,pe,ge,ve,ye,me=Pu(D.rendererConf[j],j),be=me.barWidth,xe=me.addRangeBand,Ce=os(Y.getStackGroup(),j);if(He.getParamValue=function(){return D.dataObject.getTransRectValue.apply(D.dataObject,Pa(arguments))},se&&(ge=se.color,se.overlayRange="below"),J||re){var h=ee?"marker":ae?"median":"targetMarker",f=ae?"threshold":"qualitativeGroup";S.params.targetMarker=fe=Q&&Q[h]?ga(B[h],Q[h],!0):B[h],fe=ae?vv(fe,u):fe,pe=sn(D.staticPaneSVG.selectAll("g."+f),"g",!0!==fe.enabled||X.disabled?[]:[j],".","class",ee||ae?"markerSeries"+j:"markerSeries"),ae&&(S.params.whiskers=ve=Q&&Q.whiskers?ga(B.whiskers,Q.whiskers,!0):B.whiskers,(ve=vv(ve,u)).symbol="whiskers",ye=sn(D.staticPaneSVG.selectAll("g."+f),"g",!0!==ve.enabled||X.disabled?[]:[j],".","class","whiskerSeries"+j))}var ke={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},we=ke,Se=0,Oe=null,p=null,Ae=ke;za(c)&&Ia(c.show)&&(Se=c.size,Oe=c.color,p=c.style,we=He.getParamValue("radius",null,null,null,me,c.radius));var Pe=on(p,null==Se?2:Se),Te=He.fillColorFunc=Dn(D,j,l),_e=Rn(D,j);if(He.seriesdataAfterUpdate=[],i.forEach(function(e,c){var a,r,n,i,o,l;He.getBarLevelMarkerProp=ee?Be.render.bulletHelpers.getLevelMarkerParams:null;var t,s=X.disabled,u=D.dataObject.updateSeriesdatabyCategories(wa(e),ne,ie,V,!0);if(U&&(u=u.slice(0).reverse()),D.renderVisiblePointsOnly&&(u=je.filterPointsInViewport(D,u,"bar","x",j,c)),He.seriesdataAfterUpdate[c]=u,null!=De){t=wa(e);for(var d=De.count,h=0;h<=d;h++)t.splice(h,0,[null,null]);if(Re){var f=I(N.getX(e[0])),p={name:"rect",id:D.id,x:f,y:0,width:D.plotarea.width,height:D.plotarea.height},g={chartObj:D},v=tn.get(tn.svg_clips,"rect",p,g);oe.attr("clip-path","url("+Z+"#"+v+")")}}var y=null!=De?t:He.seriesdataAfterUpdate[c];le=de==Vi||Re?Ie:Ie/(y.length*$);var m=se&&!0===se.enabled&&(R&&0<$||!s)&&!D.dataObject.isStackedPercentChart&&(!R||!!D.dataObject.getEncode("stack",Ce)),b=(R?M:oe).selectAll(R?"g.levelMarkerSeries_"+Ce:"g.subseries_levelMarker_"+c).data(function(e){return m?[e]:[]});(R?oe:M).selectAll(R?"g.subseries_levelMarker_"+c:"g.levelMarkerSeries_"+Ce).remove(),b.exit().selectAll("path.levelMarker").transition().duration(he).attr("d",function(e,t){if(ee){var a=vn(qe(this).attr("d")),r=a[0].moves[0],n=a[3].moves[1],i=Be.render.bulletHelpers.getLevelMarkerParams(e,c,t,He,me);return dn(i.x||r,i.y+(H?0:i.height*(G?-1:1))||n,H?0:i.width,H?i.height:0,we,G,H)}return dn(He.getParamValue("x",e,c,t,me)||vn(qe(this).attr("d"))[0].moves[0],Me(Me.domain()[0]),H?0:He.getParamValue("width",e,c,t,me),H?He.getParamValue("height",e,c,t,me):0,we,G,H)}).remove();var x=oe.selectAll("g.subseries_"+c).data(function(e){return s?[]:[e]});x.exit().selectAll("path.zcbar").transition().duration(he).attr("d",function(e,t){var a=vn(qe(this).attr("d")),r=a[0].moves[0],n=a[3].moves[1];return dn(He.getParamValue("x",e,c,t,me)||r,(H?He.getParamValue("y",e,c,t,me):re?He.getParamValue("y",e,c,t,me,null,0):(R?Me(e.y0):null!=W?Me(W):null!=Me(0)?zt(Me(0),Me.range()[0]):Me.range()[0])+2*xe())||n,H?0:He.getParamValue("width",e,c,t,me),H?He.getParamValue("height",e,c,t,me):0,we,G,H)}).remove();var C=x.enter().append("g").merge(x).attr("class","subseries_"+c);if(te){var k=sn(R?M:oe,"g",R||!s?[1]:[],".","class","connectorLines",null);dt.waterfallHelpers.drawConnectorLines(k,y,{chart:D,yaxiscolumnorder:V,axisrotated:H,stacked:R,xscale:I,yscale:Me,renderer:He,seriesindex:c,plotoptions:Q,commonPlotOptions:B});var w=sn(R?M:oe,"g",R||!s?[1]:[],".","class","comparisonLines",null);dt.waterfallHelpers.drawComparisonLine(w,y,{chart:D,yaxiscolumnorder:V,axisrotated:H,stacked:R,xscale:I,yscale:Me,renderer:He,seriesindex:c,plotoptions:Q,commonPlotOptions:B})}var S=ee?b.enter().append("g").merge(b):b.enter().insert("g",":first-child").merge(b);S.attr("class",R?"levelMarkerSeries_"+Ce:"subseries_levelMarker_"+c),m&&R&&ne.length!=y.length&&Be.render.bulletHelpers.addDummyDataForLevelmarker(y,ne,N,V);var O=S.selectAll("path.levelMarker").data(y,function(e){return ee?e:N.getX(e)});O.enter().append("path").merge(O).attr("class","levelMarker").styles({fill:function(e,t){if(ee)return se.color||(ce?D.seriesColor[t%D.seriesColor.length]:F);if(!Be.render.bulletHelpers.ZC_BAR_getLevelMarkerRect||!Be.render.bulletHelpers.getBulletLevelMarkerGradient)throw"Level marker or bullet module was not loaded";var a=ce?D.seriesColor[t%D.seriesColor.length]:F,r=Ba(se.color)?se.color[0]:se.color;if(K){var n=ee?Be.render.bulletHelpers.getLevelMarkerParams(e,c,t,He,me):Be.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(e,se,D,me,z,c,j),i=n.x,o=n.y,l=n.width,s=n.height;r=Te(ce?t:j,null,null,r,null,null,{x:i,y:o,width:l,height:s})}return Be.render.bulletHelpers.getBulletLevelMarkerGradient(e,se,D,a,ge)||r||a},"fill-opacity":se?se.fillOpacity:null,opacity:function(e){if(za(Y.hierarchical)&&za(D.cache.hierarchical)&&D.cache.hierarchical.active)return!0===e.active?1:.1}}).attr("d",function(e,t){var a=ee?Be.render.bulletHelpers.getLevelMarkerParams(e,c,t,He,me):Be.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(e,se,D,me,z,c,j),r=a.x,n=a.y,i=a.width,o=a.height;return ee?dn(r,n,i,o,Ae,G,H):H?dn(n,r,i,o,we,G,H):dn(r,n,i,o,we,G,H)}).attr("level",function(e,t){if(za(Y.hierarchical))return e.level}),se&&(se.color=ge),O.exit().remove(),J?(dt.ganttHelpers.addMarker(pe,y,He,c,fe,ce,""),pt.bullet.call(D,fe,He,y)):ee?(dt.ganttHelpers.addMarker(pe,y,He,c,fe.start,ce,0),dt.ganttHelpers.addMarker(pe,y,He,c,fe.end,ce,1)):ae&&(dt.ganttHelpers.addMarker(pe,y,He,j,fe,ce,""),dt.ganttHelpers.addMarker(ye,y,He,j,ve,ce,0),dt.ganttHelpers.addMarker(ye,y,He,j,ve,ce,1));var A=C.selectAll("path.zcbar").attr("class","zcbar").data(y,function(e){return ee?e:N.getX(e)}),P=A.enter().append("path").style("fill-opacity",q("fillOpacity")).attrs({class:"zcbar",height:0,d:function(e){var t=function(e){var t=N.getX(e);return a=R?Ee(t):Ee(t)+Le(ze+c),r=Me.bandwidth?Me.origRange[0]:H?null!=W?Me(W):Me.range()[0]:R?null!=W?Me(W):Me.range()[0]:null!=W?Me(W):null!=Me(0)?zt(Me(0),Me.range()[0]):Me.range()[0],r=te?Me(e.y0):r,{x:a,y:r,width:H?0:be,height:H?be:0}}(e);return qe(this).attr("y",t.y),H?dn(t.y,t.x,t.width,t.height,ke,G,H):dn(t.x,t.y,t.width,t.height,ke,G,H)}}).merge(A);P.attrs({stroke:function(e,t){return _e(ce?t:j,e,Oe)},"stroke-width":Se,"stroke-dasharray":Pe,level:function(e){if(za(Y.hierarchical))return e.level}}).styles({fill:function(e,t){return K?Te(ce?t:j,e,null,null,null,null,{x:He.getParamValue("x",e,c,t,me),y:He.getParamValue("y",e,c,t,me),width:He.getParamValue("width",e,c,t,me),height:He.getParamValue("height",e,c,t,me)}):Te(ce?qa(e.itemIndex,t):j,e)},opacity:function(e){if(za(Y.hierarchical)&&za(D.cache.hierarchical)&&D.cache.hierarchical.active)return!0===e.active?1:.1},"fill-opacity":q("fillOpacity"),transition:"opacity ease 0.2s"});if(null==De?P.transition().duration(Re?le:0).delay(function(e,t){return de==Vi||Re?0:(t*$+j)*le}).attr("d",function(e,t){var a=qe(this),r=parseFloat(a.attr("height"));return n=H&&!re?parseFloat(a.attr("y")):He.getParamValue("x",e,c,t,me),i=H?He.getParamValue("y",e,c,t,me):re&&!r?He.getParamValue("y",e,c,t,me,null,0):parseFloat(a.attr("y")),o=H?parseFloat(a.attr("height")):He.getParamValue("width",e,c,t,me),l=H?He.getParamValue("height",e,c,t,me):r,dn(n,i,o,l,we,G,H)}).on("end",function(e,a){qe(this).transition().delay(function(e,t){return de==Vi||Re?0:(a*$+j)*le}).duration(le).ease(ue).attr("d",function(e){var t=L(e,a);return isNaN(t.x)||isNaN(t.y)?(t.x=-1,null):dn(t.x,t.y,t.width,t.height,we,G,H)})}).attrs({y:function(e,t){return He.getParamValue(H?"x":"y",e,c,t,me)},height:function(e,t){return He.getParamValue(H?"width":"height",e,c,t,me)}}):P.transition().duration(Re?le:0).attrs({d:function(e,t){var a=L(e,t);return dn(a.x,a.y,a.width,a.height,we,G,H)},y:function(e,t){return He.getParamValue(H?"x":"y",e,c,t,me)},height:function(e,t){return He.getParamValue(H?"width":"height",e,c,t,me)}}),A.exit().transition().duration(le).remove(),0<c&&R){var T=sn(oe,"g",s?[]:[1],".","class","subdividerseries_"+c).selectAll("rect").data(y,function(e){return N.getX(e)}),_=T.enter().append("rect").merge(T).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:E("width"),height:E("height"),x:function(e,t){return E("x",e,c,t,me)},y:function(e,t){return E("y",e,c,t,me)}});_.transition().duration(le).ease(ue).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:E("width"),height:E("height"),x:function(e,t){return E("x",e,c,t,me)},y:function(e,t){return E("y",e,c,t,me)}}),_.exit().remove()}function E(e,t,a,r,n){switch(e){case"x":return H?Me(t.y0):He.getParamValue("x",t,a,r,n);case"y":return H?He.getParamValue("y",t,a,r,n):Me(t.y0);case"width":return H?1:be;case"height":return H?be:1}}function L(e,t){return n=He.getParamValue("x",e,c,t,me),i=He.getParamValue("y",e,c,t,me),o=He.getParamValue("width",e,c,t,me),l=He.getParamValue("height",e,c,t,me),{x:n,y:i,width:o,height:l}}ee&&dt.ganttHelpers.showDependencies(He,y,oe,c),He.getMarkerPosition=ee?dt.ganttHelpers.getMarkerPosition:null}),ae){var g=D.dataset.getColumnIdx("y",V),v=fe.columnindex,y=ve.columnindex,m=D.datalabels.renderer,b=m?m[j]:{},x=[];if(b&&b.show){var C,k=b.labeltype;if("Map"==k.constructor.name){var w=k.get("val");w&&1==w.length?(C=w[0])==v?x.push(C):C==y||C==g?x.push(C,C):x.push("others"):x.push("others")}else"y"==k?x.push(g,g):x.push("others");x.map(function(e,t){var a=e==v||"others"==e?null:t%2,r="others"==e?null:e;n.push({renderer:He,charttype:"bar",chartObj:D,args:[X,j,0,a,r]})})}}else n.push({renderer:He,charttype:"bar",chartObj:D,args:[X,j]})}else He.chartRendered=Re=!0}),He.renderedTimer=setTimeout(function(){He.chartRendered=Re=!0},2*Ie+10),He}return He.getHighlighter=function(e,t){if(!He.highlighter){var a=e.chartTypes[t].name,r="gantt"==a,n="boxplot"==a;He.highlighter="bullet"==a?new cv(e,He):r?new uv(e,He):n?new hv(e,He):new lv(e,He)}return He.highlighter},He.commonRendererProp=function(e){return arguments.length?(S=e,He):S},He.bandwidth1=function(e){return arguments.length?(Ee=e,He):Ee},He.bandwidth2=function(e){return arguments.length?(Le=e,He):Le},He.barDatasetIndex=function(e){return arguments.length?(ze=e,He):ze},He.shiftInfo=function(e){return arguments.length?(De=e,He):De},He},Gr.boxplot=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},whiskers:{enabled:!0,columnindex:3,dataindex:3,size:"50%",color:"#d8d8d8",opacity:.9,strokeWidth:1},median:{enabled:!0,dataindex:2,columnindex:2,color:"#d8d8d8",opacity:.9,strokeWidth:1},datalabels:{showAs:"y"},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},dt.pie=function(){var i,o,l,s,c,oe,le,se,ce,ue,de,he,fe,pe,ge,ve,ye,me,be,xe,Ce,ke,we,Se,Oe,Ae,Pe,Te,_e,Ee,Le,Me,ze,De,Ie,Re,je,He,Be,Fe,We=.3,Ve=y().sort($t),Ne=tt(),Ye=!1;function Ge(e){return e.each(function(e){var r=pe.params;ge=r.chartObj,Pe=r.commonPlotOptions,be=r.color,Te=r.notesArray,ge.systemConf;var n=r.labelQueue,t=r.yaxiscolumnorder,a=r.dataset,i=r.datasetIndex||0,o=ge.defsLocation,l=ge.seriesdata[i],s=Pe.maxRadius+" _ "+Pe.outerPadding+" _ "+Pe.innerRadius,c=ge.chartTypes[i].name,u=c===bi,d=!(_e=c===xi)&&!u;Fe=d?Ea(Pe.dataindex,3):a.yidx(t),Be=He||(_e?ge.plotarea_approx:ge.plotarea),we=Be.width,ke=Be.height,ve=Ea(Be.radius,zt(we,ke)/2),se=!1;function h(e){return e.data.disabled||e.startAngle===e.endAngle||!e.value?Qt:$t}var f,p=l.plotoptions,g=Pe.datalabels,v=pa.getValueOfPlotOptions(p,Pe),y=Ea(v("maxRadius"),250),m=Pe.levelMarker,b=u?+v("outerPadding"):0,x=v("strokeWidth"),C=v("cornerRadius")||0,k=v("padAngle")||0;fe=void 0!==Pe.baseValue?Pe.baseValue:0;var w=ge.datalabels.moduleExists&&Vs(g,ge),S=w?+(g.padding||0)+(Ms(g,ge)?2*(zs(g,ge)+Ds(g,ge)):0):0,O={},A=0;if(ce=ge.datalabels.moduleExists&&Ms(g,ge),Ee=zt(y,ve-(b+=u?S:0)),u&&w){var P=we*We,T=we-2*Ee;T<P&&(S=O.padding=5,A=Mt(P-T,0),Ee-=A/2)}if(ye=du(Pe,Ee),x=Ea(x,1),_e&&m.enabled){var _,E;if(za(Pe.bandWidth)||za(Pe.maxBandWidth)){var L=Ea(Pe.maxBandWidth,Ee),M=zt(mr(Pe.bandWidth,Ee,Ee-ye),L);E=_=-(Ee-ye-M)/2,f=0===M?"hidden":$t}else _=zt(0,mr(m.innerPadding,ve,0)),E=zt(0,mr(m.outerPadding,ve,0));Ee+=E,ye-=_}Le=Mt(ye,Ee-=.5*x),Ie=(p&&p.models?ga(Pe.models,p.models,!0):Pe.models)||{};function z(){qe(this).style("display",h)}var D=hs(Pe,p,ge,c),I=D.enabled?Ye?200:D.duration:0,R=Ye?Ke:D.easingType,j=D.type,H=0==Ea(oo(p,Pe,ge,"enabled"),!0),B=H?$t:oo(p,Pe,ge,"cursor")||Kt;xe=qe(this),(Ce=sn(xe,"g",[e],".","class","piegroup")).styles({"stroke-width":x,"fill-opacity":v("fillOpacity"),"stroke-opacity":Pe.strokeOpacity,cursor:B,visibility:f}),Ve.startAngle(Pe.startAngle).endAngle(Pe.endAngle).value(function(e){return e.disabled?0:Dt(e[Fe]||0)});var F=Ve(e=d?e:l.data[0]);ze=(Ge.data=F).reduce(function(e,t,a){return e+(t.value?1:0)},0),Ge.total=me=F.reduce(function(e,t,a){return e+t.value},0),(Ge.arc=Ne).outerRadius(Le).innerRadius(ye),Ae=tt().innerRadius(Le).outerRadius(Le+S);var W=tt().innerRadius(Le).outerRadius(Le);Me=x;var V=Qe(Ce),N=(V.height+x)/Ee,Y=(V.width+x)/Ee,G=Ee+zt((we-2*b-A-(V.width+x))/Y,(ke-2*b-A-(V.height+x))/N);if(G=zt(y,Mt(Ee,G)),_e){s+=" _ "+Pe.bandWidth+" _ "+m.bandWidth+" _ "+m.innerPadding+" _ "+m.outerPadding;var U=ge.axes.y.groups[0].scale,X=U.domain();F.forEach(function(e){var t=e.data[Fe];le=oe,(oe=t<0)?(e.startAngle=U(fe!=$t?Math.min(fe,X[1]):X[1]),e.endAngle=U(Math.max(t,X[0]))):(e.startAngle=U(fe!=$t?Math.max(fe,X[0]):X[0]),e.endAngle=U(Math.min(e.value,X[1])))})}else G!=Ee&&(ye=du(Pe,Ee=G),Le=Mt(ye,Ee),Ne.outerRadius(Le).innerRadius(ye),Ae=tt().innerRadius(Le).outerRadius(Le+S),W=tt().innerRadius(Le).outerRadius(Le),Qe(Ce));Ne.cornerRadius(C).padAngle(k);var Z=!_e&&Ie.type?"url("+o+"#"+function(e){var t={name:"pieModels",id:ge.id,d:e},a={chartObj:ge};return tn.get(tn.svg_clips,"polygon",t,a)}(function(){var a=-1,e=Ie.count,t="zigzag"==Ie.type?ye/5-50:"sun"==Ie.type?-1:-10,r=function(e){for(var t=[],a=[],r=0,n=0;n<e;n++)"gear1"==Ie.type?a.push([r++,0],[r++,1],[r++,1]):a.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(a),t}(e),n=Je().range([0,2*Yt]).domain([0,"gear1"==Ie.type?3*e:2*e]),i=Je().range([ye,Le]).domain([t,1]);return et().curve($e("linearClosed")).radius(function(e){return i(e[1])}).angle(function(e,t){return a="gear"==Ie.type?t%2==0?a+1:a:"gear1"!=Ie.type&&t%2!=0?a+1:a,n("gear1"==Ie.type?a++:a)})(r[0])}())+")":$t,Q=Ge.fillColorFunc=Dn(ge,i,[Le,Le]),q=Rn(ge,0);if(De=2*mr(v("sliceOutHeight"),Ee,0),Oe=Ce.selectAll(Rr).data(),ys(Se=sn(Ce,Rr,F)),Se.attrs({"clip-path":Z,id:function(e,t){return"arc_"+t}}).styles({display:function(e){var t=qe(this).style("display"),a=h(e);return!Ye||t===Qt&&a===Qt?a:$t},fill:function(e,t){return Q(t,e.data)},stroke:function(e,t){return q(t,e.data,Pe.strokeColor)}}),Co(ge,Se,H),!H){function K(e,t){var a=ie(e,t);ge.eventHandler.handlers.mousemove.call(ge.eventHandler,a),mv(e,a)}function $(e,t){var a=ie(e,t);ge.eventHandler.handlers.mouseout.call(ge.eventHandler,a),mv(e,a)}function J(e,t){var a=ie(e,t);ge.eventHandler.handlers.click.call(ge.eventHandler,a,Ge,0,t,e),mv(e,a)}function ee(e,t){var a=As?Tu(e.data,$t):e.data,r=Ae.centroid(e);r=[r[0]+Re,r[1]+je];var n=ie(e,t);n.coordinate=r,n.basedOn="plot",n.data=a,ge.eventHandler.handlers.doubleclick.call(ge.eventHandler,n,t,n),mv(e,n)}Mo(Se,{mousemove:K,mouseout:$,click:J,dblclick:ee},{singletouchmove:K,touchend:$,tap:J,dbltap:ee},{target:"plot",touchleave:!0,chartObj:ge})}if(/(\D)+onebyone/.test(j)&&!Ye){var te="fanonebyone"==j,ae=te?I:I/ze,re=0;Se.transition().ease(R).duration(function(e){return te?ae*(e.value/me):ae}).delay(function(e){var t=ae*re;return re+=te?e.value/me:1,t}).call(te?Xe:Ue).on("end",z)}else{var ne;ne=Ye?s!=ue?Ue:Ze:"fanAll"==j?Ze:"inner"==j?Ue:Xe,Se.transition().duration(I).ease(R).call(ne).on("end",z)}function ie(e,t){var a=lo(nt());return{renderer:Ge,seriesIndex:0,subSeriesIndex:0,itemIndex:t,color:be[t%be.length],coordinates:[a.pageX,a.pageY],element:this,data:e,selected:e.selected,_key:"ZC_"+ge.id+"_0_0_"+t}}Ge.renderedTimer=setTimeout(function(){if(ue=s,de=ye,he=Le,_e)ge.renderer[0].endFunctions();else if(pt&&!d){var e=[Re,je],t=[Ce.datum(),0,F,Le,me,Ae,W,Ne,e,O];n.push({renderer:Ge,charttype:bi,chartObj:ge,args:t}),n.push({renderer:Ge,charttype:"pieInnerLabels",chartObj:ge,args:t})}var a=ge.systemConf.notes;za(a)&&a.enabled&&!d&&(Te=As.preprocessAnnotations(ge.seriesdata,0,function(e,t,a){var r=Ae.centroid(F[a]);return[r[0]+Re,r[1]+je]},Te,ge,r)),Ye=Ge.chartRendered=!0},I+1e3/60)}),Ge}function Ue(e){yv(e,Ne,[Ye?de:ye,ye],[Ye?he:ye,Le])}function Xe(e){e.attrTween("d",function(t,e){var a=at(t.startAngle,t.endAngle);return function(e){return t.endAngle=a(e),Ne(t)}})}function Ze(e){e.attrTween("d",function(t,a){var e,r,n=Oe[a]||Oe[Oe.length-1];r=oe?(e=Ye&&n&&le?n.endAngle:t.startAngle,Ye&&n&&le?n.startAngle:t.startAngle):(e=Ye&&n&&!le?n.endAngle:_e?t.startAngle:Pe.startAngle,Ye&&n&&!le?Oe[a]?n.startAngle:n.endAngle:_e?t.startAngle:Pe.startAngle);var i=at(e,t.endAngle),o=at(r,t.startAngle);return function(e){return t.endAngle=i(e)||0,t.startAngle=o(e)||0,Ne(t,a)}})}function Qe(e){var t=[];t[Fe]=1;var a=xe.append(Rr).attr("d",Ne(Ve([t])[0],Ge.data.length-1)).styles({fill:Qt,stroke:Qt}),r=ba(a.node());a.remove();var n=lu(r,we,ke,Ee,Me);return Re=_e?Be.x:n[0],je=_e?Be.y:n[1],e.attr("transform",function(e,t){return"translate("+Re+","+je+")"}),r}function u(){i=i||ge.staticPaneSVG.selectAll("g."+Ol+"_0"),o=o||ge.staticPaneSVG.selectAll("g.link_0"),l=l||ge.staticPaneSVG.selectAll("g.label_0"),c=c||ge.staticPaneSVG.selectAll("g.boundboxseries_0"),s=s||ge.staticPaneSVG.selectAll("g.innerboundboxseries_0"),se=!0}return Ge.commonRendererProp=function(e){return arguments.length?(pe=e,Ge):pe},Ge.plotarea=function(e){return arguments.length?(He=e,Ge):He||Be},Ge.innerRadius=function(e){return arguments.length?(ye=e,Ge):ye},Ge.defaultMouseOverFunc=function(e,t,a){if(1!=ze){se||u();var r=function(e){return iu(De,(e.startAngle+e.endAngle)/2)}(e),n={transform:"translate("+r[0]+","+r[1]+")"};Se.transition().ease(Ke).attr("transform","translate(0,0)"),Ce.selectAll("#arc_"+a).transition().ease(Ke).attrs(n),i.selectAll("#innerlbl0_0_"+a).transition().ease(Ke).attrs(n),ce||o.selectAll("#link0_0_"+a).style("stroke-width",3*Ge.lineStrokeWidth),"circular"==Ge.showlabel&&(l.selectAll("#lbl0_0_"+a).transition().ease(Ke).attrs(n),c.selectAll("#boundboxlbl0_0_"+a).transition().ease(Ke).attrs(n)),l.selectAll("#lbl0_0_"+a).style("text-shadow","0 0 0 rgba(0,0,0,1)"),s.selectAll("#boundboxinnerlbl0_0_"+a).transition().ease(Ke).attrs(n)}},Ge.defaultMouseOutFunc=function(e,t,a){se||u();var r={transform:"translate(0,0)"};if(l.selectAll(Dr).style("text-shadow",$t),ce||o.selectAll(Rr).style("stroke-width",Ge.lineStrokeWidth),!Wr.clickedTime&&a)return Se.attrs(r),i.selectAll(Dr).attrs(r),s.selectAll(Rr).attrs(r),void("circular"==Ge.showlabel&&(l.selectAll(Dr).attrs(r),c.selectAll(Rr).attrs(r)));Se.transition().ease(Ke).attrs(r),i.selectAll(Dr).transition().ease(Ke).attrs(r),"circular"==Ge.showlabel&&(l.selectAll(Dr).transition().ease(Ke).attrs(r),c.selectAll(Rr).transition().ease(Ke).attrs(r)),s.selectAll(Rr).transition().ease(Ke).attrs(r)},Ge},Gr.pie=function(e){var t={startAngle:0,endAngle:2*Yt,innerRadius:0,outerPadding:10,datalabels:{type:"circular",padding:5,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}};return"bubblepie"===e||"geobubblepie"===e?(t.strokeColor="transparent",t.outerPadding=.02,t.datalabels.showAs="percent",t.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(t.strokeColor="white",t.sliceOutHeight=5,t.maxRadius=250,t.datalabels.showAs="x"),t};var xv=Je(),Cv=M(),kv=(_inherits(wv,vp),_createClass(wv,[{key:"init",value:function(){_get(wv.prototype.__proto__||Object.getPrototypeOf(wv.prototype),"init",this).call(this),this.d3_scale.clamp=!0;var e=this.getConfig().base,t=this.chartObj;if(this.schema.data.meta.datatype===An&&(t.isGeoMap||(this.schema.domain.base=e!==ct?e:0),t.systemConf.legend.singleLayout)){var a=this.schema;a.data.source=function(){return t.dataObject.getMinMaxZ()},a.data.condition=null,a.domain.key=[0,1]}}},{key:"parseRange",value:function(e){function t(e){return mr(e,r)}var a=this.chartObj,r=function(e){if(Sv(e))return 1;var t=e.plotarea;return zt(t.width,t.height)}(a),n=this.getConfig(),i=n.sizes,o=this.schema.domain,l=this.d3_scale.domain,s=this.schema.data.meta.datatype,c=o.ranges,u=fl(n,a.chartarea,e);if(i)return(i=Ta(i,a,u,this)).map(t);var d=function(e,t,a,r){if(r.systemConf.legend.singleLayout)return e;var n=a.getConfig(),i=n.minSize,o=n.maxSize,l=n.title,s=Dp("z",a),c=rp("z",s),u=t.maxWidth,d=t.maxHeight,h=n[s]||{},f=qa(h.padding,3),p=r.systemConf.canvas;if(!dl(n,r,"z")||c===ta)return e;if(c.adjustFactor){var g=c.adjustFactor(n,u,d,p);if(u-=g[0],d-=g[1],l.show){var v=nr(qa(l.margin,3));d-=Dd([l,p,Wr])+v.top+v.bottom}}var y=zt(u,d)-2*f,m=Mt(y,20),b=Mt(.1*y,5);return e[1]>y&&(Aa(o)&&(e[1]=m),Aa(i)&&(e[0]=b)),e[0]>e[1]&&(Aa(o)&&(e[1]=e[0]),Aa(i)&&(e[0]=e[1])),e}(function(e,t,a,r){var n=function(e){return Sv(e)?["25%","100%"]:e.systemConf.legend.singleLayout?["2.5%","25%"]:["2%","20%"]}(t),i=Ta(e.minSize,t,r,a),o=Ta(e.maxSize,t,r,a);return[qa(i,n[0]),qa(o,n[1])]}(n,a,this,u).map(t),u,this,a);if(c||s===Sn){var h=c||l;return Cv.domain(h).range(d),h.map(function(e){return Cv(e)})}var f=[l[0],l[l.length-1]],p=d[0]+(d[1]-d[0])/2;return xv.domain(f).range(f[0]==f[1]?[p,p]:d),l.map(function(e){return xv(e)})}}]),wv);function wv(){return _classCallCheck(this,wv),_possibleConstructorReturn(this,(wv.__proto__||Object.getPrototypeOf(wv)).apply(this,arguments))}function Sv(e){return go(e.chartTypes[0].value)}na.setComponent("sizeScale",kv),Gr.bullet=function(e){return{strictBandWidth:!0,outerPadding:1e-8,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)",label:{fontSize:e.datalabels.fontSize.l5}},animation:{type:"verticalAll"},datalabels:{textOverlap:"none",showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}},stacked:{enabled:!0}}},Be.render.bulletHelpers=function(){},Be.render.bulletHelpers.getLevelMarkerParams=function(e,t,a,r,n){var i,o,l,s,c=r.commonRendererProp().params,u=c.chartObj,d=c.yaxiscolumnorder,h=c.axisrotated,f=c.dataset,p=n&&n.yscale.range()[1],g=e[n.levelMarker.dataindex],v=f.getY(e,d),y=v[0],m=(v[1]-y)*g/100,b=n.yscale(y+m),x=h?0:n.levelMarkerPadding,C=h?n.levelMarkerPadding:0;i=u.dataObject.getTransRectValue("x",e,t,a,n)+x;var k=null==n.hasNegValue?n.yscale(f.getY(e,n.yaxiscolumnorder,0)):n.yscale(n.hasNegValue);return s=n.axisrotated?(o=r.getParamValue("y",e,t,a,n)+C,l=n.stacked?Dt(n.yscale(e.y+e.y0)-n.yscale(e.y0))+n.addRangeBand(n.yscale):(Dt(p-k-(p-b))||0)+n.addRangeBand(n.yscale),n.levelMarkerWidth||n.barWidth):(o=b,l=n.levelMarkerWidth||n.barWidth,n.stacked?Dt(k-n.yscale(e.y+e.y0)-(k-n.yscale(e.y0)))+n.addRangeBand(n.yscale):Dt(k-b)+n.addRangeBand(n.yscale)),{x:i,y:o,width:l,height:s}},Be.render.bulletHelpers.getBulletLevelMarkerGradient=function(e,t,a,r,n){var i=e[t.dataindex]||[];if(null!=i&&!(i instanceof Array))return null;if(!i.length)return null;if(n)n.constructor!=Array&&(t.color=[n]);else{t.color=[];var o=t.colorGamma||[.3,.9],l=ma(r,[0,i.length-1],[+o[0],+o[1]]);t.color=i.map(function(e,t){return l(t)})}var s,c=i.filter(function(e){return e<0});if(0<c.length){var u=(s=i.slice()).indexOf(0);-1<u&&s.splice(u,1);var d=t.color;s=s.sort(T);for(var h=[],f=0;f<s.length;f++){var p=i.indexOf(s[f]);h.push(d[p])}t.color=h,s.splice(s.length-c.length,0,0),i=s}t.values=i;var g=Ae.threshold.overlay(a,"continous")(qt,t,0,"y");return 0<c.length&&(i=s),g},Be.render.bulletHelpers.ZC_BAR_getLevelMarkerRect=function(e,t,a,r,n,i,o){var l,s,c=e[t.dataindex]||[],u=za(t.dataindex),d=a.datalabels.hasFixedPosition,h=a.systemConf.chart.axes.yaxis[n.yaxiscolumnorder||0].reversed,f=r.stackGroupIndex,p=a.plotarea,g=n.stacked,v=n.axisrotated,y=n.hasNegValue,m=n.yaxiscolumnorder,b=n.dataset,x=n.yscale;a.eventHandler&&!a.eventHandler.bulletEvents&&(a.eventHandler.bulletEvents=new ue.BulletEvent(a,r,n.xscale,n.yscale)),null==c||c instanceof Array||(c=[c]),u&&!c.length?l=s=0:(l=Oe(c),s=Ue(c));var C=b.getX(e),k=(g?r.bandwidth1(C)+(r.bandwidth2(f)||0):r.bandwidth1(C)+r.bandwidth2(r.barDatasetIndex+i))+r.levelMarkerPadding,w=u?x(v?zt(0,l):Mt(0,s)):v&&null!=y?x(y):0,S=v?u?x(Mt(0,s))-x(zt(0,l)):null!=y?p.width-x(y):p.width:r.levelMarkerWidth,O=v?r.levelMarkerWidth:u?x(zt(0,l))-x(Mt(0,s)):null!=y?x(y):p.height;if(!u)if(x.bandwidth){var A=x.ordinalRange,P=x.bandwidth()/2;v?(w=x.origRange[0],S=A[h?0:A.length-1]+P):(w=A[A.length-1]+P,O=A[h?A.length-1:0]+P)}else{var T;if(d)T=a.dataObject.ZC_BAR_getRangeY(m)[1];else T=x.domain()[1];var _=[x(T),x(za(y)?y:x.domain()[0])];v?(_.reverse(),w=_[0],S=Dt(_[1]-_[0])):(w=_[0],O=Dt(_[1]-_[0]))}return{x:k,y:w,width:S,height:O}},Be.render.bulletHelpers.addDummyDataForLevelmarker=function(n,e,i,o){var l=n.map(function(e){return i.getX(e)});e.forEach(function(e,t){var a=e;if(l.indexOf(a)<0){var r=[];r.splice(i.xidx,0,a),r.splice(i.yidx(o),0,0),r.isDummy=!0,r.y=0,r.y0=0,r.index=t,n.splice(t,0,r)}})};Be.render.bulletHelpers;function Ov(e,t,a,r){return{start:Av(e.source,a,r),end:Av(e.target,a,r),type:t.link.type.toUpperCase()||"ES"}}function Av(e,t,a){var r=t.commonOption;return{x:t.getParamValue("x",e,a,null,r),y:t.getParamValue("y",e,a,null,r),width:t.getParamValue("width",e,a,null,r),height:t.getParamValue("height",e,a,null,r)}}Gr.dial=function(e){return{startAngle:-Yt/2,endAngle:Yt/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,strokeColor:"rgba(0,0,0,0.1)",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:e.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},targetMarker:{outerStrokeWidth:3,symbol:"line",innerFillOpacity:0,innerStrokeOpacity:0,outerFillColor:"grey",outerStrokeColor:"#000"},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}}},wd.handleEvents=function(o,e,n,l,t){var a,r,i,s=t[0].data[0][0],c="levelmarker"===l,u=o.renderer[0].levelMarker,d=u&&u.values.length,h=o.systemConf.chart.plot.plotoptions.dial,f=o.systemConf.tooltip.enabled,p=n.events||{},g=Ea(p.enabled,h.events.enabled),v=g?p.cursor||Kt:null;if(e.style("cursor",v),g){function y(e){c?e[1]:e[n.dataindex];var t=_(e),a=ko(nt(),{x:0,y:0},0,0,o,{seriesIndex:0,subseriesIndex:0,itemIndex:0});if(f){var r=Ta(p.tooltipContent,t,o)||(c?"Range: ":"Target: ")+t.formattedValue;o.eventHandler.tooltipElement.show(o,function(){var e=_o(o.svg.node(),nt()),t={x:e[0],y:e[1]},a={left:t.x,top:t.y},r=lo(nt()),n=t.x-r.clientX,i=t.y-r.clientY;return a.left-=n,a.top-=i,a.dLeft=n,a.dTop=i,a}(),r,!1,a.helpers)}}function m(){if(f){var e=o.eventHandler.tooltipElement;e.hide(e.element)}}var b=o.dataset,x=o.userdata.metadata.columns,C=t[0].data[0].length,k=x.filter(function(e){return e.dataindex===n.dataindex}),w=k.length?k[0]:x[b.getColumnIdx("y",0)];i=w.datatype,r=w[i];function S(e){var t=o.eventHandler.tooltipElement;t&&t.timeout&&clearTimeout(t.timeout),!1!==o.stopPropogate&&nt().stopPropagation();var a=o.zcEventType||"mousemove";T(s,a,nt(),e),y(e)}function O(e){var t=o.zcEventType||"mouseout";T(s,t,nt(),e),m()}function A(e,t){var a=nt()&&nt().touches,r=o.zcEventType||"click",n=C+t+1+("targetmarker"===l?d:0);if(T(s,r,nt(),e),a&&"taphold"!==r){ef(o);(new Date).getTime(),o.renderer[0];var i=o.eventHandler.tapOldInfo;i&&i.itemPos==n?(m(),o.eventHandler.tapOldInfo=null):(y(e),o.eventHandler.tapOldInfo={seriesPos:0,subseriesindex:0,itemPos:n,type:l})}}function P(e){var t=o.zcEventType||"doubleclick";T(s,t,nt(),e)}Mo(e,{mousemove:S,mouseout:O,click:A,dblclick:P},{singletouchmove:S,touchend:O,tap:A,dbltap:P},{target:"plot",touchleave:!0,chartObj:o})}function T(e,t,a,r){return Ta(p[t],a,_(r),o)}function _(e){var t=c?e[1]:e[n.dataindex];return{value:t,formattedValue:Hl(r,t,i,o),actualData:s,data:a=a||o.dataset.getMetaInfoObj(o,s,0)}}},wd.targetMarker=function(e,r,n,p,t){var a,i,o=p.systemConf,g=o.chart.plot.plotoptions.dial,v=p.dataset,y=p.axes.y.groups[0].scale,m=y.domain(),l=p.seriesdata,b=g.targetMarker,x=b.align,s=b.dAlign,c=+(b.padding||0),u=/line/.test(b.symbol)?90:0,d=!/(outer|inner)/g.test(x)&&/line/.test(b.symbol)?(r-n-2*c)/10:1,h=10*Ea(b.size,d),f={symbolSize:{outer:1,inner:.5},color:p.seriesColor[0],strokeWidth:d},C=s===al?h/2+c:s===tl?-h/2-c:0,k=x===al?r+C:x===tl?n+C:(r+n)/2,w=sn(e,"g",b.enabled?[l[0].data[0][0]]:[],".","class","targetmarker"),S=sn(e,"g",b.enabled&&t?[l[0].data[0][0]]:[],".","class","targetmarker-eventhandler");w.attr("transform",_).styles({display:E,"stroke-dasharray":on(b.dashStyle,Ea(b.outerStrokeWidth,1)),"stroke-linecap":ln(b.lineCap,b.dashStyle)}).each(function(){eo(qe(this),null,b,f,p)}),a=S,i=b.events&&b.events.triggerOffset||0,f.strokeWidth=(h+2*i)/10,a.attrs({transform:_,class:function(e,t){return"ZCtargetmarker_eventhandler_"+t}}).styles({display:E,opacity:0}).each(function(){var e=qe(this);if(eo(e,null,b,f,p),"line"===b.symbol){var t=r-n<=h?h:Mt(h+i,r-n),a=i||1;e.selectAll("*").attr("d",Ji("rect")(t,a))}}),wd.handleEvents(p,S,b,"targetmarker",l);var O=b.label||{},A=Ea(O.padding,2),P=x===al?k+h/2+A:x===tl?(s===al?n:k-h/2)-A:r+A,T=sn(e,"text",b.enabled&&qa(O.enabled,!0)&&!p.renderer[0].firedList.targetSeries?[l[0].data[0][0]]:[]);function _(e){var t=e[b.dataindex];if(za(t)){t=wd.getValueWithinRange(t,m);var a=y(t),r=iu(k,a),n=uu(a)+u;return"translate("+r[0]+","+r[1]+") rotate("+n+",0,0)"}}function E(e){return za(e[b.dataindex])?null:Qt}fn(T,[O,o.chart,o.canvas,Wr]),T.each(function(e){var t=qe(this);t.style("display",Qt);var a=e[b.dataindex];if(za(a)){if(a=wd.getValueWithinRange(a,m),JSON.parse(g.minmaxlabels.show)&&-1!=m.indexOf(a))return;var r=y(a),n=ou(r),i=iu(P,r),o=p.userdata.metadata.columns,l=o.filter(function(e){return e.dataindex===b.dataindex}),s=l.length?l[0]:o[v.getColumnIdx("y",0)],c=s.datatype,u=s[c],d=x===tl?n<0||Yt<n?null:"end":n<0||Yt<n?"end":null,h=x===tl?Yt/2<n&&n<3*Yt/2?null:-su(n)+"em":Yt/2<n&&n<3*Yt/2?su(n)+"em":null,f=za(O.text)?v.getCustomizedVal(p,O.text,0,null,null,e,"targetLabel"):Hl(u,a,c,p,"targetLabel");t.text(f).style("display",null).attrs({"text-anchor":d,dy:h,transform:"translate("+i[0]+","+i[1]+")"})}})},dt.dial=function(){var A,P,T,_,E,L,M,z,D,I,R,j,H,B,F,W,V,N=!1,Y=dt.pie();function G(e){return e.each(function(e){var t=A.params;P=t.chartObj,E=t.commonPlotOptions,_=t.color,L=t.dataset,M=t.yaxiscolumnorder,P.systemConf;var a=e[0].plotoptions;z=L.getY(e[0].data[0][0],M),j=z<0;var i=P.defsLocation,r=t.labelQueue;I=P.axes.y.groups[0].scale,R=I.domain(),D=P.plotarea_approx;var n=hs(E=a?ga(E,a,!0):E,a,P,xi),o=n.enabled,l=n.easingType,s=N?o?200:0:n.duration,c=qe(this).data(function(e){var t=e[0].data[0];return e[0].data[0]=[t[0]],[e]}(e));c.selectAll(Rr+".dial").data();var u=E.levelMarker;W=E.innerRadius+" _ "+E.outerPadding+" _ "+E.maxRadius+" _ "+E.bandWidth+" _ "+u.bandWidth+" _ "+u.innerPadding+" _ "+u.outerPadding;var d,h,f,p=D.radius,g=Ea(u.strokeWidth,1),v=qa(u.cornerRadius,E.cornerRadius),y=qa(u.padAngle,E.padAngle),m=du(E,p);if(V=tt().endAngle(function(e){return I(e[1])}).cornerRadius(v).padAngle(y),za(u.bandWidth)||za(u.maxBandWidth)){var b=Ea(u.maxBandWidth,p),x=Math.min(mr(u.bandWidth,p,p-m),b);f=h=(p-m-x)/2,d=0===x?"hidden":null}else h=Mt(0,mr(u.innerPadding,p,0)),f=Mt(0,mr(u.outerPadding,p,0));V.innerRadius(m+h).outerRadius(p-f-.5*g).startAngle(function(e){return I(e[0])});var C=G.levelMarker=wd.createLevelsNColors(e,u,_,R),k=C.colors,w=sn(sn(c,"g",[1],".","class","levelmarkerSeries"),Rr,u.enabled?C.values:[]);w.attr("class",function(e,t){return"ZClevelmarker_"+t}).attr("transform","translate("+D.x+","+D.y+")").styles({stroke:function(e,t){return u.strokeColor||k[t]},"stroke-width":g,"stroke-opacity":u.strokeOpacity,"fill-opacity":u.fillOpacity,fill:function(e,t){var a=k[t],r=an(E.gradients,[p,p],a),n=r?tn.get(tn.svg_gradients,"svgGradientFill",r,{offset:"pie",chartObj:P}):null;return n?"url("+i+"#"+n+")":a},visibility:d}),N&&W!=H?w.transition().duration(s).ease(Ke).call(function(e){yv(e,V,[F,V.innerRadius()()],[B,V.outerRadius()()])}):w.attr("d",V),wd.handleEvents(P,w,u,"levelmarker",e),A.commonPlotOptions(E),Y.commonRendererProp(A),Y.chartRendered=!1,c.call(Y),T=Y.innerRadius();var S=sn(c,"g",[1],".","class","targetSeries");wd.targetMarker(S,D.actualRadius,D.innerRadius,P,!0),S.attr("transform","translate("+D.x+","+D.y+")");var O=E.needle;sn(c,Rr,O.show?[z]:[],".","class","dial").attr("d",wd.getNeedlePolygon(O,D,T)).styles({stroke:O.strokeColor||"black","stroke-width":O.strokeWidth,fill:O.fillColor||Qt}).transition().duration(s).ease(l).call(U),pt&&r.push({renderer:G,charttype:xi,chartObj:P,args:[e,0]})}),G}function U(e){var r,n,i,o,l=D.x,s=D.y,c=void 0!==E.baseValue?E.baseValue:0;e.attrTween("transform",function(e,t){o=N?$n(this).rotate:(n=j?R[1]:R[0],null!=c&&(n=j?zt(c,n):Mt(c,n)),uu(I(n))),r=zt(Mt(e,R[0]),R[1]),i=uu(I(r));var a=at(o,i);return function(e){return"translate("+l+","+s+") rotate("+a(e)+",0,0)"}})}return G.commonRendererProp=function(e){return arguments.length?(A=e,G):A},G.endFunctions=function(){H=W,B=V.outerRadius()(),F=V.innerRadius()(),N=G.chartRendered=!0},G.defaultMouseOutFunc=function(){if(P.systemConf.tooltip.enabled){var e=P.eventHandler.tooltipElement;e.hide(e.element)}},G},Gr.funnel=function(){return{weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",coneWidth:"100%",strokeColor:"transparent",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}}},dt.funnel=function(){var D,I,R,j,H,B,F,W,V,N,Y,G,U,X,Z,Q,q,K,$,J,ee,te,ae,re,ne,r,n,ie,oe,le,se,ce,ue,de,he,fe,pe,ge,ve,ye,me,be,xe,Ce,ke,we,Se=.3,Oe={},a=.375,Ae=1,Pe=!1,Te=0;function _e(e){e.each(function(i){Ce=D.params,I=Ce.chartObj,ce=Ce.commonPlotOptions,X=Ce.color,de=Ce.notesArray,le=Ce.yaxiscolumnorder,V=Ce.dataset,ue=I.systemConf;var a=Ce.labelQueue;xe=I.defsLocation,N=I.plotarea.width,U=I.plotarea.height,ke=!1,se=i[0].plotoptions;var e=pa.getValueOfPlotOptions(se,ce);ve=ue.legend.imagePallete||ll.hasPatternPallete(I),Oe.canOverlap=e("canOverlap"),fe=e("split"),q=e("threeDimension");var t=ce.emptyFunnel;he=ce.datalabels.padding;var r=I.datalabels.moduleExists&&Vs(ce.datalabels,I),n=Rn(I,0);ee=qa(ce.minPadding,q?4:1),te=qa(ce.maxPadding,10);var o=hs(ce,se,I,Ci),l=o.type,s=o.easingType,c=o.enabled,u=o.duration,d=c?200:0;pe=mr(e("outerPadding"),U,0)/2,F=e("stemHeight"),W=e("stemWidth"),me="width"===e("weighted"),be=e("weighted")===Qt,me&&(F=W=0,fe=!0),R=i=i[0].data[0],j=R.reduce(function(e,t,a){return e+(V.getY(t,le)&&!t.disabled?1:0)},0),B=j-1;var h=function(){var e=U-2*pe,t=.05*e,a=ze(e);return t=(t-R.length)/R.length,t=Mt(Ae,t),t=q?Oe.canOverlap?t+te/2:a/2-Te:0}();Oe.height=U-2*h-.01*U-2*pe;var f=e("coneWidth");if(f=mr(f,Oe.height,.95*Oe.height),Oe.width=zt(N,f),J=ze(Oe.height),Oe.gapHeight=!c||fe||Pe?J:l==Gi?J:0,(me||be)&&za(ce.maxSliceHeight)&&(Oe.height-=Mt(0,Oe.height-J*B-mr(ce.maxSliceHeight,Oe.height)*j)),r){var p=N*Se,g=N-Oe.width;g<p&&(he=Oe.datalabelPadding=5,Oe.width-=Mt(p-g,0))}F=mr(F,Oe.height,.2*Oe.height),W=mr(W,Oe.width,F*Oe.width/Oe.height)/2,H=Oe.height-F,K=.05*Oe.height,K=Mt(Ae,(K-R.length)/R.length),$=K=q?Oe.canOverlap?K+te/2:J/2-Te:0,_e.total=Y=R.reduce(function(e,t,a){return e+(R[a].disabled?0:Dt(V.getY(R[a],le)||0))},0),ye=Mt.apply(null,R.map(function(e,t){return R[t].disabled?0:Dt(V.getY(R[t],le))/Y})),oe=Je().domain(me?[0,ye]:[F,Oe.height]).range([Oe.width/2-W,0]),ie=Je().domain(me?[0,ye]:[F,Oe.height]).range([Oe.width/2+W,Oe.width]),G=Ee(R),ge=[Oe.width,Oe.height],we=_e.fillColorFunc=Dn(I,0,ge);var v=0==Ea(oo(se,ce,I,"enabled"),!0),y=v?null:oo(se,ce,I,"cursor")||Kt,m=qe(this);if((ae=sn(m,"g",[i],".","class","funnelgroup")).attr("transform","translate("+(N/2-Oe.width/2)+","+(K+2+pe)+")").styles({cursor:y,"stroke-opacity":e("strokeOpacity"),"stroke-width":e("strokeWidth")}),re=sn(ae,"g",[1],".","class","ellipsegroup"),ne=sn(ae,"g",[1],".","class","trapezoidgroup"),M(Z=sn(ne,Rr,R)),Z.attr("id",function(e,t){return"funnel"+t}).styles({"fill-opacity":ce.fillOpacity,fill:function(e,t){return we(t,e)},stroke:function(e,t){return n(t,e,ce.strokeColor)}}),M(Q=sn(re,Rr,q?R:[])),Q.attr("id",function(e,t){return"ellipse"+t}).styles({"fill-opacity":ce.fillOpacity,fill:function(e,t){return we(t,e,.5)},stroke:function(e,t){return n(t,e,ce.strokeColor,.5)}}),Co(I,Z,v),Co(I,Q,v),!v){function b(e,t){var a=z(e,t);I.eventHandler.handlers.mousemove.call(I.eventHandler,a),mv(e,a)}function x(e,t){var a=z(e,t);I.eventHandler.handlers.mouseout.call(I.eventHandler,a,t),mv(e,a)}function C(e,t){var a=z(e,t);I.eventHandler.handlers.click.call(I.eventHandler,a,e,0,t,_e),mv(e,a)}function k(e,t){var a=As?Tu(e,null):e,r=G[i.length-1-t].bottomLeft;r=[r[0]+(N/2-Oe.width/2),r[1]+(K+2+pe)];var n=z(e,t);n.coordinate=r,n.basedOn="plot",n.data=a,I.eventHandler.handlers.doubleclick.call(I.eventHandler,n,t,e),mv(e,n)}var w={target:"plot",touchleave:!0,chartObj:I},S={mousemove:b,mouseout:x,click:C,dblclick:k},O={singletouchmove:b,touchend:x,tap:C,dbltap:k};Mo(Z,S,O,w),Mo(Q,S,O,w)}var A=Oe.canOverlap?2*W/Oe.width*K:K+Te,P="M0,0L"+(Oe.width/2-W)+","+H+"L"+(Oe.width/2-W)+","+Oe.height+"A"+W+","+A+",0,0,0,"+(Oe.width/2+W)+","+Oe.height+"L"+(Oe.width/2+W)+","+H+"L"+Oe.width+",0A"+Oe.width/2+","+K+",0,0,0,0,0A"+Oe.width/2+","+K+",0,0,0,"+Oe.width+",0";if(sn(ae,Rr,!Pe&&t.show&&c?[1]:[],"#","id","emptyFunnel").attr("d",P).styles({stroke:t.color||"grey",fill:Qt}),function(e){var t;if(me)t=null;else{var a={name:"FunnelClipPath",id:I.id,d:e},r={chartObj:I};t=tn.get(tn.svg_clips,"polygon",a,r)}ae.attr("clip-path",t?"url("+xe+"#"+t+")":null)}(P),Pe)Z.transition().duration(d).ease(Ke).attr("d",function(e,t){return De(G[R.length-1-t])}),Q.transition().duration(d).ease(Ke).attr("d",function(e,t){return Ie(G[R.length-1-t])}),Me(i,d),L();else{Me(i,0);var T=0,_=0;Z.transition().duration(function(e,t){var a=V.getY(e,le);return l==Wi?e.disabled||!a?0:me||be?u/j:Dt(a)/Y*u:u}).delay(function(e,t){var a=V.getY(e,le);return T+=e.disabled||!a?0:me||be?u/j:Dt(a),(l==Wi?me||be?u-T:(Y-T)/Y*u:0)||0}).ease(s).attrTween("d",function(e,t){return Le(e,R.length-1-t,"funnel",l)}).on("end",function(e,t){_++}),T=0,Q.transition().duration(function(e,t){var a=V.getY(e,le);return l==Wi?e.disabled||!a?0:me||be?u/j:Dt(a)/Y*u:u}).delay(function(e,t){var a=V.getY(e,le);return T+=e.disabled||!a?0:me||be?u/j:Dt(a),(l==Wi?me||be?u-T:(Y-T)/Y*u:0)||0}).ease(s).attrTween("d",function(e,t){return Le(e,R.length-1-t,"ellipse",l)});var E=setInterval(function(){_==R.length&&(l!=Gi&&(Oe.gapHeight=J,G=Ee(R),Z.transition().duration(c?250:0).delay(50).ease(Ke).attr("d",function(e,t){return De(G[R.length-1-t])}),Q.transition().duration(c?250:0).delay(50).ease(Ke).attr("d",function(e,t){return Ie(G[R.length-1-t])})),L(),ae.selectAll(Rr+"#emptyFunnel").transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(E))},10)}function L(){_e.renderedTimer=setTimeout(function(){var e=function(c){var u=[],d=0,h=0;return c.forEach(function(e,t){var a=c[c.length-1-t],r=V.getY(a,le),n=a.disabled,i=h=(h=(n?0:me||be?r?1/j:0:Dt(r)/Y)*(Oe.height-(j-1)*Oe.gapHeight)/2)||0;h=d+h;var o=r/Y;o=o||0;var l=me?oe(o):Oe.height-h>=H?Oe.width/2-W:oe(h),s=me?ie(o):Oe.height-h>=H?Oe.width/2+W:ie(h);u.push({rightx:s+he,leftx:l-he,y:Dt(Oe.height-h),y0:Dt(Oe.height-h+i)}),h+=i,d=!r||n?h:h+Oe.gapHeight}),u}(R);if(pt){var t=[I.seriesdata,0,R,j,K+2+pe,Y,Oe,e];a.push({renderer:_e,charttype:Ci,chartObj:I,args:t}),a.push({renderer:_e,charttype:"funnelInnerLabels",chartObj:I,args:t})}As&&(de=As.preprocessAnnotations(I.seriesdata,0,function(e,t,a){return[G[G.length-1-a].bottomLeft[0]+(N/2-Oe.width/2),G[G.length-1-a].bottomLeft[1]+(K+2+pe)]},de,I,Ce)),_e.chartRendered=Pe=!0},c?Pe?d:300:0)}function M(e){e._groups[0].reverse(),e.data(R)}function z(e,t){var a=lo(nt());return{renderer:_e,seriesIndex:0,subSeriesIndex:0,itemIndex:t,color:X[t%X.length],coordinates:[a.pageX,a.pageY],element:this,data:e,selected:e.selected,_key:"ZC_"+I.id+"_0_0_"+t}}})}function Ee(l){var s=0,c=Oe.height,u=0,d=0;return G=[],W,l.forEach(function(e,t){var a=l[l.length-1-t],r=V.getY(a,le),n=a.disabled;d=Y?(n?0:me||be?r?1/j:0:Dt(r)/Y)*(Oe.height-(j-1)*Oe.gapHeight):0,d=u+(d=d||0);var i=r/Y;i=i||0;var o={};(s+=n?0:r)!=Y||0!=r&&!n?me?(o.bottomLeft=[oe(i),Oe.height-d],o.topLeft=[oe(i),c],o.middleLeft=[oe(i),Oe.height-d],o.bottomRight=[ie(i),Oe.height-d],o.topRight=[ie(i),c],o.middleRight=[ie(i),Oe.height-d]):(o.bottomLeft=[Oe.height-d>=H?Oe.width/2-W:oe(d),Oe.height-d],o.topLeft=[H<=c?Oe.width/2-W:oe(u),c],o.middleLeft=[H<=c?Oe.width/2-W:o.bottomLeft[0],H<=c&&Oe.height-d<=H?H:Oe.height-d],o.bottomRight=[Oe.height-d>=H?Oe.width/2+W:ie(d),Oe.height-d],o.topRight=[H<=c?Oe.width/2+W:ie(u),c],o.middleRight=[H<=c?Oe.width/2+W:o.bottomRight[0],H<=c&&Oe.height-d<=H?H:Oe.height-d]):(o.topLeft=o.bottomLeft=o.middleLeft=[oe(me?ye:Oe.height),0],o.topRight=o.bottomRight=o.middleRight=[ie(me?ye:Oe.height),0]),G.push(o),c=!r||n?Oe.height-d:Oe.height-d-Oe.gapHeight,u=!r||n?d:d+Oe.gapHeight}),G}function Le(e,t,a,r){var n=function(e,t){var a=xa(G[e==Vi?0:t]);e===Gi?a.topLeft[0]=a.middleLeft[0]=a.bottomLeft[0]=a.topRight[0]=a.middleRight[0]=a.bottomRight[0]=Oe.width/2:(a.middleLeft=a.bottomLeft=a.topLeft,a.middleRight=a.bottomRight=a.topRight);return a}(r,t),i=G[t],o="funnel"==a?at(De(n),De(i)):at(Ie(n),Ie(i));return function(e){return o(e)}}function Me(n,i){Q.each(function(e,t){var a=n[t].disabled||!V.getY(R[t],le),r=a?i:0;r?setTimeout(function(){o(t,a)},r):o(t,a)})}function o(e,t){var a=t?Qt:null;re.selectAll("#ellipse"+e).style("display",a),ne.selectAll("#funnel"+e).style("display",a)}function ze(e){var t=ce.padding;return za(t)?Ta(t,e,B,I):zt(te,Mt(ee,e*a/B))}function De(e){var t=(e.topRight[0]-e.topLeft[0])/2,a=(e.bottomRight[0]-e.bottomLeft[0])/2,r=Oe.canOverlap?2*t/Oe.width*K:$,n=Oe.canOverlap?2*a/Oe.width*K:$;return"M"+e.topLeft[0]+" "+e.topLeft[1]+" A"+t+" "+r+" 0 0 0 "+e.topRight[0]+" "+e.topRight[1]+" L"+e.middleRight[0]+" "+e.middleRight[1]+" L"+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+a+" "+n+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]+" L"+e.middleLeft[0]+" "+e.middleLeft[1]+"Z"}function Ie(e){var t=(e.bottomRight[0]-e.bottomLeft[0])/2,a=Oe.canOverlap?2*t/Oe.width*K+Te:$;return"M"+e.bottomLeft[0]+" "+e.bottomLeft[1]+" A"+t+" "+a+" 0 0 1 "+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+t+" "+(Oe.canOverlap?a:a+Te)+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]}function i(){n=n||I.staticPaneSVG.selectAll("g.link_0"),r=r||I.staticPaneSVG.selectAll("g.label_0"),ke=!0}return _e.commonRendererProp=function(e){return arguments.length?(D=e,_e):D},_e.defaultMouseOverFunc=function(e,t,a){ke||i(),ve?(Z.style("opacity",function(e,t){return t===a?null:.4}),Q.style("opacity",function(e,t){return t===a?null:.4})):(Z.style("fill",function(e,t){return we(t,e,t===a?.6:null)}),Q.style("fill",function(e,t){return we(t,e,t===a?1:.5)})),r.selectAll("text").style("text-shadow",null),n.selectAll(Rr).style("stroke-width",null),r.selectAll("#lbl0_0_"+(R.length-1-a)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),n.selectAll("#link0_0_"+(R.length-1-a)).style("stroke-width",1)},_e.defaultMouseOutFunc=function(e,t){ke||i(),ve?(Z.style("opacity",null),Q.style("opacity",null)):(Z.style("fill",function(e,t){return we(t,e)}),Q.style("fill",function(e,t){return we(t,e,.5)})),r.selectAll("text").style("text-shadow",null),n.selectAll(Rr).style("stroke-width",null)},_e},Gr.gantt=function(){return{outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}}},dt.ganttHelpers=function(){},Be.render.ganttHelpers=function(){},dt.ganttHelpers.showDependencies=function(o,e,t,l){var r=o.commonRendererProp().params,a=o.commonOption,n=r.chartObj,i=(n.plotarea,r.dataset),s=r.axisrotated,c=r.commonPlotOptions,u=a.yaxiscolumnorder,d=(r.color,c.dependency),h=!0===d.enabled,f=null,p=t.selectAll("g.dependencySeries").data(h?[e]:[]),g=p.enter().insert("g",":first-child").attr("class","dependencySeries").merge(p);if(g.exit().remove(),h&&za(d.sourceIndex)&&za(d.targetIndex)&&(f=function(e,r,n){var i=[];if(e.forEach(function(t){var a=t[r];e.forEach(function(e){e!==t&&za(a)&&Ba(a)&&-1!==a.indexOf(e[n])&&i.push({source:t,target:e})})}),i.length)return i}(e,+d.sourceIndex,+d.targetIndex)),f){var v=d.marker,y=d.link,m=za(y.padding)?y.padding:1,b=za(v.padding)?v.padding:m;b=zt(m,b);var x=sn(g,"g",[1],".","class","links"),C=sn(g,"g",[1],".","class","symbol");sn(x,"path",f,".","class","link").attr("d",function(e,t){var a=Ov(e,d,o,l);return function(r,n,i,o,l,e){r=r.toUpperCase();var t=e.chartObj,s=e.axisrotated,c=t.systemConf.chart.axes.xaxis.reversed,u=null,d=null,h=null,f=function(e,t,a,r,n){var i=!1;switch(e){case"SS":case"EE":i=!0;break;case"SE":i=t?a.x>r.x+r.width:a.y+a.height<r.y;break;case"ES":i=t?a.x+a.width<r.x-2*n:a.y>r.y+r.height}return!i}(r,s,n,i,o);return S().x(function(e,t){switch(t){case 0:case 1:case 2:if(h=n,0==t)"SS"==r||"SE"==r?u=s?h.x:h.x+h.width/2:"EE"!=r&&"ES"!=r||(u=s?h.x+h.width:h.x+h.width/2);else if(1==t)"SS"==r||"SE"==r?u=s?h.x-o:u:"EE"!=r&&"ES"!=r||(u=s?h.x+h.width+o:u);else{var a;"SS"==r?(a=(a=n.x-i.x)<0?0:a,u=s?h.x-a-o:u):"EE"==r?(a=0<(a=n.x+n.width-(i.x+i.width))?0:a,u=s?h.x+h.width+o-a:u):"SE"==r?s?(u=h.x-o,d=f?h.y+h.height:i.y):u=c?u-h.width:u+h.width:"ES"==r&&(s?(u=h.x+o+h.width,d=f?h.y+h.height:i.y):u=c?u-h.width:u+h.width)}break;default:s&&(d=null),h=i,3==t?(s&&f&&(d=n.y+n.height),"SS"==r||"EE"==r?u=s?u:h.x+h.width/2:"SE"==r?u=s?h.x+h.width+o:u:"ES"==r&&(u=s?h.x-o:u)):4==t?"SE"==r?u=s?h.x+h.width+o:h.x+h.width/2:"ES"==r&&(u=s?u:h.x+h.width/2):"SS"==r||"ES"==r?u=s?h.x-l:u:"EE"!=r&&"SE"!=r||(u=s?h.x+h.width+l:u)}return u}).y(function(e,t){return s?(d||h.y)+h.height/2:(0==t?"SS"==r||"SE"==r?d=n.y+n.height:"EE"!=r&&"ES"!=r||(d=n.y):1==t?"SS"==r||"SE"==r?d+=o:"EE"!=r&&"ES"!=r||(d=n.y-o):2==t?"SS"==r?d=n.y+n.height<i.y+i.height?i.y+i.height+o:d:"EE"==r&&(d=n.y>i.y?i.y-o:d):3==t?"SE"==r?d=f?i.y-o:d:"ES"==r&&(d=f?i.y+i.height+o:d):4==t?d+=0:"SS"==r||"ES"==r?d=i.y+i.height+l:"EE"!=r&&"SE"!=r||(d=i.y-l),d)}).curve($e("linear"))}(a.type,a.end,a.start,m,b,r)(new Array(6))}).attr("stroke",function(e){return i.getY(e.source,u)[0]<i.getY(e.target,u)[1]?y.errorStyle:y.strokeColor}).attr("stroke-width",y.strokeWidth).attr("fill","none");var k=sn(C,"g",!0===d.marker.enabled?f:[],".","class","arrow");d.marker.enabled&&k.each(function(e,t){v.symbol;var i,a=qe(this);a.attr("transform",function(e){var t,a,r=Ov(e,d,o,l),n=r.type;return"SS"==n||"ES"==n?(t=s?r.start.x-b:r.start.x+r.start.width/2,a=s?r.start.y+r.start.height/2:r.start.y+r.start.height+b,i=s?"triangle-right":"triangle-up"):"EE"!=n&&"SE"!=n||(t=s?r.start.x+r.start.width+b:r.start.x+r.start.width/2,a=s?r.start.y+r.start.height/2:r.start.y-b,i=s?"triangle-left":"triangle-down"),"translate("+t+","+a+")"}),eo(a,null,v,{symbolSize:{inner:.4,outer:.7},color:null,symbol:i},n)})}},dt.ganttHelpers.addMarker=function(e,t,l,s,c,u,d){var h=l.commonRendererProp().params,f=l.commonOption,p=h.chartObj,a=p.plotarea,g=h.dataset,v=h.axisrotated,y=h.color,r=f.levelMarkerWidth,n=f.charttype,m="bullet"==n,b="gantt"==n,x="boxplot"==n,C="whiskers"==c.symbol,k=m?h.xscale.bandwidth():r,w=l.bandwidth1(),i=c.size,S=za(i),O=S?i:r-2*Ea(c.padding,f.padding/2),o=sn(e,"g",[t],".","class","markers"+d,null,function(e){return[g.getX(e)]});S&&"string"==typeof O&&-1<O.indexOf("%")&&(O=parseFloat(O)/100*k/10);var A=qa(c.strokeWidth,1);o.attrs({class:"markers"+d,transform:"translate("+a.left+","+a.top+")","stroke-width":A,"stroke-dasharray":on(c.dashStyle,Ea(c.outerStrokeWidth,1)),"stroke-linecap":ln(c.lineCap,c.dashStyle),fill:c.color,stroke:c.color});var P=sn(o,"g",t,null,null,null,null,function(e){return g.getX(e)});P.enter().append("g");var T="line"===c.symbol?{inner:0,outer:1}:{inner:.6,outer:1};P.each(function(e,t){var a,r,n=qe(this),i=u?p.seriesColor[t%p.seriesColor.length]:y;if(n.attrs({transform:function(e,t){var a=0,r=0;if(b){var n=dt.ganttHelpers.getMarkerPosition(e,s,t,l);return r=0===d?(a=n.x+n.width/2,n.y-10*c.size/2):(a=n.x+n.width/2,n.y+n.height+10*c.size/2),"translate("+(v?r:a)+","+(v?a:r)+")"}return a=w(g.getX(e))+k/2,a=x?a+f.bandwidth2(f.barDatasetIndex)+f.padding:a,r=C?h.yscale(e[c.dataindex][d]):h.yscale(e[c.dataindex]),null==e[c.dataindex]?null:"translate("+(v?r:a)+","+(v?a:r)+") rotate("+(v?90:0)+")"}}).style("display",function(e){return null==e[c.dataindex]&&m?"none":null}),c.size=S?m?zt(O,k/10):O:O/10,x&&C){var o=function(e,t,a,r,n){return t(e[r][n])-t(e[a][n])}(e,h.yscale,c.dataindex,g.yidx(f.yaxiscolumnorder),d);r={symbol:"vertical-line-z",size:o=v?-o:o}}jn(g.getClr(e),p)||((a=_extends({},c)).outerStrokeColor="transparent"),eo(n,null,a||c,{symbolSize:T,color:b?i:null,custom:r},p)}),c.size=i,b&&(l.markerProperties={subseriesIndex:s})},dt.ganttHelpers.getMarkerPosition=function(e,t,a,r){var n=r.commonOption;return{x:r.getParamValue(n.axisrotated?"y":"x",e,t,a,n),y:r.getParamValue(n.axisrotated?"x":"y",e,t,a,n),width:r.getParamValue(n.axisrotated?"height":"width",e,t,a,n),height:r.getParamValue(n.axisrotated?"width":"height",e,t,a,n)}};Be.render.ganttHelpers;function Pv(e,t){this.chart=e,this.renderer=t}Ja(Pv,lv);var Tv=Pv.prototype;function _v(e,t,a,r,n,i){this.layer=e,this.utils=t,this.layerContainer=a,this.styles=r,this.geoMap=n,this.useMesh=i,this.initialize()}function Ev(e,t){this.x=e,this.y=t}function Lv(e,t){this.longitude=e,this.latitude=t}function Mv(e,t,a,r){this.text=e,this.latLong=t,this.styles=a,this.geoMap=r}function zv(e){this.geoMap=e,this.initialize()}function Dv(e){this.geoMap=e,this.initialize()}function Iv(e){this.geoMap=e,this.initialize()}function Rv(e){this.geoMap=e,this.initialize()}Tv.data=function(t){var a=this.renderer.commonRendererProp().params,r=this.chart;return function(){r.cache.data[t._key]||(r.cache.data[t._key]={});var e=r.cache.data[t._key];return e.rect=e.rect||xo(r,t,a.xscale,a.yscale,a.yaxiscolumnorder),t._x=e.rect.x,t._y=e.rect.y,t._width=e.rect.width,t._height=e.rect.height,e._uid=t._uid=r.dataset.getX(t),e._visible=t._visible=Ao(r,t),t}},Tv.options=function(e){var t=this.chart,a=this.renderer,r=a.commonRendererProp().params,n=r.gvp("borderRadius"),i=Hn(this.chart,Wn(r.commonPlotOptions,this.chart)?e.itemIndex:e.seriesIndex,e,e.seriesIndex);return{radius:t.dataObject.getTransRectValue("radius",null,null,null,a.commonOption,n),color:i}},Tv.renderingContext=function(){return Iu.get("bar").call(this,this.chart)},Tv.path=function(e,t){var a,r=this.renderer.commonRendererProp().params,n=t.translate.call(this),i=n[0],o=n[1],l=r.commonPlotOptions.symbol&&Ji(r.commonPlotOptions.symbol);this.chart.systemConf.chart.axes.yaxis[e.yaxisOrder||0].reversed;l?(a=l(zt(e._width,e._height)),i+=e._x+e._width/2,o+=e._y+e._height/2):a=dn(e._x,e._y,e._x+e._width,e._y+e._height,this.options(e).radius,$t,this.chart.axes.rotated,!0);var s=t.context.call(this),c=sn(s,"path",[1],".","class","highlight"+e.seriesIndex+e.subSeriesIndex);return s.style("display",""),c.style("display","").attr("d",a).attr("transform","translate("+i+","+o+")"),c},ev.heatmap=function(){var x;function C(c,e,u,r){var t=x.params,d=t.chartObj,h=t.xscale,f=t.yscale,p=t.datasetIndex,g=t.commonPlotOptions,a=t.labelQueue,v=t.yaxiscolumnorder,n=e.plotoptions,i=(t.gvp=pa.getValueOfPlotOptions(n,g),d.dataset.getDataType("y",v)),o=h.domain(),l=i==Sn?f.domain():null,y=g.symbol&&Ji(g.symbol),m=d.dataObject.getTransRectValue("radius",null,null,null,null,g.borderRadius),b=(C.fillColorFunc=Dn(d,p),Rn(d,p)),s=Pn.isQuantileColorScale(d);return e.disabled||(C.seriesdataAfterUpdate=[],e.data.forEach(function(e,t){var a=d.dataObject.updateSeriesdatabyCategories(wa(e),o,l,v);C.seriesdataAfterUpdate[t]=a,s&&za(r)&&(a=ll.filterSelectionByColor(a,!0,r,d)),a.forEach(function(n,e){function t(e,t){if(e.save(),e.translate(i+l/2,o+s/2),e.beginPath(),e.lineWidth=g.strokeWidth,e.strokeStyle=b(p,n,g.strokeColor,$t,g.strokeOpacity),e.fillStyle=t,y){var a=zt(l,s)/2;if("circle"===g.symbol)e.arc(0,0,a,0,2*Yt);else{var r=y(2*a);rc.drawPath(e,r)}}else rc.roundedRect(e,-l/2,-s/2,l,s,m);e.fill(),e.stroke(),e.closePath(),e.restore()}var a=xo(d,n,h,f,v),i=a.x,o=a.y,l=a.width,s=a.height;if(d.imagePallete&&jn(d.dataset.getClr(n),d))tn.canvas_patterns.imageFill({x:i,y:o,context:c,name:Hn(d,p,n,p)},t);else{var r=za(u)?u:C.fillColorFunc(p,n,null,null,g.fillOpacity,[l,s]);t(c,r)}})})),pt&&a.push({renderer:C,charttype:"hierarchy",chartObj:d,args:[e,p,null,null,null,e.disabled?[]:z(C.seriesdataAfterUpdate)]}),C.chartRendered=!0,C}return C.getHighlighter=function(e,t){return C.highlighter||(C.highlighter=new Pv(e,C)),C.highlighter},C.commonRendererProp=function(e){return arguments.length?(x=e,C):x},C},Gr.heatmap=function(){return{strokeColor:"white",animation:{},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:100},radial:{radius:100}}}}},dt.heatmap=function(){var T,_=!1;function E(e){return e.each(function(e){var t=T.params,n=t.chartObj,i=t.xscale,o=t.yscale,l=t.datasetIndex,s=t.commonPlotOptions,a=t.labelQueue,c=t.yaxiscolumnorder,u=e[l],r=u.data,d=u.plotoptions,h=(t.gvp=pa.getValueOfPlotOptions(d,s),hs(s,null,n,Si)),f=h.enabled,p=h.type,g=h.easingType,v=_?f?200:0:h.duration,y=p===Bi||p===Ri,m=_?0:y?function(){return Nt()*(3*v/5)}:0,b=_?v:y?2*v/5:v,x=E.fillColorFunc=Dn(n,l),C=Rn(n,l),k=n.dataObject.getTransRectValue("radius",null,null,null,null,s.borderRadius),w=s.symbol&&Ji(s.symbol),S=i.domain(),O=o.domain(),A=Pn.isQuantileColorScale(n),P=sn(qe(this),"g",[1],".","class","heatmapseries_"+l);E.seriesdataAfterUpdate=[],r.forEach(function(e,t){var a=E.seriesdataAfterUpdate[t]=n.dataObject.updateSeriesdatabyCategories(wa(e),S,O,c),r=sn(sn(P,"g",!A&&u.disabled?[]:[1],".","class","subseries_"+t),Rr,a);r.styles({fill:function(e){var t=xo(n,e,i,o,c);return x(l,e,null,null,null,[t.width,t.height])},"fill-opacity":s.fillOpacity,stroke:function(e){return C(l,e,s.strokeColor)},"stroke-width":s.strokeWidth,"stroke-opacity":s.strokeOpacity}).attr("transform",function(e){var t=xo(n,e,i,o,c);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=xo(n,e,i,o,c);return w?w(zt(t.width,t.height)):dn(-t.width/2,-t.height/2,t.width,t.height,k)}),_||(ys(r),r.attr("opacity",0).transition().delay(m).duration(b).ease(g).on("start",function(){qe(this).attr("opacity",null)}).call(y?gs:function(){}).call(p===Hi||p===Bi?vs:p===ji||p===Ri?gs:ps))}),pt&&a.push({renderer:E,charttype:"hierarchy",chartObj:n,args:[u,l,null,null,null,z(E.seriesdataAfterUpdate)]}),E.renderedTimer=setTimeout(function(){E.chartRendered=_=!0},v+17)}),E}return E.getHighlighter=function(e,t){return E.highlighter||(E.highlighter=new Pv(e,E)),E.highlighter},E.commonRendererProp=function(e){return arguments.length?(T=e,E):T},E},Gr.map=function(){return{allAreas:!0,renderingMode:window.renderMode||"svg",fillColor:"#dddddd",strokeColor:"#444",strokeWidth:.6,gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}},globe:{strokeWidth:1.5},labels:{strokeWidth:1.5},extent:{top:10,right:10,bottom:10,left:10},layerName:"source",useMeshOutline:!0,textStrokeWidth:2,animation:{enabled:!0,type:"fade",duration:500,easingType:"cubic"}}},_v.GEO_FORMATS=H(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection","Topology"]),_v.getMapFeatures=function(e){return"FeatureCollection"===e.type?e.features:rr(e)},_v.prototype.getStyle=function(e,t,a){var r=this,n=r.styles||{},i=e.styles||{},o=e.properties||{},l=qa(n[t],i[t],o[t],r.defaultStyles[t]);if("function"==typeof l)return l.call(this,e,l);if(a)if(r._gradient)l=r._gradient;else{var s=qa(n.gradients,i.gradients,o.gradients,{});if("linear"===s.type||"radial"===s.type){var c=qg.getFeatureGradientBBox(e,s.type,r.utils.geoPath);l=In(s,[c.width,c.height],r.getStyle(e,"fillColor"),r.renderingMode,r.fillOpacity,"area",null,r.geoMap),e.transform={x:c.x,y:c.y},r.isCanvasMode||"linear"!==s.type||(r._gradient=l)}}else"dashStyle"===t&&za(l)&&(l=on(l,r.getStyle("strokeWidth")));return l},_v.prototype.initialize=function(){var e=this.layerContainer.isD3Selection?"svg":"canvas";this.defaultStyles={fillColor:"transparent",strokeColor:"#333",strokeWidth:.6,dashStyle:null},this.renderingMode=e,this.isCanvasMode=!0!==this.layerContainer.isD3Selection,this.renderingModeCapitialized=lr(e),this.paintLayer()},_v.prototype.update=function(e){e&&(this.layer=e),this.paintLayer(!0)},_v.prototype.paintLayer=function(e){this["paint"+this.renderingModeCapitialized+"Layer"](e)},_v.prototype.paintSvgLayer=function(e){function t(e){e.attrs({stroke:function(e){return a.getStyle(e,"strokeColor")},"stroke-width":function(e){return a.getStyle(e,"strokeWidth")},"stroke-dasharray":function(e){return a.getStyle(e,"dashStyle")},"stroke-opacity":function(e){return a.getStyle(e,"strokeOpacity")}})}var a=this,r=_v.getMapFeatures(a.layer),n=xn("path",".map-feature",_v.getMapFeatures(r),a.layerContainer).attrs({fill:function(e){return a.getStyle(e,"fillColor",!0)},"fill-opacity":function(e){return a.getStyle(e,"fillOpacity")||1},d:a.utils.geoPath});if(a.useMesh&&a.layer.length){var i=a.geoMap.dataObject.getFeatureMesh(_v.getMapFeatures(a.layer));a.mesh=n=xn("path",".map-feature-outline",[r[0]],a.layerContainer).attrs({fill:"none",d:a.utils.geoPath(i)}),n.raise(),t(n)}else a.mesh&&a.mesh.remove(),t(n)},_v.prototype.paintCanvasLayer=function(e){var a=this,r=a.layerContainer,t=_v.getMapFeatures(a.layer);if(a.utils.geoPath.context(r),Ka(t,function(e){r.save(),r.fillStyle=a.getStyle(e,"fillColor",!0),r.strokeStyle=a.getStyle(e,"strokeColor"),r.lineWidth=a.getStyle(e,"strokeWidth");var t=a.getStyle(e,"dashStyle");t&&za(r.setLineDash)&&r.setLineDash(t),r.beginPath(),a.utils.geoPath(e),e.transform&&r.translate(e.transform.x,e.transform.y),r.fill(),a.useMesh||r.stroke(),r.closePath(),r.restore()}),a.useMesh&&t.length){var n=a.geoMap.dataObject.getFeatureMesh(_v.getMapFeatures(a.layer));if(!n)return;r.save(),r.fillStyle=a.getStyle(t[0],"fillColor",!0),r.strokeStyle=a.getStyle(t[0],"strokeColor"),r.lineWidth=a.getStyle(t[0],"strokeWidth");var i=a.getStyle(n,"dashStyle");i&&za(r.setLineDash)&&r.setLineDash(i),r.beginPath(),a.utils.geoPath(n),r.stroke(),r.closePath(),r.restore()}},_v.prototype.destroy=function(){var a=this;a.update([]),Ka(a,function(e,t){a[t]=null,delete a[t]})},Ev.prototype.toJSON=function(){return{x:this.x,y:this.y}},Ev.prototype.toArray=function(){return[this.x,this.y]},Lv.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},Lv.prototype.toArray=function(){return[this.longitude,this.latitude]},Lv.prototype.toXY=function(e){var t=qg.toXY(e,this.longitude,this.latitude)||[null,null];return new Ev(t[0],t[1])},Ev.prototype.toLatLong=function(e){var t=qg.toLatLong(e,this.x,this.y)||[null,null];return new Lv(t[0],t[1])},Mv.prototype.getXY=function(){var e=this._coordinates;return e=e||(this._coordinates=this.latLong.toXY(this.geoMap))},Mv.prototype.getDimension=function(){var e=this.styles,t=this._dimension;return t=t||(this._dimension={width:pa.fontUtils.getTextWidth(this.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight),height:pa.fontUtils.getTextHeight(this.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight)})},Mv.prototype.getBBox=function(){var e=this._bbox;if(!e){var t=this.getXY(),a=this.getDimension();e=this._bbox={x:t.x-a.width/2-2.5,y:t.y-a.height/2-2.5,width:a.width+2.5,height:a.height+2.5}}return e},Mv.prototype.overlapsWith=function(e){var t=this.getBBox(),a=e.getBBox();return t.x<a.x+a.width&&t.x+t.width>a.x&&t.y<a.y+a.height&&t.height+t.y>a.y},Mv.prototype.insideRect=function(e){var t=this.getBBox();return t.x+t.width<e.x+e.width&&t.x>e.x&&t.y>e.y&&t.y+t.height<e.y+e.height},Mv.prototype.clearCache=function(){this._bbox=this._coordinates=this._dimension=null},zv.prototype.initialize=function(){var n=this.geoMap,i=n.systemConf.map.labels||{},o=this.geoLabelStyles=Object.create(i),l=this.labels=[],s={x:0,y:0,width:n.plotarea.width,height:n.plotarea.height};!0===o.show&&(o.fontFamily=kf(i,n),o.fontSize=Cf(i,n),o.fontWeight=i.fontWeight||"normal",o.fontStyle=i.fontStyle||"normal",o.fontColor=i.fontColor||"#333",o.textShadow=i.textShadow,o.strokeColor=i.strokeColor,o.strokeWidth=i.strokeWidth,o.type="background",!0===n.systemConf.map.allAreas&&n.dataObject.userUnmatchedMapFeatures.each(function(e,t){var a=e.properties,r=Ta(!0,i.showAs,e,n);!function(t){t.insideRect(s)&&!l.some(function(e){return t.overlapsWith(e)})&&l.push(t)}(new Mv(qa(a[r],r,a.name),new Lv(a.longitude,a.latitude),o,n))})),this.render()},zv.prototype.render=function(e){this.geoMap;this.geoMap.geo.isCanvasMode?this.renderCanvasLabel(e):this.renderSvgLabel(e)},zv.prototype.renderCanvasLabel=function(){var o=this.geoMap.geo.geoLabelLayer,l={};this.labels.forEach(function(e){var t=e.styles,a=qa(e.fontColor,t.fontColor),r=t.strokeColor||Ga(a),n=e.getXY();if(za(n.x)&&za(n.y)){if(o.save(),t.textShadow&&!za(l[e.type])&&(l[e.type]=Id.parseTextShadow(t.textShadow)),l[e.type]){var i=l[e.type];za(i)&&(o.shadowOffsetX=i[0],o.shadowOffsetY=i[1],o.shadowBlur=i[2],o.shadowColor=i[3])}o.textAlign="center",o.textBaseline="middle",o.fillStyle=a,o.strokeStyle=r,o.font=function(e,t,a,r){return e+" "+t+" "+a+"px "+r}(t.fontStyle,t.fontWeight,t.fontSize,t.fontFamily),0<t.strokeWidth&&(o.lineWidth=t.strokeWidth,o.strokeText(e.text,n.x,n.y)),o.fillText(e.text,n.x,n.y),o.restore()}})},zv.prototype.renderSvgLabel=function(){var e=this.geoMap.geo.geoLabelLayer;this.labelElements=xn("text",".geo-labels",this.labels,e).each(function(e){var t=qe(this),a=e.getXY(),r=e.styles,n=qa(e.fontColor,r.fontColor),i=r.strokeColor||Ga(n);za(a.x)&&za(a.y)&&(t.attrs({"font-family":r.fontFamily,"font-size":r.fontSize,"font-style":r.fontStyle,"font-weight":r.fontWeight,"text-anchor":"middle","dominant-baseline":"middle",transform:"translate("+a.x+","+a.y+")"}),r.textShadow&&t.style("text-shadow",r.textShadow),0<r.strokeWidth&&xn("tspan",".stroke-text",[1],t).text(e.text).attrs({stroke:i,"stroke-width":r.strokeWidth,x:0,y:0}),xn("tspan",".fill-text",[1],t).text(e.text).attrs({fill:n,x:0,y:0}))})},zv.prototype.update=function(){this.geoMap;this.labels.forEach(function(e){e.clearCache()}),this.initialize(!0)},Dv.prototype.initialize=function(){var l,s=this,c=s.geoMap,e=c.geo,u=c.dataset,t=c.seriesdata,a=c.systemConf.map,r=H(a.excludeAreas||[]),n=H(a.includeAreas||[]),i=s.mapFeatures=e.defaultLayer.layerGeojson.features,o=s.joinByKey=u.getMapByKey(),d=s.hasLatLongJoinBy=u.latLongJoinByKeys.has(o),h=d?"zc-key":o,f=s.mapFeaturesHashed=Dv.helpers.hashFeaturesByProperty(i,h,n,r,!0),p=s.userDataHashed=$(),g=s.userUnmatchedMapFeatures=$(),v=s.userMapFeatures=$(),y=s.userUnmatchedData=H();s.totalDataCount=0,s.extents=$(),s.hasPointChart=!1,s.isCombinationalChart=H(),s.flattenPoints=l=$(),s.hasHeatmap=s.hasBubblePie=s.hasPointChart=!1,s.encodes={},s.markerSize={},s.processedseriesData=t,c.isGeoMap=!0,c.hasColorScale=Pn.isQuantileColorScale(c),s.hasZaxis=za(u.zidx)&&lt.zaxis.some(function(e){return s.containsChartType(e)});var m=[];Ka(t,function(e,r){Dv.helpers.convertTo3DArray(e);var t=c.chartTypes[r];s.isCombinationalChart.add(t.name),e.disabled||(s.hasHeatmap||Ne.geoheatmap!==t.value||(s.hasHeatmap=s.containsChartType("geoheatmap")),s.hasBubblePie||Ne.geobubblepie!==t.value||(s.hasBubblePie=!0),s.isBubbleEnabled=s.isBubbleEnabled||uo(t.value),s.hasPointChart||Ne.geoheatmap===t.value||(s.hasPointChart=!0),Ka(e.data,function(e,a){Ka(e,function(e,t){!function(e,t,a,r){var n=u.getGeo(e),i=c.chartTypes[t].name,o=l.get(i);e.seriesIndex=t,e.subSeriesIndex=a,e.itemIndex=r,za(o)||(o=[],l.set(i,o)),o.push(e),d&&!s.isValidPoint(e)||(f.has(n)?(v.set(n,f.get(n)),p.has(n)?p.get(n).push(e):p.set(n,[e]),s.totalDataCount++):d?s.totalDataCount++:y.add(n))}(e,r,a,t)}),s.hasZaxis&&(s.saveEncode("z",0,r),m.push(oe(e,function(e){return u.getZ(e)})))}))}),l.each(function(e,t){l.set(t,e.filter(function(e){if(s.isValidPoint(e))return e}))}),s.hasZaxis&&s.extents.set("z",oe(z(m))),d?s.userUnmatchedMapFeatures=f:f.keys().forEach(function(e){v.has(e)||r.has(e)||g.set(e,f.get(e))}),s.hasBubblePie&&(s.data=c.systemConf,s.chartObj=c,s.dataset=u,s.processedseriesData=c.seriesdata,s.bubblepieData=s.processBubblePieData(Ne.geobubblepie)),s.isCombinationalChart=1<s.isCombinationalChart.values().length,s.userMapFeaturesArray=v.values(),s.totalnoofdatas=s.totalDataCount},Dv.prototype.getFeatureMesh=function(e){var a=H(),t=this.geoMap.geo.defaultLayer.layerOriginal,r=null,n=this.geoMap.systemConf.map.layerName,i=this.hasLatLongJoinBy?"zc-key":this.joinByKey;return"Topology"===t.type&&(e.forEach(function(e){e.properties&&e.properties[i]&&a.add(e.properties[i])}),r=J.mesh(t,t.objects[n],function(e,t){return a.has(e.properties[i])})),r},Dv.prototype.getAxisRotated=function(){return!1},Dv.prototype.containsChartType=function(t){return this.geoMap.chartTypes.some(function(e){return e.name===t||e.value===t})},Dv.prototype.getXYPoint=function(e){return this.getLatLonPoint(e).toXY(this.geoMap)},Dv.prototype.getFeatureByPoint=function(e){var t=this.userMapFeatures,a=this.geoMap.dataset.getGeo(e);return t.has(a)?t.get(a):null},Dv.prototype.getLatLonPoint=function(e){var t=this.geoMap.dataset,a=this.userMapFeatures,r=t.getGeo(e),n=[0,0];if(a.has(r)){var i=a.get(r),o=i.properties;n=za(o.latitude)&&za(o.longitude)?[+o.longitude,+o.latitude]:re(i)}else this.hasLatLongJoinBy&&(n=[t.getLongitude(r),t.getLatitude(r)]);return new Lv(n[0],n[1])},Dv.prototype.getXYvalue=function(e,t,a,r,n,i,o){return"z"===o?this.getZFromPoint(i):this.getXYPoint(i)[o]},Dv.prototype.getZFromPoint=function(e){return this.geoMap.zscale(this.geoMap.dataset.getZ(e)||this.geoMap.zscale.domain()[0])},Dv.prototype.getXYFromLatLng=function(e){var t=qg.toXY(this.geoMap,e.longitude,e.latitude);return new Ev(t[0],t[1])},Dv.prototype.getUserMapFeatures=function(e){return"geojson"===e?Dv.helpers.arrayToGeojson(this.userMapFeaturesArray):"array"===e?this.userMapFeaturesArray:this.userMapFeatures},Dv.prototype.getMapFeaturesByDataPoint=function(e,t){var a=this,r=a.geoMap.dataset,n=$();return e[0]instanceof Array||(e=[e]),e.forEach(function(e){var t=e[r.geoidx];a.userMapFeatures.has(t)&&n.set(t,a.userMapFeatures.get(t))}),"geojson"===t?Dv.helpers.arrayToGeojson(n.values()):"array"===t?n.values():n},Dv.prototype.getMapFeatures=function(e){var t=this,a=$(t.userMapFeatures);return t.userUnmatchedMapFeatures.keys().forEach(function(e){a.set(e,t.userUnmatchedMapFeatures.get(e))}),"geojson"===e?Dv.helpers.arrayToGeojson(a.values()):a},Dv.prototype.getMinMaxZ=function(){return this.extents.get("z")},Dv.prototype.isstacked=function(){return!1},Dv.prototype.containsNegativeData=function(e){return!1},Dv.prototype.getScaleProxy=function(){var t=this;t.geoMap;return{xScale:function(e){return t.getXYPoint(e).x},yScale:function(e){return t.getXYPoint(e).y}}},Dv.prototype.isValidLatLong=function(e,t){return kr(e,[-90,90])&&kr(t,[-180,180])},Dv.prototype.isValidPoint=function(e){var t=this.geoMap.dataset.getGeo(e);if(!e.length||!za(t)||!t.length)return!1;if(this.hasLatLongJoinBy){var a=this.geoMap.dataset.getLatitude(t),r=this.geoMap.dataset.getLongitude(t);return za(a)&&za(r)&&this.isValidLatLong(a,r)}return this.userDataHashed.has(t)},Dv.prototype.updateSeriesdatabyCategories=function(e){var a=this,r=0;return e.filter(function(e){var t=a.isValidPoint(e);return t&&(e.itemIndex=r++),t})},Dv.prototype.processBubblePieData=mu,Dv.helpers={is3D:function(e){return Ba(e)&&Ba(e[0])&&Ba(e[0][0])},convertTo3DArray:function(e){this.is3D(e.data)||(e.data=[e.data])},arrayToGeojson:function(e){return{type:"FeatureCollection",features:e}},hashFeaturesByProperty:function(e,r,n,i,o){var l=$();return Ka(e,function(e,t){var a=e.properties[r]||t;!n.empty()&&!n.has(a)||!i.empty()&&i.has(a)||l.set(a,o?Object.create(e):e)}),l}},$a(Dv.prototype,ro),Iv.prototype.initialize=function(){var e,t=this,a=t.geoMap.userdata.metadata,r=t.columns=qa(a.columns,{}),n=t.axes=qa(a.axes,{geo:[0],clr:[1],z:[1]}),i=qa(r[n.clr],{}),o=qa(r[n.geo],{}),l=qa(r[n.z],{});t.latLongJoinByKeys=H(["lat-long","long-lat"]),t.clridx=qa(i.dataindex),t.zidx=qa(l.dataindex),t.geoidx=qa(o.dataindex,0),t.geoMapByKey=e=t.getJoinByKey(o),n.label&&r[n.label]&&(t.labelIndex=r[n.label].dataindex),t.latLongJoinByKeys.has(t.geoMapByKey)&&("lat-long"===e?(t.latitudeIndex=0,t.longitudeIndex=1):(t.latitudeIndex=1,t.longitudeIndex=0))},Iv.prototype.getJoinByKey=function(e){var t=qa(e,this.columns[this.axes.geo],{}),a=qa(t.joinBy,"zc-key");"zc-key"===a||this.latLongJoinByKeys.has(a)||za(this.geoMap.geo.defaultLayer.layerGeojson.features[0].properties[a])||(a="zc-key");return a},Iv.prototype.getColumnIdx=function(e){return Ba(this.axes[e])?this.axes[e][0]:null},Iv.prototype.getDataType=function(e){var t=this.getColumnIdx(e);return za(this.columns[t])?this.columns[t].datatype:Sn},Iv.prototype.getZ=function(e){return e[this.zidx]},Iv.prototype.getClr=function(e){return e[this.clridx]},Iv.prototype.getGeo=function(e){return e[this.geoidx]},Iv.prototype.getLatitude=function(e){return e[this.latitudeIndex]},Iv.prototype.getLongitude=function(e){return e[this.longitudeIndex]},Iv.prototype.getMapByKey=function(){return this.geoMapByKey},Iv.prototype.getColumn=function(e){return this.columns[this.getColumnIdx(e)]},Iv.prototype.getX=Iv.prototype.getY=Iv.prototype.getGeo,Iv.prototype.getDataPointValue=function(e,t,a,r,n,i,o,l,s){a=a&&+a,Aa(l)&&(l=!/(tooltip|legend)/.test(i));var c=this.axes,u=this.columns[a]||{},d=u.datatype,h=u.dataindex,f=u[d];if(null==t)return null;if(null==c.clr&&"legend"!==i||a!=c.clr){var p,g=n?Nl:Hl;if(s){for(var v=0,y=0;y<s;y++)v+=this.getDataPointUnformattedValue(d,r,y,a,t,i,n,h);p=v}else p=this.getDataPointUnformattedValue(d,r,o,a,t,i,n,h);return""===p&&n?p:g(f,p,d,e,i,l)}return za(this.clridx)&&Pn.isQuantileColorScale(e)?"legend"===i?Hl(f,t,d,e,i,l,"-"):Hl(f,this.getClr(t),d,e,i,l):Hl(f,this.geoMap.seriesdata[r].seriesname,d,e,i,l)},Iv.prototype.getDataPointUnformattedValue=function(e,t,a,r,n,i,o,l){var s,c=this.geoMap;if(o&&(e===An&&za(s=us(c,t,a,r,n,o,i))))return qa((i===Sl?n:n[l])/s*100,0);return i===Sl?n:n[l]},Iv.prototype.getDataPoint=function(e,t,a,r,n,i){if(za(i))return i;var o=e.seriesdata[a].data,l=e.renderer[a].seriesdataAfterUpdate;return l?l[r][n]:o[r][n]},Iv.prototype.getCustomizedVal=function(d,e,h,f,p,g,v,y,m,b){var x=this;return Aa(m)&&(m=!/(tooltip|legend)/.test(v)),e.toString().replace(yt,function(){var e,t=arguments[0],a=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5],l=arguments[6],s=a||r||n||i||o;if(-1!==t.indexOf("{{clr}}"))return y;if(null!=x.columns[s]){if(null==(e=v===Sl?g:x.getDataPoint(d,s,h,f,p,g)))return"";var c=t.match(/[a-z]+/gi)[0];switch(c){case"col":return x.getColumnName(r,m);case"val":return x.getDataPointValue(d,e,a,h,!1,v,f,m,b);case Ll:case Ml:case zl:return x.getDataPointValue(d,e,n||i||o,h,c,v,f,m,b)}}else{if(!l)return t;e=x.getDataPoint(d,s,h,f,p,g);var u=d.dataObject.getMapFeaturesByDataPoint(e,"array");if(u.length)return u[0].properties[l]||t}})},Iv.prototype.getColumnName=function(e,t){return t?ka(this.columns[e].columnname):Ca(this.columns[e].columnname)},Iv.prototype.getMetaInfoObj=function(e,t,a){function r(e,t){var a=xa(i[e]||{});return a.value=t,a.columnindex=e,a}var n=this.axes,i=this.columns,o=this.geoMap.seriesdata,l=[];if(Ba(t)&&t.forEach(function(e,a){var t=i.indexOf(i.filter(function(e,t){return e.dataindex===a})[0]);l.push(r(t,e))}),za(n.clr)){var s=Ba(n.clr)?n.clr[0]:n.clr;l.push(r(s,o[a].seriesname))}return l},Rv.prototype.initialize=function(){var e=this.geoMap,t=e.systemConf.chart.plot.renderer.mode.toLowerCase();Ka(e.chartTypes,function(e){"canvas"===t&&xr(lt.svgOnly,e.value)&&(t="svg",Ct.warn("Fallback: "+e.name+" was rendered on svg mode"))}),e.renderer=[],e.rendererConf=[],this.mode=t,this.MODE=t.toUpperCase(),e.extraParams={labelQueue:[],notesArray:[],labelArray:[],barDatasetIndex:0}},Rv.prototype.draw=function(){var e=this.geoMap,t=e.systemConf;e.chartRendered=!1,Lo(e,t.chart.plot.events,0,"init"),e.setupZScale(),this.renderSeries(),this.transformWrap(),ht.renderCompletedEvents(e,e.updating,e.extraParams,function(){e.updating?e.chartRendered=!0:(e.animate(),e.updating=!1)})},Rv.prototype.update=function(){this.draw()},Rv.prototype.renderSeries=function(){var n,i=this.geoMap,e=(i.systemConf,ht.arrangeSeriesRenderingOrder(i)||[]),o=Je();i.rendererArranged=[],Ka(e,function(e,t){var a=qa(e.seriesidx,t),r=i.chartTypes[a];Aa(i.bubblePieRendererIndex)&&r.value===Ne.geobubblepie&&(i.bubblePieRendererIndex=a),!za(n=i.renderer[a])&&vt.has(r.name)&&(n=new(vt.get(r.name))(e,i,a),i.renderer[a]=n,i.rendererConf[a]=new Be.rendererConf),"geoheatmap"===r.name&&ht.setRendererProp(i,n,e,a,0,i.extraParams),i.rendererArranged.push(n),o.origRange=[0,0],i.rendererConf[a].xscale(o).yscale(o).datasetIndex(a),clearTimeout(n.renderedTimer),n.render(i.updating)}),i.rendererArrangedReveresd=i.rendererArranged.slice(0).reverse()},Rv.prototype.triggerChartRendering=function(e){var t=this.geoMap,a=e.series,r=e.index,n=t.chartTypes[r].name;za(e.chartRenderer)||(e.chartRenderer="CANVAS"===this.MODE?Be.canvasRenderer.createCanvasRenderer(n):Be.svgRenderer.createSVGRenderer(n)),t.container.select(".highlight-canvas").style("visibility","hidden"),e.commonRendererProp=e.chartRenderer.commonRendererProp,ht.setRendererProp(t,e.chartRenderer,a,r,0,t.extraParams),e.hasOwnProperty("chartRendered")||Object.defineProperty(e,"chartRendered",{get:function(){return e.chartRenderer.chartRendered}}),this["render"+this.MODE](e),e.hasOwnProperty("seriesdataAfterUpdate")||Object.defineProperty(e,"seriesdataAfterUpdate",{get:function(){return qa(e.chartRenderer.seriesdataAfterUpdate)}})},Rv.prototype.renderSVG=function(e){var t=this.geoMap,a=e.series;Be.svgRenderer.drawSVG(t,a,e.chartRenderer)},Rv.prototype.renderCANVAS=function(e){var t=this.geoMap,a=e.series;Be.canvasRenderer.drawCanvas(t,a,e.chartRenderer)};var jv=!(Rv.prototype.transformWrap=function(){var e=this.geoMap,t=e.plotarea;e.staticPaneSVG.select(".labelholder").attr("transform","translate("+t.left+","+t.top+")")}),Hv=null,Bv=$(),Fv=0,Wv=(_createClass(Vv,null,[{key:"__INIT_EVENT",value:function(){if(!jv){var e=qe(window);e.on("keydown.__META_KEY_ZC",function(){Hv=nt(),Bv.each(function(e,t){var a=t.split(".").shift();Vv.TEST_KEY(a)&&e(!0)})}),e.on("keyup.__META_KEY_ZC",function(){Bv.each(function(e,t){var a=t.split(".").shift();Vv.TEST_KEY(a)&&e(!1)}),Hv=null}),jv=!0}}},{key:"TEST_KEY",value:function(e){return Vv.__INIT_EVENT(),!!Hv&&!!Hv[e]}},{key:"ADD_HOOK",value:function(e,t){Vv.__INIT_EVENT();var a=e+"."+ ++Fv;return Bv.set(a,t),a}},{key:"REMOVE_HOOK",value:function(e){Bv.remove(e)}}]),Vv);function Vv(){_classCallCheck(this,Vv)}var Nv={wheelZoom:!0,doubleClickZoom:!1,pan:!0,scaleExtent:[1,8],extent:[[0,0],[0,0]],translateExtent:[[0,0],[0,0]],metaKey:null,transitionDuration:750},Yv=(_createClass(Gv,[{key:"initialize",value:function(){var e=this,t=e.options;e._maxZoom=Mt.apply(void 0,_toConsumableArray(t.scaleExtent)),e._minZoom=zt.apply(void 0,_toConsumableArray(t.scaleExtent)),e.d3_zoom=d().scaleExtent([e._minZoom,e._maxZoom]),e._signal=f("start","zoom","end"),e.enableSignals(),t.filter&&e.d3_zoom.filter(t.filter),t.element&&t.element.isD3Selection&&e.bindTo(t.element)}},{key:"enableSignals",value:function(){var e=this,t=e.d3_zoom,a=e._signal;t.on("start",function(){!1!==e.__notify&&a.call("start",e,nt())}),t.on("zoom",function(){!1!==e.__notify&&a.call("zoom",e,nt())}),t.on("end",function(){!1!==e.__notify&&a.call("end",e,nt()),e.__notify=!0})}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(e,t){this.hookCount++;var a=e+"."+this.hookCount;return this._signal.on(a,t),a}},{key:"removeHook",value:function(e){this._signal.on(e,null)}},{key:"bindTo",value:function(t){var a=this,r=this.d3_zoom,e=this.options;a._element=t,a._elementNode=t.node(),r.extent(a.__getExtent()),r.translateExtent(a.__getTranslateExtent()),e.metaKey?Wv.ADD_HOOK(e.metaKey,function(e){e?(t.call(r),a.constrainEvent()):t.on(".zoom",null)}):(t.call(r),a.constrainEvent())}},{key:"constrainEvent",value:function(){var e=this.options,t=this._element;!1===e.doubleClickZoom&&t.on("dblclick.zoom",null),!1===e.wheelZoom&&t.on("wheel.zoom",null),!1===e.pan&&t.on("mousedown.zoom",null),!1===e.touchZoom&&t.on("touchstart.zoom",null)}},{key:"getTransform",value:function(){return nt()&&nt().transform||this._element&&h(this._element.node())||g}},{key:"step",value:function(e,t){e=e<=0?1/-e:e,this.d3_zoom.scaleBy(this.__getZoomTransition(t),e)}},{key:"zoomToBounds",value:function(e,t,a){this.zoomToRect(wr(e),t,a)}},{key:"zoomToRect",value:function(e,t,a){this.zoomToPoint(Gv.centroid(e),qa(t,this.__getConstrainedScale(e)),a)}},{key:"zoomToPoint",value:function(e,t,a){t=this.__limitScale(qa(t,this._maxZoom)),e=this.__constrainPoint(e,t),this.interpolateZoom(e,t,a)}},{key:"interpolateZoom",value:function(e,t,a){this.zoomToIdentity(Gv.getIdentity(e,t),a)}},{key:"zoomToIdentity",value:function(e,t,a){var r=!(2<arguments.length&&void 0!==a)||a;this.__notify=r,this.__getZoomTransition(t).call(this.d3_zoom.transform,e)}},{key:"reset",value:function(){this._element.transition().duration(this.options.transitionDuration).call(this.d3_zoom.transform,g)}},{key:"invert",value:function(e){return this.getTransform().invert(e)}},{key:"update",value:function(e){var t=this.options=ga(this.options,e,!0,!0);this.d3_zoom.scaleExtent(t.scaleExtent).translateExtent(this.__getTranslateExtent())}},{key:"updateExtent",value:function(e){Ba(e)&&Ba(e[0])&&Ba(e[1])&&(this.options.extent=e,this.d3_zoom.extent(e),this.options.translateExtent=e,this.d3_zoom.translateExtent(e),this._element&&(this._element.call(this.d3_zoom),this.constrainEvent()))}},{key:"__getExtent",value:function(){return this.options.extent||[[0,0],[this._elementNode.clientWidth,this._elementNode.clientHeight]]}},{key:"destroy",value:function(){var a=this;a._signal=null,a._element.on(".zoom",null),Ka(a,function(e,t){a[t]=null,delete a[t]})}},{key:"__getTranslateExtent",value:function(){return this.options.translateExtent||this.__getExtent()}},{key:"__getZoomTransition",value:function(e){return this._element.transition().duration(qa(e,this.options.transitionDuration))}},{key:"__getConstrainedScale",value:function(e){var t=wr(this.__getTranslateExtent());return Mt(1,zt(this._maxZoom,1/Mt(e.width/t.width,e.height/t.height)))}},{key:"__constrainPoint",value:function(e,t){var a=wr(this.__getTranslateExtent());return[zt(a.x,Mt(a.width/2-t*e[0],a.width-a.width*t)),zt(a.y,Mt(a.height/2-t*e[1],a.height-a.height*t))]}},{key:"__limitScale",value:function(e){return Mt(this._minZoom,zt(e,this._maxZoom))}}],[{key:"getIdentity",value:function(e,t){return g.translate(e[0],e[1]).scale(t)}},{key:"centroid",value:function(e){return[+e.x+ +e.width/2,+e.y+ +e.height/2]}}]),Gv);function Gv(e){_classCallCheck(this,Gv),this.options=e.settings,this.initialize(),this.hookCount=0}Yv.prototype.on=Yv.prototype.addHook,na.setComponent("ZoomD3",Yv),na.setComponent("ZoomD3Options",function e(t){_classCallCheck(this,e),this.settings=_extends({},Nv,t)});var Uv={};function Xv(e,t){this.axes={x:{},y:{}},Cl.call(this,e,t),this.initialize()}function Zv(e){this.geoMap=e,this.initialize()}function Qv(e,t,a){this.series=e,this.geoMap=t,this.index=a,this.initialize()}Ja(Xv,Cl),Xv.helpers=Cl.helpers,Xv.SeriesTypes=vt,Xv.getDefaultProjection=function(){return{name:"geoMercator"}},Xv.getGeoJSON=function(e,t){if(za(e)&&_v.GEO_FORMATS.has(e.type)&&"Topology"===e.type){var a=e.projection;e=J.feature(e,e.objects[t]),za(a)&&(e.projection=a)}return e},Xv.prototype.initialize=function(){var e=this,t=(e.userdata.map,e.chartTypes.some(function(e){return xr(lt.svgOnly,e.value)}));e.id="ZC_GEO_"+e.idNumeric,Xr.IE&&parseFloat(Xr.VERSION)<11&&(e.fixIE=!0),e.geo={layerCount:0,extraLayers:{},extraLayersRenderingOrder:["globe","graticule","allAreas","backgroundLayer"],utils:{},highlightUtils:{},rawLayers:[],customLayers:$()},e.processUserData(e.themeoptions),e.plot={},e.geo.isCanvasMode="svg"!==e.systemConf.map.renderingMode.toLowerCase(),e.geo.isPlotCanvasMode="svg"!==e.systemConf.chart.plot.renderer.mode.toLowerCase()&&!t,Xv.helpers.constructChartGroups(e),e.seriesContainer=e.wrap.select(".seriesholder"),e.chartGroup=e.svg.select(".chartgroup"),e.legendHighlight=ms(this,this.wrap),e.render()},Xv.prototype.render=function(){var e=this,t=e.systemConf,a=t.map.animation.enabled&&!e.updating;if(a=a&&(e.dataObject.hasHeatmap&&!e.dataObject.hasPointChart||!e.seriesdata.length),e.setChartDimension(),e.updateCanvasArea(),e.applyChartProperties(),!e.hasGeoLayer||!t.map.allAreas&&!e.dataObject.totalDataCount)return e.clearMap(),e.hideLoading(e.container),e.handleNoData(t.noDataHandler),e.chartRendered=!0,e.handleHiddenContainer(!0),void Lo(e,t.canvas.events,0,e.updating?"onreload":"onload");e.dataObject.totalDataCount||(e.clearMap(),e.clearChart(null,null,!0)),e.getChartSeriesColor(),e.parseScale(),e.hasSeriesPoints&&(Te.render(e),Os.updatePlotarea4BlockTooltip(e)),As&&As.addBlockAnnotations(e),e.updatePlotareaProp(),e.setupFeatureContainerLayer(),e.setUpMapLayer(),a&&(e.animateSelection=e.container.selectAll(".geomap-features-series,.geomap-features-extras,.xychart,.static,.label-container,.labelholder").style("opacity",0)),Lo(e,t.map.events,0,"init"),e.renderGlobe(),e.renderGraticule(),e.renderMapLayer(),Lo(e,t.map.events,0,e.updating?"onreload":"onload"),e.geo.customLayers.size()&&e.geo.customLayers.each(function(e){return e&&e.update()}),e.plot.renderer?e.plot.renderer.draw(!0):e.hasSeriesPoints&&(e.plot={renderer:new Rv(e)},e.plot.renderer.draw()),e.drawPlotBorder(),e.renderLabels(),e.handleEvent(),e.drawPlotareaClippath(),e.plot.renderer||(e.animate(),Lo(e,t.canvas.events,0,e.updating?"onreload":"onload"),e.updating=!1)},Xv.prototype.setupFeatureContainerLayer=function(){var e=this,t=e.geo,a=(lr(t.isCanvasMode?"canvas":"svg"),t.isCanvasMode),r=t.isPlotCanvasMode,n=t.mapArea=Object.create(e.plotarea);e.seriesContainer.attr("transform","translate("+n.left+","+n.top+")"),a?(t.featureLayerExtra=Be.canvasRenderer.updateCanvasContext(e,"geomap-features-extras",".static",e.chartParentElement),t.geoLabelLayer=t.featureSeriesLayer=Be.canvasRenderer.updateCanvasContext(e,"geomap-features-series",".static",e.chartParentElement)):(t.featureSeriesLayer=xn("g",".feature-layer-series",[1],e.seriesContainer),t.geoLabelLayer=xn("g",".geo-label-layer",[1],e.seriesContainer)),r?(t.pointLabelLayer=e.labelHolderContext=Be.canvasRenderer.updateCanvasContext(e,"label-container",e.fixIE?".static":"div.legendarea",e.chartParentElement),t.pointLayer=Be.canvasRenderer.updateCanvasContext(e,"zc-canvas",".static",e.chartParentElement)):t.labelLayer=e.staticPaneSVG.select(".labelholder").attr("transform","translate("+n.left+","+n.top+")")},Xv.prototype.setupLayerSettings=function(e){var t=this.geo,a=t.utils.projection,r=a&&a.rotate&&a.rotate(),n=(this.behaviouralEvents&&this.behaviouralEvents.eventManager.behaviours||{}).PLOT_ZOOM;if(a=t.utils.projection=t.highlightUtils.projection=this.getProjection(e),n){var i=this.getProjectionExtent(),o=n.instance.getTransform(),l=$g(this),s=Yv.centroid(qg.geoBoundToRect(i)),c=l.translate,u=l.scale;this.geo.isGlobeMap?(a.scale(l.scale*o.k),a.translate(s),a.rotate(r)):(a.scale(u*o.k),a.translate([o.x+c[0]*o.k,o.y+c[1]*o.k]))}t.utils.geoPath=te().projection(a),t.highlightUtils.geoPath=te().projection(a),t.isCanvasMode&&t.utils.geoPath.context(t.featureSeriesLayer)},Xv.prototype.getProjection=function(e){var t,a=this.geo.defaultLayer.layerGeojson,r=this.systemConf.map,n=qa(r.projection,e.projection,a.projection),i=e,o=this.getProjectionExtent();for(var l in this.geo.isGlobeMap=n&&"geoOrthographic"===n.name,za(n)?this.geo.isGlobeMap&&(i={type:"Sphere"}):n=Xv.getDefaultProjection(),t=d3[n.name](),n)n.hasOwnProperty(l)&&"name"!==l&&t[l]&&t[l](n[l]);return t.fitExtent(o,i),t},Xv.prototype.getProjectionExtent=function(){var e=this.geo.mapArea,t=this.systemConf.map.extent;return[[t.left,t.top],[e.width-t.right,e.height-t.bottom]]},Xv.prototype.addLayer=function(e,t,a,r,n){var i=this.geo,o=i.layerCount++,l={series:i.featureSeriesLayer,extra:i.featureLayerExtra,highlight:i.highlightLayer}[r];return a=a||"map-layer-"+o,i.isCanvasMode||(l=xn("g","."+a,[a],i.featureSeriesLayer)),new _v(e,i.utils,l,t,this,n)},Xv.prototype.addGeoLayer=function(e,t){var a=this.geo.customLayers,r="custom-geo-layer-"+this.geo.layerCount++,n=this.addLayer(e,t,r,"extra",!1);return a.set(r,n),r},Xv.prototype.removeGeoLayer=function(e){this.geo.customLayers.has(e)&&(this.geo.customLayers.get(e).destroy(),this.geo.customLayers.remove(e)),qg.clearContext(this.geo.featureLayerExtra),this.repaintGeoLayer()},Xv.prototype.setupSvgLayer=function(e){var t=this,a=t.geo,r=a.mapArea;t.systemConf.map;a.featureSeriesLayer=xn("g",".feature-layer-series",[1],t.seriesContainer),t.seriesContainer.attr("transform","translate("+r.left+","+r.top+")"),a.labelLayer=t.staticPaneSVG.select(".labelholder").attr("transform","translate("+r.left+","+r.top+")"),"canvas"===t.systemConf.chart.plot.renderer.mode&&(t.labelHolderContext=Be.canvasRenderer.updateCanvasContext(t,"label-container",t.fixIE?".static":"div.legendarea",t.chartParentElement),a.pointLayer=Be.canvasRenderer.updateCanvasContext(t,"zc-canvas",".static",t.chartParentElement))},Xv.prototype.setupCanvasLayer=function(){var e=this,t=e.geo;t.featureLayerExtra=Be.canvasRenderer.updateCanvasContext(e,"geomap-features-extras",".static",e.chartParentElement),t.featureSeriesLayer=Be.canvasRenderer.updateCanvasContext(e,"geomap-features-series",".static",e.chartParentElement),e.dataObject.hasPointChart&&(t.pointLayer=Be.canvasRenderer.updateCanvasContext(e,"zc-canvas",".static",e.chartParentElement)),t.labelLayer=e.labelHolderContext=Be.canvasRenderer.updateCanvasContext(e,"label-container",e.fixIE?".static":"div.legendarea",e.chartParentElement)},Xv.prototype.getLayerData=function(e){var t=Uv;if(za(t[e]))return this.emptyMapLayer=!1,t[e];this.emptyMapLayer=!0},Xv.prototype.setUpMapLayer=function(){var e,t=this.systemConf,a=this.dataObject;t.map.allAreas?e="FeatureCollection"!==this.geo.defaultLayer.layerGeojson.type?this.geo.defaultLayer.layerGeojson:a.getMapFeatures("geojson"):e=a.getUserMapFeatures("geojson");this.geo.renderedLayer=e,this.setupLayerSettings(e)},Xv.prototype.setupZScale=function(){this.dataObject.hasZaxis&&(this.zscale=this.scales[0].create())},Xv.prototype.renderGraticule=function(){var e=this.systemConf.map.graticule||{},t=!0===e.show,a=this.geo.extraLayers;if(t)if(this.updating&&a.graticule)a.graticule.update();else{var r=ae();a.graticule=this.addLayer(r(),e,"graticule","extra")}else za(a.graticule)&&(a.graticule.destroy(),a.graticule=null)},Xv.prototype.renderGlobe=function(){var e=this.systemConf.map,t="geoOrthographic"===(e.projection||{}).name&&!za(e.globe.show),a=this.geo.extraLayers;t||e.globe.show?this.updating&&a.globe?a.globe.update():a.globe=this.addLayer({type:"Sphere"},e.globe,"sphere","extra"):za(a.globe)&&(a.globe.destroy(),a.globe=null)},Xv.prototype.renderMapLayer=function(){var e=this,t=e.systemConf,a=e.dataObject,r=t.map,n=a.userUnmatchedMapFeatures.values();if(!a.hasHeatmap){var i,o=e.geo.defaultLayer.layerGeojson;((i="FeatureCollection"!==o.type?o:a.userMapFeatures.values()).length||i.type)&&(e.geo.extraLayers.backgroundLayer=e.addLayer(i,r,"background-layer","extra",r.useMeshOutline))}e.updating&&e.geo.extraLayers.allAreas?e.geo.extraLayers.allAreas.update(n):r.allAreas&&(a.userUnmatchedMapFeatures.empty()||(e.geo.extraLayers.allAreas=e.addLayer(n,r,"all-areas-layer","extra",r.useMeshOutline)))},Xv.prototype.renderLabels=function(){this.geo.geoLabels=new zv(this)},Xv.prototype.handleEvent=function(){var t=this,e=this,a=e.geo;if(e.updating&&e.eventHandler||!e.dataObject.totalDataCount){if(!e.eventHandler)return!1}else{e.createEventGroups();var r=xn("g",".trackerGroup",[1],e.eventWrap).attr("pointer-events","all"),n=xn("rect",".eventhandler",[1],r),i=e.eventHandler=new ff(e,r);e.eventHandler.trackerGroup=r,e.eventHandler.trackerElement=n,i.init(),i.mapEvents=new de.mapEvents(e),Ts(e);var o={mousemove:function(){if(t.chartRendered){t.eventHandler.isSingleSource();var e=t.eventHandler.getSourceNode();t.eventHandler.getRelativeMousePosition(e,!1);return i.mapEvents.handleEvent(t.eventHandler.mousePos,"mousemove",t.eventHandler.targetEvent)}},mouseout:function(){if(t.chartRendered){t.eventHandler.isSingleSource();var e=t.eventHandler.getSourceNode();t.eventHandler.getRelativeMousePosition(e,!1);return i.mapEvents.handleEvent(null,"mouseout",t.eventHandler.targetEvent)}},click:function(){if(t.chartRendered){t.eventHandler.isSingleSource();var e=t.eventHandler.getSourceNode();t.eventHandler.getRelativeMousePosition(e,!1);return i.mapEvents.handleEvent(t.eventHandler.mousePos,"click",t.eventHandler.targetEvent)}},doubleclick:function(){if(t.chartRendered){t.eventHandler.isSingleSource();var e=t.eventHandler.getSourceNode();t.eventHandler.getRelativeMousePosition(e,!1);return i.mapEvents.handleEvent(t.eventHandler.mousePos,"doubleclick",t.eventHandler.targetEvent)}}},l={click:o.click,dblclick:o.doubleclick,contextmenu:o.contextmenu},s={tap:o.click,dbltap:o.doubleclick,singletouchmove:o.mousemove,touchend:o.mouseout},c={target:"plot",chartObj:this};Mo(r,{mousemove:o.mousemove,mouseout:o.mouseout},null,c,"chart"),Mo(r,l,null,c,"chartmove"),Mo(n,{},s,c),a.eventLayer=i.trackerElement.styles({"pointer-events":"visible"})}e.eventHandler.mapEvents.cache=$(),e.positionEventTrackerElement(),e.behaviouralEvents?e.behaviouralEvents.update():e.behaviouralEvents=new Rc(e)},Xv.prototype.clearMap=function(){qg.clearContext(this.geo.featureLayerExtra),qg.clearContext(this.geo.featureSeriesLayer),qg.clearContext(this.geo.geoLabelLayer),qg.clearContext(this.geo.pointLayer),qg.clearContext(this.geo.pointLabelLayer),za(this.eventHandler)&&this.eventHandler.mapEvents.clearHighlightedPoints()},Xv.prototype.processUserData=function(e){var t,a=this,r=a.systemConf=ga(e,a.userdata,!0,!0),n=r.map,i=a.getLayerData(n.scope,n.layerName);a.updating||Lo(a,a.systemConf.canvas.events,0,"init"),t=Va(r,"seriesdata")||{},a.seriesdata=t.chartdata||[],(a.geo.defaultLayer={layerGeojson:Xv.getGeoJSON(i,n.layerName),layerOriginal:i}).layerGeojson?(a.hasGeoLayer=!0,a.dataset=new Iv(a),a.dataObject=new Dv(a),a.hasSeriesPoints=0<a.dataObject.totalDataCount,a.nochartdata=!a.hasSeriesPoints&&a.emptyMapLayer):(a.hasGeoLayer=!1,a.nochartdata=!0)},Xv.prototype.addRemoveSeries=function(){this.eventHandler;this.updating=!0,this.clearMap(),this.dataObject.initialize(),this.updatePlotareaProp(),this.drawPlotareaClippath(),this.repaintChart()},Xv.prototype.repaintChart=function(){this.repaintGeoLayer(),this.eventHandler.mapEvents.cache.clear(),this.eventHandler.oldInfo=null,this.plot.renderer.draw()},Xv.prototype.repaintGeoLayer=function(){Ka(this.geo.extraLayers,function(e){return e&&e.update()}),this.geo.customLayers.each(function(e){return e&&e.update()}),this.geo.geoLabels.update(!0)},Xv.prototype.zoomToPoint=function(e,t){this.__enableZoom();var a=this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance;!function(e,t,a){switch(e.type){case"bound":a.zoomToBounds(e[e.type],t);break;case"rect":a.zoomToRect(e.rect,t);break;case"point":a.zoomToPoint(e.point,t);break;case"rotate":a.rotateTo(e.rotate,t)}}(this.renderer[e.seriesIndex].getZoomPosition(e),t,a)},Xv.prototype.animate=function(){var e=this,t=e.systemConf.map.animation,a=e.animateSelection;a&&!e.updating?a.transition().duration(t.duration).ease(p(t.easingType)).on("start",function(){a.style("opacity",0)}).on("end",function(){e.chartRendered=!0}).attrTween("tween",function(){return function(e){return a.style("opacity",e),e}}):e.chartRendered=!0},Zn.GeoMap=Xv,Zv.fixMouseCoordinates=function(e,t){return t?{x:t[0],y:t[1]}:{x:null,y:null}},Zv.fixEventArguments=function(e){return{seriesPos:e.seriesIndex,itemPos:e.itemIndex,subseriespos:e.subSeriesIndex,data:e}},Zv.prototype.initialize=function(){var e=this.geoMap,t=e.geo,a=this.utils=t.utils;e.systemConf.map;this.eventConfig=qa(e.systemConf.map.events,{}),this.outerGeoBounds=a.geoPath.bounds(t.defaultLayer.layerGeojson);var r=xn("g",".zcMapClipHighlight",[1],e.staticPaneSVG,":first-child").attr("clip-path","url("+e.defsLocation+"#highlight_group_clip_"+e.id);this.highlightElement=xn("g",".map-highlight",[1],r).attr("transform","translate("+e.plotarea.left+","+e.plotarea.top+")"),this.timers={},this.highlightCache={},this.outLine=this.getOutLine()},Zv.prototype.showTooltip=function(e,t,a,r,n){var i,o,l=this.geoMap,s={x:0,y:0},c=!0,u=r.point.seriesIndex,d=l.chartTypes[u].value,h=l.renderer[u].plotOptions;"feature"!==r.type&&n||("point"===r.type&&(c=!1,s=l.dataObject.getXYPoint(t)),o=(i=ko(lo(a),e,s.x,s.y,l,t,!1,!1,{},c,!1,!1)).helpers,uo(d)?i.distance=l.dataObject.getXYvalue(!1,!1,null,null,null,t,"z")/2:"point"===r.type&&(i.distance=10*(h.marker.size-1)),o.itempos=t.itemIndex,o.subseriespos=t.subSeriesIndex,o.seriesindex=t.seriesIndex,l.eventHandler.tooltipElement.show(l,i,null,!0,i.helpers))},Zv.prototype.hideTooltip=function(e){var t=this.geoMap.systemConf.tooltip.hideDelay,a=this.geoMap.eventHandler.tooltipElement;e?a.hide(a.element):(clearTimeout(this.timers.tooltipDelay),this.timers.tooltipDelay=setTimeout(function(){a.hide(a.element)},qa(t,150)))},Zv.prototype.getPoint=function(t){var a,r=this.geoMap,n=null;return t instanceof Ev?(a=t.toArray(),t=t.toLatLong(this.geoMap).toArray()):t instanceof Lv&&(a=t.toXY(r),t=t.toArray()),this.outLine.some(function(e){return ne(e,a)})&&r.rendererArrangedReveresd.some(function(e){if(!r.eventHandler.eventDisabled(e.series)&&e.getPoint)return n=e.getPoint(t,a,e.index)}),n},Zv.prototype.getPointsByIndex=function(e,t){var a=this.geoMap,r=[];if(za(t)){var n=a.dataObject.flattenPoints.get("geoheatmap");r=ll.filterSelectionByColor(n,!0,t,a)}else za(e)&&a.seriesdata[e].data.forEach(function(e){r=r.concat(e)});return r},Zv.prototype.getHighlightEffect=function(e,t,a,r){var n=this.geoMap,i=n.legendHighlight.getLegendHighlightEffect(e,a,r),o={fillColor:qt};return i!==Qt&&(n.fixIE&&(t="transparent"),o={fillColor:n.legendHighlight.getEffect(i,"area",t,{fill:qt,stroke:t},0,r).fill,strokeWidth:2}),o},Zv.prototype.highlightPoints=function(e,t,a){var r=this.geoMap,n=r.eventWrap.selectAll("#zcscatterhighlight"),i=r.staticPaneSVG.selectAll("g.map-highlight");switch(Ru(r),t){case"feature":n.attr("visibility","hidden"),i.attr("visibility","visible"),this.highlightGeoFeature(e,a);break;case"point":n.attr("visibility","visible"),i.attr("visibility","hidden"),n.selectAll("*").remove(),n.attr("visibility","visible");var o=e.seriesIndex,l=(e.subSeriesIndex,e.itemIndex,r.chartTypes[o]),s=r.dataObject.getXYPoint(e),c=(r.seriesdata[o].plotoptions,r.systemConf.chart.plot.plotoptions[l.name],sn(n,"g",[1],".","class","highlight"+o),"geobubblepie"==l.name?r.renderer[r.bubblePieRendererIndex]:r.renderer[o]),u=c.chartRenderer.getHighlighter(r),d=u._defaultH();e._x=s.x,e._y=s.y,e._size=c.chartRenderer.getSymbolSize(e),d[0].path.call(u,e,d[0])}},Zv.prototype.highlightGeoFeature=function(e,t){var a=this.geoMap;this.highlightLayer=new _v(e,a.geo.highlightUtils,this.highlightElement,t,a)},Zv.prototype.clearHighlightedPoints=function(){this.geoMap.staticPaneSVG.selectAll("g#zcscatterhighlight, g.map-highlight").attr("visibility","hidden")},Zv.prototype.getTransform=function(){return h(this.geoMap.geo.eventLayer.node())},Zv.prototype.handleEvent=function(e,t,a){e=Zv.fixMouseCoordinates(this.geoMap,e),a=a||nt();var r=this.geoMap,n=new Ev(e.x,e.y),i=this.getPoint(n),o=!1!==r.systemConf.tooltip.enabled,l=qa(r.zcEventType,t),s=r.eventHandler.oldInfo,c=!(!s||s.point!==(i&&i.point));if("mouseout"===t)i=r.eventHandler.oldInfo;else if(za(r.eventHandler.oldInfo)&&!za(i)||("doubletap"===l||"tap"===l&&c)&&"mouseout"!==t)return r.eventHandler.mapEvents.handleEvent(null,"mouseout",r.eventHandler.targetEvent);if(za(i)){var u=i.point,d=u.seriesIndex,h=r.renderer[d],f=oo(null,h.plotOptions,r,l),p=r.eventHandler,g=!1,v=t,y={mousemove:"handleMouseMove",click:"handleMouseClick",mouseout:"handleMouseOut"};if(Xr.isTouchDevice&&(g=!0,"click"===t&&(v="mousemove")),za(f)){var m=df(f,i,0,null,r);Ta(m.callback,r.eventHandler.targetEvent,m.args,r)}p.eventManager.isDefaultAllowed(f,a)&&za(this[y[v]])&&this[y[v]](i,c),"mousemove"===v?(o&&(clearTimeout(this.timers.tooltipDelay),this.showTooltip(e,u,a,i,c)),c||(Vh.call(r.eventHandler.eventManager,e,{nearest:u},oo(null,h.plotOptions,r,"cursor")),r.eventHandler.eventManager.selectionManager.nearest=u,r.eventHandler.oldInfo=i,r.eventHandler.oldInfo.nearestPoint=Zv.fixEventArguments(u)),r.eventHandler.reverseLegendHighlight.highlight(u),r.eventHandler.unselectedHighlight.highlight(u)):"mouseout"===v&&(o&&this.hideTooltip(g),Nh.call(r.eventHandler.eventManager),r.eventHandler.reverseLegendHighlight.reset(),r.eventHandler.oldInfo=null)}},Zv.prototype.getOutLine=function(){var e=this.geoMap,t=document.createElementNS(se("svg").space,"path");return d3.select(t).datum({type:"Sphere"}).attr("d",e.geo.highlightUtils.geoPath).attr("d").split("M").slice(1).map(function(e){return(e=e.slice(0,e.length-1)).split("L").map(function(e){return e.trim().split(/[,\s]/).map(function(e){return parseInt(e)})})})},Zv.prototype.getTreeDiagram=function(e){var t=this.geoMap;return d3.quadtree().x(function(e){return t.dataObject.getXYPoint(e).x}).y(function(e){return t.dataObject.getXYPoint(e).y}).extent([[0,0],[t.plotarea.width,t.plotarea.height]]).addAll(e)},Zv.prototype.handleMouseMove=function(e,t){var a=this.geoMap,r=e.point,n=r.seriesIndex;if(!t){var i=Hn(a,n,r),o=this.getHighlightEffect(n,i,"selectedSeries","plot");if("feature"===e.type){r=e.feature;var l=Va(a.systemConf.chart.plot.plotoptions,a.chartTypes[n].name+".hoveroptions");o=_extends({},o,l)}this.highlightPoints(r,e.type,o)}},Zv.prototype.handleMouseOut=function(e){var t=this.geoMap;this.clearHighlightedPoints(),Nh.call(t.eventHandler.eventManager)},Zv.prototype.handleMouseClick=function(e){this.geoMap.eventHandler.mapEvents.hideTooltip(!0)},de.mapEvents=Zv,Qv.getPlotOptions=function(e,t){return Va(e.systemConf,"chart.plot.plotoptions."+t)},Qv.prototype.initialize=function(){var e=this,t=e.geoMap,a=t.chartTypes[e.index],r=Sd(t,e.index);return t.context=qa(t.geo.pointLayer,t.geo.featureLayer),e.isCanvasMode=t.geo.isCanvasMode,e.plotOptions=ga(Qv.getPlotOptions(t,a.name),qa(e.series.plotoptions,{}),!0),e.fillColor=Dn(t,e.index,r,null,e.renderingMode),e.strokeColor=Rn(t,e.index,r),e},Qv.prototype.update=function(){this.render(!0)};var qv=(_createClass(Kv,[{key:"getPosition",value:function(){return this[this.type]}}]),Kv);function Kv(e,t){_classCallCheck(this,Kv),this.type=e,this[e]=t}function $v(e,t,a){Qv.call(this,e,t,a)}function Jv(e,t,a){$v.call(this,e,t,a)}function ey(e,t,a){Jv.call(this,e,t,a)}function ty(e,t,a){this.renderingMode=t.systemConf.map.renderingMode,Qv.call(this,e,t,a)}function ay(e,r,n,i){var t,o=e.chartObj,l=e.xscale,s=e.yscale,c=e.stacked,u=e.datasetIndex,d=e.axisrotated,a=e.commonPlotOptions,h=e.yaxiscolumnorder,f=e.dataset,p=o.systemConf,g=o.dataObject,v=p.chart.axes.yaxis[h].reversed,y=o.seriesdata[u].plotoptions,m=pa.getValueOfPlotOptions(y,a),b=Xr.FIREFOX&&1==r.length?"linearClosed":m("mode");if(g.isPolarAxisCategory)t=et().defined(function(e,t){return!e.isDummy}).radius(function(e,t){var a=c?s(e.y+e.y0):s(f.getY(e,h))+(null!=s.bandwidth?s.bandwidth()/2:0);return Mt(a,s.range()[v&&!c?s.domain().length-1:0]+.1)}).angle(function(e,t){return l(f.getX(e))}).curve($e(b,d));else{var x=o.chartTypes[u],C=no.helpers,k=C.isCatNull(f,"x"),w=C.isCatNull(f,"y",h);t=S().defined(function(e,t){var a=!w(f.getY(e,h))&&!k(f.getX(e));return x.value===Ne.stkdarea||!e.isDummy&&a}).x(function(e,t){var a=g.getXYvalue(d,c,l,s,h,e,"x",null,i);null!=n&&(a+=Math.abs(g.getXYvalue(d,c,o.renderer[u].oldXscale,s,h,r[0],"x",null,i)-g.getXYvalue(d,c,l,s,h,r[0],"x",null,i)));return a}).y(function(e,t){return o.dataObject.getXYvalue(d,c,l,s,h,e,"y",null,i)}).curve($e(b,d,a.tension))}return t}Ja($v,Qv),Zn.GeoMap.SeriesTypes.set("geoscatter",$v),$v.prototype.render=function(){this.geoMap.plot.renderer.triggerChartRendering(this)},$v.prototype.getZoomPosition=function(e){var t=this.geoMap,a=t.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return new qv("point",a.invert(t.dataObject.getXYPoint(e).toArray()))},Ja(Jv,$v),Zn.GeoMap.SeriesTypes.set("geobubble",Jv),Jv.prototype.getPoint=function(e,n,t){var a,r=this.geoMap,i=r.dataObject,o=r.chartTypes[this.index].name,l=i.flattenPoints.get(o),s=Oo(r,r.chartTypes[this.index].value),c=r.systemConf.chart.plot.plotoptions[o],u=c&&c.events&&c.events.triggerOffset||10,d=i.isCombinationalChart,h=r.eventHandler.mapEvents,f=h.cache.get("bubbleQuadtree"),p=r.plotarea;if(!l)return null;za(f)||(f=h.getTreeDiagram(l).size(function(e){return i.getZFromPoint(e)}),h.cache.set("bubbleQuadtree",f));var g=f.findAll(n[0],n[1],s,u).points,v=null;if(!g)return null;var y=g.map(function(e){var t=i.getZFromPoint(e)/2,a=i.getXYPoint(e),r=function(e,t,a,r){return Rt((e-a)*(e-a)+(t-r)*(t-r))}(n[0],n[1],a.x,a.y);if(So(a.x,a.y,{x:0,y:0,width:p.width,height:p.height}))return{radius:t,bubbleDistance:r-t,pointDistance:r,over:r-t<=0,point:e}}).filter(function(e){return za(e)});if(1===y.length)(!d||d&&y[0].over)&&(v=y[0].point);else if(1<y.length)if(1===(a=y.filter(function(e){return e.over})).length)v=a[0].point;else if(1<a.length){v=a.slice(0).sort(function(e,t){return ge(e.radius,t.radius)})[0].point}else if(!d){v=y.slice(0).sort(function(e,t){return ge(e.bubbleDistance,t.bubbleDistance)})[0].point}return v&&(!r.hasColorScale||t||r.hasColorScale&&jn(r.dataset.getClr(v),r))?{type:"point",point:v}:void 0},Ja(ey,Jv),Zn.GeoMap.SeriesTypes.set("geobubblepie",ey),ey.prototype.getPoint=function(e,o){var t,a,r,n,l=this.geoMap,i=br(this).getPoint.call(this,e,o,!0),s=null;if(i){if(t=i.point,a=l.dataset.getGeo(i.point),r=is.getKey($t,$t,$t,[a,a]),!(n=l.subrenderer[t.subSeriesIndex][r]))return!1;if(n.data.some(function(e){if(e.data.disabled||e.data.dummy)return!1;var t=e.data,a=l.dataObject.getXYPoint(e.data),r=_h(l,t.seriesIndex,t.subSeriesIndex,t),n=Wt(o[0]-a.x,-(o[1]-a.y)),i=r&&cu(r.start,r.end,n);return i&&(s=t),i}),s&&(!l.hasColorScale||l.hasColorScale&&jn(l.dataset.getClr(s),l)))return{type:"point",point:s}}return null},Gr.geoheatmap=function(){return{animation:{enabled:!1},datalabels:{showAs:"geo",fontWeight:"bold",strokeColor:"contrast",strokeWidth:1.5,textOverlap:"hidden"},gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}}}},Ja(ty,Qv),Zn.GeoMap.SeriesTypes.set("geoheatmap",ty),ty.prototype.render=function(e){var o=this.initialize(),a=o.geoMap,l=a.dataObject.getUserMapFeatures(),s=o.plotOptions,c=s.gradients,u=a.systemConf.map,d=H(["radial","linear"]).has(c.type);o.features=[],o.seriesdataAfterUpdate=[],o.series.disabled||Ka(o.series.data,function(e,t){e=a.dataObject.updateSeriesdatabyCategories(wa(e)),Ka(o.seriesdataAfterUpdate[t]=e,function(e,t){var a=o.geoMap.dataset.getGeo(e);if(l.has(a)){var r=l.get(a),n=null;if(d){var i=qg.getFeatureGradientBBox(r,c.type,o.geoMap.geo.utils.geoPath);n=[i.width,i.height],r.transform={x:i.x,y:i.y}}r.styles={fillColor:o.fillColor(o.index,e,null,null,o.plotOptions.fillOpacity,n),strokeColor:o.strokeColor(o.index,e,qa(s.strokeColor,u.strokeColor),null,s.strokeOpacity,t),strokeWidth:s.strokeWidth,strokeStyle:s.strokeStyle,fillOpacity:qa(s.fillOpacity,1),strokeOpacity:qa(s.strokeOpacity,1)},o.features.push(r)}})}),e?o.mapLayer.update(o.features):o.mapLayer=o.geoMap.addLayer(o.features,null,"series-"+o.index,"series",u.useMeshOutline),pt&&a.extraParams.labelQueue.push({renderer:o,charttype:"scatter",chartObj:a,args:[o.series,o.index]}),o.renderedTimer=setTimeout(function(){o.chartRendered=!0},17)},ty.prototype.commonRendererProp=function(){return this.geoMap.rendererConf[this.index]},ty.prototype.getZoomPosition=function(e){var t=this.geoMap,a=t.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return t.geo.isGlobeMap?new qv("rotate",t.dataObject.getLatLonPoint(e)):new qv("bound",t.geo.utils.geoPath.bounds(t.dataObject.getFeatureByPoint(e)).map(function(e){return a.invert(e)}))},ty.prototype.getPoint=function(t,e,a){var r=this.features,n=this.geoMap,i=n.dataObject,o=cr(r,function(e){return le(e,t)});if(o){for(var l,s=i.userDataHashed.get(o.properties[i.joinByKey]),c=s.length;c--;){var u=s[c].seriesIndex;if(u===a&&!n.seriesdata[u].disabled){l=s[c];break}}if(!n.hasColorScale||n.hasColorScale&&jn(n.dataset.getClr(l),n))return{type:"feature",feature:o,point:l}}return null},$v.prototype.getPoint=function(e,t){var a=this.geoMap,r=a.plotarea,n=a.dataObject,i=a.chartTypes[this.index].name,o=n.flattenPoints.get(i),l=a.eventHandler.mapEvents,s=Oo(a,a.chartTypes[this.index].value),c=l.cache.get("scatterQuadtree"),u=this.plotOptions,d=t[0],h=t[1];if(Ba(o)){za(c)||(c=a.eventHandler.mapEvents.getTreeDiagram(o),l.cache.set("scatterQuadtree",c)),$i.has(u.marker.symbol)&&(h+=10*u.marker.size/2);var f=c.find(d,h,s),p=f&&n.getXYPoint(f);return f&&So(p.x,p.y,{x:0,y:0,width:r.width,height:r.height})&&(!a.hasColorScale||a.hasColorScale&&jn(a.dataset.getClr(f),a))?{type:"point",point:f}:null}},ev.line=function(){var M,z,D,I=ev.scatter();function R(r,e,t,a){var n=M.params,i=n.chartObj,o=n.xscale,l=n.yscale,s=n.datasetIndex,c=(n.axisrotated,n.commonPlotOptions),u=n.color,d=n.labelQueue,h=n.yaxiscolumnorder,f=e,p=f.plotoptions,g=M.params.gvp=pa.getValueOfPlotOptions(p,c),v=(i.systemConf.chart.axes.xaxis.reversed,Sd(i,s)),y=i.canvasarea,m=i.chartTypes[s],b=(m.value,g("dashStyle")),x=Ea(g("strokeWidth"),2),C=g("strokeOpacity"),k=Rn(i,s,v),w=M.params.markerOptions=p?ga(c.marker,p.marker,!0):c.marker,S=(M.params.hoverOptions=p&&p.hoveroptions?ga(c.hoveroptions,p.hoveroptions,!0):c.hoveroptions,ln(g("lineCap"),b)),O=on(b,x),A=!(!zi(i,"marker")||!Mi(i,"marker",zt(y.width,y.height)))&&w.enabled,P=i.dataset.getDataType("x"),T=i.dataset.getDataType("y",h),_=P==Sn?o.domain():null,E=T==Sn?l.domain():null;za(t)?(r.lineWidth=qa(t["stroke-width"],x),za(a)&&(A=!0,C=1e-8)):r.lineWidth=x,e.disabled||(R.seriesdataAfterUpdate=[],r.save(),f.data.forEach(function(e,t){var a;r.beginPath(),a=P==Sn||T==Sn?i.dataObject.updateSeriesdatabyCategories(wa(e),_,E,h):e,i.renderVisiblePointsOnly&&(a=no.helpers.filterPointsInViewport(i,a,"line","x",s)),R.seriesdataAfterUpdate[t]=a,ay(n,a,z,D).context(r)(a),O.length&&"object"===(void 0===O?"undefined":_typeof(O))&&za(r.setLineDash)&&(r.setLineDash(O),r.lineCap=S),r.strokeStyle=k(s,$t,g("strokeColor")||u,$t,C,t),r.stroke()}),r.restore(),A&&(I.commonRendererProp(M).shiftInfo(z),I.chartRendered=!1,I(r,e,t,a)));var L=0;return A||(L=A?.5*(w.size||x)*10+x/2:0,i.dataObject.markerSize[m.name]&&i.dataObject.markerSize[m.name].add(L),d.push({renderer:R,charttype:"scatter",chartObj:i,args:[f,s,L]})),R.getSymbolSize=I.getSymbolSize||function(){return L},R.chartRendered=!0,R}return R.getHighlighter=function(e,t){return R.highlighter||(R.highlighter=new wh(e,R)),R.highlighter},R.commonRendererProp=function(e){return arguments.length?(M=e)&&R:M},R.shiftInfo=function(e){return arguments.length?(z=e)&&R:z},R},Gr.line=function(){return{mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent"},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}}},dt.line=function(){var F,W,V,N,Y,G,U,X,Z,Q,q,K,$,J,ee,te,ae,re,ne,ie,oe,le,se,ce,ue=[],de=dt.scatter(),he=!1;function fe(e){return e.each(function(e){var k=F.params;ie=k.chartObj,W=k.xscale,V=k.yscale,ee=k.stacked,N=k.datasetIndex,G=k.axisrotated,ae=k.commonPlotOptions,X=k.color,te=k.labelQueue,ne=k.hasNegValue,U=k.yaxiscolumnorder,Y=k.dataset,re=ie.systemConf;var t=k.renderingOrderIndex,w=ie.defsLocation,S=e[N],a={data:S,index:t},r=S.plotoptions,n=S.data,i=ie.chartTypes[N],o=i.name,O=(i.value,F.params.gvp=pa.getValueOfPlotOptions(r,ae)),A="arearange"==o,P=ie.dataObject.isPolarAxisCategory,l=Sd(ie,N),s=ie.canvasarea,c=O("mode"),u=O("dashStyle"),T=Ea(O("strokeWidth"),2),_=O("strokeOpacity"),E=Rn(ie,N,l),d=Pn.isQuantileColorScale(ie),L=F.params.markerOptions=r&&r.marker?ga(ae.marker,r.marker,!0):ae.marker,h=(F.params.hoverOptions=r&&r.hoveroptions?ga(ae.hoveroptions,r.hoveroptions,!0):ae.hoveroptions,hs(ae,r,ie,o)),M=h.enabled,z=h.easingType;se=h.duration,ce=(ce=h.type)==Yi?Ni:ce;var f=r&&r.animation&&r.animation.blink?ga(ae.animation.blink,r.animation.blink,!0):ae.animation.blink,D=d||!(!zi(ie,"marker")||!Mi(ie,"marker",zt(s.width,s.height)))&&L.enabled,I=ln(O("lineCap"),u),R=Xr.IE||Xr.SAFARI||"stepBefore"==c||"stepAfter"==c||"step-before"==c||"step-after"==c||k.thresholdType||d||Xr.FIREFOX&&f.enabled;q=on(u,T);var p=r&&r.animation&&r.animation.marquee?ga(ae.animation.marquee,r.animation.marquee,!0):ae.animation.marquee;K=p.enabled,$=p.duration;var g=ie.dataset.getDataType("x"),v=ie.dataset.getDataType("y",U),y=g==Sn?W.domain():null,m=v==Sn?V.domain():null,j=g!=Sn||za(ie.dataObject.hierarchical)?ie.dataObject.getCategories("x"):y,H=re.chart.axes.yaxis[U].reversed;g!=Sn&&0==j.length&&M&&ce==Zi&&(j=ie.dataObject.findXCategories()),fe.seriesdataAfterUpdate=[],n.forEach(function(e,t){var a;a=g==Sn||v==Sn?ie.dataObject.updateSeriesdatabyCategories(wa(e),y,m,U):e,fe.seriesdataAfterUpdate[t]=a,ue[t]=ay(k,a,oe,le)});var b=qe(this);fe.update=function(){b.transition().call(fe)},(Z=sn(b,"g",[a],".","class","lineseries_"+N)).node().index=N,A&&(Z=sn(Z,"g",[a],".","class","rangePos_"+le));var B,x=P?{inner:.32,outer:.56}:{inner:.4,outer:.7};D&&!R&&(L.color=S.color||ie.seriesColor[N%ie.seriesColor.length],B=ya(L,"marker")+ya(f,"blink"),J=eo(Z,B,L,{color:L.color,symbolSize:x,strokeWidth:T},ie),delete L.color),D&&!R&&ao(J.selectAll(".outer,.inner"),f,ie),D&&R?(de.commonRendererProp(F).shiftInfo(oe).yrangePos(le),de.chartRendered=!1,b.call(de)):b.selectAll("g.scatterseries_"+N).remove(),n.forEach(function(e,a){var t=S.disabled;ie.renderVisiblePointsOnly&&(fe.seriesdataAfterUpdate[a]=no.helpers.filterPointsInViewport(ie,fe.seriesdataAfterUpdate[a],"line","x",N));var r=fe.seriesdataAfterUpdate[a];ie.systemConf.chart.axes.xaxis.reversed&&(r=r.slice(0).reverse());var n,i=r,o=sn(Z,"g",function(e){return t?[]:[e]},".","class","subseries_"+a);if(Q=o.selectAll("path.line").data(function(e){return t?[]:[e]}),M&&ce!=Xi){if(ce==Zi)i=r.map(function(e,t){return Object.create(r[0])});else{var l=ce==Ui?Y.xidx:Y.yidx(U),s=ce==Ui?W:V,c=P&&H&&!ee?s.domain().length-1:0;i=r.map(function(e,t){var a=Object.create(e);if(ee&&ce!=Ui)a.y0=0,a.y=P||null==ne||null==s(ne)?s.domain()[0]:Mt(ne,s.domain()[0]);else if(A&&ce==Ni){var r=new Array(2),n=ie.dataset.getY(e,U,0);r[0]=n,r[1]=null==a[l]?null:null!=ne&&null!=s(ne)?Mt(ne,n):n,a[l]=r}else a[l]=null==a[l]?null:P||null==ne||null==s(ne)?s.domain()[c]:Mt(ne,s.domain()[0]);return a})}n=wa(i)}if(null!=oe&&he){var u=W(r[0][0])+(null!=W.bandwidth?W.bandwidth()/2:0),d=ie.dataObject.getXYvalue(G,ee,W,V,U,r[r.length-1],"x",null,le)-ie.dataObject.getXYvalue(G,ee,W,V,U,r[0],"x",null,le),h={name:"rect",id:ie.id,x:u,y:0,width:d,height:ie.plotarea.height},f={chartObj:ie},p=tn.get(tn.svg_clips,"rect",h,f);Z.attr("clip-path","url("+w+"#"+p+")")}var g=Q.enter().append("path").attr("class","line").datum(i,function(e){return Y.getX(e)}).attr("d",ue[a]).style("stroke",S.color||X).style("fill",Qt).style("stroke-width",T).style("stroke-opacity",null==_||""===_?1:_);M&&(ce==Qi||ce==Zi?fs(i,n,r,j,ce,z,se,k,function(e){return{d:ue[a](e)}},g):ce==Xi?function(e,t,a){e.styles({"stroke-dasharray":function(){return this.getTotalLength()+" "+this.getTotalLength()},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(a).ease(t).style("stroke-dashoffset",0).on("end",function(){pe(qe(this))})}(g,z,se):g.transition().duration(se).ease(z).attrTween("d",function(){var t=at(ue[a](i),ue[a](r));return function(e){return t(e)}}));var v=g.merge(Q).datum(r,function(e){return Y.getX(e)}).attrs({id:"line_"+N,"stroke-dasharray":q}).styles({"stroke-linecap":I,"stroke-width":T,"stroke-opacity":Ea(_,1),fill:Qt,stroke:E(N,$t,O("strokeColor")||X,$t,_,a)}),y=r;if(null!=oe){var m=null!=oe?Math.abs(ie.dataObject.getXYvalue(G,ee,fe.oldXscale,V,U,r[0],"x",null,le)-ie.dataObject.getXYvalue(G,ee,W,V,U,r[0],"x",null,le)):null;Q.datum(y).attr("d",ue[a]).transition().duration(se).ease(z).attr("transform",function(){return null==m?null:"translate(-"+m+",0)"}),pe(Q)}else null==g.node()&&(Q.datum(y).attr("transform",null).transition().duration(se).ease(z).attr("d",ue[a]),pe(Q));var b=D&&!R?"url("+w+"#"+B+")":$t,x=L.position,C=x?{"marker-start":-1<x.indexOf(rl)?b:$t,"marker-mid":-1<x.indexOf(nl)?b:$t,"marker-end":-1<x.indexOf(il)?b:$t}:{marker:b};v.styles(C),g.exit().remove()});var C=0;R&&D||(C=D?.5*(L.size||T)*10+T/2:0,te.push({renderer:fe,charttype:"scatter",chartObj:ie,args:[S,N,C,le]}),ie.dataObject.markerSize[o]&&ie.dataObject.markerSize[o].add(C)),fe.getSymbolSize=de.getSymbolSize||function(){return C}}),fe.renderedTimer=setTimeout(function(){K&&!function e(t,a,r,n){var i=r.reduce(function(e,t){return t+e},0);t.attr("stroke-dasharray",r).attr("stroke-dashoffset",i).transition().duration(a).ease(Ke).attr("stroke-dashoffset",0).on("end",function(){n&&n.chartRendered&&e(t,a,r,n)})}(Z.selectAll("#line_"+N),$,q,fe),he=fe.chartRendered=!0},he?2*se+20:se+20),fe.oldXscale=W,fe}function pe(e){e.styles({"stroke-dasharray":q,"stroke-dashoffset":null})}return fe.getHighlighter=function(e,t){return fe.highlighter||(fe.highlighter=new wh(e,fe)),fe.highlighter},fe.commonRendererProp=function(e){return arguments.length?(F=e,fe):F},fe.shiftInfo=function(e){return arguments.length?(oe=e,fe):oe},fe.yrangePos=function(e){return arguments.length?(le=e,fe):le},fe},Gr.packedbubble=function(){return{fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}}},dt.packedbubble=function(){var G,U,X,Z,Q,q,K,l,s,$,J,ee,te=v(),ae=!1,re=[];function ne(Y){return Y.each(function(i){var n=G.params;Z=n.chartObj;var r=n.color,o=n.notesArray,a=n.yaxiscolumnorder,l=n.dataset,s=(Z.systemConf,n.labelQueue);Q=n.commonPlotOptions;var c=ne.fillColorFunc=Dn(Z,0),t=Rn(Z,0),e=i.filter(function(e,t){return e.seriesIndex=t,re[t]=[],!e.disabled}),u=Z.plotarea.width,d=Z.plotarea.height,h=1===e.length,f=ll.hasPatternPallete(Z)||Z.patternPallete,p=Z.systemConf.notes,g=p&&!0===p.enabled&&p.plotValues;q=Q.mode,$=Wn(Q,Z);var v="absolute"===Q.showAsNegative,y=+Q.interPadding||0,m=+Q.outerPadding||0,b=zt(u,d)-m;K=[Z.plotarea.left+(u-b)/2,Z.plotarea.top+(d-b)/2],J=function(e){if(!ee&&le(e))return 0;var t=l.getY(e,a)||0;return t<0?v?Dt(t):0:t};function x(e){return e.depth&&i[ie(e)].plotoptions}function C(e){return Ea(oo(x(e),Q,Z,"enabled"),!0)}function k(e){return"translate("+e.x+","+e.y+")"}function w(e){return e.r}function S(){return Q.fillOpacity}function O(){return Q.strokeOpacity}var A=hs(Q,null,Z,Ai),P=A.enabled,T=A.type,_=A.easingType,E=ae?P?200:0:A.duration,L=!ae&&(T===ji||T===Di);te.size([b,b]).padding(y),(U=sn(Y,"g",[1],".","class","hierarchychart")).attr("transform","translate("+(u-b)/2+","+(d-b)/2+")"),(X=sn(U,jr,se(i,!0))).attrs({class:function(e){return"series_"+ie(e)}}).style("visibility",function(e){return le(e)?"hidden":null}),X=X.filter(function(e){return!le(e)});var M=se(e);ne.total=M[0].value,(X=X.data(M)).attrs({transform:L?k:function(){var e=qe(this).attr("transform");return null!=e?e:"translate("+b/2+","+b/2+")"},r:L?w:function(){var e=qe(this).attr("r");return null!=e?e:0}}).styles({fill:function(e,t){e.index=t,e.r=e.r||0,e.x=e.x||0,e.y=e.y||0,e.data.parent=e.parent,g&&(e.data.x=e.x,e.data.y=e.y),!e.children&&e.parent&&re[ie(e)].push(e),e.depth?"flat"!==q&&1===e.depth&&$?e.arcColor="grey":e.arcColor=r[($?oe(e):ie(e))%r.length]:e.arcColor="flat"==q||$||h?Qt:"grey";var a=function(e){return e.children?e.arcColor:null}(e);return e.fillColor=!e.depth&&f?Qt:c($?oe(e):ie(e),e.data,null,a)},"fill-opacity":L?0:S,"stroke-opacity":L?0:O,stroke:function(e){return e.arcColor===Qt?Qt:Q.strokeColor?Q.strokeColor:e.children?e.arcColor:t($?oe(e):ie(e),e.data)},"stroke-width":function(){return Q.strokeWidth},cursor:function(e){var t=x(e);return C(e)?oo(t,Q,Z,"cursor")||Kt:$t},"pointer-events":function(e){return C(e)&&!e.children?null:Qt}});var z=X.size(),D=ae||T!==ji?E:E/z,I=T===ji?D:0;X.transition().delay(function(e,t){return ae?0:t*I}).duration(D).ease(ae?Ke:_).attrs({transform:k,r:w}).styles({"fill-opacity":S,"stroke-opacity":O}),Co(Z,X,function(e){return!C(e)});function R(e,t){var a=N(e,t);Z.eventHandler.handlers.mousemove.call(Z.eventHandler,a),mv(e,a)}function j(e,t){var a=N(e,t);a.point=e.data,Z.eventHandler.handlers.mouseout.call(Z.eventHandler,a,ie(e)),mv(e,a)}function H(e,t){var a=N(e,t);Z.eventHandler.handlers.click.call(Z.eventHandler,a,e,ie(e),oe(e),ne),mv(e,a)}function B(e,t){if(ne.chartRendered){var a=As?Tu(e.data,1<i.length?i[ie(e)].seriesname:null):e.data,r=[e.x,e.y];r=[r[0]+(u-b)/2,r[1]+(d-b)/2];var n=N(e,t);n.coordinate=r,n.basedOn="plot",n.data=a,n.point=e.data,Z.eventHandler.handlers.doubleclick.call(Z.eventHandler,n,ie(e),e),mv(e,n)}}var F={target:"plot",touchleave:!0,chartObj:Z},W={mousemove:R,mouseout:j,click:H,dblclick:B},V={singletouchmove:R,touchend:j,tap:H,dbltap:B};function N(e){var t=lo(nt()),a=ie(e),r=oe(e);return{renderer:ne,seriesIndex:a,subSeriesIndex:0,itemIndex:r,coordinates:[t.pageX,t.pageY],element:this,data:e,selected:e.selected,_key:"ZC_"+Z.id+"_"+a+"_0_"+r}}Mo(X.filter(function(e){return!e.children}),W,V,F),ne.renderedTimer=setTimeout(function(){if(As&&i.forEach(function(e,t){o=As.preprocessAnnotations(i,t,function(e,t,a){var r=[e.x,e.y];return[r[0]+(u-b)/2,r[1]+(d-b)/2]},o,Z,n)}),pt){function a(e,t){return t===Dl?ne.total:e.parent.value}var r=[(u-b)/2,(d-b)/2];i.forEach(function(e,t){s.push({renderer:ne,charttype:"hierarchy",chartObj:Z,args:[i[t],t,null,null,a,re[t],r]})})}ne.chartRendered=ae=!0},E+17)}),ne}function c(){if(!l){var e=Z.staticPaneSVG.selectAll("g#zchierarchyhighlight");e.empty()||(s=sn(l=e,Rr,[1]))}}function n(e){var a=[];function i(e,t){var a=t.split(/_/);e.seriesPos=+a[0],e.itemPos=+a[a.length-1]}return function r(e,n){var t=o(e);t?t.forEach(function(e,t){var a=za(n)?n+"_"+t:""+e.seriesIndex;i(e,a),r(e,a)}):(i(e,n),"flat"==q&&a.push(e))}(e),"flat"==q?a:e}function o(e){var t=e.level&&e.level.split("_").length;return!Z.dataObject.hasHierarchyData&&1==t&&e.length<2&&e[0]&&Ba(e[0][0])?e[0]:Ba(e[0])?Ba(e[0][0])?e:e.filter(function(e){return Ba(e[0])||0<J(e)}):null}function ie(e){var t=e.level||e.data&&e.data.level;if(t)return+t.split("_")[0]}function oe(e){return e.data.itemPos}function le(e){var t=ie(e);return za(t)&&Z.seriesdata[t].disabled}function se(e,t){ee=t;var a=Q.order||ge;"string"==typeof a&&(a=Va(window,a));var r=d3.hierarchy(n(e),o).sum(J).sort(a);return te(r),r.descendants()}return ne.commonRendererProp=function(e){return arguments.length?(G=e,ne):G},ne.defaultMouseOverFunc=function(e,t,a){c();var r=qe(X.nodes()[e.index]),n=$n(r).translate,i=Z.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),o=Hn(Z,$?a:t,e.data,t);l.style("opacity",null),s.attrs({transform:"translate("+(K[0]+n[0])+","+(K[1]+n[1])+")",d:Ji("circle")(2*+r.attr("r"))}).styles(Z.legendHighlight.getEffect(i,Ai,bt.test(i)?o:qt,{fill:qt,stroke:o},$?a:t,"plot"))},ne.defaultMouseOutFunc=function(e,t){c(),l.style("opacity",0)},ne},Gr.pyramid=function(){return{threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}}},dt.pyramid=function(){var M,z,D,I,R,j,H,B,F,W,V,N,Y,G,U,X,Z,Q,q,K,$,J,ee,te,ae,re,ne,ie,oe,le=.3,se={},ce=!1;function ue(e){e.each(function(l){var t=z.params;J=t.chartObj,H=t.commonPlotOptions,K=t.color,F=t.notesArray,I=t.yaxiscolumnorder,D=t.dataset,B=J.systemConf;var a=t.labelQueue;J.defsLocation,R=J.plotarea.width,j=J.plotarea.height;var e=zt(R,j);if(ie=H.datalabels.padding,J.datalabels.moduleExists&&Vs(H.datalabels,J)){var r=R*le,n=R-e;n<r&&(ie=se.datalabelPadding=5,e-=Mt(r-n,0))}se.width=e,se.height=4*e/5;var i=l[0].plotoptions,o=pa.getValueOfPlotOptions(i,H);W=B.legend.imagePallete||ll.hasPatternPallete(J);var s=o("strokeWidth"),c=o("strokeOpacity"),u=o("threeDimension"),d=o("fillOpacity"),h=hs(H,i,J,ki),f=h.enabled,p=h.easingType,g=ce?f?200:0:h.duration;M=h.type;var v=0==Ea(oo(i,H,J,"enabled"),!0),y=v?null:oo(i,H,J,"cursor")||"pointer",m=qe(this);(ee=sn(m,"g",[l],".","class","pyramidgroup")).attr("transform","translate("+(R/2-se.width/2)+","+(j/2-se.height/2)+")").style("cursor",y),ne=l=l[0].data[0],re=l.length,$=[],V=se.height,Y=se.width,G=u?se.height/6:0;var b=Rt(It(G/Ht(25*Yt/180),2)-It(G,2));Y-=b,U=Je().range([(Y+b)/2,0]).domain([0,V]),X=Je().range([(Y+b)/2,Y]).domain([0,V]),Z=Je().range([(Y+b)/2,Y+b]).domain([0,V]),Q=Je().range([(Y+b)/2,b]).domain([0,V]),q=Je().range([0,G]).domain([0,V-G/2]),te=[se.width,se.height],oe=ue.fillColorFunc=Dn(J,0,te);var x=Rn(J,0),C=0;ue.total=N=l.reduce(function(e,t){return e+(t.disabled?0:(C++,Dt(D.getY(t,I)||0)))},0);var k=0;if(l.forEach(function(e,t){$.push({height:(k+(e.disabled?0:Dt(D.getY(e,I))))/N*(V-G/2)||0,previousHeight:k/N*(V-G/2)||0}),k+=e.disabled?0:Dt(D.getY(e,I))}),(ae=sn(ee,"g",l)).attr("id",function(e,t){return"section_"+(re-1-t)}).styles({stroke:function(e,t){return x(re-1-t,l[re-1-t],H.strokeColor)},"stroke-opacity":c,"stroke-width":s,"fill-opacity":d,fill:function(e,t){return oe(re-1-t,l[re-1-t])}}).each(function(e,t){sn(qe(this),Rr,[e,e,e,e]).attr("class","section_"+(re-1-t))}),Co(J,ae,v),!v){function w(){var e=this.parentNode,t=ja(qe(e).attr("id").replace(/section_/gi,"")),a=L(e,t);J.eventHandler.handlers.mousemove.call(J.eventHandler,a),mv(l[t],a)}function S(e,t){var a=this.parentNode,r=ja(qe(a).attr("id").replace(/section_/gi,"")),n=L(e,t);J.eventHandler.handlers.mouseout.call(J.eventHandler,n,r),mv(l[t],n)}function O(){var e=this.parentNode,t=ja(qe(e).attr("id").replace(/section_/gi,"")),a=L(e,t);J.eventHandler.handlers.click.call(J.eventHandler,a,ue,0,t,l[t]),mv(l[t],a)}function A(e){var t=this.parentNode,a=ja(qe(t).attr("id").replace(/section_/gi,"")),r=As?Tu(l[a],null):l[a],n=$[a].previousHeight,i=[U(n+q(n)/2)+(R/2-se.width/2),q(n)/2+n+(j/2-se.height/2)],o=L(t,a);o.coordinate=i,o.basedOn="plot",o.data=r,J.eventHandler.handlers.doubleclick.call(J.eventHandler,o,a,e),mv(l[a],o)}var P={target:"plot",touchleave:!0,chartObj:J},T={mousemove:w,mouseout:S,click:O,dblclick:A},_={singletouchmove:w,touchend:S,tap:O,dbltap:A};Mo(ae.selectAll(Rr),T,_,P)}var E=0;function L(e,t){var a=lo(nt());return{renderer:ue,seriesIndex:0,subSeriesIndex:0,itemIndex:t,color:K[t%K.length],coordinates:[a.pageX,a.pageY],element:e,data:l[t],selected:l[t].selected,_key:"ZC_"+J.id+"_0_0_"+t}}ae.each(function(e,a){var t=ee.selectAll("#section_"+a).selectAll(Rr);if(ce)t.transition().duration(g).ease(Ke).attr("d",function(e,t){return de(a,t)});else{var r=D.getY(e,I),n=M==Wi?(e.disabled||!r?0:Dt(r))/N*g:g;E+=e.disabled||!r?0:Dt(r);var i=M==Wi?(N-E)/N*g:0;t.transition().duration(n).delay(i).ease(p).attrTween("d",function(e,t){return function(e,t,a){var r=at(de(M==Wi?t:re-1,a,"down"),de(t,a));return function(e){return r(e)}}(0,a,t)})}}),ue.renderedTimer=setTimeout(function(){if(pt){var e=[J.seriesdata,0,l,C,0,N,se,function(y){var m=[];return y.forEach(function(e,t){var a=y.length-1-t,r=$[a].height,n=$[a].previousHeight,i=(r+n)/2,o=Z(r+q(r)/2),l=-q(r)/2+r,s=Z(n+q(n)/2),c=-q(n)/2+n,u=U(r+q(r)/2),d=q(r)/2+r,h=(o+s)/2,f=(l+c)/2,p=(u+U(n+q(n)/2))/2,g=(d+(q(n)/2+n))/2,v=(U(i+q(i)/2)+X(i+q(i)/2))/2;m.push({rightx:h+ie,leftx:p-ie,y:f,y0:r+q(r)/2,midX:v,leftY:g})}),m}(l)];a.push({renderer:ue,charttype:Ci,chartObj:J,args:e}),a.push({renderer:ue,charttype:"funnelInnerLabels",chartObj:J,args:e})}As&&(F=As.preprocessAnnotations(J.seriesdata,0,function(e,t,a){var r=$[a].previousHeight;return[U(r+q(r)/2)+(R/2-se.width/2),q(r)/2+r+(j/2-se.height/2)]},F,J,t)),ue.chartRendered=ce=!0},g+10)})}function de(e,t,a){var r=$[e].height,n="down"==a?r:$[e].previousHeight;switch(t){case 0:return function(e,t){return"M"+Z(e+q(e)/2)+" "+(-q(e)/2+e)+" L"+Q(e+q(e)/2)+" "+(-q(e)/2+e)+" L"+Q(t+q(t)/2)+" "+(-q(t)/2+t)+" L"+Z(t+q(t)/2)+" "+(-q(t)/2+t)+" L"+Z(e+q(e)/2)+" "+(-q(e)/2+e)}(r,n);case 1:return function(e,t){return"M"+Q(e+q(e)/2)+" "+(-q(e)/2+e)+" L"+U(e+q(e)/2)+" "+(q(e)/2+e)+" L"+U(t+q(t)/2)+" "+(q(t)/2+t)+" L"+Q(t+q(t)/2)+" "+(-q(t)/2+t)+" L"+Q(e+q(e)/2)+" "+(-q(e)/2+e)}(r,n);case 2:return function(e,t){return"M"+U(e+q(e)/2)+" "+(q(e)/2+e)+" L"+X(e+q(e)/2)+" "+(q(e)/2+e)+" L"+X(t+q(t)/2)+" "+(q(t)/2+t)+" L"+U(t+q(t)/2)+" "+(q(t)/2+t)+" L"+U(e+q(e)/2)+" "+(q(e)/2+e)}(r,n);case 3:return function(e,t){return"M"+X(e+q(e)/2)+" "+(q(e)/2+e)+" L"+Z(e+q(e)/2)+" "+(-q(e)/2+e)+" L"+Z(t+q(t)/2)+" "+(-q(t)/2+t)+" L"+X(t+q(t)/2)+" "+(q(t)/2+t)+" L"+X(e+q(e)/2)+" "+(q(e)/2+e)}(r,n)}}return ue.commonRendererProp=function(e){return arguments.length?(z=e,ue):z},ue.defaultMouseOverFunc=function(e,t,a){W?ae.style("opacity",function(e,t){return re-1-t==a?null:.2}):ae.style("fill",function(e,t){return oe(re-1-t,ne[re-1-t],re-1-t==a?.5:null)})},ue.defaultMouseOutFunc=function(e,t){W?ae.style("opacity",null):ae.style("fill",function(e,t){return oe(re-1-t,ne[re-1-t])})},ue},ev.scatter=function(){var t,ge,ve,ye=no.helpers;function me(f,e,r,n){var t=ge.params,p=t.chartObj,g=t.xscale,v=t.yscale,y=t.stacked,m=t.datasetIndex,b=t.axisrotated,a=t.commonPlotOptions,i=t.color,o=t.labelQueue,x=t.yaxiscolumnorder,C=t.dataset,l=t.threshold,s=e.plotoptions||{},c=s?ga(a,s,!0):a,u=e.data,d=p.chartTypes[m],k=d.value,w=d.name,S=co(k),h=lt.bubble.has(k),O=p.dataObject.isPolarAxisCategory,A=(p.seriesColor,p.systemConf.legend),P=ge.params.markerOptions=s&&s.marker?ga(a.marker,s.marker,!0):a.marker,T=(ge.params.hoverOptions=s&&s.hoveroptions?ga(a.hoveroptions,s.hoveroptions,!0):a.hoveroptions,P.symbol||"circle"),_=P.size,E=P.imageUrl,L=S&&Wn(c,p),M=A.patternPallete,z=Pn.isQuantileColorScale(p);S?_=qa(_,1):(Aa(_)&&(_=qa(c.strokeWidth,2)),E||(_*=O?.56:.7),i=qa(e.color,p.seriesColor[m%p.seriesColor.length]));var D=5*_,I=P.outerFillOpacity,R=P.outerStrokeOpacity,j=P.innerFillOpacity,H=P.innerStrokeOpacity,B=qa(P.outerStrokeWidth,1),F=qa(P.innerStrokeWidth,1),W=qa(P.outerStrokeColor,i),V=qa(P.innerStrokeColor,i),N=qa(P.outerFillColor,i),Y=qa(P.innerFillColor,i),G=on(P.outerDashStyle,B),U=on(P.innerDashStyle,F),X=ln(P.outerLineCap,P.outerDashStyle),Z=ln(P.innerLineCap,P.innerDashStyle),Q=P.position;function q(e){return(!O||e&&!e.isDummy)&&(O||k===k.stkdarea||!se(C.getX(e))&&!ce(C.getY(e,x)))?h?p.dataObject.getXYvalue(b,y,g,v,x,e,"z",p.zscale,ve):2*D:0}za(r)&&(B=qa(r["stroke-width"],B),!za(n)||R&&Pe(W).opacity||(F=qa(r["stroke-width"],F))),za(I)&&N&&(N=Mn(N,I)),za(R)&&W&&(W=Mn(W,R)),za(j)&&Y&&(Y=Mn(Y,j)),za(H)&&V&&(V=Mn(V,H)),S&&(me.highlighter=h?new Ph(p,me):new Ch(p,me)),me.getSymbolSize=q,me.getSymbolBBox=function(e){var t=q(e)/2;return 0<t&&("line"==T||"vertical-line"==T)?"line"==T?{width:t,height:pe||1}:"vertical-line"==T?{width:pe||1,height:t}:void 0:null};var K,$=!(za(l)||L||"scatter"!==w&&"line"!==w&&"area"!==w||M||E||z),J=(me.fillColorFunc=Dn(p,m,null,!S),Rn(p,m)),ee=Dn(p,m,null,!0);if($){ne=me.fillColorFunc(0,null,null,N,null,S?[D,D]:null,!1);var te=(K=ev.scatter.getCache(T,D,W,B,ne,V,F,Y,P)).adjustPosition,ae=K.canvas,re=K.width}if(!e.disabled){var ne,ie,oe=p.dataset.getDataType("x"),le=p.dataset.getDataType("y",x),se=ye.isCatNull(C,"x"),ce=ye.isCatNull(C,"y",x),ue=oe==Sn?g.domain():null,de=le==Sn?v.domain():null;(oe!=Sn||null==g.domain||za(p.dataObject.hierarchical))&&p.dataObject.getCategories("x");if(p.dataObject.markerSize[w]){var he="line"==T||"vertical-line"==T?pe||1:2*D;p.dataObject.markerSize[w].add(he)}me.seriesdataAfterUpdate=[],u.forEach(function(e,t){var h;if(h=oe==Sn||le==Sn?p.dataObject.updateSeriesdatabyCategories(wa(e),ue,de,x):e,p.renderVisiblePointsOnly){var a="scatter"===w||"bubble"===w?"xy":"x";h=no.helpers.filterPointsInViewport(p,h,w,a,m)}me.seriesdataAfterUpdate[t]=h,z&&za(r)&&(h=ll.filterSelectionByColor(h,!0,n,p)),h.forEach(function(e,t){var r,a=0===t?rl:t===h.length-1?il:nl;if(O||k===Ne.stkdarea||e&&!e.isDummy&&!se(C.getX(e))&&!ce(C.getY(e,x))){if(Q&&Q.indexOf(a)<=-1)return;var n=p.dataObject.getXYvalue(b,y,g,v,x,e,"x"),i=p.dataObject.getXYvalue(b,y,g,v,x,e,"y"),o=q(e)/2;if($){f.beginPath();var l=o+B/2+te;f.drawImage(ae,n-l,i-l,re-1,re-1),f.closePath()}else{if(N||W){r=J(L?t:m,e,p.imagePallete?null:P.outerStrokeColor,$t,R);function s(e,t,a){ev.scatter.drawPath(T,e,n,i,o,B,r,t,G,X,E,a,I)}if(E){var c={x:n,y:i,width:2*o,height:2*o,context:f,name:E,repeatMode:"no-repeat"};tn.canvas_patterns.imageFill(c,s)}else if(p.imagePallete){c={x:n,y:i,context:f,name:p.imagePallete[L?t:m]};tn.canvas_patterns.imageFill(c,s)}else{var u=me.fillColorFunc(L?t:m,e,null,P.outerFillColor,I,S?[o,o]:null,!1);s(f,u)}}var d=!0;!E&&(0!==F||0!==j&&"transparent"!==P.innerFillColor)||(d=!1),d&&(u=ee(L?t:m,e,null,P.innerFillColor,j,null,!1),ie=Mn(J(L?t:m,e,p.imagePallete?null:P.innerStrokeColor),H),ev.scatter.drawPath(T,f,n,i,o/2,F,ie,u,U,Z,null,null,null,"inner"))}}})})}if(za(pt)){var fe;if(S)fe=2*D+P.outerStrokeWidth;else{var pe=qa(c.strokeWidth,2);fe=qa(P.size,pe)*D+pe/2}o.push({renderer:me,charttype:"scatter",chartObj:p,args:[e,m,fe,ve]})}return me.chartRendered=!0,me}return me.getHighlighter=function(e,t){if(!me.highlighter){var a=lt.bubble.has(e.chartTypes[t].value);me.highlighter=a?new Ph(e,me):new Ch(e,me)}return me.highlighter},me.commonRendererProp=function(e){return arguments.length?(ge=e,me):ge},me.shiftInfo=function(e){return arguments.length?(t=e,me):t},me.yrangePos=function(e){return arguments.length?(ve=e,me):ve},me},ev.scatter.drawPath=function(e,t,a,r,n,i,o,l,s,c,u,d,h,f){if(t.save(),t.translate(a,r),t.beginPath(),t.lineWidth=i,t.strokeStyle=o,"circle"===e)t.arc(0,0,n,0,2*Yt);else{var p=Ji(e)(2*n,f);rc.drawPath(t,p)}u&&(t.globalAlpha=h,t.translate(-n+d.x,-n+d.y)),(t.fillStyle=l)&&t.fill(),u&&(t.globalAlpha=1),s&&s.length&&"object"===(void 0===s?"undefined":_typeof(s))&&za(t.setLineDash)&&(t.setLineDash(s),t.lineCap=c),i&&o&&t.stroke(),t.closePath(),t.restore()},ev.scatter.getCache=function(e,t,a,r,n,i,o,l,s){var c=1.5*ea,u=document.createElement("canvas"),d=(t+r/2)*c+5,h=u.getContext("2d"),f=(2*t+r+10)*c,p=f/c;return u.height=u.width=f,this.drawPath(e,h,d,d,t*c,r*c,a,n,on(s.outerDashStyle,r,c),ln(s.outerLineCap,s.outerDashStyle)),this.drawPath(e,h,d,d,t/2*c,o*c,i,l,on(s.innerDashStyle,o,c),ln(s.innerLineCap,s.innerDashStyle),null,null,null,"inner"),{canvas:h.canvas,width:p,adjustPosition:5/c}},Gr.scatter=function(e){var t={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};return"geoscatter"===e&&(t.animation.type="sizing",t.datalabels.showAs="geo",t.datalabels.orient="bottom",t.datalabels.textOverlap="hidden"),t},dt.scatter=function(){var de,he,fe,pe,ge,ve,ye,me,be,u,xe,d,Ce,ke,t,h,we,Se=!1,f=no.helpers;function Oe(e){return e.each(function(e){var S=h.params;de=S.chartObj,he=S.xscale,fe=S.yscale,ye=S.stacked,pe=S.datasetIndex,be=S.axisrotated,xe=S.commonPlotOptions,ve=S.color,u=S.labelQueue,Ce=S.hasNegValue,ge=S.yaxiscolumnorder,me=S.dataset,d=de.systemConf;var t=S.renderingOrderIndex,O=de.defsLocation,A=d.chart.axes.xaxis.reversed,P=d.chart.axes.yaxis[ge].reversed,a=qe(this);Oe.update=function(){a.transition().call(Oe)};var T=e[pe],r={data:T,index:t},_=T.plotoptions,E=de.chartTypes[pe].value,n=de.chartTypes[pe].name,L=lt.bubble.has(E),M=co(E),z=de.dataObject.isPolarAxisCategory,i=T.data,D=sn(a,"g",[r],".","class","scatterseries_"+pe);"arearange"===n&&(D=sn(D,"g",[r],".","class","rangePos_"+we));var o=hs(xe,_,de,n),I=o.enabled,R=o.easingType,j=o.type;ke=o.duration;var H=h.params.markerOptions=_&&_.marker?ga(xe.marker,_.marker,!0):xe.marker,B=(h.params.hoverOptions=_&&_.hoveroptions?ga(xe.hoveroptions,_.hoveroptions,!0):xe.hoveroptions,H.symbol),l=H.size,F=H.imageUrl,W=H.position;M?(l=Ea(l,1),j=j==Di?ji:j):(Aa(l)&&(l=(_?pa.getValueOfPlotOptions(_,xe)("strokeWidth"):xe.strokeWidth)||2),F||(l*=z?.56:.7),j=(j=j==Ni||j==Yi?Vi:j)==Ui?Gi:j,ve=T.color||ve);var V=Ji(B),N=!!M&&Wn(xe,de),Y=10*l,G=j==ji?0:H.outerFillOpacity,U=j==ji?0:H.outerStrokeOpacity,X=j==ji?0:H.innerFillOpacity,Z=j==ji?0:H.innerStrokeOpacity,Q={name:H.imageUrl},q=on(H.outerDashStyle,H.outerStrokeWidth),K=on(H.innerDashStyle,H.innerStrokeWidth),$=ln(H.outerLineCap,H.outerDashStyle),J=ln(H.innerLineCap,H.innerDashStyle),ee=Pn.isQuantileColorScale(de)&&!1===H.enabled?"hidden":$t,te=Oe.fillColorFunc=Dn(de,pe,null,!M||null),ae=Rn(de,pe);if(de.dataObject.markerSize[n]){var s="line"==B||"vertical-line"==B?ue||1:Y;de.dataObject.markerSize[n].add(s)}Oe.seriesdataAfterUpdate=[];var re=de.dataset.getDataType("x"),ne=de.dataset.getDataType("y",ge),ie=f.isCatNull(me,"x"),oe=f.isCatNull(me,"y",ge),le=re==Sn?he.domain():null,se=ne==Sn?fe.domain():null,ce=re!=Sn||null==he.domain||za(de.dataObject.hierarchical)?de.dataObject.getCategories("x"):le;if(i.forEach(function(e,t){var r;r=re==Sn||ne==Sn?de.dataObject.updateSeriesdatabyCategories(wa(e),le,se,ge):e,de.renderVisiblePointsOnly&&(r=no.helpers.filterPointsInViewport(de,r,"scatter","xy",pe)),Oe.seriesdataAfterUpdate[t]=r;var a,n,i,o=T.disabled;if(j==Qi||j==Zi){if(a=r,A&&(a=a.slice(0).reverse()),n=a,j==Zi)n=a.map(function(e,t){return Object.create(a[0])});else if(j==Qi){var l=z&&P&&!ye?fe.domain().length-1:0;n=a.map(function(e,t){var a=Object.create(e),r=z||null==Ce||null==fe(Ce)?fe.domain()[l]:Mt(Ce,fe.domain()[0]);return ye&&(a.y0=0,a.y=r),a[me.yidx(ge)]=r,a})}i=wa(n)}function s(e,t){return(!z||e&&!e.isDummy)&&(z||E===Ne.stkdarea||e&&!e.isDummy&&!ie(me.getX(e))&&!oe(me.getY(e,ge)))?[{color:N?de.seriesColor[t%de.seriesColor.length]:ve,index:N?t:pe,data:e}]:[]}var c=sn(D,"g",function(e){return o?[]:[r]},".","class","subseries_"+t).selectAll("g.scatter").data(function(e){return e}).attr("class","scatter"),u=c.enter().append("g").attr("class","scatter"),d=u.size(),h=j!=Ki?ke:ke/d;I&&(j==Qi||j==Zi?fs(n,i,a,ce,j,R,ke,S,function(a){return{transform:function(e,t){return"translate("+C(a[t])+","+k(a[t])+")"}}},u,"scatter"):u.attr("transform",function(e,t){return"translate("+C(e)+","+k(e)+")"+(F&&j===Hi?" scale(0)":"")}).transition().delay(function(e,t){return j==Ki?t*h:0}).duration(h).ease(R).attr("transform",function(e){return"translate("+de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"x",null,we)+","+de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"y",null,we)+")"}));var f=u.merge(c),p=sn(f,"path",s,".","class","outer");Se||p.styles({"fill-opacity":G,"stroke-opacity":U,visibility:ee});var g=s;!F&&(0!==H.innerStrokeWidth||0!==H.innerFillOpacity&&"transparent"!==H.innerFillColor)||(g=[]),sn(f,"path",g,".","class","inner").styles({"fill-opacity":X,"stroke-opacity":Z,visibility:ee}),Se&&F&&f.attr("transform",function(e){var t=qe(this).attr("transform"),a=qe(this).attr("size"),r=w(e);if(t)return t+" scale("+a/r+")"}),f.style("visibility",function(e,t){if(!W)return $t;var a=0===t?rl:t===r.length-1?il:nl;return-1<W.indexOf(a)?$t:"hidden"}).transition().delay(function(e,t){return j!=Qi&&j!=Zi||null==u.node()?j==Ki?t*h:0:ke}).duration(h).ease(R).attr("transform",function(e){return"translate("+de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"x",null,we)+","+de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"y",null,we)+")"}).attr("level",function(e,t){if(za(de.dataObject.hierarchical))return e.level}).styles({transition:"opacity ease .2s",opacity:function(e){if(za(de.dataObject.hierarchical)&&za(de.cache.hierarchical)&&de.cache.hierarchical.active)return!0===e.active?1:.1}});var v=j===Bi?2*ke/5:h,y=j===Bi?function(){return Nt()*(3*ke/5)}:0,m=f.selectAll("path.outer").attr("d",function(e,t){var a=qe(this.parentNode).attr("size"),r=w(e.data);return V(null!=a?F?r:a:j!=Hi&&j!==Bi||F?r:0)}).styles({"stroke-width":H.outerStrokeWidth,fill:function(e){var t=w(e.data);if(F)return Q.width=Q.height=parseFloat(t),Q.x=Q.y=-parseFloat(t)/2,"url("+O+"#"+tn.get(tn.svg_patterns,"imageFill",Q,{chartObj:de})+")";var a=t/2;return te(e.index,e.data,null,H.outerFillColor,null,M?[a,a]:null)},stroke:function(e){return ae(e.index,e.data,H.outerStrokeColor)},"stroke-dasharray":q,"stroke-linecap":$,visibility:ee}),b=f.selectAll("path.inner").attr("d",function(e,t){var a=qe(this.parentNode).attr("size"),r=null!=a?a:j!=Hi&&j!==Bi||F?w(e.data):0;return V(r/2,"inner")}).styles({"stroke-width":H.innerStrokeWidth,fill:function(e){var t=w(e.data)/4;return te(e.index,e.data,null,H.innerFillColor,null,M?[t,t]:null)},stroke:function(e){return ae(e.index,e.data,H.innerStrokeColor)},"stroke-dasharray":K,"stroke-linecap":J,visibility:ee});m.transition().delay(y).duration(v).ease(R).attr("d",function(e){return V(w(e.data))}).styles({"fill-opacity":H.outerFillOpacity,"stroke-opacity":H.outerStrokeOpacity}),b.transition().delay(y).duration(v).ease(R).attr("d",function(e){return V(w(e.data)/2,"inner")}).styles({"fill-opacity":H.innerFillOpacity,"stroke-opacity":H.innerStrokeOpacity});var x=(_&&_.animation&&_.animation.blink?ga(xe.animation.blink,_.animation.blink,!0):xe.animation.blink)||{};function C(e){switch(j){case Vi:var t=null!=Ce&&null!=fe(Ce)?fe(Mt(Ce,fe.domain()[0])):fe.origRange[0];return be?t:de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"x",null,we);case Gi:t=(null!=Ce&&null!=he(Ce)?he(Mt(Ce,he.domain()[0])):he.origRange[0])+(null!=he.bandwidth?he.bandwidth()/2:0);return be?de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"x",null,we):t;case ji:case Hi:case Bi:case Zi:case Qi:case Xi:return de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"x",null,we);default:var a=(be?fe:he).origRange;return a[be&&P||!be&&A?a.length-1:0]}}function k(e){switch(j){case Vi:var t=null!=Ce&&null!=fe(Ce)?fe(Mt(Ce,fe.domain()[0])):fe.origRange[0];return be?de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"y",null,we):t;case Gi:var a=(null!=Ce&&null!=he(Ce)?he(Mt(Ce,he.domain()[0])):he.origRange[0])+(null!=he.bandwidth?he.bandwidth()/2:0);return be?a:de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"y",null,we);case ji:case Hi:case Bi:case Zi:case Qi:case Xi:return de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"y",null,we);default:var r=(be?he:fe).origRange;return r[be&&A||!be&&P?r.length-1:0]}}function w(e){return(!z||e&&!e.isDummy)&&(z||E===Ne.stkdarea||!ie(me.getX(e))&&!oe(me.getY(e,ge)))?L?de.dataObject.getXYvalue(be,ye,he,fe,ge,e,"z",de.zscale,we):Y:0}ao(f.selectAll(".outer,.inner"),x,de),f.attr("size",function(e){return w(e)}),c.exit().remove(),Oe.getSymbolSize=w,Oe.getSymbolBBox=function(e){var t=w(e);return 0<t&&("line"==B||"vertical-line"==B)?"line"==B?{width:t,height:ue||1}:"vertical-line"==B?{height:ue||1,width:t}:void 0:null}}),M&&(Oe.highlighter=L?new Ph(de,Oe):new Ch(de,Oe)),null!=pt){var c;if(M||L)c=Y+H.outerStrokeWidth;else{var ue=Ea(pa.getValueOfPlotOptions(_,xe)("strokeWidth"),2);c=(H.size||ue)*Y*.5+ue/2}u.push({renderer:Oe,charttype:"scatter",chartObj:de,args:[T,pe,c,we]})}Oe.renderedTimer=setTimeout(function(){Oe.chartRendered=Se=!0},ke)}),Oe}return Oe.getHighlighter=function(e,t){if(!Oe.highlighter){var a=lt.bubble.has(e.chartTypes[t].value);Oe.highlighter=a?new Ph(e,Oe):new Ch(e,Oe)}return Oe.highlighter},Oe.commonRendererProp=function(e){return arguments.length?(h=e,Oe):h},Oe.shiftInfo=function(e){return arguments.length?(t=e,Oe):t},Oe.yrangePos=function(e){return arguments.length?(we=e,Oe):we},Oe},Gr.bubble=function(){return{outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}}},Gr.sunburst=function(){return{strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"splitpercent",parentLabel:{}}}}},dt.sunburst=function(){var z,D,I,R,j,H,B,F,W,V,N,Y,G,U,X,Z,Q,q,K,$,J,ee,r,te,ae,re,ne,n,ie=!1,oe={};function le(M){return M.each(function(l){var a=z.params;G=a.chartObj,Q=a.commonPlotOptions,Y=a.color,U=a.notesArray,W=a.yaxiscolumnorder,H=a.dataset,G.systemConf;var i=a.labelQueue;V=G.plotarea.width,N=G.plotarea.height;function r(e){return fe(e)||q(e)===K(e)||!e.value?Qt:$t}var n,s=pa.getValueOfPlotOptions,e=Q.datalabels,t=+Q.outerPadding||0,o="absolute"===Q.showAsNegative;ee=null,ae=0,ne=[];var c=G.datalabels.moduleExists&&Vs(e,G)&&Ms(e,G)?zs(e,G)+Ds(e,G):0;te=Q.events&&Q.events.highlightHierarchy;var u=hs(Q,null,G,Oi),d=u.enabled,h=u.type,f=u.easingType,p=ie?d?200:0:u.duration;j=zt(V,N)/2-t-2*c;var g=zt(Mt(0,mr(Q.innerRadius,j)),mr("95%",j)),v=le.fillColorFunc=Dn(G,0,[j,j]),y=Rn(G,0);q=function(e){return Mt(0,zt(2*Yt,D(e.x0)))},K=function(e){return Mt(0,zt(2*Yt,D(e.x1)))},$=function(e){return I(e.y0)+n/2},J=function(e,t){return t=t||0,function(e){return I(e.y1)+t-n/2}},re=function(e){if(fe(e))return 0;var t=H.getY(e,W)||0;return t<0?o?Dt(t):0:t},R=tt().startAngle(q).endAngle(K).innerRadius($).outerRadius(J(I)),B=tt().startAngle(q).endAngle(K).innerRadius($).outerRadius(J(I)),(Z=sn(M,"g",[l],".","class","hierarchychart")).attr("transform","translate("+V/2+","+N/2+")"),F=[],Z.selectAll(Rr).each(function(e){F.push({x0:e.x0,x1:e.x1})});var m=function(e){var t=ve(),a=d3.hierarchy(e,pe).sum(re).sort(ge);return t(a),a.descendants()}(l);le.total=m[0].value,ys(X=sn(Z,Rr,m));var b=[],x=[],C=[];l.forEach(function(e,t){x[t]=[[]],x[t].disabled=e.disabled,x[t].plotoptions=e.plotoptions,C[t]=[],C[t].disabled=e.disabled,C[t].plotoptions=e.plotoptions;var a=Y[t%Y.length];b[t]=Je().domain([0,yu(e)]).range([a,zn(a,1.5,"brighter")])});function k(e){return e.depth&&C[de(e)].plotoptions}function w(e){return Ea(oo(k(e),Q,G,"enabled"),!0)}X.attr("class",function(e){return null!=he(e)?"series_"+de(e):null}).attr("id",function(e){return"arcPath_"+he(e)}).each(function(e,t){e.index=t;var a=de(e),r=he(e);if(ae=Mt(ae,e.depth),e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var n=l[a].plotoptions,i=null!=n?s(n,Q)("childrenColors"):Q.childrenColors;if(e.children||null==i){var o=b[a](oe[r]);e.data.arcColor=o}else e.data.arcColor=i[oe[r]%i.length]}e.children||x[a][0].push(e),C[a].push(e),ne[r]=e}else e.data.arcColor=qt}),D=Je().range([0,2*Yt]),I=Je().range([g,j]).domain([m[0].y1,1]),n=zt(Mt(0,mr(Q.padding,j,0)),.9*(j-g)/ae),X.style("display",function(e){var t=qe(this).style("display"),a=r(e);return!ie||t===Qt&&a===Qt?a:$t}).transition().duration(p).ease(ie?Ke:f).attrTween("d",ie||"fan"===h?se:"wheel"===h?ue:ce).on("end",function(){qe(this).style("display",r)}),X.styles({fill:function(e){return e.fillColor=v(de(e),e.data)},stroke:function(e){return e.depth?Q.strokeColor?Q.strokeColor:y(de(e),e.data):"white"},"stroke-opacity":function(e){return e.depth?s(l[de(e)].plotoptions,Q)("strokeOpacity"):1},"fill-opacity":function(e){return e.depth?s(l[de(e)].plotoptions,Q)("fillOpacity"):0},"stroke-width":function(e){return e.depth?s(l[de(e)].plotoptions,Q)("strokeWidth"):0},cursor:function(e){var t=k(e);return w(e)?oo(t,Q,G,"cursor")||Kt:$t},"pointer-events":function(e){return e.depth&&w(e)?null:"none"}}),Co(G,X,function(e){return!w(e)});function S(e,t){var a=L(e,t);G.eventHandler.handlers.mousemove.call(G.eventHandler,a),mv(e,a)}function O(e,t){var a=L(e,t);G.eventHandler.handlers.mouseout.call(G.eventHandler,a),mv(e,a)}function A(e,t){var a=L(e,t);G.eventHandler.handlers.click.call(G.eventHandler,a),mv(e,a)}function P(e,t){if(le.chartRendered){var a=null==e.children?null!=As?Tu(e,1<l.length?e.parent.data.seriesname:null):e:[e.data.seriesname,e.value],r=B.centroid(e);r=[r[0]+V/2,r[1]+N/2];var n=L(e,t);n.coordinate=r,n.basedOn="plot",n.data=a,G.eventHandler.handlers.doubleclick.call(G.eventHandler,n,de(e),e),mv(e,n)}}var T={target:"plot",touchleave:!0,chartObj:G},_={mousemove:S,mouseout:O,click:A,dblclick:P},E={singletouchmove:S,touchend:O,tap:A,dbltap:P};function L(e){var t=lo(nt()),a=he(e);return{renderer:le,seriesIndex:de(e),coordinates:[t.pageX,t.pageY],element:this,data:e.data,level:a,selected:e.selected,_key:"ZC_"+G.id+"_"+a}}Mo(X.filter(function(e){return e.depth&&w(e)}),_,E,T),le.renderedTimer=setTimeout(function(){if(null!=pt){var r=tt().startAngle(q).endAngle(K).innerRadius(J(I)).outerRadius(J(I)),e=Q.datalabels.padding+c,n=tt().startAngle(q).endAngle(K).innerRadius(J(I,e)).outerRadius(J(I,e));l.forEach(function(e,a){function t(e,t){return[x,a,e,j,function(e,t){return t===Dl?le.total:le.getProcessedNode(e).parent.value},n,r,B,[V/2,N/2],t]}i.push({renderer:le,chartObj:G,charttype:bi,args:t(C[a])}),i.push({renderer:le,chartObj:G,charttype:"pieInnerLabels",args:t(x[a][0])}),i.push({renderer:le,chartObj:G,charttype:"pieInnerLabels",args:t(C[a].filter(function(e){return e.children}),!0)})})}null!=As&&l.forEach(function(e,t){U=As.preprocessAnnotations(l,t,function(e,t,a){var r=le.getProcessedNode(e),n=B.centroid(r);return[n[0]+V/2,n[1]+N/2]},U,G,a)}),le.chartRendered=ie=!0},p+1e3/60)}),le}function s(){if(!ee){var e=G.staticPaneSVG.selectAll("g#zchierarchyhighlight");e.empty()||((ee=e).attr("transform","translate("+(G.plotarea.left+V/2)+","+(G.plotarea.top+N/2)+")"),r=sn(ee,Rr,rt(te?ae:1)))}}function se(t,e){var a=at(ie&&F[e]?q(F[e]):0,q(t)),r=at(ie&&F[e]?K(F[e]):0,K(t));return function(e){return R.startAngle(a(e)).endAngle(r(e)),R(t)}}function ce(t){var a=at(0,$(t)),r=at(0,J(I)(t));return function(e){return R.innerRadius(a(e)).outerRadius(r(e)),R(t)}}function ue(t){var a=at(q(t),K(t));return function(e){return R.endAngle(a(e)),R(t)}}function de(e){var t=he(e);if(t)return+t.split("_")[0]}function he(e){return e.level||e.data&&e.data.level}function fe(e){var t=de(e);return za(t)&&G.seriesdata[t].disabled}function pe(e){var t=he(e),a=t&&t.split("_").length;return oe[t]=1===a?n=0:n,!G.dataObject.hasHierarchyData&&1==a&&e.length<2&&e[0]&&Ba(e[0][0])?e[0]:Ba(e[0])?e:(n++,null)}return le.commonRendererProp=function(e){return arguments.length?(z=e,le):z},le.defaultMouseOverFunc=function(e,i,t){s();var o=G.legendHighlight.getLegendHighlightEffect(i,"selectedSeries","plot"),a=function(e){var t=[],a=Rr+"#arcPath";if(te){e.split("_").forEach(function(e){a=a+"_"+e,t.push(a)})}else t.push(a+"_"+e);return t}(he(e));if(o!==Qt){ee.style("opacity",null);var l=Z.selectAll(a.join()).nodes();r.each(function(e,t){var a=qe(this);if(l[t]){var r=qe(l[t]),n=Hn(G,i,r.datum(),i);a.attr("d",r.attr("d")).styles(G.legendHighlight.getEffect(o,Oi,bt.test(o)?n:qt,{fill:qt,stroke:n},i,"plot"))}else a.attr("d",null)})}},le.defaultMouseOutFunc=function(e,t){s(),ee.style("opacity",0)},le.getProcessedNode=function(e){return ne[he(e)]},le};function ry(e){var t=this.rp=e.params,a=this.chartObj=t.chartObj;this.commonRendererProp=e,this.dimension=$u.getAvailableBound(a,t.commonPlotOptions),this.createScale(),this.layout=this.getLayout(),this.processData()}function ny(e,t,a){var r=lo(nt()),n=Tf.getLevel(e);return{renderer:a,seriesIndex:Tf.getSeriesIndex(e),coordinates:[r.pageX,r.pageY],element:this,data:e.data,level:n,selected:e.selected||$t,_key:n}}function iy(e){var c,u=e.chartObj,d=e.dimension,t=e.processedData,h=e.rp.commonPlotOptions,f=u.dataset,p=Eo(u);if(u.chartRendered)return t.some(function(e){var t=Tf.getSeriesIndex(e);if(!(Aa(t)||0==Ea(oo(u.seriesdata[t].plotoptions,h,u,"enabled"),!0))){var a=Tf.getTileBound(u,e),r=a.x,n=a.y,i=a.width,o=a.height,l=jn(f.getClr(e.data),u),s={x:r+d.x,y:n+d.y,width:i,height:o};return l&&Ei.pointInRectangle(p,s)&&!e.children?(c=e,!0):void 0}}),c}function oy(e,t,a,r,n,i){return"x"==r?i?n||a.isCascaded?a.isPositive?e+t:e:a.isPositive?e:e+t:n?e+t:e:i?n?e:e+t:n||a.isCascaded?a.isPositive?e:e+t:a.isPositive?e+t:e}function ly(e){return e.y}ry.prototype.createScale=function(){var e=this.chartObj,t=this.dimension;e.axes.x.scale=Je().domain([0,t.width]).range([0,t.width]),e.axes.y.groups[0]=e.axes.y.groups[0]||{},e.axes.y.groups[0].scale=Je().domain([0,t.height]).range([0,t.height])},ry.prototype.getLayout=function(){var e=this.dimension,t=this.rp.commonPlotOptions,a=t.parent,r=nr(t.padding),n=t.mode;return m().size([e.width,e.height]).tile(s(n)).round(!0).paddingInner(function(e){return e.value&&(e.children[0]&&e.children[0].children?a:t).interPadding||0}).paddingTop(function(e){return e.depth&&e.value?r.top:0}).paddingBottom(function(e){return e.depth&&e.value?r.bottom:0}).paddingLeft(function(e){return e.depth&&e.value?r.left:0}).paddingRight(function(e){return e.depth&&e.value?r.right:0})},ry.prototype.getValue=function(e){var t=this.chartObj,a=this.rp,r=Tf.getSeriesIndex(e),n=no.helpers.getParsedYAxisOrder(t.seriesdata[r||0].yaxiscolumnorder),i=t.dataset.getY(e,n)||0,o="absolute"===a.commonPlotOptions.negativeAs;return Tf.isDisabled(t,e)?0:i<0?o?Dt(i):0:i},ry.prototype.getChildren=function(e){var t=Tf.getLevel(e),a=t&&t.split("_").length;return!this.chartObj.dataObject.hasHierarchyData&&1==a&&e.length<2&&e[0]&&Ba(e[0][0])?e[0]:Ba(e[0])?e:$t},ry.prototype.processData=function(){var t=this,o=t.chartObj,l=t.commonRendererProp,r=t.dimension,e=t.rp,s=e.commonPlotOptions,c=e.color,n=s.colorScheme||"solid",u=0,d={},h=[],f=[],p=[],g=[],v=[],i=[],a=d3.hierarchy(t.chartObj.seriesdata,function(e){return t.getChildren(e)}).sum(function(e){return t.getValue(e)}),y=t.layout(a).descendants();t.chartObj.seriesdata.forEach(function(e,t){var a=c[t%c.length];i[t]=Dn(o,t,[r.width,r.height]),f[t]=0,p[t]=[],p[t].disabled=e.disabled,p[t].plotoptions=e.plotoptions,h[t]=Je().domain([0,yu(e)]).range([a,zn(a,"solid"===n?0:"shades"===n?-1:1,"brighter",_)])}),y.forEach(function(e,t){var a=Tf.getLevel(e),r=Tf.getSeriesIndex(e),n=Tf.getItemIndex(e);if(e.index=t,e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var i=Wn(s,o)?c[n%c.length]:h[r](f[r]);e.data.arcColor=i}v[a]=e}e.children?e.data.arcColor=Tf.getParentColor(l,e):(g[r]||(g[r]=[]),g[r].push(e),f[r]++),e.depth&&p[r].push(e),Tf.isDisabled(o,e)||(d[a]=u++)}),o.renderer[0].fillColorFunc=i[0],t.processedData=y,t.previousSiblingsCount=d,t.seriesWiseNodes=p,t.leafNodes=g,t.nodes=v,t.fillColor=i},ev.treemap=function(){var h,w,t=Tf.getLevel,S=Tf.getSeriesIndex,O=Tf.getItemIndex;function A(f,e,p,t){w=new ry(h);var a=h.params,g=a.chartObj,v=a.commonPlotOptions,r=a.notesArray,n=a.labelQueue,i=Pn.isQuantileColorScale(g),y=Wn(v,g),m=ir(v.borderRadius),b=v.parent,o=w.dimension,l=w.leafNodes,s=w.seriesWiseNodes,c=w.processedData,x=w.fillColor,C="highlight-canvas"===f.canvas.className;if(f.save(),f.translate(o.x,o.y),A.total=c[0].value,C){var k=+e.level;c=c.filter(function(e){return S(e)===k&&!(i&&e.children)}),i&&(c=ll.filterSelectionByColor(c,!0,t,g))}if(c.forEach(function(a,e){var r,t=S(a),n=O(a),i=Tf.getTileBound(g,a),o=i.x,l=i.y,s=i.width,c=i.height,u=(a.children?b.strokeColor:$t)||v.strokeColor;a.depth?C&&Aa(p)&&g.legendHighlight.getLegendHighlightEffect(k,"selectedSeries")!==Qt?r="black":u?r=u:a.children&&(r=a.data.arcColor):r=qt;function d(e,t){e.save(),e.translate(o+s/2,l+c/2),e.beginPath(),e.lineWidth=(a.children?b.strokeWidth:$t)||v.strokeWidth,e.strokeStyle=Mn(r,(a.children?b.strokeOpacity:$t)||v.strokeOpacity),e.fillStyle=t,rc.roundedRect(e,-s/2,-c/2,s,c,m),e.fill(),e.stroke(),e.closePath(),e.restore()}var h;g.imagePallete&&jn(g.dataset.getClr(a),g)&&a.depth?tn.canvas_patterns.imageFill({x:o,y:l,context:f,name:Hn(g,y?n:t,a,t)},d):(h=za(p)?p:a.children?Mn(a.data.arcColor,b.fillOpacity):x[t](t,a.data,$t,$t,v.fillOpacity,[s,c]),d(f,h))}),f.restore(),pt){function u(e,t){return t===Dl?A.total:A.getProcessedNode(e).parent.value}var d=[o.x,o.y];g.seriesdata.forEach(function(e,t){n.push({renderer:A,charttype:"hierarchy",chartObj:g,args:[s[t],t,$t,$t,u,l[t],d]}),n.push({renderer:A,charttype:"hierarchy",chartObj:g,args:[s[t],t,$t,$t,u,[s[t][0]],d,!0]})})}return As&&!C&&g.seriesdata.forEach(function(e,t){r=As.preprocessAnnotations(g.seriesdata,t,function(e,t,a){var r=A.getProcessedNode(e),n=Tf.getTileBound(g,r);return[n.x+o.x,n.y+o.y]},r,g,a)}),A.chartRendered=!0,setTimeout(function(){Tf.addEvents(w)},20),A}return A.commonRendererProp=function(e){return arguments.length?(h=e,A):h},A.getProcessedNode=function(e){return w.nodes[t(e)]},A},Gr.treemap=function(){return{outerPadding:5,strokeColor:"rgba(255,255,255,0.7)",animation:{type:"fadeOneByOne"},datalabels:{showAs:"y",vAlign:"bottom",hAlign:"left"},gradients:{options:{linear:{y2:100,x2:100,colorGamma:[.5,0]},radial:{radius:100}}},parent:{strokeOpacity:0,datalabels:{position:"inset",vAlign:"center",hAlign:"center",showAs:"y",show:!1},events:{}}}},Tf.addEvents=function(i){var o,f=i.chartObj,l=i.dimension,p=i.rp.commonPlotOptions,s=Tf.getSeriesIndex,a=Tf.getItemIndex,c=f.seriesdata,g=f.renderer[0],e=[f.plotarea.left+l.x,f.plotarea.top+l.y],v=c.map(function(e,t){return Dn(f,t,[l.width,l.height],$t,"svg")}),t=f.eventHandler.trackerElement.removeAllListeners();function r(){var e=iy(i);if(nt().stopPropagation(),e){var t=ny(e,$t,g);f.eventHandler.handlers.mousemove.call(f.eventHandler,t),mv(e,t);var a=oo(f.seriesdata[Tf.getSeriesIndex(e)].plotoptions,p,f,"cursor");Vh.call(f.eventHandler,$t,a)}else if(o){t=ny(o,$t,g);f.eventHandler.handlers.mouseout.call(f.eventHandler,t,o,s(o)),mv(o,t),Nh.call(f.eventHandler)}o=e}function n(){var e=o;if(e){var t=ny(e,$t,g);f.eventHandler.handlers.mouseout.call(f.eventHandler,t,s(e)),bv(e)}else h()}function u(){var e=iy(i);if(e){nt().stopPropagation();var t=ny(e,$t,g);f.eventHandler.handlers.click.call(f.eventHandler,t,e,s(e),a(e),g),mv(e,t),o=e}}function d(){var e=iy(i);if(e){var t=As?Tu(e,1<c.length?c[s(e)].seriesname:$t):e,a=Tf.getTileBound(f,e),r=[a.x+l.x,a.y+l.y];nt().stopPropagation();var n=ny(e,$t,g);n.coordinate=r,n.basedOn="plot",n.data=t,f.eventHandler.handlers.doubleclick.call(f.eventHandler,n,s(e),e),mv(e,n),o=e}}function h(e,t){f.staticPaneSVG.selectAll("g#zchierarchyhighlight").style("opacity",0)}f.positionEventTrackerElement(),g.defaultMouseOverFunc=function(a,e,t){a=a.data||a;var r=ir(p.borderRadius),n=Wn(p,f),i=f.staticPaneSVG.selectAll("g#zchierarchyhighlight"),o=i.selectAll(Rr),l=f.legendHighlight.getLegendHighlightEffect(e,"selectedSeries","plot"),s=f.legendHighlight.getLegendHighlightEffect(e,"unselectedSeries","plot"),c=Hn(f,n?t:e,a,e),u=bt.test(l)||xt.test(s)?c:qt,d=g.getProcessedNode(a),h=Tf.getTileBound(f,d);i.style("opacity",$t),o.attr("d",function(){var e=g.getProcessedNode(a),t=Tf.getTileBound(f,e);return"canvas"===f.plot.renderer.mode&&(r=hn(r,t.width,t.height,!0)),dn(t.x,t.y,t.width,t.height,r)}).style("fill",u===qt?qt:v[e](e,a,$t,$t,$t,[h.width,h.height])).styles(f.legendHighlight.getEffect(l,"treemap",u,{fill:u,stroke:c},n?t:e,"plot"))},g.defaultMouseOutFunc=h,sn(f.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+e+")"),Rr,[1]),Mo(t,{mousemove:r,mouseout:n,click:u,dblclick:d},{singletouchmove:r,touchend:n,tap:u,dbltap:d},{target:"plot",touchleave:!0,chartObj:f})},dt.treemap=function(){var A,P,T,_,E,L,M,z,D,I=!1,R=Tf.getLevel,j=Tf.getSeriesIndex;function H(O){return O.each(function(r){var n=A.params;_=n.chartObj,E=n.commonPlotOptions;var i=n.notesArray,e=_.systemConf,o=n.labelQueue;L=new ry(A),M=L.dimension,L.nodes,z=L.leafNodes,D=L.seriesWiseNodes;var t=E.strokeWidth,a=E.strokeOpacity,l=E.fillOpacity,s=L.fillColor,c=Rn(_,0),u=ir(E.borderRadius),d=[M.x,M.y],h=hs(E,$t,_,"treemap"),f=h.enabled,p=h.type,g=I?Ke:h.easingType,v=I?f?200:0:h.duration,y=_.dataObject.totalnoofdatas,m=I?v:p===Ii?v/y:v,b=I?0:p===Ii?function(e){return L.previousSiblingsCount[R(e)]*(v/y)}:p===Ri?function(){return Nt()*y*(v/y)}:0,x=p===Di||p===Ri||p===Ii?0:$t,C=E.events?E.events.cursor||Kt:e.chart.plot.events.cursor||Kt,k=E.parent,w=k.events.cursor;(P=sn(O,"g",[r],".","class","hierarchychart")).attr("transform","translate("+M.x+","+M.y+")").styles({"stroke-width":t,"stroke-opacity":a,"fill-opacity":l,cursor:C});var S=L.processedData;H.total=S[0].value,T=sn(P,Rr,S),H.total||T.remove(),T.styles({fill:function(e){if(e.children)return e.fillColor=e.data.arcColor;var t=Tf.getTileBound(_,e),a=j(e);return e.fillColor=s[a](a,e.data,$t,$t,$t,[t.width,t.height])},stroke:function(e){var t=(e.children?k.strokeColor:$t)||E.strokeColor;return e.depth?t||(e.children?e.data.arcColor:c(j(e),e.data)):qt},visibility:function(e){return e.value?$t:"hidden"}}).attr("class",function(e,t){if(za(R(e)))return"series_"+j(e)+(e.children?" zchierarchyparent":"")}).attr("id",function(e){return"tree_"+R(e)}),P.selectAll(Rr+".zchierarchyparent").styles({"stroke-width":k.strokeWidth,"stroke-opacity":k.strokeOpacity,"fill-opacity":k.fillOpacity,cursor:w}),I||T.attr("transform",function(e){var t=Tf.getTileBound(_,e),a=t.x+t.width/2,r=t.y+t.height/2;return p===Fi?(a=M.width/2,r=M.height/2):p===Gi?a=t.width/2:p===Vi&&(r=t.height/2),"translate("+a+","+r+")"}).attr("d",function(e){var t=Tf.getTileBound(_,e),a=-t.width/2,r=-t.height/2,n=t.width,i=t.height;return p===Gi?n=0:p===Vi&&(i=0),dn(a,r,n,i,u)}).style("opacity",x),T.transition().duration(m).delay(b).ease(g).attr("transform",function(e){var t=Tf.getTileBound(_,e);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=Tf.getTileBound(_,e);return dn(-t.width/2,-t.height/2,t.width,t.height,u)}).style("opacity",$t),H.renderedTimer=setTimeout(function(){if(pt){function a(e,t){return t===Dl?H.total:H.getProcessedNode(e).parent.value}r.forEach(function(e,t){o.push({renderer:H,charttype:"hierarchy",chartObj:_,args:[D[t],t,$t,$t,a,z[t],d]}),o.push({renderer:H,charttype:"hierarchy",chartObj:_,args:[D[t],t,$t,$t,a,[D[t][0]],d,!0]})})}As&&r.forEach(function(e,t){i=As.preprocessAnnotations(r,t,function(e,t,a){var r=H.getProcessedNode(e),n=Tf.getTileBound(_,r);return[n.x+M.x,n.y+M.y]},i,_,n)}),Tf.addEvents(L),H.chartRendered=I=!0},v+17+(b?4*y:0))}),H}return H.commonRendererProp=function(e){return arguments.length?(A=e,H):A},H.getProcessedNode=function(e){return L.nodes[R(e)]},H},Gr.waterfall=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},connector:{},comparisonLine:{},cascadeCategories:{dataindex:2},risingCategories:{},fallingCategories:{},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},dt.waterfallHelpers.drawConnectorLines=function(e,t,a,r){var n=a.chart,i=n.dataset,o=a.axisrotated,l=a.stacked,s=(a.xscale,a.yscale,a.yaxiscolumnorder),c=a.renderer,u=a.seriesindex,d=l?n.dataObject.waterfall.layout._keys:t,h=(n.systemConf.chart.axes.yaxis[s||0].reversed,n.systemConf.chart.axes.xaxis.reversed),f=a.plotoptions,p=a.commonPlotOptions,g=f&&f.connector?ga(p.connector,f.connector,!0):p.connector,v=g.enabled?function(e,t){for(var a=t.chart.dataset,r=t.yaxiscolumnorder,n=(t.stacked,no.helpers.isCatNull(a,"y",r)),i=ly,o=Object.keys(e),l=o.length-1,s=[],c=0;c<l;c++){var u=e[o[c]],d=e[o[c+1]],h=i(u,r),f=i(d,r),p=n(h),g=n(f);if(p)s.push([]);else if(g){for(var v=c+2,y=e[v],m=y&&i(y,r),b=!n(m);v<l&&!b;)y=e[++v],m=y&&i(y,r),b=!n(m);b&&s.push([u,y])}else s.push([u,d])}return s}(d,a):[],y=S().x(function(e,t){return oy(c.getParamValue("x",e,u,null,c.commonOption),c.getParamValue("width",e,u,null,c.commonOption),e,"x",h?1==t:0==t,o)}).y(function(e,t){return oy(c.getParamValue("y",e,u,null,c.commonOption),c.getParamValue("height",e,u,null,c.commonOption),e,"y",0==t,o)});sn(e,"path",v,".","class","zcconnectorLine",null,function(e){return i.getX(e)}).attr("d",function(e,t){return y(e)}).styles({fill:"none",stroke:g.strokeColor||"black","stroke-width":g.strokeWidth||1,"stroke-dasharray":on(g.dashStyle,g.strokeWidth||1),"stroke-opacity":0}).transition().duration(1e3).styles({"stroke-opacity":g.strokeOpacity||1})};dt.waterfallHelpers.drawConnectorLines;function sy(){return document.createElement("canvas")}function cy(e){return e.getContext("2d")}function uy(e){return e.nodeName===Ir}function dy(i,A){function s(e){if(Y[e])return Y[e];var t=e*te,a=t,r=[];for(0===e&&r.push([J[0],J[1],0]);a--;){var n=a/t*2*Yt;r.push([J[0]+e*jt(-n)*K,J[1]+e*Ht(-n)*$,n])}return Y[e]=r}function e(e){var t=sy();t.setAttribute("width",e.width),t.setAttribute("height",e.height),e.context=cy(t)}function h(e){var t=e.constructor===Object?e.canvasIndex:e;return T[t].context}function t(e,t){O[t]=h(t).getImageData(0,0,e.width,e.height).data}function y(e){return A.strokeWidth(e)+A.padding(e)}function a(e,t){return F(t)-F(e)}function p(e,t,a){e[0]=zt(e[0],t[0]),e[1]=zt(e[1],t[1]),e[2]=Mt(e[2],a[0]),e[3]=Mt(e[3],a[1])}function l(e,t,a,r){var n=e.node(),i=n.childElementCount?e.selectAll("*").filter(function(){return uy(this)&&!this.childElementCount}).nodes():[n],o=uu(a)%360,l=90<o?180-o:o;function s(e){var t=(uy(e)?Zr:Qr)(e);return uy(e)&&(d=S-Mt(0,t.left-x)-Mt(0,k-t.right),h=O-Mt(0,t.top-C)-Mt(0,w-t.bottom)),{width:t.width,height:t.height}}e.attr("dy","1em").attr("transform","rotate("+l+" 0 0)");var c,u,d,h,f,p="ellipsis"===M?"..":"",g=p.length,v=Qr(n),y=A.padding(t),m=(za(r)?r:E)-y,b=L-y,x=v.left,C=v.top,k=v.left+m,w=v.top+b,S=m,O=b;i.forEach(function(e){d=m,h=b,1<(f=s(e)).width-d&&(c=(f.width-d)/f.width,u=Lt((1-c)*e.textContent.length),e.textContent=e.textContent.substring(0,u-g)+p,f=s(e)),1<f.height-h&&(c=(f.height-h)/f.height,u=Lt((1-c)*e.textContent.length),e.textContent=e.textContent.substring(0,u-g)+p,f=s(e)),(1<f.width-d||1<f.height-h)&&gn(e,e,e.textContent,f.width,f.height,f,p),e.textContent===p&&(e.textContent="")})}function m(e,t,a){var r=W(e),n=r.value,i=r.type,o=X[t];fn(Z,[ae(e)]),Z[i](n),a&&Z.style("font-size",a+Zt),fy.isMultiLine(r)&&yf(Z,0),a||"none"===M||(R&&l(Z,e,0,R),l(Z,e,o)),Z.attr("text-anchor",nl).attr("dy",fy.getDy(r)+"em").attr("transform","rotate("+uu(o)+" 0 0)")}function r(e,t){var a=F(e),r=W(e),n=y(e),i=r.type,o=X[t],l=[];m(e,t);var s=ba(Z.node()),c=s.width+n,u=s.height+n,d=Lt((c*Dt(Ht(o))+u*Dt(jt(o)))/G),h=Lt((c*Dt(jt(o))+u*Dt(Ht(o)))/G),f=h*G,p=d*G;if(l.innerSVG=Z[i](),l.contentType=i,l.format=r.format,"html"===i){var g=bf(Z,a);Array.prototype.push.apply(l,g)}var v={gw:h,gh:d,width:c,height:u,size:a,rotation:o,nodeList:l,bb:s};return py<C+f&&(k+=w,w=C=0),py<k+p&&(T[++S]={width:1,height:1},C=k=w=0),v.canvasBound=[C,k,f,p],v.canvasIndex=S,C+=f,w=Mt(w,p),T[S].width=Mt(T[S].width,C),T[S].height=k+w,v}function n(e,t){var a=v[t];if(a){var r=h(a),n=a.canvasBound;r.save(),r.translate(n[0]+n[2]/2,n[1]+n[3]/2),r.rotate(a.rotation),A.boundBox?r.fillRect(-a.width/2,-a.height/2,a.width,a.height):function(r,e){var n=e.size,i=re(r),o=e.bb,l=e.nodeList,s=fy.getDy(l),c=0,u=0,d=h(e);d.strokeStyle="#000",d.lineWidth=y(r),d.lineJoin="bevel",d.fillStyle="#000","html"===l.contentType?(d.textAlign=Xo,l.forEach(function(e){var t,a=e.style;a.length&&(t=zd(fn($t,[ae(r)]),a),parseFloat(a["font-size"])),c=e.dx||0,u=(e.dy||0)*n+n*s-(fy.isMultiLine(l)?o.height/2:0),d.font=t||i,d.strokeText(e.text,c,u),d.fillText(e.text,c,u)})):(u=n*s,d.textAlign=Xo,d.font=i,d.strokeText(l.innerSVG,c,u),d.fillText(l.innerSVG,c,u))}(e,a),r.restore()}}function o(e,t){return Q<=e||q<=t||e<0||t<0}function c(e){var t=Et(e[0]-this.gw/2),a=Et(e[1]-this.gh/2);return!!function(r,n,e){return!e.some(function(e){var t=r+e[0],a=n+e[1];if(o(t,a)||!U[t][a])return!0})}(t,a,this.occupied)&&(function(r,e){e.occupied.forEach(function(e){var t=r[0]+e[0],a=r[1]+e[1];o(t,a)||(U[t][a]=!1)})}(P=[t,a],this),!0)}function u(e,t){var a=v[t];if(e.layout=$t,!a)return!1;var r=function(e){for(var t,a,r,n=e.gw,i=e.gh,o=e.canvasBound[0],l=e.canvasBound[1],s=e.canvasIndex,c=T[s].width,u=O[s],d=[],h=[n/2,i/2,n/2,i/2],f=n;f--;)for(t=i;t--;){r=G;e:for(;r--;)for(a=G;a--;)if(u[4*((t*G+r+l)*c+(f*G+a+o))+3]){d.push([f,t]),p(h,[f,t],[f,t]);break e}}return{occupied:d,bound:h}}(a);a.occupied=r.occupied;var n=a.bound=r.bound;if(n[2]-n[0]+1>Q||n[3]-n[1]+1>q)return!1;for(var i=ee+1;i--;){if(s(ee-i).some(c,a)){var o=P[0],l=P[1];return e.layout={x:(o+a.gw/2)*G,y:(l+a.gh/2)*G,width:a.width,height:a.height,rotation:a.rotation,size:a.size,nodeList:a.nodeList},p(_,[o*G,l*G],[(o+a.gw)*G,(l+a.gh)*G]),!0}}return!1}function d(){C=k=S=w=0,T=[{width:1,height:1}],O=[],_=[E/2,L/2,E/2,L/2],function(){var e,t=b?x:Ei.areaOfEllipse(E/2,L/2),f=0,p=0,g=0;(i.forEach(function(e,t){var a=F(e),r=y(e),n="html"===W(e).type?a:10,i=a/n,o=V(e);X.push(o),m(e,t,n);var l=ba(Z.node()),s=l.width+r,c=l.height+r,u=s*c,d=s*i*Dt(jt(o))+c*i*Dt(Ht(o)),h=s*i*Dt(Ht(o))+c*i*Dt(jt(o));g=Mt(g,h-L),p=Mt(p,d-E),f+=u*It(i,2)}),(p||g)&&f<t)?(e=Mt(p?p/E:0,g?g/L:0),e=1-zt(e,.2)):(e=Rt(t/f)*(A.boundBox?.5:1),e=Mt(e,.4));var a=I.range(),r=Mt(a[0],3),n=Mt(a[1]*e,r+2);I.range([r,n])}(),function(){for(var e,t,a,r=Q;r--;)for(U[r]=[],e=q;e--;)if(z){U[r][e]=!D,a=G;e:for(;a--;)for(t=G;t--;)if(!b[4*((e*G+a)*Q*G+(r*G+t))+3]){U[r][e]=D;break e}}else U[r][e]=!0}(),v=i.map(r),T.forEach(e),i.forEach(n),T.forEach(t),i.filter(u)}function f(){i.sort(a),d();var e=zt(_[0]-0,_[1]-0,E-_[2],L-_[3]);e=b?1:zt(E,L)/(zt(E,L)-e),A.onload({mask:ne,scaleFactor:e}),Z.remove(),b=$t}function g(){var e,t,a,r=le.getImageData(0,0,ie,oe),n=A.maskBackground,i=n&&"inherit"!==n&&Pe(n);b=r.data;for(var o=x=0;o<b.length;o+=4)b[o+3]&&(x++,e=b,t=o,(a=i)&&(e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]=Mt(1,Et(255*a.opacity))));i&&le.putImageData(r,0,0),f()}var v,b,x,C,k,w,S,O,P,T,_,E=A.width,L=A.height,M=A.textOverflow,z=(A.textOverlap,A.mask),D=A.invert||!1,I=A.fontScale,R=za(A.maxWidth)?mr(A.maxWidth,E):$t,j=A.fontFamily,H=A.fontStyle,B=A.fontWeight,F=A.fontSize,W=A.content,V=A.rotation,N=A.chartObj,Y=[],G=zt(8,Mt(4,_t(16*zt(E,L)/1024))),U=[],X=[],Z=sn(N.getPatternSvg(),Dr,[1],".","class","dummyText"),Q=Lt(E/G),q=Lt(L/G),K=zt(1,Q/q),$=zt(1,q/Q),J=(J=A.origin)?[J[0]/G,J[1]/G]:[Q/2,q/2],ee=Et(Rt(Q*Q+q*q)),te=i.length<100?8:1,ae=function(e){return{fontStyle:H(e),fontWeight:B(e),fontSize:F(e),fontFamily:j(e)}},re=function(e){return H(e)+" normal "+B(e)+" "+F(e).toString(10)+Zt+" "+j(e)};if(z){var ne=sy(),ie=Q*G,oe=q*G;ne.width=ie,ne.height=oe;var le=cy(ne);if("function"==typeof z){var se=zt(ie,oe),ce="rect"===z.name?[ie,oe]:[se,se],ue=z.apply($t,ce);le.translate(ie/2,oe/2),le.scale(ie/ce[0],oe/ce[1]),rc.drawPath(le,ue),le.fillStyle="#000",le.fill(),g()}else{var de=new Image;de.crossOrigin="Anonymous",de.onload=function(){le.drawImage(de,0,0,ie,oe),g()},de.src=z}}else f()}function hy(e){function i(e){var t=no.helpers.getParsedYAxisOrder(l.seriesdata[O(e)].yaxiscolumnorder);return l.dataset.getY(e,t)}function t(){function i(e,t){return t===Dl?d:a[1]}l.seriesdata.forEach(function(e,t){var a=Hs(s,e.plotoptions,l,t),r=Bs($t,a,l);g.push(r["font-family"]),v.push(r["font-style"]),y.push(r["font-weight"]),f.push(a),p.push(wf(l,o,a,wl,i,t)),b=b||Ms(a,l);var n=e.plotoptions&&e.plotoptions.rotation;za(n)&&(k[t]=Ba(n)?n:[n],w[t]=0)})}var o,l,s,c,u,d,a,h,f,p,g,v,y,m,b,x,C,k,w,r,n,S,O=fy.getSeriesIndex;return o=e.params,l=o.chartObj,s=o.commonPlotOptions,u=$u.getAvailableBound(l,s),d=0,c=[],f=[],p=[],g=[],v=[],y=[],m=[],k=[],w=[],x=Ba(x=s.rotation||[0])?x:[x],C=0,l.showLoading(l.container),l.seriesdata.forEach(function(e,n){e.disabled||e.data.forEach(function(e,r){e.forEach(function(e,t){e.seriesIndex=n,e.subSeriesIndex=r,e.itemIndex=t,e.layout=$t,e.level=n+"_"+r+"_"+t;var a=i(e);za(a)&&(d+=a,m.push(a),c.push(e))})})}),a=oe(z([[0],oe(m)])),t(),r=zt(u.width,u.height),n=mr(s.minSize,r,mr("2%",r)),S=mr(s.maxSize,r,mr("20%",r)),h=Je().domain(a).range([n,S]),{rp:o,processedData:c,dimension:u,sum:d,fontScale:h,datalabelOptions:f,fontFamily:g,fontStyle:v,fontWeight:y,drawLayout:function(t){var a=this,e=s.mask,r=s.datalabels,n={width:u.width,height:u.height,rotation:function(e){var t,a=O(e);return t=k[a]?k[a][w[a]++%k[a].length]:x[C++%x.length],Ei.degreeToRadian(t)},fontSize:function(e){var t=i(e);return t?h(t):0},fontFamily:function(e){return g[O(e)]},fontStyle:function(e){return v[O(e)]||"normal"},fontWeight:function(e){return y[O(e)]||"normal"},content:function(e){i(e);var t=p[O(e)];return{type:t.contentType,value:t(e),format:t}},padding:function(e){var t=f[O(e)],a=Ea(s.padding,2),r=0;return Ms(t,l)&&(r=2*zs(t,l)+Ds(t,l)),a+r},strokeWidth:function(e){var t=l.seriesdata[O(e)].plotoptions;return Ea(t&&za(t.strokeWidth)?t.strokeWidth:s.strokeWidth,1)},onload:function(e){l.hideLoading(l.container),a.output=e,t()},origin:$t,mask:function(){var e,t=s.mask,a=!Xr.IE&&!Xr.PHANTOMJS&&t.htmlEl,r=t.imageUrl,n=t.symbol;return a?e="data:image/svg+xml;"+(Xr.IE?"base64":"utf8")+","+(Xr.IE?ia(unescape(encodeURIComponent(a))):a):r?e=r:n&&((e=Ji(n)).name=n),e}(),maskBackground:e.background.color,invert:e.invert,textOverflow:r.textOverflow||"ellipsis",textOverlap:r.textOverlap||"adjust",maxWidth:r.maxWidth,fontScale:h,chartObj:l,boundBox:b};dy(c,n)},hasBoundBox:b}}var fy={getSeriesIndex:function(e){return e.seriesIndex},getItemIndex:function(e){return e.itemIndex},getDy:function(e){return fy.isMultiLine(e)?.9:.4},isMultiLine:function(e){return(e.nodeList?e.nodeList.format:e.format).multiLine},getBoundBoxSize:function(e,t,a,r){var n=Ls(t,r),i=(Ea(a.padding,2)+Ds(t,r))/2;return{x:e.x-e.width/2+i,y:e.y-e.height/2+i+(fy.isMultiLine(e)?e.size*fy.getDy(e)-e.height/2:0),width:e.width-2*i,height:e.height-2*i,r:r.dataObject.getTransRectValue("radius",$t,$t,$t,$t,n.radius)}},getContainerTransformation:function(e,t){var a=e.output.scaleFactor;return{translate:[t.x-t.width*(a-1)/2,t.y-t.height*(a-1)/2],scale:a}},hasBoundBox:function(e){var t=Oa(e,"layout.nodeList.innerSVG",!0);return e.layout.size&&!(Aa(t)||""===t)}},py=Xr.CHROME||Xr.FIREFOX?32e3:Xr.IE&&Xr.isTouchDevice?4e3:8e3;ev.wordcloud=function(){var z,D=fy.getSeriesIndex,I=fy.getItemIndex,R=Id;function f(b,e,x,t){var C,k,w,a,r=z.params,S=r.chartObj,O=r.commonPlotOptions,o=r.notesArray,n=S.renderer[0],l="legendFilter-colorScale"!==S.phase&&!x,A=l?new hy(z):n.layout,s=A.dimension,i=s.width,c=s.height,u=A.processedData,P=f.fillColorFunc=Dn(S,0,{x1:0,x2:i,y1:0,y2:c,r:zt(i,c)}),T=P.gradientOptions,_=Rn(S,0),d=Pn.isQuantileColorScale(S),E=Wn(O,S),L=[],M=[];function h(){var n=fy.getContainerTransformation(A,s);if(b.save(),b.translate(n.translate[0],n.translate[1]),b.scale(n.scale,n.scale),function(e,t,a,r){var n=t.mask.background,i=a.output.mask;r&&i&&n.color&&(e.globalAlpha=Ea(n.opacity,1),e.drawImage(i,0,0),e.globalAlpha=1)}(b,O,A,l),za(a)&&(u=u.filter(function(e){return D(e)===a}),d&&(u=ll.filterSelectionByColor(u,!0,t,S))),u.forEach(function(l,e){var s=l.layout;if(s){s.text;var c,u,d=s.x,h=s.y,f=fy.getDy(s),p=D(l),g=I(l),t=A.datalabelOptions[p],a=S.seriesdata[p].plotoptions||{};L[p]=L[p]||rc.getFontStyles(S,t),M[p]=M[p]||R.parseTextShadow(t.textShadow);function r(i,o){if(L[p]["font-size"]=s.size+Zt,i.save(),s.rotation&&(i.translate(d,h),i.rotate(s.rotation),i.translate(-d,-h)),!x&&fy.hasBoundBox(l)&&function(e,t,a,r){var n=r.params,i=n.chartObj,o=n.commonPlotOptions,l=t.layout,s=fy.getSeriesIndex(t),c=a.datalabelOptions[s],u=Ls(c,i),d=za(u.strokeWidth)?+u.strokeWidth:1,h=on(u.dashStyle,d),f=ln(u.lineCap,u.dashStyle),p=fy.getBoundBoxSize(l,c,o,i);Ms(c,i)&&(e.beginPath(),e.lineWidth=d,Ba(h)&&h.length&&za(e.setLineDash)&&(e.setLineDash(h),e.lineCap=f),e.strokeStyle=Mn(u.strokeColor||qt,u.strokeOpacity),e.fillStyle=Mn(u.fillColor||"#000",u.fillOpacity),rc.roundedRect(e,p.x,p.y,p.width,p.height,p.r),e.stroke(),e.fill(),e.closePath())}(i,l,A,z),R.addTextShadow(i,M[p]),i.font=zd(L[p]),i.textAlign=Xo,"html"===s.nodeList.contentType)s.nodeList.forEach(function(e){var t,a,r=e.style,n=e.text;r.length&&(t=zd(L[p],r),parseFloat(r["font-size"]),a=r.fill),c=d+(e.dx||0),u=h+(e.dy||0)*s.size+s.size*f-(fy.isMultiLine(s)?s.height/2:0),i.font=t||zd(L[p]),i.strokeStyle=_(E?g:p,l,y,$t,O.strokeOpacity),i.lineWidth=v,i.strokeText(n,c,u),i.fillStyle=a||o,i.fillText(n,c,u)});else{var e=s.nodeList.innerSVG;c=d,u=h+s.size*f,i.strokeStyle=_(E?g:p,l,y,$t,n),i.lineWidth=v,i.lineJoin="round",i.strokeText(e,c,u),i.fillStyle=o,i.fillText(e,c,u)}i.restore()}var v=qa(C,a.strokeWidth,O.strokeWidth,1),y=qa(k,a.strokeColor!==ct?a.strokeColor:O.strokeColor),n=qa(a.strokeOpacity,O.strokeOpacity),i=qa(a.fillOpacity,O.fillOpacity),o=$t;if("linear"===T.type&&"userSpaceOnUse"!==T.options[T.type].gradientUnits&&(o={x1:d-s.width/2,x2:d+s.width/2,y1:h-s.height/2,y2:h+s.height/2}),S.imagePallete&&jn(S.dataset.getClr(l),S))tn.canvas_patterns.imageFill({x:d,y:h,context:b,name:Hn(S,E?g:p,l,p)},r);else{var m=w||P(E?g:p,l,$t,$t,i,o);r(b,m)}}}),b.restore(),As&&!x){var i=A.output.scaleFactor;S.seriesdata.forEach(function(e,t){o=As.preprocessAnnotations(S.seriesdata,t,function(e,t,a){var r=e.layout;return[n.translate[0]+(r.x-r.width/2)*i,n.translate[1]+(r.y-r.height*fy.getDy(r))*i]},o,S,r)})}f.chartRendered=!0,setTimeout(function(){fy.addEvents(A)},20)}return x&&(a=Oa(e,"data[0][0].seriesIndex",!0),C=x["stroke-width"],k=x.stroke,w=x.fill),f.total=A.sum,f.extentY=A.fontScale.domain(),l?(A.drawLayout(h),n.layout=A):h(),f}return f.commonRendererProp=function(e){return arguments.length?(z=e,f):z},f},Gr.wordcloud=function(){return{strokeColor:"transparent",animation:{type:"fadeOneByOne"},datalabels:{showAs:"x"},gradients:{options:{linear:{x2:100,y2:100,colorGamma:[0,1.5]},radial:{x:50,y:50,radius:100,colorGamma:[1,0]}}},mask:{background:{}}}};var gy=fy.getSeriesIndex,vy=fy.getItemIndex;function yy(e,t,a){var r=lo(nt()),n=gy(e),i=e.subSeriesIndex,o=vy(e);return{renderer:a,seriesIndex:n,subSeriesIndex:i,itemIndex:o,coordinates:[r.pageX,r.pageY],element:this,data:e,selected:e.selected,_key:"ZC_"+n+"_"+i+"_"+o}}function my(e){var t,a=e.rp.chartObj,r=e.dimension,n=e.processedData,i=fy.getContainerTransformation(e,r),o=e.output.scaleFactor,l=Eo(a),s=n.length,c=null;if(l.x-=i.translate[0],l.y-=i.translate[1],a.chartRendered){for(;s--;){var u=n[s],d=u.layout,h=jn(a.dataset.getClr(u),a),f=0==Ea(oo(a.seriesdata[gy(u)].plotoptions,e.rp.commonPlotOptions,a,"enabled"),!0);if(d&&!f&&h){var p=d.x*o,g=d.y*o,v=d.width*o,y=d.height*o,m={x:p-v/2,y:g-y/2,width:v,height:y},b=Ei.rotatePoint(l,d.rotation,{x:p,y:g}),x=Dt(b.y-d.y);Ei.pointInRectangle(b,m)&&(null===c||x<c)&&(t=u,c=x)}}return t}}fy.addEvents=function(f){var i,p=f.rp.chartObj,g=f.rp.commonPlotOptions,o=f.dimension,l=p.seriesdata,s=p.renderer[0],e=p.plotarea,r=p.eventHandler,t=fy.getContainerTransformation(f,o),a=o.width,n=o.height,v=Dn(p,0,{x1:0,x2:a,y1:0,y2:n,r:zt(a,n)},$t,"svg"),y=Rn(p,0),c=r.trackerElement.removeAllListeners();p.positionEventTrackerElement();var m=p.staticPaneSVG.selectAll("g.zcplothighlight").attr("transform","translate("+(e.left+t.translate[0])+","+(e.top+t.translate[1])+") scale("+t.scale+")");sn(m,Dr,[1]);function u(){m.style("opacity",0)}function d(){var e=my(f);if(nt().stopPropagation(),e){var t=yy(e,$t,s);r.handlers.mousemove.call(p.eventHandler,t),mv(e,t);var a=oo(l[gy(e)].plotoptions,g,p,"cursor");Vh.call(p.eventHandler,$t,a)}else if(i){t=yy(i,$t,s);p.eventHandler.handlers.mouseout.call(p.eventHandler,t,{data:i},gy(i)),mv(i,t),Nh.call(p.eventHandler)}i=e}function h(){var e=i;if(e){var t=yy(e,$t,s);t.point=e,p.eventHandler.handlers.mouseout.call(p.eventHandler,t,{data:e},gy(e)),bv(e)}else u()}function b(){nt().stopPropagation();var e=my(f);if(e){var t=yy(e,$t,s);p.eventHandler.handlers.click.call(p.eventHandler,t,{data:e},gy(e),vy(e),s),mv(e,t),i=e}}function x(){nt().stopPropagation();var e=my(f);if(e){var t=As?Tu(e,1<l.length?l[gy(e)].seriesname:$t):e,a=e.layout,r=[a.x-.5*a.width+o.x,a.y-a.height*fy.getDy(a)+o.y],n=yy(e,$t,s);n.coordinate=r,n.basedOn="plot",n.data=t,n.point=e,p.eventHandler.handlers.doubleclick.call(p.eventHandler,n,gy(e),e),mv(e,n),i=e}}s.defaultMouseOverFunc=function(e,t,a){var r=Wn(g,p),n=m.selectAll(Dr),i=p.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),o=p.legendHighlight.getLegendHighlightEffect(t,"unselectedSeries","plot"),l=Hn(p,r?a:t,e,t),s=bt.test(i)||xt.test(o)?l:qt,c=e.layout,u=fy.isMultiLine(c),d=p.seriesdata[t].plotoptions,h=d&&d.strokeColor;m.style("opacity",$t),Bs(n,f.datalabelOptions[gy(e)],p),n[c.nodeList.contentType](c.nodeList.innerSVG),n.attrs({x:c.x,y:c.y-(u?c.height/2:0),transform:"rotate("+uu(c.rotation)+" "+c.x+" "+c.y+")","text-anchor":nl,dy:fy.getDy(c)+"em"}).styles({"font-size":c.size+Zt,"paint-order":"stroke","stroke-linejoin":"round",fill:v(r?a:t,e),stroke:y(r?a:t,e,h!==ct?h:g.strokeColor)}).styles(p.legendHighlight.getEffect(i,Ti,s,{fill:s,stroke:l},r?a:t,"plot")),u&&yf(n,c.x)},s.defaultMouseOutFunc=u,Mo(c,{mousemove:d,mouseout:h,click:b,dblclick:x},{singletouchmove:d,touchend:h,tap:b,dbltap:x},{target:"plot",touchleave:!0,chartObj:p})};function by(){function t(){var e=i.params,t=e.chartObj,a=e.commonPlotOptions,r=(t.systemConf,e.dataset,e.datasetIndex||0),n=t.seriesdata[r];t.plot.renderer.mode,ga(qa(n.plotoptions,{}),a),console.log(n)}var i=void 0;return t.commonRendererProp=function(e){return e?(i=e,t):i},t}dt.wordcloud=function(){var S,O,A=!1,P=fy.getSeriesIndex,T=fy.getItemIndex,_=function(e){return qe(this).style("opacity",e.layout?$t:0),e.layout};function E(e){return e.each(function(i){var o,l=S.params,s=l.chartObj,c=l.commonPlotOptions,u=l.notesArray,e="legendFilter-colorScale"!==s.phase,t=hs(c,$t,s,Ti),a=t.enabled,d=t.type,h=A?Ke:t.easingType,f=A?a?200:0:t.duration,r=s.dataObject.totalnoofdatas,p=A?f:d===Ii||d===Ri?f/r:f,g=A?0:d===Ii?function(e,t){return t*(f/r)}:d===Ri?function(){return Nt()*r*(f/r)}:0,v=d===Di||d===Ri||d===Ii?0:$t,y=sn(qe(this),"g",[i],".","class","wordcloudgroup"),m=(O=e?new hy(S):O).dimension,b=m.width,x=m.height,C=E.fillColorFunc=Dn(s,0,{x1:0,x2:b,y1:0,y2:x,r:zt(b,x)}),k=Rn(s,0),w=Wn(c,s);function n(){!function(e,t,a){var r=t.mask.background,n=a.output.mask,i=a.dimension,o=xn("image",".mask-background",n&&r.color?[1]:[],e,":first-child");n&&o.attrs({width:i.width,height:i.height,"xlink:href":n.toDataURL()}).style("opacity",r.opacity)}(y,c,O),o=O.output.scaleFactor;var n=fy.getContainerTransformation(O,m);y.attrs({transform:"translate("+n.translate+") scale("+n.scale+")","text-anchor":nl});var e=sn(y,"g",[1],".","class","boundBoxes"),t=sn(y,"g",[1],".","class","words"),a=sn(e,Rr,O.hasBoundBox?O.processedData:[]);(a=a.filter(_)).each(function(e){fy.hasBoundBox(e)&&function(e,t,a,r){var n=r.params,i=n.chartObj,o=n.commonPlotOptions,l=t.layout,s=fy.getSeriesIndex(t),c=a.datalabelOptions[s],u=Ls(c,i),d=za(u.strokeWidth)?+u.strokeWidth:1,h=on(u.dashStyle,d),f=ln(u.lineCap,u.dashStyle),p=fy.getBoundBoxSize(l,c,o,i);e.attrs({transform:"rotate("+uu(l.rotation)+" "+l.x+" "+l.y+")",d:xc(p.x,p.y,p.width,p.height,p.r,0,$t,{})}).styles({visibility:Ms(c,i)?$t:"hidden",fill:u.fillColor,"fill-opacity":u.fillOpacity,stroke:u.strokeColor,"stroke-opacity":u.strokeOpacity,"stroke-width":d,"stroke-dasharray":h,"stroke-linecap":f})}(qe(this),e,O,S)});var r=sn(t,Dr,O.processedData);r=r.filter(_),L(y,c),r.each(function(e){var t=qe(this),a=P(e),r=T(e),n=e.layout,i=fy.isMultiLine(n),o=s.seriesdata[a].plotoptions,l=o&&o.strokeColor;Bs(t,O.datalabelOptions[a],s),t[n.nodeList.contentType](n.nodeList.innerSVG),t.styles({"font-size":n.size+Zt,fill:C(w?r:a,e),stroke:k(w?r:a,e,l!==ct?l:c.strokeColor),filter:$t,"stroke-linejoin":"round"}).attrs({x:n.x,y:n.y-(i?n.height/2:0),dy:fy.getDy(n)+"em",transform:"rotate("+uu(n.rotation)+" "+n.x+" "+n.y+")",id:"word_"+a+"_"+e.subSeriesIndex+"_"+r,class:"series_"+a}),i&&yf(t,n.x),o&&L(t,o)}),A||r.style("opacity",v).each(function(e){var t,a,r=e.layout;if(d===Hi)t=m.width/2,a=m.height/2;else if(d===Fi){var n=b/o,i=x/o;t=Nt()*(n-r.width)-m.x+r.width/2+(b-n)/2,a=Nt()*(i-r.height)-m.y+r.height/2+(x-i)/2}else t=r.x,a=r.y;qe(this).attrs({x:t,y:a-(fy.isMultiLine(r)?r.height/2:0),transform:"rotate("+uu(r.rotation)+" "+t+" "+a+")"})}),r.transition().duration(p).delay(g).ease(h).style("opacity",$t).attrs({x:function(e){return e.layout.x},y:function(e){var t=e.layout;return t.y-(fy.isMultiLine(t)?t.height/2:0)},transform:function(e){var t=e.layout;return"rotate("+uu(t.rotation)+" "+t.x+" "+t.y+")"}}),E.renderedTimer=setTimeout(function(){fy.addEvents(O),As&&i.forEach(function(e,t){u=As.preprocessAnnotations(i,t,function(e,t,a){var r=e.layout;return[n.translate[0]+(r.x-r.width/2)*o,n.translate[1]+(r.y-r.height*fy.getDy(r))*o]},u,s,l)}),A=E.chartRendered=!0},f+1e3/60)}E.total=O.sum,E.extentY=O.fontScale.domain(),e?O.drawLayout(n):n()}),E}function L(e,t){e.styles({"paint-order":"stroke","fill-opacity":t.fillOpacity,"stroke-width":t.strokeWidth,"stroke-opacity":t.strokeOpacity})}return E.commonRendererProp=function(e){return arguments.length?(S=e,E):S},E},Gr.sankey=function(){return{node:{},link:{},animation:{}}},dt.sankey=by,ev.sankey=by,e.version="2.6",e.versionName="Ortelius",e.d3Version="4.12.0",e.chartcategory=lt,e.charttypenames=ot,e.charttype=Ne,e.setTheme=function(e,t){window.$ZC[e]=t,ut[e]=t},e.getTheme=function(e){return ut[e]||$ZC[e]},e.rename=function(e){if(null==e||""==e||"string"!=typeof e)return!1;var t=wt();return t[e]=$ZC,t.$ZC=null,delete t.$ZC,!0},e.tempCanvasContext=kt,e.scale=it,e.requireXDataSorting=function(e){if(!arguments.length)return At;At=e},e.imageFilePath=function(e){if(!arguments.length)return St;St=e},e.dataEncoded=function(e){if(!arguments.length)return Pt;Pt=e},e.getComponent=ra,e.setGlobalPatternSVG=function(e){Wr.patternSVG=e},e.utils=pa,e.appendElement=sn,e.getRawColor=Hn,e.CHART_DOMAIN_HELPERS=Un,e.charts=Xn,e.maps=Zn,e.annotation=As,e.BrushD3=mc,e.setCustomBrushHandle=function(e,t){oc.set(e,t)},e.effects=tn,e.addPattern=Kr,e.getPattern=Jr,e.PlotHighlighter=Rh,e.setPlotDefaultBehaviour=function(e){Qh._defaultPlotBehaviour=e},e.getPlotDefaultBehaviour=qh,e.getFormattedValue=Hl,e.generateFormatSpecifier=Fl,e.setLegendColorPallete=function(e,t){gl.colorpallete.set(e,t)},e.getLegendColorPallete=function(e){return gl.colorpallete.get(e)},e.setLegendPatternPallete=function(e,t){gl.patternPallete.set(e,t)},e.getLegendPatternPallete=function(e){return gl.patternPallete.get(e)},e.setLegendImagePallete=function(e,t){gl.imagePallete.set(e,t)},e.getLegendImagePallete=function(e){return gl.imagePallete.get(e)},e.legendHighlight=ms,e.getTooltipPosition=ko,e.mapCollections=Uv,Object.defineProperty(e,"__esModule",{value:!0})});